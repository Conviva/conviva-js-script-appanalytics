/*!
 * Web analytics for Conviva v1.5.1 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

"use strict";!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){function a(e){t(l,i,o,a,s,"next",e)}function s(e){t(l,i,o,a,s,"throw",e)}var l=e.apply(n,r);a(void 0)}))}}function r(e,t,n){if(t=d(t),!(t=h()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))||"object"!=typeof t&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}else e=t;return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){if(h())return Reflect.construct.apply(null,arguments);var r=[null];return r.push.apply(r,t),r=new(e.bind.apply(e,r)),n&&y(r,n.prototype),r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=S(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function c(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r;for(r=e;!{}.hasOwnProperty.call(r,t)&&null!==(r=d(r)););if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(3>arguments.length?e:n):r.value},u.apply(null,arguments)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(null==e)return{};var n;if(null==e)var r={};else{var i={};for(n in e)({}).hasOwnProperty.call(e,n)&&!t.includes(n)&&(i[n]=e[n]);r=i}if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.includes(i)||{}.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function m(){function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){return t=Object.create((t&&t.prototype instanceof r?t:r).prototype),i=new f(i||[]),w(t,"_invoke",{value:l(e,n,i)}),t}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(n){e(t,n,(function(e){return this._invoke(n,e)}))}))}function s(e,t){function r(i,o,a,s){if("throw"!==(i=n(e[i],e,o)).type){var l=i.arg;return(i=l.value)&&"object"==typeof i&&y.call(i,"__await")?t.resolve(i.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(i).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(i.arg)}var i;w(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}})}function l(e,t,r){var i=S;return function(o,a){if(i===A)throw Error("Generator is already running");if(i===I){if("throw"===o)throw a;return{value:p,done:!0}}for(r.method=o,r.arg=a;;){if((o=r.delegate)&&(o=c(o,r))){if(o===T)continue;return o}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===S)throw i=I,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);if(i=A,"normal"===(o=n(e,t,r)).type){if(i=r.done?I:E,o.arg===T)continue;return{value:o.arg,done:r.done}}"throw"===o.type&&(i=I,r.method="throw",r.arg=o.arg)}}}function c(e,t){var r=t.method,i=e.iterator[r];return i===p?(t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=p,c(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),T):"throw"===(r=n(i,e.iterator,t.arg)).type?(t.method="throw",t.arg=r.arg,t.delegate=null,T):(r=r.arg)?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=p),t.delegate=null,T):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,T)}function u(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(u,this),this.reset(!0)}function h(e){if(e||""===e){var t=e[k];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1;return(t=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=p,t.done=!0,t}).next=t}}throw new TypeError(typeof e+" is not iterable")}m=function(){return v};var p,v={},g=Object.prototype,y=g.hasOwnProperty,w=Object.defineProperty||function(e,t,n){e[t]=n.value},b="function"==typeof Symbol?Symbol:{},k=b.iterator||"@@iterator",_=b.asyncIterator||"@@asyncIterator",C=b.toStringTag||"@@toStringTag";try{e({},"")}catch(t){e=function(e,t,n){return e[t]=n}}v.wrap=t;var S="suspendedStart",E="suspendedYield",A="executing",I="completed",T={};e(b={},k,(function(){return this}));var x=Object.getPrototypeOf;(x=x&&x(x(h([]))))&&x!==g&&y.call(x,k)&&(b=x);var R=o.prototype=r.prototype=Object.create(b);return i.prototype=o,w(R,"constructor",{value:o,configurable:!0}),w(o,"constructor",{value:i,configurable:!0}),i.displayName=e(o,C,"GeneratorFunction"),v.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,C,"GeneratorFunction")),t.prototype=Object.create(R),t},v.awrap=function(e){return{__await:e}},a(s.prototype),e(s.prototype,_,(function(){return this})),v.AsyncIterator=s,v.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new s(t(e,n,r,i),o);return v.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(R),e(R,C,"Generator"),e(R,k,(function(){return this})),e(R,"toString",(function(){return"[object Generator]"})),v.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},v.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=p)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=p),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}return i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null),(n=i?i.completion:{}).type=e,n.arg=t,i?(this.method="next",this.next=i.finallyLoc,T):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),T},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),T}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){if("throw"===(e=n.completion).type){var r=e.arg;d(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=p),T}},v}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){var n=Array.isArray(e)?e:void 0;if(!n)e:{var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r){n=void 0;break e}l=!1}else for(;!(l=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0;var u=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a)){n=void 0;break e}}finally{if(c)throw u}}n=s}else n=void 0}if(!(e=n||S(e,t)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function b(e,t,n,r){var i=u(d(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function k(t){var n=Array.isArray(t)?e(t):void 0;if(n||(n="undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"]?Array.from(t):void 0),!(t=n||S(t)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return t}function _(e){e:if("object"==typeof e&&e){var t=e[Symbol.toPrimitive];if(void 0!==t){if("object"!=typeof(e=t.call(e,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}e=String(e)}return"symbol"==typeof e?e:e+""}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function E(e){var t="function"==typeof Map?new Map:void 0;return E=function(e){function n(){return o(e,arguments,d(this).constructor)}if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},E(e)}function A(e,t){var n,r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function I(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function T(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=0<o.length&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3]))s.label=n[1];else if(6===n[0]&&s.label<o[1])s.label=o[1],o=n;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(n)}}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function x(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function R(){var e,t={},n=[],r=[],i=[],o=function(e,n){null!=n&&""!==n&&(t[e]=n)};return{add:o,addDict:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o(t,e[t])},addJson:function(e,t,i){i&&M(i)&&(e={keyIfEncoded:e,keyIfNotEncoded:t,json:i},r.push(e),n.push(e))},addContextEntity:function(e){i.push(e)},getPayload:function(){return t},getJson:function(){return n},withJsonProcessor:function(t){e=t},build:function(){return null==e||e(this,r,i),t}}}function O(e){return function(t,n,r){for(var i=function(n,r,i){if(n=JSON.stringify(n),e){if(i=t.add,n){var o=0,a=0,s=[];if(n){n=unescape(encodeURIComponent(n));do{var l=n.charCodeAt(o++),c=n.charCodeAt(o++),u=n.charCodeAt(o++),d=l<<16|c<<8|u;l=d>>18&63,c=d>>12&63,u=d>>6&63,d&=63,s[a++]=qr.charAt(l)+qr.charAt(c)+qr.charAt(u)+qr.charAt(d)}while(o<n.length);o=s.join(""),n=((n=n.length%3)?o.slice(0,n-3):o)+"===".slice(n||3)}n=n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}i.call(t,r,n)}else t.add(i,n)},o=function(n,r){if(!n){var i=t.getPayload();if(e?i.cx:i.co){var o=(n=JSON).parse;if(e){if(i=i.cx){switch(4-i.length%4){case 2:i+="==";break;case 3:i+="="}i=function(e){var t,n=0,r=0,i="",o=[];if(!e)return e;e+="";do{var a=qr.indexOf(e.charAt(n++)),s=qr.indexOf(e.charAt(n++));i=qr.indexOf(e.charAt(n++));var l=qr.indexOf(e.charAt(n++)),c=a<<18|s<<12|i<<6|l;a=c>>16&255,s=c>>8&255,c&=255,o[r++]=64===i?String.fromCharCode(a):64===l?String.fromCharCode(a,s):String.fromCharCode(a,s,c)}while(n<e.length);return i=o.join(""),t=i.replace(/\0+$/,""),decodeURIComponent(t.split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(i=i.replace(/-/g,"+").replace(/_/g,"/"))}}else i=i.co;n=o.call(n,i)}else n=void 0}return n?n.dt=n.dt.concat(r.dt):n=r,n},a=void 0,s=0;s<n.length;s++){var l=n[s];"cx"===l.keyIfEncoded?a=o(a,l.json):i(l.json,l.keyIfEncoded,l.keyIfNotEncoded)}n.length=0,r.length&&(a=o(a,n={sc:"sp/ctx/1-0-0",dt:x([],r,!0)}),r.length=0),a&&i(a,"cx","co")}}function M(e){if(!N(e))return!1;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function N(e){return null!=e&&(e.constructor==={}.constructor||e.constructor===[].constructor)}function L(){var e=[],t=[];return{getGlobalPrimitives:function(){return e},getConditionalProviders:function(){return t},addGlobalContexts:function(n){for(var r=[],i=[],o=0;o<n.length;o++){var a=n[o];q(a)?r.push(a):H(a)&&i.push(a)}e=e.concat(i),t=t.concat(r)},clearGlobalContexts:function(){t=[],e=[]},removeGlobalContexts:function(n){for(var r=function(n){q(n)?t=t.filter((function(e){return JSON.stringify(e)!==JSON.stringify(n)})):H(n)&&(e=e.filter((function(e){return JSON.stringify(e)!==JSON.stringify(n)})))},i=0;i<n.length;i++)r(n[i])},getApplicableContexts:function(n){e:{for(var r=0,i=n.getJson();r<i.length;r++){var o=i[r];if("ue_px"===o.keyIfEncoded&&"object"===C(o.json.data)&&"string"==typeof(o=o.json.data.schema)){r=o;break e}}r=""}o="string"==typeof(i=n.getPayload().e)?i:"",i=[];var a=J(e,n,o,r);return i.push.apply(i,a),n=function(e,t,n,r){var i;return e=K(e).map((function(e){e:{if(V(e)){var i=e[0],o=!1;try{o=i({event:t.getPayload(),eventType:n,eventSchema:r})}catch(e){o=!1}if(!0===o){e=J(e[1],t,n,r);break e}}else if(Z(e)&&function(e,t){var n=0,r=0,i=e.accept;return Array.isArray(i)?e.accept.some((function(e){return W(e,t)}))&&r++:"string"==typeof i&&W(i,t)&&r++,i=e.reject,Array.isArray(i)?e.reject.some((function(e){return W(e,t)}))&&n++:"string"==typeof i&&W(i,t)&&n++,0<r&&0===n}(e[0],r)){e=J(e[1],t,n,r);break e}e=[]}if(e&&0!==e.length)return e})),(i=[]).concat.apply(i,e.filter((function(e){return null!=e&&e.filter(Boolean)})))}(t,n,o,r),i.push.apply(i,n),i}}}function D(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return null!==(t=null==e?void 0:e.map((function(e){if("function"!=typeof e)return e;try{return e.apply(void 0,n)}catch(e){}})).filter(Boolean))&&void 0!==t?t:[]}function P(e){return!!((e=e.split("."))&&1<e.length)&&function(e){if("*"===e[0]||"*"===e[1])return!1;if(0<e.slice(2).length){var t=!1,n=0;for(e=e.slice(2);n<e.length;n++)if("*"===e[n])t=!0;else if(t)return!1;return!0}return 2==e.length}(e)}function U(e){if(null!==(e=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(e))&&P(e[1]))return e.slice(1,6)}function F(e){if(e=U(e)){var t=e[0];return 5===e.length&&P(t)}return!1}function z(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))}function B(e){return z(e)?e.every((function(e){return F(e)})):"string"==typeof e&&F(e)}function j(e){return!!(M(e)&&"sc"in e&&"dt"in e)&&("string"==typeof e.sc&&"object"===C(e.dt))}function G(e){return"function"==typeof e&&1>=e.length}function H(e){return G(e)||j(e)}function V(e){return!(!Array.isArray(e)||2!==e.length)&&(Array.isArray(e[1])?G(e[0])&&e[1].every(H):G(e[0])&&H(e[1]))}function Z(e){return!(!Array.isArray(e)||2!==e.length)&&(!!function(e){var t=0;if(null!=e&&"object"===C(e)&&!Array.isArray(e)){if(Object.prototype.hasOwnProperty.call(e,"accept")){if(!B(e.accept))return!1;t+=1}if(Object.prototype.hasOwnProperty.call(e,"reject")){if(!B(e.reject))return!1;t+=1}return 0<t&&2>=t}return!1}(e[0])&&(Array.isArray(e[1])?e[1].every(H):H(e[1])))}function q(e){return V(e)||Z(e)}function W(e,t){if(!F(e))return!1;if(e=U(e),t=null!==(t=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(t))?t.slice(1,6):void 0,e&&t){if(!function(e,t){if(t=t.split("."),e=e.split("."),t&&e){if(t.length!==e.length)return!1;for(var n=0;n<e.length;n++)if(!Y(t[n],e[n]))return!1;return!0}return!1}(e[0],t[0]))return!1;for(var n=1;5>n;n++)if(!Y(e[n],t[n]))return!1;return!0}return!1}function Y(e,t){return e&&t&&"*"===e||e===t}function K(e){return Array.isArray(e)?e:[e]}function J(e,t,n,r){var i;return e=K(e).map((function(e){e:if(j(e))e=[e];else{if(G(e)){t:{var i=void 0;try{if(i=e({event:t.getPayload(),eventType:n,eventSchema:r}),Array.isArray(i)&&i.every(j)||j(i)){var o=i;break t}o=void 0;break t}catch(e){}o=void 0}if(j(o)){e=[o];break e}if(Array.isArray(o)){e=o;break e}}e=void 0}if(e&&0!==e.length)return e})),(i=[]).concat.apply(i,e.filter((function(e){return null!=e&&e.filter(Boolean)})))}function X(e){void 0===e&&(e={});var t,n,r,i,o,a,s,l,c=e.base64,u=e.corePlugins,d=null!=u?u:[];t=null==c||c,n=d,r=e.callback,i=function(e){return{addPluginContexts:function(t){var n=t?x([],t,!0):[];return e.forEach((function(e){try{e.contexts&&n.push.apply(n,e.contexts())}catch(e){Yr.error("Error adding plugin contexts",e)}})),n}}}(n),o=L(),a=t,s={},l=null;var f=Tr(Tr({},c={track:function(e,t,l){e.withJsonProcessor(O(a)),e.add("eid",Zr.v4()),e.addDict(s),l=function(e){return null==e?{type:"dtm",value:(new Date).getTime()}:"number"==typeof e?{type:"dtm",value:e}:"ttm"===e.type?{type:"ttm",value:e.value}:{type:"dtm",value:e.value||(new Date).getTime()}}(l),e.add(l.type,l.value.toString()),t=function(e,t){e=o.getApplicableContexts(e);var n=[];return t&&t.length&&n.push.apply(n,t),e&&e.length&&n.push.apply(n,e),n}(e,i.addPluginContexts(t)),void 0!==(t=t&&t.length?{sc:"sp/ctx/1-0-0",dt:t}:void 0)&&e.addJson("cx","co",t),n.forEach((function(t){try{t.beforeTrack&&t.beforeTrack(e)}catch(e){Yr.error("Plugin beforeTrack",e)}})),"function"==typeof r&&r(e);var c=e.build();return n.forEach((function(e){try{e.afterTrack&&e.afterTrack(c)}catch(e){Yr.error("Plugin afterTrack",e)}})),c},addPayloadPair:function(e,t){s[e]=t},configuration:e,getConfig:function(){return e},setConfig:function(t){t&&(void 0!==t.base64&&(a=e.base64=t.base64),void 0!==t.lifecycleAutotracking&&(e.lifecycleAutotracking=t.lifecycleAutotracking),void 0!==t.cacheRefreshInterval&&(e.cacheRefreshInterval=t.cacheRefreshInterval),void 0!==t.exceptionAutotracking&&(e.exceptionAutotracking=t.exceptionAutotracking),void 0!==t.enablePeriodicHeartbeat&&(e.enablePeriodicHeartbeat=t.enablePeriodicHeartbeat),void 0!==t.periodicHeartbeatInterval&&(e.periodicHeartbeatInterval=t.periodicHeartbeatInterval),void 0!==t.enc&&(e.enc=t.enc),void 0!==t.mend&&(e.mend=t.mend),void 0!==t.maxLocalStorageQueueSize&&(e.maxLocalStorageQueueSize=t.maxLocalStorageQueueSize),void 0!==t.maxGetBytes&&(e.maxGetBytes=t.maxGetBytes),void 0!==t.bufferSize&&(e.bufferSize=t.bufferSize),void 0!==t.customEventTrackingConfiguration&&(e.customEventTrackingConfiguration=t.customEventTrackingConfiguration),void 0!==t.networkRequestTrackingConfiguration&&(e.networkRequestTrackingConfiguration=t.networkRequestTrackingConfiguration),void 0!==t.traceparentconfig&&(e.traceparentconfig=t.traceparentconfig),void 0!==t.baggageConfiguration&&(e.baggageConfiguration=t.baggageConfiguration),void 0!==t.metaTagsTrackingConfiguration&&(e.metaTagsTrackingConfiguration=t.metaTagsTrackingConfiguration),void 0!==t.evtStreamTrackingConfiguration&&(e.evtStreamTrackingConfiguration=t.evtStreamTrackingConfiguration),void 0!==t.performanceContextConfig&&(e.performanceContextConfig=t.performanceContextConfig),void 0!==t.configurationVersion&&(e.configurationVersion=t.configurationVersion),void 0!==t.catRcLastUpdatedTs&&(e.catRcLastUpdatedTs=t.catRcLastUpdatedTs),void 0!==t.endpoint&&(e.endpoint=t.endpoint),void 0!==t.controlIngestConfig&&(e.controlIngestConfig=t.controlIngestConfig),void 0!==t.applicationContext&&(e.applicationContext=t.applicationContext),void 0!==t.emitterConfiguration&&(e.emitterConfiguration=t.emitterConfiguration),void 0!==t.di&&(e.di=t.di),void 0!==t.clickcc&&(e.clickcc=t.clickcc),void 0!==t.collectionRateLimit&&(e.collectionRateLimit=t.collectionRateLimit),e.pageUrlTrackingConfig=void 0!==t.pageUrlTrackingConfig?t.pageUrlTrackingConfig:null,e.sessionReplayConfiguration=void 0!==t.sessionReplayConfiguration?t.sessionReplayConfiguration:null,e.valueProbes=void 0!==t.valueProbes?t.valueProbes:null,e.webVitals=void 0!==t.webVitals?t.webVitals:null)},getBase64Encoding:function(){return a},setBase64Encoding:function(e){a=e},addPayloadDict:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])},resetPayloadPairs:function(e){s=N(e)?e:{}},setTrackerVersion:function(e){s.tv=e},setTrackerNamespace:function(e){s.tna=e},setAppId:function(e){s.aid=e},setPlatform:function(e){s.p=e},setUserId:function(e){s.uid=e},setConversationId:function(e){l=e},getConversationId:function(){return l},setScreenResolution:function(e,t){s.res=e+"x"+t},setViewport:function(e,t){s.vp=e+"x"+t},setColorDepth:function(e){s.cd=e},setTimezone:function(e){s.tz=e},setLang:function(e){s.lang=e},setIpAddress:function(e){s.ip=e},setUseragent:function(e){s.ua=e},addGlobalContexts:function(e){o.addGlobalContexts(e)},clearGlobalContexts:function(){o.clearGlobalContexts()},removeGlobalContexts:function(e){o.removeGlobalContexts(e)}}),{addPlugin:function(e){var t,n;e=e.plugin,d.push(e),null===(t=e.logger)||void 0===t||t.call(e,Yr),null===(n=e.activateCorePlugin)||void 0===n||n.call(e,f)}});return null==d||d.forEach((function(e){var t,n;null===(t=e.logger)||void 0===t||t.call(e,Yr),null===(n=e.activateCorePlugin)||void 0===n||n.call(e,f)})),f}function Q(e){var t=e.event;return e={sc:"sp/ue/1-0-0",dt:{sc:e=t.sc,dt:t.dt}},(t=R()).add("e","ue"),t.addJson("ue_px","ue_pr",e),t}function $(e){return Q({event:{sc:"cv/re/1-0-1",dt:ee({name:e.name,data:e.data})}})}function ee(e,t){void 0===t&&(t={});var n,r={};for(n in e)(t[n]||null!==e[n]&&void 0!==e[n])&&(r[n]=e[n]);return r}function te(e){for(var t=e.length;0<=--t;)e[t]=0}function ne(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function re(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function ie(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function oe(){this.strm=null,this.status=0,this.pending_buf=null,this.wrap=this.pending=this.pending_out=this.pending_buf_size=0,this.gzhead=null,this.gzindex=0,this.method=Xi,this.last_flush=-1,this.w_mask=this.w_bits=this.w_size=0,this.window=null,this.window_size=0,this.head=this.prev=null,this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),$i(this.dyn_ltree),$i(this.dyn_dtree),$i(this.bl_tree),this.bl_desc=this.d_desc=this.l_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),$i(this.heap),this.heap_max=this.heap_len=0,this.depth=new Uint16Array(573),$i(this.depth),this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.sym_end=this.sym_next=this.lit_bufsize=this.sym_buf=0}function ae(e){(e=this.options=yo.assign({level:Oo,method:No,chunkSize:16384,windowBits:15,memLevel:8,strategy:Mo},e||{})).raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&16>e.windowBits&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Co,this.strm.avail_out=0;var t=mo.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==xo)throw Error(Oi[t]);if(e.header&&mo.deflateSetHeader(this.strm,e.header),e.dictionary){if(e="string"==typeof e.dictionary?_o.string2buf(e.dictionary):"[object ArrayBuffer]"===So.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(t=mo.deflateSetDictionary(this.strm,e))!==xo)throw Error(Oi[t]);this._dict_set=!0}}function se(e,t){if((t=new ae(t)).push(e,!0),t.err)throw t.msg||Oi[t.err];return t.result}function le(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.total=this.check=this.dmax=this.flags=0,this.head=null,this.wnext=this.whave=this.wsize=this.wbits=0,this.window=null,this.extra=this.offset=this.length=this.bits=this.hold=0,this.distcode=this.lencode=null,this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.distdyn=this.lendyn=null,this.was=this.back=this.sane=0}function ce(e){var t=this.options=yo.assign({chunkSize:65536,windowBits:15,to:""},e||{});if(t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&16>t.windowBits)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Co,this.strm.avail_out=0,(e=aa.inflateInit2(this.strm,t.windowBits))!==da)throw Error(Oi[e]);if(this.header=new sa,aa.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=_o.string2buf(t.dictionary):"[object ArrayBuffer]"===la.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=aa.inflateSetDictionary(this.strm,t.dictionary))!==da))throw Error(Oi[e])}function ue(e,t){if((t=new ce(t)).push(e),t.err)throw t.msg||Oi[t.err];return t.result}function de(e){if(Na[e])return Na[e];var t=globalThis[e],n=t.prototype,r=e in Oa?Oa[e]:void 0;r=!(!r||!r.every((function(e){var t,r;return!(null==(r=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)||!r.toString().includes("[native code]"))})));var i=e in Ma?Ma[e]:void 0;if(i=!(!i||!i.every((function(e){var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))}))),r&&i&&!globalThis.Zone)return Na[e]=t.prototype;try{var o=document.createElement("iframe");document.body.appendChild(o);var a=o.contentWindow;if(!a)return t.prototype;var s=a[e].prototype;return document.body.removeChild(o),s?Na[e]=s:n}catch(e){return n}}function fe(e,t,n){var r,i="".concat(e,".").concat(String(n));return La[i]?La[i].call(t):(e=de(e),(e=null==(r=Object.getOwnPropertyDescriptor(e,n))?void 0:r.get)?(La[i]=e,e.call(t)):t[n])}function he(e,t,n){var r="".concat(e,".").concat(String(n));return Da[r]?Da[r].bind(t):"function"!=typeof(e=de(e)[n])?t[n]:(Da[r]=e,e.bind(t))}function pe(e){var t=e&&"host"in e&&"mode"in e&&Pa.host(e)||null;return!(!t||!("shadowRoot"in t)||Pa.shadowRoot(t)!==e)}function ve(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function ge(e){try{var t=e.rules||e.cssRules;if(!t)return null;var n=e.href;return!n&&e.ownerNode&&e.ownerNode.ownerDocument&&(n=e.ownerNode.ownerDocument.location.href),function(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}(Array.from(t,(function(e){return me(e,n)})).join(""))}catch(e){return null}}function me(e,t){if("styleSheet"in e){try{var n;if(!(n=ge(e.styleSheet))){var r=e.cssText;if(3>r.split('"').length)n=r;else{var i=["@import","url(".concat(JSON.stringify(e.href),")")];""===e.layerName?i.push("layer"):e.layerName&&i.push("layer(".concat(e.layerName,")")),e.supportsText&&i.push("supports(".concat(e.supportsText,")")),e.media.length&&i.push(e.media.mediaText),n=i.join(" ")+";"}}var o=n}catch(t){o=e.cssText}return e.styleSheet.href?ke(o,e.styleSheet.href):o}return o=e.cssText,"selectorText"in e&&e.selectorText.includes(":")&&(o=o.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2")),t?ke(o,t):o}function ye(e){var t=e.element,n=e.maskInputOptions,r=e.tagName,i=e.type,o=e.maskInputFn;return e=e.value||"",i=i&&i.toLowerCase(),(n[r.toLowerCase()]||i&&n[i])&&(e=o?o(e,t):"*".repeat(e.length)),e}function we(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?t.toLowerCase():null}function be(e,t){var n;try{var r=new URL(e,null!=t?t:window.location.href)}catch(e){return null}return null!==(n=null==(e=r.pathname.match(/\.([0-9a-z]+)(?:$)/i))?void 0:e[1])&&void 0!==n?n:null}function ke(e,t){return(e||"").replace(Fa,(function(e,n,r,i,o,a){if(n=n||i||"",!(r=r||o||a))return e;if(za.test(r)||Ba.test(r)||ja.test(r))return"url(".concat(n).concat(r).concat(n,")");if("/"===r[0]){var s="url(".concat(n),c=s.concat;return e=(e=-1<t.indexOf("//")?t.split("/").slice(0,3).join("/"):t.split("/")[0]).split("?")[0],c.call(s,e+r).concat(n,")")}e=t.split("/"),r=r.split("/"),e.pop(),r=l(r);try{for(r.s();!(s=r.n()).done;)"."!==(c=s.value)&&(".."===c?e.pop():e.push(c))}catch(e){r.e(e)}finally{r.f()}return"url(".concat(n).concat(e.join("/")).concat(n,")")}))}function _e(e){return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}function Ce(){return Ga++}function Se(e,t){return t&&""!==t.trim()?Ee(e,t):t}function Ee(e,t){var n=qa.get(e);if(n||(n=e.createElement("a"),qa.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function Ae(e,t,n,r){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]||"background"===n&&("table"===t||"td"===t||"th"===t)?Se(e,r):"srcset"===n?function(e,t){function n(e){return(e=e.exec(t.substring(r)))?(e=e[0],r+=e.length,e):""}if(""===t.trim())return t;for(var r=0,i=[];n(Za),!(r>=t.length);){var o=n(Va);if(","===o.slice(-1))o=Se(e,o.substring(0,o.length-1)),i.push(o);else{var a="";o=Se(e,o);for(var s=!1;;){var l=t.charAt(r);if(""===l){i.push((o+a).trim());break}if(s)")"===l&&(s=!1);else{if(","===l){r+=1,i.push((o+a).trim());break}"("===l&&(s=!0)}a+=l,r+=1}}}return i.join(", ")}(e,r):"style"===n?ke(r,Ee(e)):"object"===t&&"data"===n?Se(e,r):r:r}function Ie(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Te(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&Te(Pa.parentNode(e),t,n);for(var r=e.classList.length;r--;)if(t.test(e.classList[r]))return!0;return!!n&&Te(Pa.parentNode(e),t,n)}function xe(e,t,n,r){if(e.nodeType===e.ELEMENT_NODE){if(!Pa.childNodes(e).length)return!1}else{if(null===Pa.parentElement(e))return!1;e=Pa.parentElement(e)}try{if("string"==typeof t){if(r){if(e.closest(".".concat(t)))return!0}else if(e.classList.contains(t))return!0}else if(Te(e,t,r))return!0;if(n)if(r){if(e.closest(n))return!0}else if(e.matches(n))return!0}catch(e){}return!1}function Re(e,t){var n=t.doc,r=t.blockClass,i=t.blockSelector,o=t.needsMask,a=t.inlineStylesheet,s=t.maskInputOptions,l=void 0===s?{}:s;s=t.maskTextFn;var c=t.maskInputFn,u=t.dataURLOptions,d=void 0===u?{}:u,f=t.inlineImages,h=t.recordCanvas,p=t.keepIframeSrcFn,v=void 0!==(u=t.newlyAddedElement)&&u;switch(u=void 0!==(u=t.cssCaptured)&&u,(t=t.mirror).hasNode(n)?t=1===(t=t.getId(n))?void 0:t:t=void 0,e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Ra.Document,childNodes:[],compatMode:e.compatMode}:{type:Ra.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ra.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:t};case e.ELEMENT_NODE:return function(e,t){var n=t.doc,r=t.inlineStylesheet,i=t.maskInputOptions,o=void 0===i?{}:i,a=t.maskInputFn,s=void 0===(i=t.dataURLOptions)?{}:i,l=t.inlineImages,c=t.recordCanvas;i=t.keepIframeSrcFn;var u,d=t.newlyAddedElement,f=void 0!==d&&d;d=t.rootId,t=function(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;)if(t.test(e.classList[r]))return!0;if(n)return e.matches(n)}catch(e){}return!1}(e,t.blockClass,t.blockSelector);for(var h=function(e){return e instanceof HTMLFormElement?"form":(e=e.tagName.toLowerCase(),Ha.test(e)?"div":e)}(e),p={},v=e.attributes.length,g=0;g<v;g++){var m=e.attributes[g];Ie(h,m.name,m.value)||(p[m.name]=Ae(n,h,m.name.toLowerCase(),m.value))}"link"===h&&r&&(r=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),v=null,r&&(v=ge(r)),v&&(delete p.rel,delete p.href,p._cssText=v)),"style"===h&&e.sheet&&(r=ge(e.sheet))&&(1<e.childNodes.length&&(r=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=Array.from(t.childNodes),i=[],o=0;if(1<r.length&&e&&"string"==typeof e)for(var a=_e(e,n),s=a.length/e.length,l=1;l<r.length;l++)if(r[l].textContent&&"string"==typeof r[l].textContent){for(var c=_e(r[l].textContent,n),u=3;u<c.length&&(c[u].match(/[a-zA-Z0-9]/)||-1!==c.indexOf(c.substring(0,u),1));u++);for(;u<c.length;u++){var d=c.substring(0,u),f=a.split(d),h=-1;if(2===f.length)h=f[0].length;else if(2<f.length&&""===f[0]&&""!==r[l-1].textContent)h=a.indexOf(d,1);else if(1===f.length){if(d=d.substring(0,d.length-1),1>=(f=a.split(d)).length)return i.push(e),i;u=101}else u===c.length-1&&(h=a.indexOf(d));if(2<=f.length&&100<u){var p=r[l-1].textContent;p&&"string"==typeof p&&(h=_e(p).length,h=a.indexOf(d,h)),-1===h&&(h=f[0].length)}if(-1!==h){for(c=Math.floor(h/s);0<c&&c<e.length;){if(++o>50*r.length)return i.push(e),i;if((u=_e(e.substring(0,c),n)).length===h){i.push(e.substring(0,c)),e=e.substring(c),a=a.substring(h);break}c=u.length<h?c+Math.max(1,Math.floor((h-u.length)/s)):c-Math.max(1,Math.floor((u.length-h)*s))}break}}}return i.push(e),i}(r,e).join("/* rr_split */")),p._cssText=r),("input"===h||"textarea"===h||"select"===h)&&(r=e.value,v=e.checked,"radio"!==p.type&&"checkbox"!==p.type&&"submit"!==p.type&&"button"!==p.type&&r?p.value=ye({element:e,type:we(e),tagName:h,value:r,maskInputOptions:o,maskInputFn:a}):v&&(p.checked=v));if("option"===h&&(e.selected&&!o.select?p.selected=!0:delete p.selected),"dialog"===h&&e.open&&(p.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal"),"canvas"===h&&c&&("2d"===e.__context?function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var i=t.getImageData;if(new Uint32Array(("__rrweb_original__"in i?i.__rrweb_original__:i).call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0}(e)||(p.rr_dataURL=e.toDataURL(s.type,s.quality)):"__context"in e||(o=e.toDataURL(s.type,s.quality),(a=n.createElement("canvas")).width=e.width,a.height=e.height,a=a.toDataURL(s.type,s.quality),o!==a&&(p.rr_dataURL=o))),"img"===h&&l){ya||(ya=n.createElement("canvas"),wa=ya.getContext("2d"));var y=e.currentSrc||e.getAttribute("src")||"<unknown-src>",w=e.crossOrigin,b=function(){e.removeEventListener("load",b);try{ya.width=e.naturalWidth,ya.height=e.naturalHeight,wa.drawImage(e,0,0),p.rr_dataURL=ya.toDataURL(s.type,s.quality)}catch(t){if("anonymous"!==e.crossOrigin)return e.crossOrigin="anonymous",void(e.complete&&0!==e.naturalWidth?b():e.addEventListener("load",b));console.warn("Cannot inline img src=".concat(y,"! Error: ").concat(t))}"anonymous"===e.crossOrigin&&(w?p.crossOrigin=w:e.removeAttribute("crossorigin"))};e.complete&&0!==e.naturalWidth?b():e.addEventListener("load",b)}"audio"!==h&&"video"!==h||((n=p).rr_mediaState=e.paused?"paused":"played",n.rr_mediaCurrentTime=e.currentTime,n.rr_mediaPlaybackRate=e.playbackRate,n.rr_mediaMuted=e.muted,n.rr_mediaLoop=e.loop,n.rr_mediaVolume=e.volume);f||(e.scrollLeft&&(p.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(p.rr_scrollTop=e.scrollTop)),t&&(n=e.getBoundingClientRect(),l=n.height,p={class:p.class,rr_width:"".concat(n.width,"px"),rr_height:"".concat(l,"px")}),"iframe"!==h||i(p.src)||(e.contentDocument||(p.rr_src=p.src),delete p.src);try{customElements.get(h)&&(u=!0)}catch(e){}return{type:Ra.Element,tagName:h,attributes:p,childNodes:[],isSVG:!("svg"!==e.tagName&&!e.ownerSVGElement)||void 0,needBlock:t,rootId:d,isCustom:u}}(e,{doc:n,blockClass:r,blockSelector:i,inlineStylesheet:a,maskInputOptions:l,maskInputFn:c,dataURLOptions:d,inlineImages:f,recordCanvas:h,keepIframeSrcFn:p,newlyAddedElement:v,rootId:t});case e.TEXT_NODE:return r=t,l=(i=Pa.parentNode(e))&&i.tagName,i="",a="STYLE"===l||void 0,(l="SCRIPT"===l||void 0)?i="SCRIPT_PLACEHOLDER":u||(i=Pa.textContent(e),a&&i&&(i=ke(i,Ee(n)))),!a&&!l&&i&&o&&(i=s?s(i,Pa.parentElement(e)):i.replace(/[\S]/g,"*")),{type:Ra.Text,textContent:i||"",rootId:r};case e.CDATA_SECTION_NODE:return{type:Ra.CDATA,textContent:"",rootId:t};case e.COMMENT_NODE:return{type:Ra.Comment,textContent:Pa.textContent(e)||"",rootId:t};default:return!1}}function Oe(e){return null==e?"":e.toLowerCase()}function Me(e,t){var n=t.doc,r=t.mirror,i=t.blockClass,o=t.blockSelector,a=t.maskTextClass,s=t.maskTextSelector,l=t.skipChild;l=void 0!==l&&l;var c=t.inlineStylesheet,u=void 0===c||c,d=void 0===(c=t.maskInputOptions)?{}:c,f=t.maskTextFn,h=t.maskInputFn,p=t.slimDOMOptions,v=void 0===(c=t.dataURLOptions)?{}:c,g=void 0!==(c=t.inlineImages)&&c,m=void 0!==(c=t.recordCanvas)&&c,y=t.onSerialize,w=t.onIframeLoad,b=void 0===(c=t.iframeLoadTimeout)?5e3:c,k=t.onStylesheetLoad,_=void 0===(c=t.stylesheetLoadTimeout)?5e3:c,C=void 0===(c=t.keepIframeSrcFn)?function(){return!1}:c;c=void 0!==(c=t.newlyAddedElement)&&c;var S=t.cssCaptured;S=void 0!==S&&S;var E=t.needsMask,A=void 0===(t=t.preserveWhiteSpace)||t;if(E||(E=xe(e,a,s,void 0===E)),!(t=Re(e,{doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:E,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:h,dataURLOptions:v,inlineImages:g,recordCanvas:m,keepIframeSrcFn:C,newlyAddedElement:c,cssCaptured:S})))return console.warn(e,"not serialized"),null;if(c=r.hasNode(e)?r.getId(e):function(e,t){return!!(t.comment&&e.type===Ra.Comment||e.type===Ra.Element&&(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===be(e.attributes.href))||t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Oe(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Oe(e.attributes.name)||"icon"===Oe(e.attributes.rel)||"apple-touch-icon"===Oe(e.attributes.rel)||"shortcut icon"===Oe(e.attributes.rel)))||"meta"===e.tagName&&(t.headMetaDescKeywords&&Oe(e.attributes.name).match(/^description|keywords$/)||t.headMetaSocial&&(Oe(e.attributes.property).match(/^(og|twitter|fb):/)||Oe(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Oe(e.attributes.name))||t.headMetaRobots&&("robots"===Oe(e.attributes.name)||"googlebot"===Oe(e.attributes.name)||"bingbot"===Oe(e.attributes.name))||t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"]||t.headMetaAuthorship&&("author"===Oe(e.attributes.name)||"generator"===Oe(e.attributes.name)||"framework"===Oe(e.attributes.name)||"publisher"===Oe(e.attributes.name)||"progid"===Oe(e.attributes.name)||Oe(e.attributes.property).match(/^article:/)||Oe(e.attributes.property).match(/^product:/))||t.headMetaVerification&&("google-site-verification"===Oe(e.attributes.name)||"yandex-verification"===Oe(e.attributes.name)||"csrf-token"===Oe(e.attributes.name)||"p:domain_verify"===Oe(e.attributes.name)||"verify-v1"===Oe(e.attributes.name)||"verification"===Oe(e.attributes.name)||"shopify-checkout-api-token"===Oe(e.attributes.name)))))}(t,p)||!A&&t.type===Ra.Text&&!t.textContent.replace(/^\s+|\s+$/gm,"").length?-2:Ga++,t=Object.assign(t,{id:c}),r.add(e,t),-2===c)return null;if(y&&y(e),c=!l,t.type===Ra.Element&&(c=c&&!t.needBlock,delete t.needBlock,(S=Pa.shadowRoot(e))&&ve(S)&&(t.isShadowHost=!0)),(t.type===Ra.Document||t.type===Ra.Element)&&c){if(p.headWhitespace&&t.type===Ra.Element&&"head"===t.tagName&&(A=!1),l={doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:E,maskTextClass:a,maskTextSelector:s,skipChild:l,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:h,slimDOMOptions:p,dataURLOptions:v,inlineImages:g,recordCanvas:m,preserveWhiteSpace:A,onSerialize:y,onIframeLoad:w,iframeLoadTimeout:b,onStylesheetLoad:k,stylesheetLoadTimeout:_,keepIframeSrcFn:C,cssCaptured:!1},t.type!==Ra.Element||"textarea"!==t.tagName||void 0===t.attributes.value)for(t.type===Ra.Element&&void 0!==t.attributes._cssText&&"string"==typeof t.attributes._cssText&&(l.cssCaptured=!0),c=0,S=Array.from(Pa.childNodes(e));c<S.length;c++){var I=Me(S[c],l);I&&t.childNodes.push(I)}if(c=null,e.nodeType===e.ELEMENT_NODE&&(c=Pa.shadowRoot(e)))for(S=0,I=Array.from(Pa.childNodes(c));S<I.length;S++){var T=Me(I[S],l);T&&(ve(c)&&(T.isShadow=!0),t.childNodes.push(T))}}return(l=Pa.parentNode(e))&&pe(l)&&ve(l)&&(t.isShadow=!0),t.type===Ra.Element&&"iframe"===t.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var i=!1;try{var o=r.document.readyState}catch(e){return}if("complete"!==o){var a=setTimeout((function(){i||(t(),i=!0)}),n);e.addEventListener("load",(function(){clearTimeout(a),i=!0,t()}))}else{if("about:blank"!==r.location.href||"about:blank"===e.src||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}}(e,(function(){var t=e.contentDocument;t&&w&&(t=Me(t,{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:E,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:h,slimDOMOptions:p,dataURLOptions:v,inlineImages:g,recordCanvas:m,preserveWhiteSpace:A,onSerialize:y,onIframeLoad:w,iframeLoadTimeout:b,onStylesheetLoad:k,stylesheetLoadTimeout:_,keepIframeSrcFn:C}))&&w(e,t)}),b),t.type===Ra.Element&&"link"===t.tagName&&"string"==typeof t.attributes.rel&&("stylesheet"===t.attributes.rel||"preload"===t.attributes.rel&&"string"==typeof t.attributes.href&&"css"===be(t.attributes.href))&&function(e,t,n){var r=!1;try{var i=e.sheet}catch(e){return}if(!i){var o=setTimeout((function(){r||(t(),r=!0)}),n);e.addEventListener("load",(function(){clearTimeout(o),r=!0,t()}))}}(e,(function(){if(k){var t=Me(e,{doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:E,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:h,slimDOMOptions:p,dataURLOptions:v,inlineImages:g,recordCanvas:m,preserveWhiteSpace:A,onSerialize:y,onIframeLoad:w,iframeLoadTimeout:b,onStylesheetLoad:k,stylesheetLoadTimeout:_,keepIframeSrcFn:C});t&&k(e,t)}}),_),t}function Ne(e,t){var n=(t=t||{}).mirror;n=void 0===n?new Ua:n;var r=t.blockClass,i=t.blockSelector,o=t.maskTextClass,a=t.maskTextSelector,s=t.inlineStylesheet,l=t.inlineImages,c=t.recordCanvas,u=t.maskAllInputs;u=void 0!==u&&u;var d=t.slimDOM;d=void 0!==d&&d;var f=t.keepIframeSrcFn;return Me(e,{doc:e,mirror:n,blockClass:void 0===r?"rr-block":r,blockSelector:void 0===i?null:i,maskTextClass:void 0===o?"rr-mask":o,maskTextSelector:void 0===a?null:a,skipChild:!1,inlineStylesheet:void 0===s||s,maskInputOptions:!0===u?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===u?{password:!0}:u,maskTextFn:t.maskTextFn,maskInputFn:t.maskInputFn,slimDOMOptions:!0===d||"all"===d?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===d,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===d?{}:d,dataURLOptions:t.dataURLOptions,inlineImages:void 0!==l&&l,recordCanvas:void 0!==c&&c,preserveWhiteSpace:t.preserveWhiteSpace,onSerialize:t.onSerialize,onIframeLoad:t.onIframeLoad,iframeLoadTimeout:t.iframeLoadTimeout,onStylesheetLoad:t.onStylesheetLoad,stylesheetLoadTimeout:t.stylesheetLoadTimeout,keepIframeSrcFn:void 0===f?function(){return!1}:f,newlyAddedElement:!1})}function Le(e,t){new rs(t).stringify(e)}function De(e,t){var n,r=new e.constructor;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"proxyCache"!==n){var i=e[n],o=C(i);"parent"===n&&"object"===o?t&&(r[n]=t):"source"===n?r[n]=i:Array.isArray(i)?r[n]=i.map((function(e){return De(e,r)})):("object"===o&&null!==i&&(i=De(i)),r[n]=i)}return r}function Pe(e){return e.map((function(e){return e.nodes&&(e.nodes=Pe(e.nodes)),delete e.source,e}))}function Ue(e){if(e[zs]=!1,e.proxyOf.nodes){var t;e=l(e.proxyOf.nodes);try{for(e.s();!(t=e.n()).done;)Ue(t.value)}catch(t){e.e(t)}finally{e.f()}}}function Fe(e,t){e=new ol(e,t),e=new il(e);try{e.parse()}catch(e){throw e}return e.root}function ze(e){return"object"===C(e)&&"function"==typeof e.then}function Be(e){var t=!1,n=ll[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,0,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,0,n+"Exit"]:[n,n+"Exit"]}function je(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:Be(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function Ge(e){return e[sl]=!1,e.nodes&&e.nodes.forEach((function(e){return Ge(e)})),e}function He(e,t){if(Array.isArray(e))return e.map((function(e){return He(e)}));var n=e.inputs,r=g(e,ka);if(n){var i;t=[],n=l(n);try{for(n.s();!(i=n.n()).done;){var o=v(v({},i.value),{},{__proto__:wl.prototype});o.map&&(o.map=v(v({},o.map),{},{__proto__:gl.prototype})),t.push(o)}}catch(e){n.e(e)}finally{n.f()}}if(r.nodes&&(r.nodes=e.nodes.map((function(e){return He(e,t)}))),r.source&&(i=(o=r.source).inputId,o=g(o,_a),r.source=o,null!=i&&(r.source.input=t[i])),"root"===r.type)return new bl(r);if("decl"===r.type)return new vl(r);if("rule"===r.type)return new kl(r);if("comment"===r.type)return new ml(r);if("atrule"===r.type)return new yl(r);throw Error("Unknown node type: "+e.type)}function Ve(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new _l(t)}function Ze(e,t){new Pl(t).stringify(e)}function qe(e,t){var n,r=new e.constructor;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"proxyCache"!==n){var i=e[n],o=C(i);"parent"===n&&"object"===o?t&&(r[n]=t):"source"===n?r[n]=i:Array.isArray(i)?r[n]=i.map((function(e){return qe(e,r)})):("object"===o&&null!==i&&(i=qe(i)),r[n]=i)}return r}function We(e){return e.map((function(e){return e.nodes&&(e.nodes=We(e.nodes)),delete e.source,e}))}function Ye(e){if(e[yc]=!1,e.proxyOf.nodes){var t;e=l(e.proxyOf.nodes);try{for(e.s();!(t=e.n()).done;)Ye(t.value)}catch(t){e.e(t)}finally{e.f()}}}function Ke(e,t){e=new Fc(e,t),e=new Uc(e);try{e.parse()}catch(e){throw e}return e.root}function Je(e){return"object"===C(e)&&"function"==typeof e.then}function Xe(e){var t=!1,n=Bc[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,0,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,0,n+"Exit"]:[n,n+"Exit"]}function Qe(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:Xe(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function $e(e){return e[zc]=!1,e.nodes&&e.nodes.forEach((function(e){return $e(e)})),e}function et(e,t){if(Array.isArray(e))return e.map((function(e){return et(e)}));var n=e.inputs,r=g(e,Ca);if(n){var i;t=[],n=l(n);try{for(n.s();!(i=n.n()).done;){var o=v(v({},i.value),{},{__proto__:Xc.prototype});o.map&&(o.map=v(v({},o.map),{},{__proto__:Yc.prototype})),t.push(o)}}catch(e){n.e(e)}finally{n.f()}}if(r.nodes&&(r.nodes=e.nodes.map((function(e){return et(e,t)}))),r.source&&(i=(o=r.source).inputId,o=g(o,Sa),r.source=o,null!=i&&(r.source.input=t[i])),"root"===r.type)return new Qc(r);if("decl"===r.type)return new Wc(r);if("rule"===r.type)return new $c(r);if("comment"===r.type)return new Kc(r);if("atrule"===r.type)return new Jc(r);throw Error("Unknown node type: "+e.type)}function tt(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new eu(t)}function nt(e){if(ou[e])return ou[e];var t=globalThis[e],n=t.prototype,r=e in ru?ru[e]:void 0;r=!(!r||!r.every((function(e){var t,r;return!(null==(r=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)||!r.toString().includes("[native code]"))})));var i=e in iu?iu[e]:void 0;if(i=!(!i||!i.every((function(e){var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))}))),r&&i&&!globalThis.Zone)return ou[e]=t.prototype;try{var o=document.createElement("iframe");document.body.appendChild(o);var a=o.contentWindow;if(!a)return t.prototype;var s=a[e].prototype;return document.body.removeChild(o),s?ou[e]=s:n}catch(e){return n}}function rt(e,t,n){var r,i="".concat(e,".").concat(String(n));return au[i]?au[i].call(t):(e=nt(e),(e=null==(r=Object.getOwnPropertyDescriptor(e,n))?void 0:r.get)?(au[i]=e,e.call(t)):t[n])}function it(e,t,n){var r="".concat(e,".").concat(String(n));return su[r]?su[r].bind(t):"function"!=typeof(e=nt(e)[n])?t[n]:(su[r]=e,e.bind(t))}function ot(){return nt("MutationObserver").constructor}function at(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}function st(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=null,i=0;return function(){for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];o=Date.now(),i||!1!==n.leading||(i=o);var l=this;0>=(s=t-(o-i))||s>t?(r&&(clearTimeout(r),r=null),i=o,e.apply(l,a)):r||!1===n.trailing||(r=setTimeout((function(){i=!1===n.leading?0:Date.now(),r=null,e.apply(l,a)}),s))}}function lt(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:window,o=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,r?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),o&&o.set&&o.set.call(this,e)}}),function(){return lt(e,t,o||{},!0)}}function ct(e,t,n){try{if(!(t in e))return function(){};var r=e[t],i=n(r);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=i,function(){e[t]=r}}catch(e){return function(){}}}function ut(e){var t,n,r,i,o=e.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:o.documentElement.scrollLeft||(null==o?void 0:o.body)&&(null==(t=lu.parentElement(o.body))?void 0:t.scrollLeft)||(null==(n=null==o?void 0:o.body)?void 0:n.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==o?void 0:o.documentElement.scrollTop)||(null==o?void 0:o.body)&&(null==(r=lu.parentElement(o.body))?void 0:r.scrollTop)||(null==(i=null==o?void 0:o.body)?void 0:i.scrollTop)||0}}function dt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ft(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ht(e){return e?e.nodeType===e.ELEMENT_NODE?e:lu.parentElement(e):null}function pt(e,t,n,r){if(!e)return!1;if(!(e=ht(e)))return!1;try{if("string"==typeof t){if(e.classList.contains(t)||r&&null!==e.closest("."+t))return!0}else if(Te(e,t,r))return!0}catch(e){}return!(!n||!(e.matches(n)||r&&null!==e.closest(n)))}function vt(e,t,n){return!("TITLE"!==e.tagName||!n.headTitleMutations)||-2===t.getId(e)}function gt(e,t){if(pe(e))return!1;var n=t.getId(e);return!t.has(n)||(!(n=lu.parentNode(e))||n.nodeType!==e.DOCUMENT_NODE)&&(!n||gt(n,t))}function mt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function yt(e,t){return!("LINK"!==e.nodeName||e.nodeType!==e.ELEMENT_NODE||!e.getAttribute||"stylesheet"!==e.getAttribute("rel")||!t.getMeta(e))}function wt(e){return!!e&&(e instanceof nu&&"shadowRoot"in e?!!e.shadowRoot:!!lu.shadowRoot(e))}function bt(e){var t,n=null;return"getRootNode"in e&&(null==(t=lu.getRootNode(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&lu.host(lu.getRootNode(e))&&(n=lu.host(lu.getRootNode(e))),n}function kt(e){var t=e.ownerDocument;if(!t)return!1;if(!(t=lu.contains(t,e)))if(t=e.ownerDocument){for(var n;n=bt(e);)e=n;t=lu.contains(t,e)}else t=!1;return t}function _t(e,t){e.delete(t),lu.childNodes(t).forEach((function(t){return _t(e,t)}))}function Ct(e,t,n){return 0!==e.size&&(e=!!(t=lu.parentNode(t))&&e.has(t))}function St(e,t){return 0!==e.size&&Et(e,t)}function Et(e,t){return!!(t=lu.parentNode(t))&&(!!e.has(t)||Et(e,t))}function At(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function It(e,t){var n=new _u;return Su.push(n),n.init(e),(e=new(ot())(Cu(n.processMutations.bind(n)))).observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),e}function Tt(e){var t=e.mousemoveCb,n=e.sampling,r=e.doc,i=e.mirror;if(!1===n.mousemove)return function(){};e="number"==typeof n.mousemove?n.mousemove:50,n="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500;var o,a=[],s=st(Cu((function(e){var n=Date.now()-o;t(a.map((function(e){return e.timeOffset-=n,e})),e),a=[],o=null})),n),l=[at("mousemove",n=Cu(st(Cu((function(e){var t=At(e),n=e.changedTouches?e.changedTouches[0]:e,r=n.clientX;n=n.clientY,o||(o=uu()),a.push({x:r,y:n,id:i.getId(t),timeOffset:uu()-o}),s("undefined"!=typeof DragEvent&&e instanceof DragEvent?pu.Drag:e instanceof MouseEvent?pu.MouseMove:pu.TouchMove)})),e,{trailing:!1})),r),at("touchmove",n,r),at("drag",n,r)];return Cu((function(){l.forEach((function(e){return e()}))}))}function xt(e){var t=e.mouseInteractionCb,n=e.doc,r=e.mirror,i=e.blockClass,o=e.blockSelector;if(!1===(e=e.sampling).mouseInteraction)return function(){};var a=!0===e.mouseInteraction||void 0===e.mouseInteraction?{}:e.mouseInteraction,s=[],l=null;return Object.keys(vu).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]})).forEach((function(e){var a=e.toLowerCase(),c=function(e){return function(n){var a=At(n);if(!pt(a,i,o,!0)){var s=null,c=e;if("pointerType"in n){switch(n.pointerType){case"mouse":s=gu.Mouse;break;case"touch":s=gu.Touch;break;case"pen":s=gu.Pen}s===gu.Touch&&(vu[e]===vu.MouseDown?c="TouchStart":vu[e]===vu.MouseUp&&(c="TouchEnd"))}else n.changedTouches&&(s=gu.Touch);if(null!==s?(l=s,(c.startsWith("Touch")&&s===gu.Touch||c.startsWith("Mouse")&&s===gu.Mouse)&&(s=null)):vu[e]===vu.Click&&(s=l,l=null),n=n.changedTouches?n.changedTouches[0]:n){a=r.getId(a);var u=n.clientX;n=n.clientY,Cu(t)(v({type:vu[c],id:a,x:u,y:n},null!==s&&{pointerType:s}))}}}}(e);if(window.PointerEvent)switch(vu[e]){case vu.MouseDown:case vu.MouseUp:a=a.replace("mouse","pointer");break;case vu.TouchStart:case vu.TouchEnd:return}s.push(at(a,c,n))})),Cu((function(){s.forEach((function(e){return e()}))}))}function Rt(e){var t=e.scrollCb,n=e.doc,r=e.mirror,i=e.blockClass,o=e.blockSelector;return e=e.sampling,at("scroll",e=Cu(st(Cu((function(e){var a=At(e);a&&!pt(a,i,o,!0)&&(e=r.getId(a),a===n&&n.defaultView?(a=ut(n.defaultView),t({id:e,x:a.left,y:a.top})):t({id:e,x:a.scrollLeft,y:a.scrollTop}))})),e.scroll||100)),n)}function Ot(e,t){var n=e.viewportResizeCb;e=t.win;var r=-1,i=-1;return at("resize",t=Cu(st(Cu((function(){var e=dt(),t=ft();r===e&&i===t||(n({width:Number(t),height:Number(e)}),r=e,i=t)})),200)),e)}function Mt(e){function t(e){var t=At(e),r=e.isTrusted,o=t&&t.tagName;if(t&&"OPTION"===o&&(t=lu.parentElement(t)),!(!t||!o||0>Eu.indexOf(o)||pt(t,a,s,!0)||t.classList.contains(l)||c&&t.matches(c))){var h=t.value,p=!1;"radio"===(e=we(t)||"")||"checkbox"===e?p=t.checked:(u[o.toLowerCase()]||u[e])&&(h=ye({element:t,maskInputOptions:u,tagName:o,type:e,value:h,maskInputFn:d})),n(t,f?{text:h,isChecked:p,userTriggered:r}:{text:h,isChecked:p}),r=t.name,"radio"===e&&r&&p&&i.querySelectorAll('input[type="radio"][name="'.concat(r,'"]')).forEach((function(e){if(e!==t){var r=e.value;n(e,f?{text:r,isChecked:!p,userTriggered:!1}:{text:r,isChecked:!p})}}))}}function n(e,t){var n=Au.get(e);n&&n.text===t.text&&n.isChecked===t.isChecked||(Au.set(e,t),e=o.getId(e),Cu(r)(v(v({},t),{},{id:e})))}var r=e.inputCb,i=e.doc,o=e.mirror,a=e.blockClass,s=e.blockSelector,l=e.ignoreClass,c=e.ignoreSelector,u=e.maskInputOptions,d=e.maskInputFn,f=e.userTriggeredOnInput,h=("last"===e.sampling.input?["change"]:["input","change"]).map((function(e){return at(e,Cu(t),i)})),p=i.defaultView;if(!p)return function(){h.forEach((function(e){return e()}))};e=p.Object.getOwnPropertyDescriptor(p.HTMLInputElement.prototype,"value");var g=[[p.HTMLInputElement.prototype,"value"],[p.HTMLInputElement.prototype,"checked"],[p.HTMLSelectElement.prototype,"value"],[p.HTMLTextAreaElement.prototype,"value"],[p.HTMLSelectElement.prototype,"selectedIndex"],[p.HTMLOptionElement.prototype,"selected"]];return e&&e.set&&h.push.apply(h,k(g.map((function(e){return lt(e[0],e[1],{set:function(){Cu(t)({target:this,isTrusted:!1})}},!1,p)})))),Cu((function(){h.forEach((function(e){return e()}))}))}function Nt(e){var t=[];return Vt("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Vt("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Vt("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Vt("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule?(e=Array.from(e.parentRule.cssRules).indexOf(e),t.unshift(e)):e.parentStyleSheet&&(e=Array.from(e.parentStyleSheet.cssRules).indexOf(e),t.unshift(e)),t}function Lt(e,t,n){var r,i;return e?(e.ownerNode?r=t.getId(e.ownerNode):i=n.getId(e),{styleId:i,id:r}):{}}function Dt(e,t){var n=e.styleSheetRuleCb,r=e.mirror,i=e.stylesheetManager,o=t.win;if(!o.CSSStyleSheet||!o.CSSStyleSheet.prototype)return function(){};var a=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:Cu((function(e,t,o){var a=w(o,2),s=a[0];a=a[1];var l=Lt(t,r,i.styleMirror),c=l.id;return l=l.styleId,(c&&-1!==c||l&&-1!==l)&&n({id:c,styleId:l,adds:[{rule:s,index:a}]}),e.apply(t,o)}))}),o.CSSStyleSheet.prototype.addRule=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.cssRules.length,r="".concat(e," { ").concat(t," }");return o.CSSStyleSheet.prototype.insertRule.apply(this,[r,n])};var s=o.CSSStyleSheet.prototype.deleteRule;if(o.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:Cu((function(e,t,o){var a=w(o,1)[0],s=Lt(t,r,i.styleMirror),l=s.id;return s=s.styleId,(l&&-1!==l||s&&-1!==s)&&n({id:l,styleId:s,removes:[{index:a}]}),e.apply(t,o)}))}),o.CSSStyleSheet.prototype.removeRule=function(e){return o.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},o.CSSStyleSheet.prototype.replace){var l=o.CSSStyleSheet.prototype.replace;o.CSSStyleSheet.prototype.replace=new Proxy(l,{apply:Cu((function(e,t,o){var a=w(o,1)[0],s=Lt(t,r,i.styleMirror),l=s.id;return s=s.styleId,(l&&-1!==l||s&&-1!==s)&&n({id:l,styleId:s,replace:a}),e.apply(t,o)}))})}if(o.CSSStyleSheet.prototype.replaceSync){var c=o.CSSStyleSheet.prototype.replaceSync;o.CSSStyleSheet.prototype.replaceSync=new Proxy(c,{apply:Cu((function(e,t,o){var a=w(o,1)[0],s=Lt(t,r,i.styleMirror),l=s.id;return s=s.styleId,(l&&-1!==l||s&&-1!==s)&&n({id:l,styleId:s,replaceSync:a}),e.apply(t,o)}))})}var u={};Zt("CSSGroupingRule")?u.CSSGroupingRule=o.CSSGroupingRule:(Zt("CSSMediaRule")&&(u.CSSMediaRule=o.CSSMediaRule),Zt("CSSConditionRule")&&(u.CSSConditionRule=o.CSSConditionRule),Zt("CSSSupportsRule")&&(u.CSSSupportsRule=o.CSSSupportsRule));var d={};return Object.entries(u).forEach((function(e){var t=w(e,2);e=t[0],t=t[1],d[e]={insertRule:t.prototype.insertRule,deleteRule:t.prototype.deleteRule},t.prototype.insertRule=new Proxy(d[e].insertRule,{apply:Cu((function(e,t,o){var a=w(o,2),s=a[0];a=a[1];var l=Lt(t.parentStyleSheet,r,i.styleMirror),c=l.id;return l=l.styleId,(c&&-1!==c||l&&-1!==l)&&n({id:c,styleId:l,adds:[{rule:s,index:[].concat(k(Nt(t)),[a||0])}]}),e.apply(t,o)}))}),t.prototype.deleteRule=new Proxy(d[e].deleteRule,{apply:Cu((function(e,t,o){var a=w(o,1)[0],s=Lt(t.parentStyleSheet,r,i.styleMirror),l=s.id;return s=s.styleId,(l&&-1!==l||s&&-1!==s)&&n({id:l,styleId:s,removes:[{index:[].concat(k(Nt(t)),[a])}]}),e.apply(t,o)}))})})),Cu((function(){o.CSSStyleSheet.prototype.insertRule=a,o.CSSStyleSheet.prototype.deleteRule=s,l&&(o.CSSStyleSheet.prototype.replace=l),c&&(o.CSSStyleSheet.prototype.replaceSync=c),Object.entries(u).forEach((function(e){var t=w(e,2);e=t[0],(t=t[1]).prototype.insertRule=d[e].insertRule,t.prototype.deleteRule=d[e].deleteRule}))}))}function Pt(e,t){var n,r,i,o,a=e.mirror,s=e.stylesheetManager;o="#document"===t.nodeName?a.getId(t):a.getId(lu.host(t));var l=null!=(e="#document"===t.nodeName?null==(n=t.defaultView)?void 0:n.Document:null==(i=null==(r=t.ownerDocument)?void 0:r.defaultView)?void 0:i.ShadowRoot)&&e.prototype?Object.getOwnPropertyDescriptor(null==e?void 0:e.prototype,"adoptedStyleSheets"):void 0;return null!==o&&-1!==o&&e&&l?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:function(){var e;return null==(e=l.get)?void 0:e.call(this)},set:function(e){var t,n=null==(t=l.set)?void 0:t.call(this,e);if(null!==o&&-1!==o)try{s.adoptStyleSheets(e,o)}catch(e){}return n}}),Cu((function(){Object.defineProperty(t,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})}))):function(){}}function Ut(e,t){var n=e.styleDeclarationCb,r=e.mirror,i=e.ignoreCSSAttributes,o=e.stylesheetManager,a=t.win,s=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:Cu((function(e,t,a){var l,c=w(a,3),u=c[0],d=c[1];if(c=c[2],i.has(u))return s.apply(t,[u,d,c]);var f=Lt(null==(l=t.parentRule)?void 0:l.parentStyleSheet,r,o.styleMirror);return l=f.id,f=f.styleId,(l&&-1!==l||f&&-1!==f)&&n({id:l,styleId:f,set:{property:u,value:d,priority:c},index:Nt(t.parentRule)}),e.apply(t,a)}))});var l=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:Cu((function(e,t,a){var s,c=w(a,1)[0];if(i.has(c))return l.apply(t,[c]);var u=Lt(null==(s=t.parentRule)?void 0:s.parentStyleSheet,r,o.styleMirror);return s=u.id,u=u.styleId,(s&&-1!==s||u&&-1!==u)&&n({id:s,styleId:u,remove:{property:c},index:Nt(t.parentRule)}),e.apply(t,a)}))}),Cu((function(){a.CSSStyleDeclaration.prototype.setProperty=s,a.CSSStyleDeclaration.prototype.removeProperty=l}))}function Ft(e){var t=e.mediaInteractionCb,n=e.blockClass,r=e.blockSelector,i=e.mirror,o=e.sampling;e=e.doc;var a=Cu((function(e){return st(Cu((function(o){if((o=At(o))&&!pt(o,n,r,!0)){var a=o.currentTime,s=o.volume,l=o.muted,c=o.playbackRate,u=o.loop;t({type:e,id:i.getId(o),currentTime:a,volume:s,muted:l,playbackRate:c,loop:u})}})),o.media||500)})),s=[at("play",a(yu.Play),e),at("pause",a(yu.Pause),e),at("seeked",a(yu.Seeked),e),at("volumechange",a(yu.VolumeChange),e),at("ratechange",a(yu.RateChange),e)];return Cu((function(){s.forEach((function(e){return e()}))}))}function zt(e){var t=e.fontCb,n=(e=e.doc).defaultView;if(!n)return function(){};var r=[],i=new WeakMap,o=n.FontFace;return n.FontFace=function(e,t,n){var r=new o(e,t,n);return i.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r},e=ct(e.fonts,"add",(function(e){return function(n){return setTimeout(Cu((function(){var e=i.get(n);e&&(t(e),i.delete(n))})),0),e.apply(this,[n])}})),r.push((function(){n.FontFace=o})),r.push(e),Cu((function(){r.forEach((function(e){return e()}))}))}function Bt(e){var t=e.doc,n=e.mirror,r=e.blockClass,i=e.blockSelector,o=e.selectionCb,a=!0;return(e=Cu((function(){var e=t.getSelection();if(e&&(!a||null==e||!e.isCollapsed)){a=e.isCollapsed||!1;for(var s=[],l=e.rangeCount||0,c=0;c<l;c++){var u=e.getRangeAt(c),d=u.startContainer,f=u.startOffset,h=u.endContainer;u=u.endOffset,pt(d,r,i,!0)||pt(h,r,i,!0)||s.push({start:n.getId(d),startOffset:f,end:n.getId(h),endOffset:u})}o({ranges:s})}})))(),at("selectionchange",e)}function jt(e){var t=e.customElementCb;return(e=e.doc.defaultView)&&e.customElements?ct(e.customElements,"define",(function(e){return function(n,r,i){try{t({define:{name:n}})}catch(e){console.warn("Custom element callback failed for ".concat(n))}return e.apply(this,[n,r,i])}})):function(){}}function Gt(e,t){var n=e.mutationCb,r=e.mousemoveCb,i=e.mouseInteractionCb,o=e.scrollCb,a=e.viewportResizeCb,s=e.inputCb,l=e.mediaInteractionCb,c=e.styleSheetRuleCb,u=e.styleDeclarationCb,d=e.canvasMutationCb,f=e.fontCb,h=e.selectionCb,p=e.customElementCb;e.mutationCb=function(){t.mutation&&t.mutation.apply(t,arguments),n.apply(void 0,arguments)},e.mousemoveCb=function(){t.mousemove&&t.mousemove.apply(t,arguments),r.apply(void 0,arguments)},e.mouseInteractionCb=function(){t.mouseInteraction&&t.mouseInteraction.apply(t,arguments),i.apply(void 0,arguments)},e.scrollCb=function(){t.scroll&&t.scroll.apply(t,arguments),o.apply(void 0,arguments)},e.viewportResizeCb=function(){t.viewportResize&&t.viewportResize.apply(t,arguments),a.apply(void 0,arguments)},e.inputCb=function(){t.input&&t.input.apply(t,arguments),s.apply(void 0,arguments)},e.mediaInteractionCb=function(){t.mediaInteaction&&t.mediaInteaction.apply(t,arguments),l.apply(void 0,arguments)},e.styleSheetRuleCb=function(){t.styleSheetRule&&t.styleSheetRule.apply(t,arguments),c.apply(void 0,arguments)},e.styleDeclarationCb=function(){t.styleDeclaration&&t.styleDeclaration.apply(t,arguments),u.apply(void 0,arguments)},e.canvasMutationCb=function(){t.canvasMutation&&t.canvasMutation.apply(t,arguments),d.apply(void 0,arguments)},e.fontCb=function(){t.font&&t.font.apply(t,arguments),f.apply(void 0,arguments)},e.selectionCb=function(){t.selection&&t.selection.apply(t,arguments),h.apply(void 0,arguments)},e.customElementCb=function(){t.customElement&&t.customElement.apply(t,arguments),p.apply(void 0,arguments)}}function Ht(e){var t,n=e.doc.defaultView;if(!n)return function(){};Gt(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),e.recordDOM&&(t=It(e,e.doc));var r=Tt(e),i=xt(e),o=Rt(e),a=Ot(e,{win:n}),s=Mt(e),c=Ft(e),u=function(){},d=function(){},f=function(){},h=function(){};e.recordDOM&&(u=Dt(e,{win:n}),d=Pt(e,e.doc),f=Ut(e,{win:n}),e.collectFonts&&(h=zt(e)));var p,v=Bt(e),g=jt(e),m=[],y=l(e.plugins);try{for(y.s();!(p=y.n()).done;){var w=p.value;m.push(w.observer(w.callback,n,w.options))}}catch(e){y.e(e)}finally{y.f()}return Cu((function(){Su.forEach((function(e){return e.reset()})),null==t||t.disconnect(),r(),i(),o(),a(),s(),c(),u(),d(),f(),h(),v(),g(),m.forEach((function(e){return e()}))}))}function Vt(e){return void 0!==window[e]}function Zt(e){return!!(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}function qt(e,t,n){if(e instanceof Array)return e.map((function(e){return qt(e,t,n)}));if(null!==e){if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var r=e.constructor.name;return{rr_type:r,base64:e=Du(e)}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[qt(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement)return{rr_type:e.constructor.name,src:e.src};if(e instanceof HTMLCanvasElement)return{rr_type:"HTMLImageElement",src:e.toDataURL()};if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[qt(e.data,t,n),e.width,e.height]};if(zu(e,t)||"object"===C(e))return{rr_type:r=e.constructor.name,index:e=Uu(e,t,n)}}return e}function Wt(e,t,n,r){var i=[];try{var o=ct(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(i){for(var o=arguments.length,a=Array(1<o?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];return pt(this,t,n,!0)||(o="experimental-webgl"===i?"webgl":i,"__context"in this||(this.__context=o),r&&["webgl","webgl2"].includes(o)&&(a[0]&&"object"===C(a[0])?(o=a[0]).preserveDrawingBuffer||(o.preserveDrawingBuffer=!0):a.splice(0,1,{preserveDrawingBuffer:!0}))),e.apply(this,[i].concat(a))}}));i.push(o)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){i.forEach((function(e){return e()}))}}function Yt(e,t,n,r,i,o){var a,s=[],c=Object.getOwnPropertyNames(e);c=l(c);try{var u=function(){var l=a.value;if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))return 0;try{if("function"!=typeof e[l])return 0;var c=ct(e,l,(function(e){return function(){for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return a=e.apply(this,s),Uu(a,o,this),"tagName"in this.canvas&&!pt(this.canvas,r,i,!0)&&(s=Fu(s,o,this),n(this.canvas,{type:t,property:l,args:s})),a}}));s.push(c)}catch(r){c=lt(e,l,{set:function(e){n(this.canvas,{type:t,property:l,args:[e],setter:!0})}}),s.push(c)}};for(c.s();!(a=c.n()).done;)u()}catch(e){c.e(e)}finally{c.f()}return s}function Kt(e){try{var t=Bu&&(window.URL||window.webkitURL).createObjectURL(Bu);if(!t)throw"";var n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",(function(){(window.URL||window.webkitURL).revokeObjectURL(t)})),n}catch(t){return new Worker("data:text/javascript;base64,KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}function Jt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.emit,n=e.checkoutEveryNms,r=e.checkoutEveryNth,i=e.blockClass,o=void 0===i?"rr-block":i,a=void 0===(i=e.blockSelector)?null:i,s=void 0===(i=e.ignoreClass)?"rr-ignore":i,c=void 0===(i=e.ignoreSelector)?null:i,u=void 0===(i=e.maskTextClass)?"rr-mask":i,d=void 0===(i=e.maskTextSelector)?null:i,f=void 0===(i=e.inlineStylesheet)||i;i=e.maskAllInputs;var h=e.maskInputOptions,p=e.slimDOMOptions,g=e.maskInputFn,m=e.maskTextFn,y=e.hooks,w=e.packFn,b=e.sampling,k=void 0===b?{}:b,_=void 0===(b=e.dataURLOptions)?{}:b;b=e.mousemoveWait;var C=e.recordDOM,S=void 0===C||C,E=void 0!==(C=e.recordCanvas)&&C;C=void 0!==(C=e.recordCrossOriginIframes)&&C;var A=e.recordAfter,I=void 0===A?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":A,T=void 0!==(A=e.userTriggeredOnInput)&&A,x=void 0!==(A=e.collectFonts)&&A,R=void 0!==(A=e.inlineImages)&&A,O=e.plugins,M=void 0===(A=e.keepIframeSrcFn)?function(){return!1}:A,N=void 0===(A=e.ignoreCSSAttributes)?new Set([]):A;du=e.errorHandler;var L=!C||window.parent===window,D=!1;if(!L)try{window.parent.document&&(D=!1)}catch(e){D=!0}if(L&&!t)throw Error("emit function is required");if(!L&&!D)return function(){};void 0!==b&&void 0===k.mousemove&&(k.mousemove=b),Yu.reset();var P=!0===i?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==h?h:{password:!0},U=!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===p,headMetaDescKeywords:"all"===p,headTitleMutations:"all"===p}:p||{};mt();var F,z=0,B=function(e){var t,n=l(O||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.eventProcessor&&(e=r.eventProcessor(e))}}catch(e){n.e(e)}finally{n.f()}return w&&!D&&(e=w(e)),e};Mu=function(e,i){var o;e.timestamp=uu(),null!=(o=Su[0])&&o.isFrozen()&&e.type!==hu.FullSnapshot&&(e.type!==hu.IncrementalSnapshot||e.data.source!==pu.Mutation)&&Su.forEach((function(e){return e.unfreeze()})),L?null==t||t(B(e),i):D&&(i={type:"rrweb",event:B(e),origin:window.location.origin,isCheckout:i},window.parent.postMessage(i,"*")),e.type===hu.FullSnapshot?(F=e,z=0):e.type!==hu.IncrementalSnapshot||e.data.source===pu.Mutation&&e.data.isAttachIframe||(z++,e=n&&e.timestamp-F.timestamp>n,(r&&z>=r||e)&&Nu(!0))};var j,G=function(e){Mu({type:hu.IncrementalSnapshot,data:v({source:pu.Mutation},e)})},H=function(e){return Mu({type:hu.IncrementalSnapshot,data:v({source:pu.Scroll},e)})},V=function(e){return Mu({type:hu.IncrementalSnapshot,data:v({source:pu.CanvasMutation},e)})},Z=new Gu({mutationCb:G,adoptedStyleSheetCb:function(e){return Mu({type:hu.IncrementalSnapshot,data:v({source:pu.AdoptedStyleSheet},e)})}}),q=new Tu({mirror:Yu,mutationCb:G,stylesheetManager:Z,recordCrossOriginIframes:C,wrappedEmit:Mu});e=l(O||[]);try{for(e.s();!(j=e.n()).done;){var W=j.value;W.getMirror&&W.getMirror({nodeMirror:Yu,crossOriginIframeMirror:q.crossOriginIframeMirror,crossOriginIframeStyleMirror:q.crossOriginIframeStyleMirror})}}catch(t){e.e(t)}finally{e.f()}var Y=new Hu;Lu=new ju({recordCanvas:E,mutationCb:V,win:window,blockClass:o,blockSelector:a,mirror:Yu,sampling:k.canvas,dataURLOptions:_});var K=new xu({mutationCb:G,scrollCb:H,bypassOptions:{blockClass:o,blockSelector:a,maskTextClass:u,maskTextSelector:d,inlineStylesheet:f,maskInputOptions:P,dataURLOptions:_,maskTextFn:m,maskInputFn:g,recordCanvas:E,inlineImages:R,sampling:k,slimDOMOptions:U,iframeManager:q,stylesheetManager:Z,canvasManager:Lu,keepIframeSrcFn:M,processedNodeManager:Y},mirror:Yu});Nu=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(S){Mu({type:hu.Meta,data:{href:window.location.href,width:ft(),height:dt()}},e),Z.reset(),K.init(),Su.forEach((function(e){return e.lock()}));var t=Ne(document,{mirror:Yu,blockClass:o,blockSelector:a,maskTextClass:u,maskTextSelector:d,inlineStylesheet:f,maskAllInputs:P,maskTextFn:m,maskInputFn:g,slimDOM:U,dataURLOptions:_,recordCanvas:E,inlineImages:R,onSerialize:function(e){"IFRAME"===e.nodeName&&Yu.getMeta(e)&&q.addIframe(e),yt(e,Yu)&&Z.trackLinkElement(e),wt(e)&&K.addShadowRoot(lu.shadowRoot(e),document)},onIframeLoad:function(e,t){q.attachIframe(e,t),K.observeAttachShadow(e)},onStylesheetLoad:function(e,t){Z.attachLinkElement(e,t)},keepIframeSrcFn:M});if(!t)return console.warn("Failed to snapshot the document");Mu({type:hu.FullSnapshot,data:{node:t,initialOffset:ut(window)}},e),Su.forEach((function(e){return e.unlock()})),document.adoptedStyleSheets&&0<document.adoptedStyleSheets.length&&Z.adoptStyleSheets(document.adoptedStyleSheets,Yu.getId(document))}};try{var J=[],X=function(e){var t;return Cu(Ht)({mutationCb:G,mousemoveCb:function(e,t){return Mu({type:hu.IncrementalSnapshot,data:{source:t,positions:e}})},mouseInteractionCb:function(e){return Mu({type:hu.IncrementalSnapshot,data:v({source:pu.MouseInteraction},e)})},scrollCb:H,viewportResizeCb:function(e){return Mu({type:hu.IncrementalSnapshot,data:v({source:pu.ViewportResize},e)})},inputCb:function(e){return Mu({type:hu.IncrementalSnapshot,data:v({source:pu.Input},e)})},mediaInteractionCb:function(e){return Mu({type:hu.IncrementalSnapshot,data:v({source:pu.MediaInteraction},e)})},styleSheetRuleCb:function(e){return Mu({type:hu.IncrementalSnapshot,data:v({source:pu.StyleSheetRule},e)})},styleDeclarationCb:function(e){return Mu({type:hu.IncrementalSnapshot,data:v({source:pu.StyleDeclaration},e)})},canvasMutationCb:V,fontCb:function(e){return Mu({type:hu.IncrementalSnapshot,data:v({source:pu.Font},e)})},selectionCb:function(e){Mu({type:hu.IncrementalSnapshot,data:v({source:pu.Selection},e)})},customElementCb:function(e){Mu({type:hu.IncrementalSnapshot,data:v({source:pu.CustomElement},e)})},blockClass:o,ignoreClass:s,ignoreSelector:c,maskTextClass:u,maskTextSelector:d,maskInputOptions:P,inlineStylesheet:f,sampling:k,recordDOM:S,recordCanvas:E,inlineImages:R,userTriggeredOnInput:T,collectFonts:x,doc:e,maskInputFn:g,maskTextFn:m,keepIframeSrcFn:M,blockSelector:a,slimDOMOptions:U,dataURLOptions:_,mirror:Yu,iframeManager:q,stylesheetManager:Z,shadowDomManager:K,processedNodeManager:Y,canvasManager:Lu,ignoreCSSAttributes:N,plugins:(null==(t=null==O?void 0:O.filter((function(e){return e.observer})))?void 0:t.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return Mu({type:hu.Plugin,data:{plugin:e.name,payload:t}})}}})))||[]},y)};q.addLoadListener((function(e){try{J.push(X(e.contentDocument))}catch(e){console.warn(e)}}));var Q=function(){Nu(),J.push(X(document)),Vu=!0};return"interactive"===document.readyState||"complete"===document.readyState?Q():(J.push(at("DOMContentLoaded",(function(){Mu({type:hu.DomContentLoaded,data:{}}),"DOMContentLoaded"===I&&Q()}))),J.push(at("load",(function(){Mu({type:hu.Load,data:{}}),"load"===I&&Q()}),window))),function(){J.forEach((function(e){return e()})),Y.destroy(),Vu=!1,du=void 0}}catch(e){console.warn(e)}}function Xt(e){return!(!e||"string"!=typeof e.valueOf())}function Qt(e){return Number.isInteger&&Number.isInteger(e)||"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function $t(e){if(!Xt(e)){e=e.text||"";var t=document.getElementsByTagName("title");t&&null!=t[0]&&(e=t[0].text)}return e}function en(e){var t=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(e);return t?t[1]:e}function tn(e){var t=e.length;return"."===e.charAt(--t)&&(e=e.slice(0,t)),"*."===e.slice(0,2)&&(e=e.slice(1)),e}function nn(e){var t=window,n=on("referrer",t.location.href)||on("referer",t.location.href);if(n)return n;if(e)return e;try{if(t.top)return t.top.document.referrer;if(t.parent)return t.parent.document.referrer}catch(e){}return document.referrer}function rn(e,t,n,r){return void 0!==e&&(e.addEventListener?(e.addEventListener(t,n,r),!0):e.attachEvent?e.attachEvent("on"+t,n):void(e["on"+t]=n))}function on(e,t){return(e=new RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(t))?decodeURIComponent(e[1].replace(/\+/g," ")):null}function an(e,t,n){void 0===n&&(n=63072e3);try{var r=window.localStorage,i=Date.now()+1e3*n;return r.setItem("".concat(e,".expires"),i.toString()),r.setItem(e,t),!0}catch(e){return!1}}function sn(e){try{var t=window.localStorage;return t.removeItem(e),t.removeItem(e+".expires"),!0}catch(e){return!1}}function ln(e,t,n,r){return cn(e,"",-1,"/",t,n,r)}function cn(e,t,n,r,i,o,a){return 1<arguments.length?document.cookie=e+"="+encodeURIComponent(null!=t?t:"")+(n?"; Expires="+new Date(+new Date+1e3*n).toUTCString():"")+(r?"; Path="+r:"")+(i?"; Domain="+i:"")+(o?"; SameSite="+o:"")+(a?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}function un(e){try{var t=null===window||void 0===window?void 0:window.localStorage;return!!t&&(t.removeItem(e),!0)}catch(e){return!1}}function dn(){"undefined"!=typeof window&&void 0!==window.localStorage&&localStorage.removeItem(Ku.SAMPLING_STORAGE_RANDOM_NUMBER_KEY)}function fn(e,t){return void 0!==e.act&&void 0!==e.act[t]&&void 0!==(e=e.act[t])?e:Ku.DEFAULT_SAMPLING_ACTION[t]}function hn(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}function pn(e,t,n,r,i){var o=[Qu.request_body,Qu.response_body,Qu.request_headers,Qu.response_headers,Qu.request_query],a={};if("number"==typeof i&&(td=1024*i),t&&0<t.length)for(i=0;i<t.length;i++){var s=t[i],l=s.conditions;s=A(s,["conditions"]);try{if(gn(e,l)){l=0;for(var c=Object.entries(e);l<c.length;l++){var u=c[l],d=u[0],f=u[1];o.includes(d)||(a[d]=f)}l=0;for(var h=Object.entries(s);l<h.length;l++){var p=h[l];d=p[0],f=p[1];try{if(f&&0<s[d].length){var v=!1;if(d!==Qu.response_headers&&d!==Qu.request_headers||(v=!0),d===Qu.request_body){var g=void 0,m=void 0,y=void 0,w=void 0,b=void 0,k=void 0,_=void 0,S=n,E=e;void 0===S&&(S={});var I=nd(null===(_=null==S?void 0:S.requestDetails)||void 0===_?void 0:_.headers);if(void 0!==I&&(I.toLowerCase().includes("text/plain")||I.toLowerCase().includes("json")||I.toLowerCase().includes("text/javascript")||I.toLowerCase().includes("application/javascript")||I.toLowerCase().includes("text/html"))||void 0===I)try{if("string"==typeof(null===(k=null==S?void 0:S.requestDetails)||void 0===k?void 0:k.body)&&(null===(b=null==S?void 0:S.requestDetails)||void 0===b?void 0:b.body.length)<=td)try{E[Qu.request_body]=JSON.parse(null===(w=null==S?void 0:S.requestDetails)||void 0===w?void 0:w.body)}catch(e){}else"object"===C(null===(y=null==S?void 0:S.requestDetails)||void 0===y?void 0:y.body)&&JSON.stringify(null===(m=null==S?void 0:S.requestDetails)||void 0===m?void 0:m.body).length<=td&&(E[Qu.request_body]=null===(g=null==S?void 0:S.requestDetails)||void 0===g?void 0:g.body)}catch(e){}}if(d===Qu.response_body){var T,x=E=S=_=k=b=w=y=m=g=void 0,R=void 0,O=void 0,M=n,N=e;void 0===M&&(M={});e:{var L=null===(O=null==M?void 0:M.responseDetails)||void 0===O?void 0:O.headers;try{O=void 0,null!=L&&(O=L["content-length"]||L["Content-Length"]||L["Content-length"]);var D=null==O||isNaN(O)?O:Number(O);break e}catch(e){}D=void 0}var P=nd(null===(T=null==M?void 0:M.responseDetails)||void 0===T?void 0:T.headers);if(void 0!==P&&(P.toLowerCase().includes("text/plain")||P.toLowerCase().includes("json")||P.toLowerCase().includes("text/javascript")||P.toLowerCase().includes("application/javascript")||P.toLowerCase().includes("text/html")))if(void 0!==D&&D<=td)if("string"==typeof(null===(R=null==M?void 0:M.responseDetails)||void 0===R?void 0:R.body))try{N[Qu.response_body]=JSON.parse(null===(x=null==M?void 0:M.responseDetails)||void 0===x?void 0:x.body)}catch(e){}else"object"===C(null===(E=null==M?void 0:M.responseDetails)||void 0===E?void 0:E.body)&&(N[Qu.response_body]=null===(S=null==M?void 0:M.responseDetails)||void 0===S?void 0:S.body);else if(void 0===D)try{if("string"==typeof(null===(_=null==M?void 0:M.responseDetails)||void 0===_?void 0:_.body)&&(null===(b=null===(k=null==M?void 0:M.responseDetails)||void 0===k?void 0:k.body)||void 0===b?void 0:b.length)<=td)try{N[Qu.response_body]=JSON.parse(null===(w=null==M?void 0:M.responseDetails)||void 0===w?void 0:w.body)}catch(e){}else"object"===C(null===(y=null==M?void 0:M.responseDetails)||void 0===y?void 0:y.body)&&JSON.stringify(null===(m=null==M?void 0:M.responseDetails)||void 0===m?void 0:m.body).length<=td&&(N[Qu.response_body]=null===(g=null==M?void 0:M.responseDetails)||void 0===g?void 0:g.body)}catch(e){}}d===Qu.request_query&&yn(e,r);var U=mn(e[d],s[d],v);0!==Object.keys(U).length&&(a[d]=U)}}catch(e){a[d]=void 0}}return a}}catch(e){console.warn("Conviva App Tracker: Error in collecting attributes nwreqConfig ".concat(e))}}for(a=Tr({},e),e=0;e<o.length;e++)t=o[e],null!=a&&a.hasOwnProperty(t)&&delete a[t];return a}function vn(e,t,n){try{if("string"==typeof n&&"string"==typeof e&&"*"===n.trim())return!0;switch(t){case"==":case"equal":return e===n;case"!=":return e!==n;case">":return e>n;case"<":return e<n;case">=":return e>=n;case"<=":return e<=n;case"contains":return""!==n&&"string"==typeof e&&"string"==typeof n&&-1!==e.toLowerCase().indexOf(n.toLowerCase());default:return!1}}catch(e){return console.warn("Conviva App Tracker: Error in Compare values nwreq ".concat(e)),!1}}function gn(e,t){try{for(var n=0;n<t.length;n++){var r=t[n],i=!1;if(0<Object.keys(r).length)for(var o=0,a=Object.entries(r);o<a.length;o++){var s=a[o],l=s[1],c=e[s[0]];if(0<l.length){for(var u=0,d=0,f=l;d<f.length;d++){var h=f[d],p="contains",v=h;if("object"===C(h)&&h.length?(p=h[1],v=h[0]):"boolean"!=typeof h&&null!==h||(p="equal",v=h),vn(c,p,v)){i=!0;break}if(i=!1,u+1===l.length)break;u++}if(!1===i)break}}if(i)return!0}}catch(e){console.warn("Conviva App Tracker: Error in Applying nwreqConfig ".concat(e))}return!1}function mn(e,t,n){var r={};try{for(var i=0;i<t.length;i++){var o=t[i],a=e,s=r;n&&(o=o.toLowerCase(),a=a&&Object.entries(a).reduce((function(e,t){var n=t[1];return e[t[0].toLowerCase()]=n,e}),{}));for(var l=o.split("."),c=0;c<l.length;c++){var u=l[c];if(null==a||!a.hasOwnProperty(u))break;c===l.length-1?s[u]=a[u]:(s[u]=s[u]||{},a=a[u],s=s[u])}}}catch(e){console.warn("Conviva App Tracker: Error in filtering schema object nwreq ".concat(e))}return r}function yn(e,t){try{var n=(null==e?void 0:e.targetUrl)||(null==e?void 0:e.url);if(n&&"string"==typeof n&&n.includes("?")){var r=void 0;try{var i=n.indexOf("?");if(-1===i)return;var o=n.indexOf("#",i),a=-1!==o?n.substring(i+1,o):n.substring(i+1);if(!a||a.length>(t||10240))return;r="undefined"!=typeof URLSearchParams?new URLSearchParams(a):null}catch(e){return void console.warn("Conviva App Tracker: Error creating URLSearchParams: ".concat(e))}var s={};if(r instanceof URLSearchParams)r.forEach((function(e,t){s[t]=e}));else{t=0;for(var l=n.substring(n.indexOf("?")+1).split("&");t<l.length;t++){var c=l[t];if(c){var u=c.indexOf("="),d=0<u?decodeURIComponent(c.substring(0,u)):decodeURIComponent(c);if(d){var f=0<u&&u<c.length-1?decodeURIComponent(c.substring(u+1)):"";s[d]=f}}}}0<Object.keys(s).length&&(e[Qu.request_query]=s)}}catch(e){console.warn("Conviva App Tracker: Error parsing request query parameters: ".concat(e))}}function wn(e,t,n,r,i,o){for(var a={},s=0;s<t.length;s++){var l=t[s],c=l.req,u=l.opt,d=l.smb;l=l.rqq;try{var f=r([{req:c,opt:u}],[],e,n);if(null!=f&&f.result){if(d&&Array.isArray(d)){var h=bn(e,d,!1,o);0<Object.keys(h).length&&Object.assign(a,h)}return l&&Array.isArray(l)&&(yn(e,i),h=bn(e[Qu.request_query],l,!1,o),0<Object.keys(h).length)&&(void 0!==a[Qu.request_query]&&null!==a[Qu.request_query]||(a[Qu.request_query]={}),Object.assign(a[Qu.request_query],h)),a}}catch(e){console.warn("Conviva App Tracker: Error in collecting conditional SSE attributes ".concat(e))}}return a}function bn(e,t,n,r){if(void 0===r&&(r=!1),r)return function(e,t,n){var r={};try{for(var i=new Map,o=new Set,a=0;a<t.length;a++){var s=t[a];n&&(s=s.toLowerCase());var l=s.split(".");if(1===l.length)o.add(l[0]);else if(2!==l.length||isNaN(Number(l[1]))){if(1<l.length&&!isNaN(Number(l[1]))){u=l[0],d=Number(l[1]);var c=l.slice(2);f="".concat(u,".").concat(d),i.has(f)||i.set(f,[]),i.get(f).push(c.join("."))}}else{var u=l[0],d=Number(l[1]),f="".concat(u,".").concat(d);i.has(f)||i.set(f,[]),i.get(f).push("")}}t=0;for(var h=Array.from(o);t<h.length;t++){var p=h[t],v=e;n&&(v=v&&Object.entries(v).reduce((function(e,t){var n=t[1];return e[t[0].toLowerCase()]=n,e}),{})),null!=v&&v.hasOwnProperty(p)&&(r[p]=v[p])}o=0;for(var g=Array.from(i.entries());o<g.length;o++){var m=g[o];f=m[0];var y=m[1],w=f.split(".");if(u=w[0],d=Number(w[1]),v=e,i=r,n&&(v=v&&Object.entries(v).reduce((function(e,t){var n=t[1];return e[t[0].toLowerCase()]=n,e}),{})),null!=v&&v.hasOwnProperty(u)&&(v=v[u],Array.isArray(i[u])||(i[u]=[]),i=i[u],Array.isArray(v)&&void 0!==v[d])){for(v=v[d];i.length<=d;)i.push(null);var b=i[d]||{};for(h=0,p=y;h<p.length;h++){var k=p[h];if(""===k)b=v;else for(c=k.split("."),t=v,a=b,s=0;s<c.length;s++){var _=c[s];if(null==t||!t.hasOwnProperty(_))break;if(s===c.length-1){var S=t[_];if("string"==typeof S)try{S=JSON.parse(S)}catch(e){}a[_]=S}else{if(isNaN(Number(c[s+1]))){if(a[_]&&"object"===C(a[_])||(a[_]={}),"string"==typeof(t=t[_])&&s<c.length-1)try{t=JSON.parse(t)}catch(e){}}else if(a[_]&&"object"===C(a[_])||(a[_]={}),"string"==typeof(t=t[_])&&s<c.length-1)try{t=JSON.parse(t)}catch(e){}a=a[_]}}}i[d]=b}}}catch(e){console.warn("Conviva App Tracker: Error in filtering SSE ArrayBuffer object ".concat(e))}return r}(e,t,n);r={};try{for(var i=0;i<t.length;i++){var o=t[i],a=e,s=r;n&&(o=o.toLowerCase(),a=a&&Object.entries(a).reduce((function(e,t){var n=t[1];return e[t[0].toLowerCase()]=n,e}),{}));for(var l=o.split("."),c=0;c<l.length;c++){var u=l[c];if(null==a||!a.hasOwnProperty(u))break;if(c===l.length-1)s[u]=a[u];else{if(s[u]=s[u]||{},"string"==typeof(a=a[u])&&c<l.length-1)try{a=JSON.parse(a)}catch(e){}s=s[u]}}}}catch(e){console.warn("Conviva App Tracker: Error in filtering SSE object ".concat(e))}return r}function kn(e,t){return t?t.split(".").reduce((function(e,t){if(null!=e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return t=/^\d+$/.test(t)?Number(t):t,null==e?void 0:e[t]}}),e):e}function _n(e,t,n){return"translate.googleusercontent.com"===e?(""===n&&(n=t),e=en(t=null!=(e=(e=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(t))&&1<(null==e?void 0:e.length)?on("u",e[1]):null)?e:"")):"cc.bingj.com"!==e&&"webcache.googleusercontent.com"!==e||(e=en(t=document.links[0].href)),[e,t,n]}function Cn(e,t){return void 0===t&&(t=1),"0"===e[0]?(e[7]=e[6],e[5]=e[4],e[3]++):e[3]=t,t=Zr.v4(),e[6]=t,e[8]="",e[9]=void 0,t}function Sn(e){e[4]=Math.round((new Date).getTime()/1e3)}function En(e){return{activateLCPObserver:function(){try{PerformanceObserver&&new PerformanceObserver((function(e){try{e.getEntries().forEach((function(e){var t;if("largest-contentful-paint"===e.entryType){var n=null===performance||void 0===performance?void 0:performance.getEntriesByType("navigation"),r=void 0;n&&0<(null==n?void 0:n.length)&&(r=null===(t=n[0])||void 0===t?void 0:t.activationStart),rd=Tr(Tr({},e.toJSON()),{performanceNavigationActivationStart:null!=r?r:0})}}))}catch(e){console.warn("convivaAppTracker error in conviva lcp observer "+e)}})).observe({type:"largest-contentful-paint",buffered:!0})}catch(e){console.warn("convivaAppTracker conviva_lcp failed "+e)}},contexts:function(){try{switch(e){case Ku.PERFORMANCE_CONTEXT.DISABLED:return[];case Ku.PERFORMANCE_CONTEXT.PERFORMANCE_NAVIGATION_TIMING:return function(){var e,t,n;try{var r=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{};if(r.getEntriesByType){var i=r.getEntriesByType("navigation")[0],o=null!==(e=null==r?void 0:r.timeOrigin)&&void 0!==e?e:0;if(!i)return[];var a={st:Math.floor(o+i.startTime),dls:Math.floor(o+i.domainLookupStart),dle:Math.floor(o+i.domainLookupEnd),rss:Math.floor(o+i.responseStart),rse:Math.floor(o+i.responseEnd),le:Math.floor(o+i.loadEventEnd),dur:Math.floor(i.loadEventEnd-i.activationStart),as:Math.floor(o+i.activationStart)};return null!=rd&&rd.startTime&&(a.lcp={rt:Math.floor(o+rd.startTime),url:128<(null===(t=null==rd?void 0:rd.url)||void 0===t?void 0:t.length)?null===(n=null==rd?void 0:rd.url)||void 0===n?void 0:n.substring(0,128):rd.url,sz:rd.size}),[{sc:"cv/pc/1-0-1",dt:a}]}return[]}catch(e){return console.warn("ConvivaAppTracker: issue will getting performance Navigation timing context"),[]}}();default:var t=window,n=t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance,r=n.timing;return x(x([],n?[{sc:"w3/pt/1-0-0",dt:{navigationStart:r.navigationStart,domainLookupStart:r.domainLookupStart,domainLookupEnd:r.domainLookupEnd,responseStart:r.responseStart,responseEnd:r.responseEnd,loadEventEnd:r.loadEventEnd}}]:[],!0),function(){var e,t,n;try{if(void 0!==(null==rd?void 0:rd.startTime)&&"number"==typeof(null==rd?void 0:rd.startTime))return[{sc:"cv/lcp/1-0-0",dt:{lcp:Math.round(rd.startTime)-(null!==(e=rd.performanceNavigationActivationStart)&&void 0!==e?e:0),url:128<(null===(t=null==rd?void 0:rd.url)||void 0===t?void 0:t.length)?null===(n=null==rd?void 0:rd.url)||void 0===n?void 0:n.substring(0,128):rd.url}}]}catch(e){}return[]}(),!0)}}catch(e){return console.warn("convivaAppTracker problem in perfromance context "+e),[]}}}}function An(e,t,n,r,i,o){var a;try{var s=null,l=null!==(a=o.url)&&void 0!==a?a:"";if(!l)return!0;if(dd.some((function(e){return l.includes(e)})))return!1;var c=new URL(l),u=c.protocol.replace(":","");if(a=function(e,t){var n;return(e=Tn(e,{scheme:u,host:c.hostname,path:decodeURIComponent(c.pathname)},ld.NETWORK_REQUEST)).matched?e.opt?xn(e.opt,{responseStatusCode:null!==(n=null==i?void 0:i.status)&&void 0!==n?n:0,duration:Date.now()-o.requestTimestamp},ld.NETWORK_REQUEST)===t:t:null},e&&null===s&&(s=a(e,!0)),t&&null===s&&(s=a(t,!1)),null===s){var d=(null==n?void 0:n.includes("*"))||(null==n?void 0:n.some((function(e){return!(!e||""===e)&&l.includes(e)}))),f=null==r?void 0:r.some((function(e){return!(!e||""===e)&&l.includes(e)}));s=!d||f}return!0===s}catch(e){return!0}}function In(e,t,n,r){try{var i=null;if(!(r=null!=r?r:""))return{result:!0};var o=new URL(r),a=o.protocol.replace(":","");return r=function(e,t){var r;if((e=Tn(e,Tr({scheme:a,host:o.hostname,path:decodeURIComponent(o.pathname)},n),ld.SSE_EVENT)).matched){if(e.opt){var i=xn(e.opt,n,ld.SSE_EVENT);return!0!==(null===(r=null==e?void 0:e.item)||void 0===r?void 0:r.count)||i?{result:i===t,matchedConfig:e.item,shouldSend:!0}:{result:e.matched===t,matchedConfig:e.item,shouldSend:!1}}return{result:t,matchedConfig:e.item,shouldSend:!1}}return null},e&&null===i&&(i=r(e,!0)),t&&null===i&&(i=r(t,!1)),(!e||Array.isArray(e)&&0===e.length)&&null===i&&(i={result:!0}),i}catch(e){return{result:!0}}}function Tn(e,t,n){try{for(var r=0;r<e.length;r++){var i=e[r],o=i.opt;if(xn(i.req,t,n))return{matched:!0,opt:o||null,item:i}}return{matched:!1,opt:null}}catch(e){return{matched:!1,opt:null}}}function xn(e,t,n){try{if(!e)return!1;if("and"===e.type){for(var r=0,i=e.cond;r<i.length;r++){var o=i[r];if(!xn(o,t,n))return!1}return!0}if("or"===e.type){for(i=0,r=e.cond;i<r.length;i++)if(xn(o=r[i],t,n))return!0;return!1}return n===ld.NETWORK_REQUEST?function(e,t){var n=e.key,r=e.op;if(e=e.val,!n||!r)return!1;switch(n){case"sch":return!!t.scheme&&Rn(t.scheme,r,e);case"host":return!!t.host&&Rn(t.host,r,e);case"path":return!!t.path&&Rn(t.path,r,e);case"dur":return!!t.duration&&On(t.duration,r,e);case"rsc":return void 0!==t.responseStatusCode&&0<=t.responseStatusCode&&On(t.responseStatusCode,r,e);default:return!1}}(e,t):n===ld.CUSTOM_EVENT?function(e,t){var n=e.key,r=e.op;if(e=e.val,!n||!r)return!1;if(void 0!==t[n]){if(Xt(t[n]))return Rn(t[n],r,e);if("boolean"==typeof t[n])switch(t=t[n],r){case"!=":return t!==e;case"==":return t===e;default:return!1}if(Number.isInteger(t[n]))return On(t[n],r,e)}return!1}(e,t):n===ld.SSE_EVENT&&function(e,t){var n=e.key,r=e.op;if(e=e.val,!n||!r)return!1;switch(n){case"sch":return!!t.scheme&&Rn(t.scheme,r,e);case"host":return!!t.host&&Rn(t.host,r,e);case"path":return!!t.path&&Rn(t.path,r,e);default:if(null!=(t=kn(t,n))){if("string"==typeof t)return Rn(t,r,e);if("boolean"==typeof t)switch(r){case"!=":return t!==e;case"==":return t===e;default:return!1}if("number"==typeof t&&Number.isInteger(t))return On(t,r,e)}return!1}}(e,t)}catch(e){return!1}}function Rn(e,t,n){return"=="===t&&Array.isArray(n)?!!(t=n).includes("*")||t.some((function(t){return!(!t||""===t)&&e===t})):"contains"===t&&Array.isArray(n)?!!(t=n).includes("*")||t.some((function(t){return!(!t||""===t)&&e.includes(t)})):"sw"===t&&Array.isArray(n)?!!(t=n).includes("*")||t.some((function(t){return!(!t||""===t)&&e.startsWith(t)})):!("ew"!==t||!Array.isArray(n))&&(!!(t=n).includes("*")||t.some((function(t){return!(!t||""===t)&&e.endsWith(t)})))}function On(e,t,n){if("in"===t.toLowerCase()&&Array.isArray(n))return n.includes(e);if("range"===t.toLowerCase()&&"object"===C(n)){t=n.min;var r=n.max,i=n.minExclusive;return n=n.maxExclusive,void 0!==t&&void 0!==r?e>=t&&e<=r:void 0!==i&&void 0!==n&&(e>i&&e<n)}if(Qt(n))switch(t){case"!=":return e!==n;case">":return e>n;case">=":return e>=n;case"<":return e<n;case"<=":return e<=n;case"==":return e===n}return!1}function Mn(e,t,n){var r=null;e:{for(var i=0;i<e.length;i++){var o=e[i],a=o.opt;if(xn(o.req,t,n)){if(!a){e=!0,a=null;break e}if(xn(a,t,n)){e=!0;break e}}}e=!1,a=null}return e&&(r=!a||!!xn(a,t,n)),r}function Nn(e,t,n){var r,i;try{if(e&&t){var o,a=null==e?void 0:e.getConfig();e:{var s,l,c,u={message:""};try{var d=n.message,f=n.error,h=n.className,p=n.extraData;if(d)u.message=d;else if("string"==typeof f){if(!(0<f.trim().length)){Yr.warn("Conviva Eco Sensor:: Mandatory field message is missing");var v=null;break e}u.message=f}else"object"===C(f)&&("string"==typeof f.message&&0<f.message.trim().length&&(u.message=hn(f.message,Ku.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_MESSAGE_LENGTH)),"string"==typeof f.name&&0<f.name.trim().length&&(u.exceptionName=hn(f.name,Ku.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_EXCEPTION_NAME_LENGTH)),"string"==typeof f.stack&&0<f.stack.trim().length&&(u.stackTrace=hn(f.stack,Ku.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_STACK_LENGTH)));if(0===u.message.trim().length){Yr.warn("Conviva Eco Sensor:: Mandatory field message is missing"),v=null;break e}"string"==typeof h&&0<h.trim().length&&(u.className=hn(h,Ku.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_CLASSNAME_LENGTH)),null!=p&&(u.extraData=p);var g=null==e?void 0:e.getConfig();if(null!=g&&g.configurationVersion&&(u.remoteConfigVersion=g.configurationVersion),null!=n&&n.configAppliedTime&&(u.configAppliedTime=null==n?void 0:n.configAppliedTime),null!=g&&g.cacheRefreshInterval&&(u.cacheRefreshInterval=g.cacheRefreshInterval),null!=n&&n.configAppliedSrc&&(u.configAppliedSrc=null==n?void 0:n.configAppliedSrc),localStorage){var m=localStorage.getItem(Ku.SAMPLING_STORAGE_RANDOM_NUMBER_KEY);null!=m&&(u.samplingRandomNumber=parseFloat(m))}"number"==typeof(null===(l=null===(s=null==g?void 0:g.controlIngestConfig)||void 0===s?void 0:s.sel)||void 0===l?void 0:l.pct)?(u.samplingPercentage=g.controlIngestConfig.sel.pct,u.samplingDecision=Ku.SAMPLING_STATUS.DERIVED,null!=C(null===(c=null==g?void 0:g.controlIngestConfig)||void 0===c?void 0:c.act)&&(u.extraData=Tr(Tr({},u.extraData),{samplingActionConfig:g.controlIngestConfig.act}))):u.samplingDecision=Ku.SAMPLING_STATUS.DEFAULT,"function"==typeof t&&"string"==typeof t()&&(u.samplingStatus=t()==Ku.SAMPLING_MODES.RCFG)}catch(e){Yr.warn("Error occurred while generating diagnostic object",e),v=null;break e}v=u}if(!(o=!v)){var y;try{var w=null==e?void 0:e.getConfig(),b=(null===(y=null==w?void 0:w.di)||void 0===y?void 0:y.lim)||10,k=Date.now();6e4<=k-yd&&(md=0,yd=k);var _=!(++md>b)}catch(e){Yr.warn("Conviva Eco Sensor:: Error occured while checking diagnostic event is allowed",e),_=!1}o=!_}if(!o&&"boolean"==typeof(null===(r=null==a?void 0:a.di)||void 0===r?void 0:r.en)&&!0===(null===(i=null==a?void 0:a.di)||void 0===i?void 0:i.en))if(null==e);else{var S=e.track,E=Q({event:{sc:"iglu:com.conviva/di/jsonschema/1-0-4",dt:ee({msg:v.message,cn:v.className,st:v.stackTrace,en:v.exceptionName,ed:v.extraData,rcv:v.remoteConfigVersion,cat:v.configAppliedTime,cri:v.cacheRefreshInterval,csrc:v.configAppliedSrc,srn:v.samplingRandomNumber,spr:v.samplingPercentage,ss:v.samplingStatus,sd:v.samplingDecision})}});S.call(e,E)}}}catch(e){Yr.warn("Conviva Eco Sensor:: Error occurred while sending reportDiagnosticError",e)}}function Ln(){var e,t,n=null===(e=null==vd?void 0:vd.core)||void 0===e?void 0:e.getConfig();Td=(null==(Td=(null===(t=null==n?void 0:n.clickcc)||void 0===t?void 0:t.cssSelectorList)||Td)?void 0:Td.replace(/\s+/g,""))||""}function Dn(e,t){if(!(e instanceof HTMLElement||e instanceof SVGElement))return null;var n=null==e?void 0:e.closest(Ed);if(n)return n;if(n=null==e?void 0:e.closest(Td))return function(e,t){var n;if(0===(e=e.querySelectorAll(Ed)).length)return null;if(1===e.length&&0<e[0].offsetWidth&&0<e[0].offsetHeight)return e[0];var r=t.clientX;if(t=t.clientY,e.length<=("IntersectionObserver"in window&&"fetch"in window&&"Promise"in window?Ku.MAX_NATIVE_SCAN:Ku.MAX_NATIVE_SCAN_LEGACY))for(var i=0;i<e.length;i++){var o=null===(n=e[i])||void 0===n?void 0:n.getBoundingClientRect();if(o&&r>=o.left&&r<=o.right&&t>=o.top&&t<o.bottom)return e[i]}return null}(n,t)||n;t=e,n=0;var r=Ku.CLICK_MAX_DEPTH;e:{if(t.style){if(t.style.visibility&&""!==t.style.visibility&&"hidden"==t.style.visibility||t.style.pointerEvents&&""!==t.style.pointerEvents&&"none"==t.style.pointerEvents){var i=!1;break e}if(t.style.cursor&&""!==t.style.cursor&&"pointer"==t.style.cursor){i=!0;break e}}i="hidden"!==(i=getComputedStyle(t)).visibility&&"none"!==i.pointerEvents&&"pointer"===i.cursor}if(i){for(;t&&t!==document.documentElement&&(t instanceof HTMLElement||t instanceof SVGElement)&&n<r;){if("function"==typeof t.onclick)return t;t=t.parentElement,n++}return e.closest(Ad)||e}return null}function Pn(e){try{if(!e||e.nodeType!==Node.ELEMENT_NODE)return null;if(e.id&&"string"==typeof e.id&&""!==e.id.trim()&&1===document.querySelectorAll("#".concat(function(e){return"undefined"!=typeof CSS&&CSS.escape?CSS.escape(e):e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")}(e.id))).length)return'//*[@id="'.concat(e.id,'"]');var t=[],n=e;for(e=function(){var e=n.tagName.toLowerCase(),r=n.parentElement;if(r){var i=Array.from(r.children).filter((function(t){return t.tagName.toLowerCase()===e}));1<i.length&&(i=i.indexOf(n)+1,e+="[".concat(i,"]")),t.unshift(e),n=r}else{if(!((r=n.getRootNode())instanceof ShadowRoot))return t.unshift(e),"break";t.unshift(e),t.unshift(">>"),n=r.host}};n&&n.nodeType===Node.ELEMENT_NODE&&"break"!==e(););return"/"+t.join("/")}catch(e){return Yr.warn("Conviva Browser Tracker caused Exception in calculateXPath method of user click tracking module",e),null}}function Un(e){try{var t=Date.now(),n=Ku.CLICK_DEBOUNCING_DELAY;if(null===Cd||t-Cd>=n){var r,i,o,a,s,l,c;try{var u,d;if(null!==(u=e.target)&&void 0!==u&&u.shadowRoot)var f=null===(d=e.composedPath)||void 0===d?void 0:d.call(e);var h=function(e,t){var n,r;try{if(!vd||!vd.core||!e)return null;var i=vd.core.getConfig();if(!0!==(null===(n=null==i?void 0:i.clickcc)||void 0===n?void 0:n.en))return null;var o=null===(r=null==i?void 0:i.clickcc)||void 0===r?void 0:r.uiMode;return o===gd.RAW?e:o===gd.BOTH?Dn(e,t)||e:Dn(e,t)}catch(e){return Yr.warn("Conviva App Tracker caused Exception in getTrackedElement method of user click tracking module",e),null}}(f&&f[0]||e.target,e);if(h&&(h instanceof HTMLElement||h instanceof HTMLInputElement)){e={};var p=Ku.CLICK_KEY_MAX_LENGTH;null!=h&&h.id&&(e.id=hn(h.id,p)),null!=h&&h.className&&(e.class=hn(h.className,p)),null!=h&&h.tagName&&(e.elementName=hn(h.tagName.toLowerCase(),p)),null!==(r=null==h?void 0:h.innerText)&&void 0!==r&&r.trim()&&(e.text=hn(h.innerText.trim(),p)),null!=h&&h.getAttribute("name")&&(e.name=hn(h.getAttribute("name")||"",p)),null!=h&&h.getAttribute("type")&&(e.elementType=hn((null===(i=h.getAttribute("type"))||void 0===i?void 0:i.toLowerCase())||"",p)),null!=h&&h.placeholder&&(e.placeholder=hn(h.placeholder,p)),null!=h&&h.getAttribute("type")&&"password"!==(null==h?void 0:h.getAttribute("type"))&&h.value&&(e.value=hn(h.value,p));var v=null===(o=null==vd?void 0:vd.core)||void 0===o?void 0:o.getConfig(),g=null===(a=null==v?void 0:v.clickcc)||void 0===a?void 0:a.collectattr;if(g)for(r=0;r<g.length;r++){var m=g[r],y=null==h?void 0:h.getAttribute(m);y&&(e[m]=hn(y,p))}try{if("A"===h.tagName.toUpperCase()||"AREA"===h.tagName.toUpperCase()){if(null!=h.href){var w=h.hostname||en(h.href),b=w.toLowerCase(),k=h.href.replace(w,b);/^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):/i.test(k)||(e.targetUrl=hn(decodeURIComponent(k),p))}h.target&&(e.target=hn(h.target,p))}}catch(e){Yr.warn("Conviva App Tracker caused Exception in handleClick href setting",e)}var _=null===(s=h.querySelector("use"))||void 0===s?void 0:s.getAttribute("xlink:href");_&&(e["xlink:href"]=hn(_,p));var C=Pn(h);C&&(e.xpath=hn(C,p));var S=null!==(l=null==v?void 0:v.clickcc)&&void 0!==l?l:{},E=ld.CUSTOM_EVENT,A=S.collect,I=S.block;if(s=null,A&&(s=Mn(A,e,E)),I&&null===s){var T=Mn(I,e,E);"boolean"==typeof T&&(s=!T)}var x=null===s||s;"boolean"==typeof x&&!1===x||null===(c=null==vd?void 0:vd.core)||void 0===c||c.track($({name:"conviva_click",data:JSON.stringify(e)}))}}catch(e){Yr.warn("Conviva App Tracker caused Exception in handleClick method of user click tracking module",e)}0<Sd&&Nn(vd.core,vd.getSamplingMode,{className:"clickTracking - droppedEvent",message:"total click events dropped to Avoid tracking spam from rapid clicks",extraData:{clickEventDropped:Sd}}),Sd=0}else Sd++;Cd=t}catch(e){console.warn("Conviva App Tracker caused Exception in immediateClickHandler method of user click tracking module",e)}}function Fn(){try{kd||"undefined"==typeof document||(document.body?(_d=Un,rn(document.body,"click",_d,{signal:$u,capture:!0,passive:!0}),kd=!0):document.addEventListener("DOMContentLoaded",(function(){null!==document&&void 0!==document&&document.body&&(_d=Un,rn(document.body,"click",_d,{signal:$u,capture:!0,passive:!0}),kd=!0)})),Ln(),null!==window&&void 0!==window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",(function(){Ln()}),{signal:$u}))}catch(e){Yr.warn("Conviva App Tracker caused Exception in enableUserClickTracking method of user click tracking module",e)}}function zn(){try{kd&&"undefined"!=typeof document&&document.body&&(_d&&(document.body.removeEventListener("click",_d),_d=null),kd=!1)}catch(e){Yr.warn("Conviva App Tracker caused Exception in disableUserClickTracking method of user click tracking module",e)}}function Bn(e,t,n,r){return!(null==n||!n.enabled||null==n||!n.attributeExtraction)&&(!!(e=function(e,t,n){var r,i,o,a,s,l,c;if(e&&0<e.length){var u={targetUrl:null===(r=null==t?void 0:t.requestDetails)||void 0===r?void 0:r.url};for(r=0;r<e.length;r++){var d=e[r],f=d.conditions;d=A(d,["conditions"]);try{if(gn(u,f)){f=0;for(var h=Object.entries(d);f<h.length;f++){var p=h[f],v=p[0],g=p[1];try{if(g&&0<d[v].length){if(v===Qu.response_headers&&(u[v]=null===(i=null==t?void 0:t.responseDetails)||void 0===i?void 0:i.headers,Array.isArray(g)))for(var m=0,y=g;m<y.length;m++){var w=y[m],b=kn(u[v],w);if(null!=b)return b}if(v===Qu.request_headers&&(u[v]=null===(o=null==t?void 0:t.requestDetails)||void 0===o?void 0:o.headers,Array.isArray(g)))for(m=0,y=g;m<y.length;m++)if(w=y[m],null!=(b=kn(u[v],w)))return b;if(v===Qu.request_body){var k=nd(null===(a=null==t?void 0:t.requestDetails)||void 0===a?void 0:a.headers);if((void 0!==k&&(k.toLowerCase().includes("text/plain")||k.toLowerCase().includes("json")||k.toLowerCase().includes("text/javascript")||k.toLowerCase().includes("application/javascript")||k.toLowerCase().includes("text/html"))||void 0===k)&&(u[v]=null===(s=null==t?void 0:t.requestDetails)||void 0===s?void 0:s.body,Array.isArray(g)))for(m=0,y=g;m<y.length;m++)if(w=y[m],null!=(b=kn(u[v],w)))return b}if(v===Qu.response_body){var _=nd(null===(l=null==t?void 0:t.responseDetails)||void 0===l?void 0:l.headers);if(void 0!==_&&(_.toLowerCase().includes("text/plain")||_.toLowerCase().includes("json")||_.toLowerCase().includes("text/javascript")||_.toLowerCase().includes("application/javascript")||_.toLowerCase().includes("text/html"))&&(u[v]=null===(c=null==t?void 0:t.responseDetails)||void 0===c?void 0:c.body,Array.isArray(g)))for(m=0,y=g;m<y.length;m++)if(w=y[m],null!=(b=kn(u[v],w)))return b}if(v===Qu.request_query&&(yn(u,n),Array.isArray(g)))for(m=0,y=g;m<y.length;m++)if(w=y[m],null!=(b=kn(u[v],w)))return b}}catch(e){console.warn("Conviva App Tracker: Error in extracting attributes nwreqConfig ".concat(e))}}}}catch(e){console.warn("Conviva App Tracker: Error in collecting attributes nwreqConfig ".concat(e))}}}}(n.attributeExtraction,{requestDetails:e,responseDetails:t}))&&(r.setConversationId("string"==typeof e?e:JSON.stringify(e)),!0))}function jn(e,t,n,r,i,o,a){var s,l,c;return void 0===o&&(o={}),I(this,void 0,void 0,(function(){var u,d,f,h,p,v,g,m,y,w,b,k,_,C,S,E,A;return T(this,(function(I){switch(I.label){case 0:u=null!==(s=o.idleMs)&&void 0!==s?s:3e4,d=null!==(l=o.maxEvents)&&void 0!==l?l:1e4,f=null!==(c=o.bufferMaxBytes)&&void 0!==c?c:1e6,h=e.getReader(),p=new TextDecoder("utf-8"),v="",g=0,m=void 0,(y=function(){void 0!==m&&(clearTimeout(m),m=void 0),m=setTimeout((function(){console.warn("Conviva App Tracker:: stream idle >",u,"ms  cancelling",t),h.cancel()}),u)})(),I.label=1;case 1:I.trys.push([1,5,6,7]),I.label=2;case 2:return[4,h.read()];case 3:if(w=I.sent(),b=w.value,w.done)return[3,4];if(y(),v+=p.decode(b,{stream:!0}),(new TextEncoder).encode(v).length>f)return console.warn("Conviva App Tracker:: SSE buffer exceeded",f,"bytes, cancelling stream",t),h.cancel(),[3,4];for(k=void 0;-1!==(k=v.search(n));)if(_=v.slice(0,k).replace(/\s+$/,""),S=(C=v.match(n))?C[0].length:0,v=v.slice(k+S),(E=r(_))&&(i(E),++g>=d)){console.warn("Conviva App Tracker:: event budget reached  cancelling",t),h.cancel();break}return[3,2];case 4:return[3,7];case 5:if(!((A=I.sent())instanceof DOMException&&"AbortError"===A.name))throw A;return[3,7];case 6:return clearTimeout(m),h.releaseLock(),a&&a(),[7];case 7:return[2]}}))}))}function Gn(e){var t={data:""},n=0;for(e=e.split(/\n+/);n<e.length;n++){var r=e[n];if(r&&!r.startsWith(":")){var i=r.indexOf(":"),o=(-1===i?r:r.slice(0,i)).trim();switch(r=-1===i?"":r.slice(i+1).replace(/^\s+/,""),o){case"data":t.data+=(t.data?"\n":"")+r;break;case"event":t.event=r;break;case"id":t.id=r}}}return t.data?t:null}function Hn(e){return{data:e}}function Vn(e,t,n){var r={};for(n&&(n=new URL(n).searchParams,e||(e={}),n.forEach((function(t,n){e[n]=t}))),n=0,t=t.cond;n<t.length;n++){var i=t[n],o=kn(e,i.key);if("string"==typeof o)for(var a=0,s=i.val;a<s.length;a++){var l=s[a],c=!1;switch(i.op){case"contains":default:c=o.toLowerCase().includes(l.toLowerCase());break;case"==":case"equals":c=o===l;break;case"startsWith":c=o.startsWith(l);break;case"endsWith":c=o.endsWith(l)}c&&(r[i.type]||(r[i.type]={}),r[i.type][l]=c)}}return r}function Zn(e){for(var t=[e],n=0,r=["\r\n","\n","\0"];n<r.length;n++){var i=r[n];if(e.includes(i)){t=e.split(i).filter((function(e){return 0<e.trim().length}));break}}return t}function qn(e,t,n,r,i,o,a,s,l,c,u,d,f,h,p,v,g,m,y){function w(e){var t=Object.keys(e).map((function(t){return[t,e[t]]})).reduce((function(e,t){return e[t[0]]=t[1].toString(),e}),{});return{evt:t,bytes:b(JSON.stringify(t))}}function b(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);127>=r?t+=1:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,n++):t=65535>r?t+3:t+4}return t}function k(e,t){t=E(t,!0,!1),e=A(I([e.evt]));try{p().toLowerCase()!==id.NONE&&(e=ba.gzip(e,{level:6}),t.setRequestHeader("Content-Encoding",id.GZIP))}catch(e){}y()!==Ku.SAMPLING_MODES.NONE&&t.send(e)}function _(e){try{if("undefined"!=typeof window&&void 0!==window.__CONVIVA_VISUAL_ACTIVATION_EXTENSION__&&"function"==typeof window.__CONVIVA_VISUAL_ACTIVATION_EXTENSION__.postMessage){var t=A(I(e));t&&0<t.length&&window.__CONVIVA_VISUAL_ACTIVATION_EXTENSION__.postMessage(t)}}catch(e){Yr.warn("Error occured while sending message to Visual Labelling Extension",e)}}function S(e){for(void 0===e&&(e=!1);N.length&&"string"!=typeof N[0]&&"object"!==C(N[0]);)N.shift();if(1>N.length)M=!1;else{if(!Xt(x))throw"No collector configured";if(M=!0,window.clearTimeout(L),L=-1,U){var t=function(e){for(var t=0,n=0;t<e.length&&!((n+=e[t].bytes)>=g());)t+=1;return t},r=void 0,i=void 0;if("object"===C(N[0])){var o=E(r=x,!0,e);i=t(N)}else r=T(N[0]),o=E(r,!1,e),i=1;var a=setTimeout((function(){o.abort(),M=!1}),c);if(o.onreadystatechange=function(){4===o.readyState&&(clearTimeout(a),200<=o.status&&300>o.status?S():(Yr.error("Status ".concat(o.status,", will not retry.")),M=!1))},"object"!==C(N[0]))o.send();else if(0<(t=N.slice(0,i)).length){if(e=!1,t=t.map((function(e){return e.evt})),P){var s=new Blob([A(I(t))],{type:"application/json"});try{e=navigator.sendBeacon(r,s)}catch(t){e=!1}}if(!0===e)S();else{r=A(I(t));try{p().toLowerCase()!==id.NONE&&(r=ba.gzip(r,{level:6}),o.setRequestHeader("Content-Encoding",id.GZIP))}catch(e){}try{y()!==Ku.SAMPLING_MODES.NONE&&o.send(r)}catch(e){}}}!function(e){for(var t=0;t<e;t++)N.shift();n&&an(B,JSON.stringify(N.slice(-1*l())))}(i)}else if(u||"object"===C(N[0]))M=!1;else{i=new Image(1,1);var d=!0;i.onload=function(){d&&(d=!1,N.shift(),n&&an(B,JSON.stringify(N.slice(-1*l()))),S())},i.onerror=function(){d&&(M=d=!1)},i.src=T(N[0]),setTimeout((function(){d&&M&&(d=!1,S())}),c)}}}function E(e,t,n){var r=new XMLHttpRequest;for(var i in t?(r.open("POST",e,!n),r.setRequestHeader("Content-Type","application/json; charset=UTF-8")):r.open("GET",e,!n),r.withCredentials=f,u&&r.setRequestHeader("SP-Anonymous","*"),d)Object.prototype.hasOwnProperty.call(d,i)&&r.setRequestHeader(i,d[i]);return r}function A(e){return JSON.stringify({sc:"sp/pd/1-0-4",dt:e})}function I(e){for(var t=(new Date).getTime().toString(),n=0;n<e.length;n++)e[n].stm=t;return e}function T(e){return s?x+e.replace("?","?stm="+(new Date).getTime()+"&"):x+e}null!==window&&void 0!==window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",(function(){S()}),{signal:$u});var x,R,O,M=!1,N=[],L=-1,D=!0===(r="string"==typeof r?r.toLowerCase():r)||"beacon"===r||"true"===r,P=!(!(D&&window.navigator&&window.navigator.sendBeacon)||(R=window.navigator.userAgent,(O=(O=R).match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//))&&O.length&&parseInt(O[0])<=13||function(e,t,n){return!(!(n=n.match("(Macintosh;.*Mac OS X (\\d+)_(\\d+)[_\\d]*.*) AppleWebKit/"))||!n.length)&&(parseInt(n[2])<=e||parseInt(n[2])===e&&parseInt(n[3])<=t)}(10,15,R)&&function(e){var t;return(t=/^(?!.*Chrome)(?!.*Chromium)(?!.*Edg)(?!.*OPR)(?=.*Safari)/.test(e))&&(t=!/(Chrome|Chromium|Edg|OPR)/.test(e)),t}(R)))&&D,U=!(!window.XMLHttpRequest||!("withCredentials"in new XMLHttpRequest)),F="get"!==r&&U&&("post"===r||D),z=F?i:"/i";r="convivaOutQueue_".concat(e,"_").concat(F?"post2":"get");var B="convivaOutQueue_".concat(e,"_").concat(F?"post2":"get");if(un(r),un("".concat(r,".expires")),D&&(d={}),o=n&&function(){try{var e=!!window.localStorage}catch(t){e=!0}if(!e)return!1;try{var t=window.localStorage;return t.setItem("modernizr","modernizr"),t.removeItem("modernizr"),!0}catch(e){return!1}}()&&F&&o||1,n)try{var j=window.localStorage.getItem(B);N=j?JSON.parse(j):[]}catch(R){}return Array.isArray(N)||(N=[]),t.outQueues.push(N),U&&1<o&&t.bufferFlushers.push((function(e){M||S(e)})),{enqueueRequest:function(e,t,r){if(y()!=Ku.SAMPLING_MODES.NONE){if(x=t+z,F){if(_([(e=w(e)).evt]),t=g(),e.bytes>=t)return M||S(),Yr.warn("Event ("+e.bytes+"B) too big, max is "+t),void k(e,x);N.push(e)}else{var s,c="?",u={co:!0,cx:!0},d=!0;for(s in e)e.hasOwnProperty(s)&&!u.hasOwnProperty(s)&&(d?d=!1:c+="&",c+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));for(var f in u)e.hasOwnProperty(f)&&u.hasOwnProperty(f)&&(c+="&"+f+"="+encodeURIComponent(e[f]));if(0<(u=a())&&(d=b(d=T(c)))>=u)return Yr.warn("Event ("+d+"B) too big, max is "+u),void(U&&(e=w(e),_([e.evt]),k(e,t+i)));N.push(c)}t=!1,n&&(t=an(B,JSON.stringify(N.slice(-1*l())))),!M&&-1===L&&t&&(L=window.setTimeout(S,m()+Math.floor(Math.random()*h))),!M&&(!t||!v()||F&&(F?N.reduce((function(e,t){return e+t.bytes}),0):N.reduce((function(e,t){return e+t.length}),0))>g()||N.length>o||r)&&S()}},executeQueue:function(){M||S()},setUseLocalStorage:function(e){n=e},setAnonymousTracking:function(e){u=e},setCollectorUrl:function(e){x=e+z},setBufferSize:function(e){o=e},setCustomHeaders:function(e){d=e}}}function Wn(e){try{null!=Md&&Md.isAllowedToSendEvent()&&Kn({message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error})}catch(e){console.warn("Conviva App Tracker caused Exception in captureError method of error tracking module",e)}}function Yn(e){try{null!=Md&&Md.isAllowedToSendEvent()&&Kn({message:e.reason})}catch(e){console.warn("Conviva App Tracker caused Exception in captureRejection method of error tracking module",e)}}function Kn(e){var t,n,r=e.message,i=e.filename,o=e.lineno,a=e.colno,s=e.error,l=e.context;if(e=e.timestamp,s=s&&s.stack?s.stack:void 0,!(void 0===r||null===r&&void 0===s||null===s&&void 0===o||null===o&&void 0===a||null===a&&void 0===i||null===i)){var c=null===(t=null==Od?void 0:Od.core)||void 0===t?void 0:t.getConfig();null!=c&&c.exceptionAutotracking&&(null===(n=null==Od?void 0:Od.core)||void 0===n||n.track(Q({event:{sc:"sp/ae/1-0-1",dt:{programmingLanguage:"JAVASCRIPT",message:r?Qd(r,2048):"JS Exception.",stackTrace:s?Qd(s,8192):"",lineNumber:o,lineColumn:a,fileName:i}}}),l,e))}}function Jn(e){return e=new URL(e,location.href),"".concat(e.origin).concat(e.pathname).concat(e.search).concat(e.hash)}function Xn(e){var t=(e=e.split("#"))[1];return{originPathSearch:e[0],hash:null!=t?t:""}}function Qn(e,t){return new Promise((function(n){var r=function(){var i=performance.now();if(i-e>=ef.maxMeasurementMs)n(i);else{var o=performance.now()-((null==tf?void 0:tf.lastLongTaskTs)||0)>=t,a=0===((null==rf?void 0:rf.getInflightRequests())||0);o&&a?n(i):requestAnimationFrame(r)}};setTimeout((function(){return requestAnimationFrame(r)}),50)}))}function $n(e){var t=history[e];history[e]=function(n,r,i){return n=t.call(this,n,r,i),er(e,null!=i?i:location.href),n}}function er(e,t){if(tf){if(t=Jn(t),!ef.includeHashChanges){var n=Xn(tf.lastUrlKey),r=Xn(t);if(n.originPathSearch===r.originPathSearch&&n.hash!==r.hash)return}t===tf.lastUrlKey&&"replaceState"!==e||(tf.lastUrlKey=t,tf.currentMeasurement&&(tf.currentMeasurement=null),function(e,t){I(this,void 0,void 0,(function(){var n,r,i,o,a;return T(this,(function(s){switch(s.label){case 0:return tf&&nf?(n=++tf.navSeq,r=performance.now(),tf.currentMeasurement={id:n,startTime:r,urlKey:t,trigger:e},[4,Qn(r,ef.idleWindowMs)]):[2];case 1:if(i=s.sent(),!tf.currentMeasurement||tf.currentMeasurement.id!==n)return[2];o=Math.round((i-r)/1e3*100)/100,a={load_time:o,page_url:t,trigger:e,navigation_id:n,start_time:Math.round(r/1e3*100)/100,end_time:Math.round(i/1e3*100)/100};try{nf.trackCustomEvent({name:"conviva_soft_navigation",data:a})}catch(e){}return tf.currentMeasurement=null,[2]}}))}))}(e,t))}}function tr(e){var t,n,r;try{var i=null===(t=null==e?void 0:e.core)||void 0===t?void 0:t.getConfig();if(function(e){var t,n,r,i,o;null!=e&&e.softNavigationTrackingConfiguration&&(e=e.softNavigationTrackingConfiguration,ef=Tr(Tr({},$d),{idleWindowMs:null!==(t=e.idleWindowMs)&&void 0!==t?t:$d.idleWindowMs,maxMeasurementMs:null!==(n=e.maxMeasurementMs)&&void 0!==n?n:$d.maxMeasurementMs,includeHashChanges:null!==(r=e.includeHashChanges)&&void 0!==r?r:$d.includeHashChanges,domainAllowlist:null!==(i=e.domainAllowlist)&&void 0!==i?i:$d.domainAllowlist,domainBlocklist:null!==(o=e.domainBlocklist)&&void 0!==o?o:$d.domainBlocklist,requireLcp:$d.requireLcp,lcpTimeoutMs:$d.lcpTimeoutMs}))}(i),(null!==(r=null===(n=null==i?void 0:i.softNavigationTrackingConfiguration)||void 0===n?void 0:n.enabled)&&void 0!==r?r:od.softNavigationTrackingConfiguration.enabled)&&(null==e?void 0:e.getSamplingMode())!==Ku.SAMPLING_MODES.NONE){var o=location.hostname;ef.domainAllowlist.length&&!ef.domainAllowlist.some((function(e){return o.endsWith(e)}))||ef.domainBlocklist.some((function(e){return o.endsWith(e)}))||(tf={lastLongTaskTs:0,lastLcpTs:0,currentMeasurement:null,navSeq:0,patched:!1,lastUrlKey:Jn(location.href)},nf=e,rf=Kd.getInstance(e.trackNetworkRequest,e.trackerConfiguration,e.getSamplingMode),function(){if(tf&&!tf.patched){tf.patched=!0;try{new PerformanceObserver((function(e){var t=0;for(e=e.getEntries();t<e.length;t++)tf.lastLongTaskTs=performance.now()})).observe({entryTypes:["longtask"]})}catch(e){}try{var e=new PerformanceObserver((function(e){var t=0;for(e=e.getEntries();t<e.length;t++)tf.lastLcpTs=e[t].startTime}));e.observe({type:"largest-contentful-paint",buffered:!0}),null===window||void 0===window||window.addEventListener("pagehide",(function(){try{e.disconnect()}catch(e){}}))}catch(e){}}}(),$n("pushState"),$n("replaceState"),addEventListener("popstate",(function(){return er("popstate",location.href)}),{signal:$u}),addEventListener("hashchange",(function(){return er("hashchange",location.href)}),{signal:$u}),document.addEventListener("DOMContentLoaded",(function(){tf&&(tf.lastUrlKey=Jn(location.href))}),{signal:$u}))}}catch(e){}}function nr(){var e=localStorage.getItem("Conviva.sdkConfig"),t={};if(e)try{t=JSON.parse(e)}catch(e){}return t}function rr(){var e=null;try{if(window.localStorage){var t=localStorage.getItem(Ku.REMOTE_CONFIG_STORAGE_KEY);t&&(e=JSON.parse(t).sessionReplayConfiguration)}}catch(e){}return e}function ir(e,t){if(e===t||Number.isNaN(e)&&Number.isNaN(t))return!0;if("object"!==C(e)||null===e||"object"!==C(t)||null===t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((function(n){return r.includes(n)&&ir(e[n],t[n])}))}function or(){if("undefined"==typeof window)return!1;try{return window.top===window.self}catch(e){return!1}}function ar(e,t){var n;try{if("undefined"!=typeof window&&(null===(n=window.__CONVIVA_SESSION_REPLAY__)||void 0===n||!n.inited)&&(window.__CONVIVA_SESSION_REPLAY__={inited:!0},Nd=e,Ld=t,or())){if(af="true"===(null===localStorage||void 0===localStorage?void 0:localStorage.getItem(Ku.SESSION_RECORDING_STARTED)))lr(rr());null!==window&&void 0!==window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",(function(){try{if(Nd.getSamplingMode()!==Ku.SAMPLING_MODES.RCFG)af&&(null===localStorage||void 0===localStorage||localStorage.setItem(Ku.SESSION_RECORDING_STARTED,"false"),sr(!0)),lf&&(lf=null);else{var e=rr();if((null===lf||!ir(lf,e))&&(lf=e,or())){if(e){var t=!1,n=!1;try{if(t=e.enabled)try{var r=nr(),i=e.sampling.pct;n=0!==i&&(100===i||of.shouldInclude(i,r.clId))}catch(e){}}catch(e){}var o=t&&n}else o=!1;e&&o?(sf&&sr(!1),af||(af=!0,null===localStorage||void 0===localStorage||localStorage.setItem(Ku.SESSION_RECORDING_STARTED,"true"),lr(e))):af&&(null===localStorage||void 0===localStorage||localStorage.setItem(Ku.SESSION_RECORDING_STARTED,"false"),sr(!0))}}}catch(e){}}),{signal:$u})}}catch(e){}}function sr(e){null==sf||sf.stopRecording(e),af=!1,sf=null}function lr(e){or()&&(sf=new cf(Nd,Ld,e)).initiateRecording()}function cr(){if(!uf)return!1;var e=uf.core.getConfig();return!0===(null==(e=null==e?void 0:e.valueProbes)?void 0:e.enabled)}function ur(e){return new Promise((function(t){return setTimeout(t,e)}))}function dr(e){return e=new URL(e,location.href),"".concat(e.origin).concat(e.pathname).concat(e.search).concat(e.hash)}function fr(e){var t=e.emit||"once_per_view";return"always"===t||("once_per_session"===t?!hf.has(e.id):"once_per_view"===t&&!pf.has(e.id))}function hr(e,t){if(!t)return!0;var n=t.key,r=t.op;t=t.val;var i=("class"===n?e.className||"":"id"===n?e.id||"":e.getAttribute(n)||"").toLowerCase();return e=Array.isArray(t)?t.map((function(e){return String(e).toLowerCase()})):[String(t).toLowerCase()],"=="===r?e.includes(i):"contains"===r&&e.some((function(e){return i.includes(e)}))}function pr(e){return I(this,void 0,void 0,(function(){return T(this,(function(t){switch(t.label){case 0:if(!cr())return[2];if(10<=vf)return gf.push(e),[2];vf++,t.label=1;case 1:return t.trys.push([1,,3,4]),[4,vr(e)];case 2:return t.sent(),[3,4];case 3:return vf--,0<gf.length&&pr(gf.shift()),[7];case 4:return[2]}}))}))}function vr(e){var t,n,r;return I(this,void 0,void 0,(function(){var i,o,a,s,l,c,u,d,f,h,p,v,g,m,y,w;return T(this,(function(b){switch(b.label){case 0:if(!cr()||!fr(e))return[2];i=Date.now(),o=[0,50,200],a=null!==(n=null===(t=e.strategy)||void 0===t?void 0:t.maxTotalMs)&&void 0!==n?n:1e3,s=null!==(r=e.strategy)&&void 0!==r&&r.retries&&0<e.strategy.retries.length?e.strategy.retries:o;for(var k=e.id,_=0,C=0;C<k.length;C++)_=(_<<5)-_+k.charCodeAt(C),_&=_;l=Math.abs(_)%100,c=0,u=[],h=f=d=0,b.label=1;case 1:return h<s.length?(p=s[h],0<(v=0===h?0:Math.max(0,p+2*(l%20/20-.5)*Math.min(.1*p,5)))?[4,ur(v)]:[3,3]):[3,5];case 2:b.sent(),b.label=3;case 3:if(Date.now()-i>=a)return[3,5];c++,k=e.conditions,_=[],C=0;for(var S=e.selectors;C<S.length;C++){var E=S[C];try{var A=document.querySelectorAll(E);for(E=0;E<A.length;E++){var I=A[E];hr(I,k)&&_.push(I)}if(0<_.length)break}catch(e){}}0<(g=_).length&&0===u.length&&(u=g,d=Date.now()-i,f=c),b.label=4;case 4:return h++,[3,1];case 5:if(0<u.length){for(m=e.emit||"once_per_view",y=0,w=u;y<w.length;y++){var T=w[y];if(b=e,A=d,I=f,uf)try{if(uf.getSamplingMode()!==Ku.SAMPLING_MODES.NONE){var x=void 0,R=void 0,O=T,M=b,N={};if(_=Ku.CLICK_KEY_MAX_LENGTH,O.id&&(N.id=hn(O.id,_)),O.className&&(N.class=hn(O.className,_)),O.tagName&&(N.elementName=hn(O.tagName.toLowerCase(),_)),null!==(R=O.innerText)&&void 0!==R&&R.trim()&&(N.text=hn(O.innerText.trim(),_)),O.getAttribute("name")&&(N.name=hn(O.getAttribute("name")||"",_)),O.getAttribute("type")&&(N.elementType=hn((null===(x=O.getAttribute("type"))||void 0===x?void 0:x.toLowerCase())||"",_)),null!=O&&O.placeholder&&(N.placeholder=hn(O.placeholder,_)),"password"!==O.getAttribute("type")&&O.value&&(N.value=hn(O.value,_)),M.collectAttributes&&0<M.collectAttributes.length)for(x=0,C=M.collectAttributes;x<C.length;x++)S=C[x],(E=O.getAttribute(S))&&(N[S]=hn(E,_));k=N;e:{var L=b.selectors;for(O=0;O<L.length;O++){var D=L[O];try{if(T.matches(D)){var P=D;break e}}catch(e){}}P=null}var U={probeId:b.id,selectorMatched:P||b.selectors[0]||"",timestamp:Date.now(),attemptCount:I,discoveryTime:A,method:1===I?"immediate":"retry"},F=Tr(Tr({},k),U);uf.core.track($({name:"conviva_dom_value_probe",data:JSON.stringify(F)}))}}catch(e){Yr.warn("Conviva App Tracker: Error emitting probe event",e)}}k=e.id,"once_per_session"===(_=m||"once_per_view")?hf.add(k):"once_per_view"===_&&pf.add(k)}return[2]}}))}))}function gr(e){if(cr()&&uf&&0!==e.length){var t=0;for(e=e.filter((function(e){return fr(e)}));t<e.length;t++)pr(e[t])}}function mr(){var e;if(cr()&&uf){var t=uf.core.getConfig(),n=null==t?void 0:t.valueProbes;null!=n&&n.enabled&&null!==(e=null==n?void 0:n.probes)&&void 0!==e&&e.length&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){cr()&&requestAnimationFrame((function(){return gr(n.probes)}))})):cr()&&requestAnimationFrame((function(){return gr(n.probes)})))}}function yr(e,t){var n;cr()&&uf&&((t=dr(t))===dr(location.href)&&"replaceState"!==e||(pf.clear(),null!=(e=null==(e=uf.core.getConfig())?void 0:e.valueProbes)&&e.enabled&&null!==(n=null==e?void 0:e.probes)&&void 0!==n&&n.length&&(0<(n=e.probes.filter((function(e){return"once_per_view"===(e.emit||"once_per_view")}))).length&&gr(n))))}function wr(e){try{uf=e,(null==e?void 0:e.getSamplingMode())!==Ku.SAMPLING_MODES.NONE&&cr()&&(function(){if(cr()&&!df&&uf){var e=history.pushState,t=history.replaceState;history.pushState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.apply(this,t),cr()&&yr("pushState",location.href)},history.replaceState=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.apply(this,e),cr()&&yr("replaceState",location.href)},rn(window,"popstate",(function(){cr()&&yr("popstate",location.href)}),{signal:$u}),df=!0}}(),"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",(function(){ff?cr()?(hf.clear(),pf.clear(),mr()):(hf.clear(),pf.clear()):ff=!0}),{signal:$u}),mr())}catch(e){Yr.warn("Conviva App Tracker: Error enabling DOM value probe",e)}}function br(e,t){return kf.get(e)||kf.set(e,new t),kf.get(e)}function kr(e){var t,n;try{var r=Pd.core.getConfig();if(!0===(null===(t=null==r?void 0:r.webVitals)||void 0===t?void 0:t.enabled)){var i="conviva_webvitals_".concat(e.name.toLowerCase()),o={value:e.value,rating:e.rating,delta:e.delta,id:e.id,navigationType:e.navigationType,attribution:_r(e,(null===(n=null==r?void 0:r.webVitals)||void 0===n?void 0:n.collectattr)||[])};Pd.core.track($({name:i,data:JSON.stringify(o)}))}}catch(e){console.warn("Error sending Web Vitals event",e)}}function _r(e,t){var n=e.attribution;if(n){var r={};return(e={LCP:"target",INP:"interactionTarget",CLS:"largestShiftTarget"}[e.name])&&null!=n[e]&&(r[e]=n[e]),t.forEach((function(e){if(e){var t=e.split("."),i=n;for(e=0;e<t.length;e++){var o=t[e];if(!i||"object"!==C(i)||!(o in i))return;i=i[o]}var a=r;t.forEach((function(e,n){n===t.length-1?a[e]=i:("object"===C(a[e])&&null!==a[e]||(a[e]={}),a=a[e])}))}})),Object.keys(r).length?r:void 0}}function Cr(e,t,n,r,i){void 0===i&&(i={});var o=[];e=function(e,t,n,r,i){function s(){(Ue=_n(window.location.hostname,window.location.href,nn()))[1]!==ze&&(Be=nn(ze)),Fe=tn(Ue[0]),ze=Ue[1]}function l(e){try{var t=(new Date).getTime(),n=e.currentTarget;if(null!=n&&n.href){e="_cnv="+Re+"."+t;var r=n.href.split("#"),i=r[0].split("?"),o=i.shift(),a=i.join("?");if(a){i=!0;var s=a.split("&");for(t=0;t<s.length;t++)if("_cnv="===s[t].substr(0,5)){i=!1,s[t]=e,a=s.join("&");break}i&&(a=e+"&"+a)}else a=e;r[0]=o+"?"+a;var l=r.join("#");n.href=l}}catch(e){console.warn("Conviva App Tracker:: Error in linkDecorationHandler of decorateLinks ".concat(e))}}function c(e){if("undefined"!=typeof document&&document.links&&0<document.links.length)for(var t=0;t<document.links.length;t++){var n=document.links[t];!n.spDecorationEnabled&&e(n)&&(rn(n,"click",l,!0),rn(n,"mousedown",l,!0),n.spDecorationEnabled=!0)}}function u(e){if(we){var t=/#.*/;e=e.replace(t,"")}return be&&(t=/[{}]/g,e=e.replace(t,"")),e}function d(e){return(e=/^([a-z]+):/.exec(e))?e[1]:null}function f(e){if(e=Xe+e+"."+xe,"localStorage"==ct){try{var t=window.localStorage,n=t.getItem(e+".expires");if(null===n||+n>Date.now())var r=t.getItem(e);else t.removeItem(e),t.removeItem(e+".expires"),r=void 0}catch(e){r=void 0}return r}if("cookie"==ct||"cookieAndLocalStorage"==ct)return cn(e)}function h(){s(),xe=$r((Qe||Fe)+($e||"/")).slice(0,4)}function p(){Se=(new Date).getTime()}function v(){var e=g(),t=e[0];t<Ee?Ee=t:t>Ae&&(Ae=t),(e=e[1])<Ie?Ie=e:e>Te&&(Te=e),p()}function g(){var e="undefined"!=typeof document?null===document||void 0===document?void 0:document.documentElement:void 0;return e?[e.scrollLeft||window.pageXOffset,e.scrollTop||window.pageYOffset]:[0,0]}function m(){var e=g(),t=e[0];Ae=Ee=t,Te=Ie=e=e[1]}function y(){b(Xe+"ses."+xe,"*",ot)}function w(e){var t=Xe+"id."+xe;e.shift(),b(t,e=e.join("."),it)}function b(e,t,n){lt&&!at||("localStorage"==ct?an(e,t,n):("cookie"==ct||"cookieAndLocalStorage"==ct)&&cn(e,t,n,$e,Qe,et,tt))}function k(e){var t=Xe+"id."+xe,n=Xe+"ses."+xe;sn(t),sn(n),ln(t,Qe,et,tt),ln(n,Qe,et,tt),null!=e&&e.preserveSession||(Oe=Zr.v4(),ft=1),null!=e&&e.preserveUser||(Re=Zr.v4(),Me=null)}function _(e){e&&e.stateStorageStrategy&&(i.stateStorageStrategy=e.stateStorageStrategy,ct=he(i)),lt=!!i.anonymousTracking,at=pe(i),st=ve(i),ht.setUseLocalStorage("localStorage"==ct||"cookieAndLocalStorage"==ct),ht.setAnonymousTracking(st)}function S(){var e;try{var t=null;if(null!==(e=null==i?void 0:i.configs)&&void 0!==e&&e.enableClIdInCookies){e:{e="Conviva_sdkConfig";try{var n=cn(e);if(n&&0<n.length){try{if("string"==typeof n&&0!==n.length&&/%[0-9A-Fa-f]{2}/.test(n))var r=decodeURIComponent(n),o=!/%[0-9A-Fa-f]{2}/.test(r);else o=!1}catch(e){o=!1}if(!o){var a=n;break e}ln(e,M(),"None",!0)}a=window.localStorage.getItem(e)}catch(e){Yr.warn("getConvivaCookie",e),a=null}}a&&(t=a)}else try{ln("Conviva_sdkConfig",M(),"None",!0)}catch(e){}t||(t=window.localStorage.getItem("Conviva.sdkConfig"));var s=JSON.parse(t||"{}");"{}"===s||void 0===s?_e=N():(_e=s.clId||N(),2147483648<=ut?ut=-1:ut++);try{Ce=Math.floor(2147483647*Math.random())}catch(e){console.warn(e),Ce=-1}var l=Tr(Tr({},s),{clId:_e,iid:Ce});e:{var c;try{t=null;try{t=JSON.stringify(l)}catch(e){break e}if(window.localStorage.setItem("Conviva.sdkConfig",t),null!==(c=null==i?void 0:i.configs)&&void 0!==c&&c.enableClIdInCookies){l=t;try{var u=M();cn("Conviva_sdkConfig",l,void 0,"/",u,"None",!0)}catch(e){Yr.warn("setConvivaCookie",e)}}}catch(e){}}}catch(e){Yr.warn("getEventIndexByClid",e)}lt&&!at||(u="none"!=ct&&!!f("ses"),(l=E())[1]?c=l[1]:(c=lt?"":Zr.v4(),l[1]=c),Re=c,Oe=u?l[6]:Cn(l),ft=l[3],"none"!=ct&&(y(),Sn(l),w(l)))}function E(){return"none"==ct?["1","",0,0,0,void 0,"","","",void 0]:function(e,t,n,r){var i=Math.round((new Date).getTime()/1e3);e?(e=e.split(".")).unshift("0"):e=["1",t,i,r,i,"",n],e[6]&&"undefined"!==e[6]||(e[6]=Zr.v4()),e[7]&&"undefined"!==e[7]||(e[7]=""),e[8]&&"undefined"!==e[8]||(e[8]=""),e[9]&&"undefined"!==e[9]||(e[9]=""),e[10]&&"undefined"!==e[10]||(e[10]=-1);var o=function(e,t){return e=parseInt(e),isNaN(e)?t:e};return t=function(e){return e?o(e,void 0):void 0},[e[0],e[1],o(e[2],i),o(e[3],r),o(e[4],i),t(e[5]),e[6],e[7],e[8],t(e[9])]}(f("id")||void 0,Re,Oe,ft)}function I(e,t){var n,r,o,a,s=!0,l=Pe.getConfig();return void 0!==l.mend?s=l.mend:void 0!==(null===(r=null===(n=null==i?void 0:i.configs)||void 0===n?void 0:n.network)||void 0===r?void 0:r.mergeEndpoint)&&(s=null===(a=null===(o=null==i?void 0:i.configs)||void 0===o?void 0:o.network)||void 0===a?void 0:a.mergeEndpoint),0===e.indexOf("http")?(t&&s&&(e=e.replace(/^(https?:\/\/)(.*)$/,"$1"+t+".$2")),e):t&&s?("https:"===document.location.protocol?"https":"http")+"://"+t+"."+e:("https:"===document.location.protocol?"https":"http")+"://"+e}function T(){pt&&null!=r.pageViewId||(r.pageViewId=Zr.v4())}function O(){return null==r.pageViewId&&(r.pageViewId=Zr.v4()),r.pageViewId}function M(){var e=window.location.hostname,t=e.split(".");return 2<=t.length?"."+t.slice(-2).join("."):e}function N(){try{return P({"First Launch":"Yes"}),Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(e){console.warn(e)}}function L(e){try{return"object"===C(JSON.parse(e))}catch(e){return!1}}function P(e){try{var t=Object.keys(e);L(JSON.stringify(e))?t.forEach((function(t){if(""!==t.trim()){var n=e[t];n&&""!==n&&(n="object"===C(n)?JSON.stringify(n):""+n,Object.defineProperty(We,t,{value:n,writable:!0,enumerable:!0,configurable:!0}))}})):console.warn("Conviva AppTracker:: Invalid JSON Format")}catch(e){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",e)}}function U(e){try{e.forEach((function(e){delete We[e]}))}catch(e){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}function F(){var e,t,n,r,o,s,l,c,u,d,f,h,p,v,g,m,y,w,b,k,_,C,S,E,A,I,T,R,O,M,N,L;try{var D=null===(e=null==a?void 0:a.core)||void 0===e?void 0:e.getConfig();e=void 0,Ye={};var P=Ud.MERGE;switch(void 0!==(null===(n=null===(t=null==i?void 0:i.configs)||void 0===t?void 0:t.metaTagsTracking)||void 0===n?void 0:n.preference)?P=null===(o=null===(r=null==i?void 0:i.configs)||void 0===r?void 0:r.metaTagsTracking)||void 0===o?void 0:o.preference:!0===(null===(l=null===(s=null==i?void 0:i.configs)||void 0===s?void 0:s.metaTagsTracking)||void 0===l?void 0:l.force)?P=Ud.APP:void 0!==(null===(c=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===c?void 0:c.pref)&&(P=null===(u=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===u?void 0:u.pref),P){case Ud.APP:if(!1===(null===(f=null===(d=null==i?void 0:i.configs)||void 0===d?void 0:d.metaTagsTracking)||void 0===f?void 0:f.enabled))return;0<(null===(v=null===(p=null===(h=null==i?void 0:i.configs)||void 0===h?void 0:h.metaTagsTracking)||void 0===p?void 0:p.tags)||void 0===v?void 0:v.length)&&(e=x([],null===(m=null===(g=null==i?void 0:i.configs)||void 0===g?void 0:g.metaTagsTracking)||void 0===m?void 0:m.tags,!0));break;case Ud.REMOTE:if(!1===(null===(y=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===y?void 0:y.enabled))return;void 0!==(null==D?void 0:D.metaTagsTrackingConfiguration)&&0<(null===(b=null===(w=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===w?void 0:w.tags)||void 0===b?void 0:b.length)&&(e=x([],null===(k=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===k?void 0:k.tags,!0));break;default:if(void 0===(null==D?void 0:D.metaTagsTrackingConfiguration)&&!1===(null===(C=null===(_=null==i?void 0:i.configs)||void 0===_?void 0:_.metaTagsTracking)||void 0===C?void 0:C.enabled)||void 0===(null===(S=null==i?void 0:i.configs)||void 0===S?void 0:S.metaTagsTracking)&&!1===(null===(E=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===E?void 0:E.enabled))return;var U=null===(I=null===(A=null==i?void 0:i.configs)||void 0===A?void 0:A.metaTagsTracking)||void 0===I?void 0:I.tags,F=null===(T=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===T?void 0:T.tags;!1===(null===(O=null===(R=null==i?void 0:i.configs)||void 0===R?void 0:R.metaTagsTracking)||void 0===O?void 0:O.enabled)&&(U=[]),!1===(null===(M=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===M?void 0:M.enabled)&&(F=[]),e=x([],function(e,t){return x(x([],e,!0),t,!0).reduce((function(e,t){var n=e.find((function(e){return e.key===t.key}));return n?t.condition&&(n.condition=x(x([],n.condition||[],!0),t.condition,!0)):e.push(Tr({},t)),e}),[])}(U||[],F||[]),!0)}if(void 0!==e&&0<(null==e?void 0:e.length)){t={};var z=null===document||void 0===document?void 0:document.head,B=null==z?void 0:z.getElementsByTagName("meta");if(void 0!==B&&0<(null==B?void 0:B.length))for(z=0;z<B.length;z++){var j=B[z];for(n=0;n<e.length;n++){var G=j.getAttribute(e[n].key),H=j.getAttribute(e[n].value);r=void 0,null!==(N=e[n])&&void 0!==N&&N.condition&&(r=null===(L=e[n])||void 0===L?void 0:L.condition),G&&(r&&r.includes(G)?t[G]=H:r&&0!==r.length||(t[G]=H))}}a.setMetaCustomTags(t)}}catch(e){console.warn("Conviva App Tracker:: setPageMetaTagsAsCustomTags",e)}}function z(e,t,n){var r=function(t,n){var r;s();var o=null===(r=null==a?void 0:a.core)||void 0===r?void 0:r.getConfig();o.enablePeriodicHeartbeat?(null!=o.periodicHeartbeatInterval&&((r=1e3*o.periodicHeartbeatInterval)!=e.configHeartBeatTimer&&(e.configHeartBeatTimer=r,window.clearInterval(e.activityInterval),e.activityInterval=window.setInterval(i,r))),t({context:n,pageViewId:O(),minXOffset:Ee,minYOffset:Ie,maxXOffset:Ae,maxYOffset:Te})):window.clearInterval(e.activityInterval),m()};window.setTimeout((function(){r(e.callback,(t||[]).concat(n?n():[]))}),2e3);var i=function(){var i=new Date;(!1===(null===document||void 0===document?void 0:document.hidden)||"visible"==(null===document||void 0===document?void 0:document.visibilityState)||null!==document&&void 0!==document&&document.pictureInPictureElement||Se+e.configHeartBeatTimer>i.getTime()||!0===mt)&&r(e.callback,(t||[]).concat(n?n():[]))};e.activityInterval=window.setInterval(i,e.configHeartBeatTimer)}function B(e){var t=e.minimumVisitLength,n=e.heartbeatDelay;if(e=e.callback,Qt(t)&&Qt(n))return{configMinimumVisitLength:1e3*t,configHeartBeatTimer:1e3*n,callback:e};Yr.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function j(e){var t=e.context,n=e.minXOffset,r=e.minYOffset,i=e.maxXOffset,o=e.maxYOffset;if((e=document.title)!==Ke&&(Ke=e,ye=void 0),Le()!==Ku.SAMPLING_MODES.NONE){G();var a=(e=Pe).track,s=u(me||ze),l=$t(ye||Ke),c=u(ge||Be);n=Math.round(n),i=Math.round(i),r=Math.round(r),o=Math.round(o);var d=R();d.add("e","pp"),d.add("url",s),d.add("page",l),d.add("refr",c),n&&!isNaN(Number(n))&&d.add("pp_mix",n.toString()),i&&!isNaN(Number(i))&&d.add("pp_max",i.toString()),r&&!isNaN(Number(r))&&d.add("pp_miy",r.toString()),o&&!isNaN(Number(o))&&d.add("pp_may",o.toString()),a.call(e,d,t)}}function G(){var e,t,n=null===(t=null==a?void 0:a.core)||void 0===t?void 0:t.getConfig().pageUrlTrackingConfig;if(t=We[Ku.PAGE_URL_QUERY_PARAMS],n){var r={targetUrl:u(me||ze),rqq:{}};r=pn(r,null==n?void 0:n.collectattr,null,null==n?void 0:n.maxQueryLength),(!t&&r.rqq||t!==JSON.stringify(r.rqq))&&(U([Ku.PAGE_URL_QUERY_PARAMS]),function(e){try{var t=Object.keys(e);L(JSON.stringify(e))?t.forEach((function(t){if(""!==t.trim()){var n=e[t];n&&""!==n&&("object"!==C(n)&&(n=""+n),Object.defineProperty(We,t,{value:n,writable:!0,enumerable:!0,configurable:!0}))}})):console.warn("Conviva AppTracker:: Invalid JSON Format")}catch(e){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",e)}}(((e={})[Ku.PAGE_URL_QUERY_PARAMS]=r.rqq,e)))}else t&&U([Ku.PAGE_URL_QUERY_PARAMS])}var H,V,Z,q,W,Y,K,J,te,ne,re,ie,oe,ae,se,le;if(window&&window.localStorage){var ce=window.localStorage,ue={sensorVersion:n,ck:null!==(H=i.convivaCustomerKey)&&void 0!==H?H:""};ue=JSON.stringify(ue),ue="function"==typeof btoa?btoa(ue):function(e){e=unescape(encodeURIComponent(e));for(var t="",n=0;n<e.length;){var r=e.charCodeAt(n++),i=e.charCodeAt(n++),o=e.charCodeAt(n++),a=r>>2;r=(3&r)<<4|i>>4,i=isNaN(i)?64:(15&i)<<2|o>>6,o=isNaN(o)?64:63&o,t+=qr.charAt(a)+qr.charAt(r)+qr.charAt(i)+qr.charAt(o)}return t}(ue),ce.setItem(Ku.VISUAL_LABELLING_CONFIG,ue)}var de=Ju;de&&$u||("function"==typeof AbortController&&(Ju=new AbortController),$u=null==Ju?void 0:Ju.signal),t||(t="CAT");var fe=Vd(n,t,i).convivaRemoteTrackerConfig;null===(V=En(fe.performanceContextConfig))||void 0===V||V.activateLCPObserver(),i.eventMethod=null!==(Z=i.eventMethod)&&void 0!==Z?Z:"post";var he=function(e){var t;return null!==(t=e.stateStorageStrategy)&&void 0!==t?t:"cookieAndLocalStorage"},pe=function(e){var t,n;return"boolean"!=typeof e.anonymousTracking&&(null!==(n=!0===(null===(t=e.anonymousTracking)||void 0===t?void 0:t.withSessionTracking))&&void 0!==n&&n)},ve=function(e){var t,n;return"boolean"!=typeof e.anonymousTracking&&(null!==(n=!0===(null===(t=e.anonymousTracking)||void 0===t?void 0:t.withServerAnonymisation))&&void 0!==n&&n)};o.push({beforeTrack:function(e){var t=f("ses"),n=E();Ne=!!ke&&!!cn(ke),rt||Ne?k():("0"===n[0]?(Oe=t||"none"==ct?n[6]:Cn(n),ft=n[3]):(new Date).getTime()-dt>1e3*ot&&(ft++,Oe=Cn(n,ft)),Sn(n),e.add("uid",lt?null:Me),s(),e.add("refr",u(ge||Be)),document&&(Ke=document.title,t=$t(ye||Ke),e.add("page",t)),e.add("url",u(me||ze)),"none"!=ct&&(w(n),y()),dt=(new Date).getTime())}}),o.push({contexts:function(){return[{sc:"cv/clid/1-0-2",dt:{clid:_e,iid:Ce.toString(),ck:Ze,eventIndex:ut++}}]}}),o.push({contexts:function(){return[{sc:"cv/ct/1-0-0",dt:{data:Tr(Tr({},We),Ye)}}]}}),o.push({contexts:function(){var e,t=null===(e=null==a?void 0:a.core)||void 0===e?void 0:e.getConfig();return!0===(null==t?void 0:t.applicationContext)?[{sc:"spm/app/1-0-0",dt:{build:qe,version:qe}}]:[]}}),o.push({contexts:function(){var e={sch:"sdk.js.eco.1"};e.cat=Xu.DeviceCategory.WEB;try{var t=null==i?void 0:i.deviceMetadata;if(t){var n=t.DeviceBrand,r=t.DeviceCategory,o=t.DeviceManufacturer,a=t.DeviceModel,s=t.DeviceType,l=t.DeviceVersion,c=t.OperatingSystemName,u=t.OperatingSystemVersion,d=t.FrameworkName,f=t.FrameworkVersion;"string"==typeof r&&Object.values(Xu.DeviceCategory).includes(r)?e.cat=r:e.cat="INVALID"+(r?": ".concat(r):""),"string"==typeof n&&""!=n&&(e.dvb=n),"string"==typeof o&&""!=o&&(e.dvma=o),"string"==typeof a&&""!=a&&(e.dvm=a),s&&Object.values(Xu.DeviceType).includes(s)&&(e.dvt=s),"string"==typeof l&&""!=l&&(e.dvv=l),"string"==typeof c&&""!=c&&(e.os=c),"string"==typeof u&&""!=u&&(e.osv=u),"string"==typeof d&&""!=d&&(e.fw=d),"string"==typeof f&&""!=f&&(e.fwv=f)}}catch(e){Yr.warn("error in setting platform metadata context",e)}return null!=e&&0<Object.keys(e).length?[{sc:"iglu:com.conviva/pm/jsonschema/1-0-2",dt:e}]:[]}});try{(null!==(q=null==i?void 0:i.plugins)&&void 0!==q?q:[]).forEach((function(e){e.contexts||o.push(e)}))}catch(e){console.warn("ConvivaAppTracker : issue while processing customer passed pligins",e)}var ge,me,ye,we,be,ke,_e,Ce,Se,Ee,Ae,Ie,Te,xe,Re,Oe,Me,Ne,Le=function(){var e;try{var t=null===(e=null==a?void 0:a.core)||void 0===e?void 0:e.getConfig();return t?void 0===t.catRcLastUpdatedTs||0===t.catRcLastUpdatedTs?Ku.SAMPLING_MODES.RCFG:t.controlIngestConfig?function(e){try{if(void 0===e.sel)return dn(),Ku.SAMPLING_MODES.RCFG;var t=e.sel.pct;if("number"==typeof t&&100>t&&0<t&&0==t%1){if("undefined"!=typeof window&&void 0!==window.localStorage){var n=localStorage.getItem(Ku.SAMPLING_STORAGE_RANDOM_NUMBER_KEY);if(null!=n)return parseFloat(n)<=t?fn(e,Ku.SAMPLING_ACTION.SAMPLED):fn(e,Ku.SAMPLING_ACTION.NON_SAMPLED);var r=100*Math.random();return localStorage.setItem(Ku.SAMPLING_STORAGE_RANDOM_NUMBER_KEY,r.toString()),fn(e,r<t?Ku.SAMPLING_ACTION.SAMPLED:Ku.SAMPLING_ACTION.NON_SAMPLED)}return Ku.SAMPLING_MODES.NONE}return"number"==typeof t&&0===t?(dn(),Ku.SAMPLING_MODES.NONE):(dn(),Ku.SAMPLING_MODES.RCFG)}catch(e){}return Ku.SAMPLING_MODES.RCFG}(null==t?void 0:t.controlIngestConfig):Ku.SAMPLING_MODES.RCFG:Ku.SAMPLING_MODES.RCFG}catch(e){return Yr.error("Error while getting sampling mode"),Ku.SAMPLING_MODES.RCFG}},De=function(e){if("object"===C(e)&&null!==e)return e;if("string"==typeof e)try{var t=JSON.parse(e);return t&&"object"===C(t)&&0===Object.keys(t).length?void 0:t}catch(e){}},Pe=sd=X({base64:null==fe?void 0:fe.base64,corePlugins:o,callback:function(e){rt||Ne||ht.enqueueRequest(e.build(),Ge,function(e){var t,n,r,i=null!==(r=null===(n=null===(t=Pe.getConfig().emitterConfiguration)||void 0===t?void 0:t.batching)||void 0===n?void 0:n.urgentEvents)&&void 0!==r?r:[],o=t="",a="",s="";return"string"==typeof(n=e.getPayload()).e&&(s=n.e),("ue"===s||"pv"===s||"pp"===s)&&(void 0!==(e=e.getJson().find((function(e){return"ue_pr"===e.keyIfNotEncoded||"ue_px"===e.keyIfEncoded})))&&("object"===C((e=e.json).dt)&&null!==e.dt&&("string"==typeof(e=e.dt).sc&&(t=e.sc),"object"===C(e.dt)&&"string"==typeof e.dt.name&&(o=e.dt.name)),a=t.split("/")[1]||""),i.some((function(e){return""!==(e=e.toLowerCase())&&(e===s.toLowerCase()||e===a.toLowerCase()||e===o.toLowerCase())})))}(e))},exceptionAutotracking:fe.exceptionAutotracking,enablePeriodicHeartbeat:fe.enablePeriodicHeartbeat,periodicHeartbeatInterval:fe.periodicHeartbeatInterval,enc:fe.enc,mend:fe.mend,maxLocalStorageQueueSize:fe.maxLocalStorageQueueSize,maxGetBytes:fe.maxGetBytes,bufferSize:fe.bufferSize,customEventTrackingConfiguration:fe.customEventTrackingConfiguration,softNavigationTrackingConfiguration:fe.softNavigationTrackingConfiguration,networkRequestTrackingConfiguration:fe.networkRequestTrackingConfiguration,metaTagsTrackingConfiguration:fe.metaTagsTrackingConfiguration,traceparentconfig:fe.traceparentconfig,baggageConfiguration:fe.baggageConfiguration,performanceContextConfig:fe.performanceContextConfig,lifecycleAutotracking:fe.lifecycleAutotracking,configurationVersion:fe.configurationVersion,catRcLastUpdatedTs:fe.catRcLastUpdatedTs,cacheRefreshInterval:fe.cacheRefreshInterval,endpoint:fe.endpoint,controlIngestConfig:fe.controlIngestConfig,applicationContext:fe.applicationContext,emitterConfiguration:fe.emitterConfiguration,di:fe.di,clickcc:fe.clickcc,collectionRateLimit:fe.collectionRateLimit,pageUrlTrackingConfig:fe.pageUrlTrackingConfig,sessionReplayConfiguration:fe.sessionReplayConfiguration,evtStreamTrackingConfiguration:fe.evtStreamTrackingConfiguration,valueProbes:fe.valueProbes,webVitals:fe.webVitals}),Ue=_n(window.location.hostname,window.location.href,nn()),Fe=tn(Ue[0]),ze=Ue[1],Be=Ue[2],je=null!==(W=i.platform)&&void 0!==W?W:"web",Ge=I(fe.endpoint,i.convivaCustomerKey),He=null!==(Y=i.postPath)&&void 0!==Y?Y:"/ctp",Ve=null!==(K=i.appId)&&void 0!==K?K:"",Ze=null!==(J=i.convivaCustomerKey)&&void 0!==J?J:"",qe=null!==(te=i.appVersion)&&void 0!==te?te:"",We={},Ye={},Ke="undefined"!=typeof document?document.title:void 0,Je=null===(ne=i.resetActivityTrackingOnPageView)||void 0===ne||ne,Xe=null!==(re=i.cookieName)&&void 0!==re?re:"_cnv_",Qe=null!==(ie=i.cookieDomain)&&void 0!==ie?ie:void 0,$e="/",et=null!==(oe=i.cookieSameSite)&&void 0!==oe?oe:"None",tt=null===(ae=i.cookieSecure)||void 0===ae||ae,nt=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,rt=void 0!==i.respectDoNotTrack&&(i.respectDoNotTrack&&("yes"===nt||"1"===nt)),it=null!==(se=i.cookieLifetime)&&void 0!==se?se:63072e3,ot=null!==(le=i.sessionCookieTimeout)&&void 0!==le?le:1800,at=pe(i),st=ve(i),lt=!!i.anonymousTracking,ct=he(i),ut=-1,dt=(new Date).getTime(),ft=1,ht=Jd(e,r,ct,i,He,st,5e3,Le),pt=!1,vt=!1,gt={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5e3,configHeartBeatTimer:1e3*fe.periodicHeartbeatInterval,callback:j}}},mt=!1;i.hasOwnProperty("discoverRootDomain")&&i.discoverRootDomain&&(Qe=function(e,t){for(var n=window.location.hostname,r="_cnv_root_domain_test_"+(new Date).getTime(),i="_test_value_"+(new Date).getTime(),o=n.split("."),a=o.length-1;0<=a;){var s=o.slice(a,o.length).join(".");if(cn(r,i,0,"/",s,e,t),cn(r)===i){for(ln(r,s,e,t),n=document.cookie.split("; "),r=[],i=0;i<n.length;i++)"_cnv_root_domain_test_"===n[i].substring(0,22)&&r.push(n[i]);for(n=r,r=0;r<n.length;r++)ln(n[r],s,e,t);return s}--a}return n}(et,tt)),Pe.setTrackerVersion(n),Pe.setAppId(Ve),Pe.setPlatform(je),h(),S(),ht.setCustomHeaders({"x-client-id":""+_e}),i.crossDomainLinker&&c(i.crossDomainLinker);var yt={getDomainSessionIndex:function(){return ft},getPageViewId:function(){return O()},newSession:function(){var e=E();"0"===e[0]?(Oe="none"!=ct?Cn(e):e[6],ft=e[3],y()):(ft++,Oe=Cn(e,ft)),Sn(e),"none"!=ct&&(w(e),y()),dt=(new Date).getTime()},getCookieName:function(e){return Xe+e+"."+xe},getUserId:function(){return Me},getDomainUserId:function(){var e=E();return e&&1<e.length?e[1]:null},getDomainUserInfo:function(){return E()},setReferrerUrl:function(e){ge=e},setCustomUrl:function(e){s();var t,n=ze;d(e)?me=e:"/"===e.slice(0,1)?me=d(n)+"://"+en(n)+e:(0<=(t=(n=u(n)).indexOf("?"))&&(n=n.slice(0,t)),(t=n.lastIndexOf("/"))!==n.length-1&&(n=n.slice(0,t+1)),me=n+e)},setDocumentTitle:function(e){Ke=document.title,ye=e},discardHashTag:function(e){we=e},discardBrace:function(e){be=e},setCookiePath:function(e){$e=e,h()},setVisitorCookieTimeout:function(e){it=e},crossDomainLinker:function(e){c(e)},enableActivityTracking:function(e){gt.configurations.pagePing||(gt.enabled=!0,gt.configurations.pagePing=B(Tr(Tr({},e),{callback:j})))},enableActivityTrackingCallback:function(e){gt.configurations.callback||(gt.enabled=!0,gt.configurations.callback=B(e))},updatePageActivity:function(){p()},setOptOutCookie:function(e){ke=e},setUserId:function(e){Me=e},setConversationId:function(e){Pe.setConversationId(e)},setUserIdFromLocation:function(e){s(),Me=on(e,ze)},setUserIdFromReferrer:function(e){s(),Me=on(e,Be)},setUserIdFromCookie:function(e){Me=cn(e)},setCollectorUrl:function(e,t){Ge=I(e,t),ht.setCollectorUrl(Ge)},setBufferSize:function(e){ht.setBufferSize(e)},flushBuffer:function(e){void 0===e&&(e={}),ht.executeQueue(),e.newBufferSize&&ht.setBufferSize(e.newBufferSize)},trackPageView:function(e){var t;void 0===e&&(e={}),F();var n=null===(t=null==a?void 0:a.core)||void 0===t?void 0:t.getConfig();try{e=Tr(Tr({},e),{context:En(null==n?void 0:n.performanceContextConfig).contexts()})}catch(e){console.warn("Conviva App Tracker:: error adding performacetiming context to page view",e)}var r=e.title;if(t=e.context,n=e.timestamp,e=e.contextCallback,s(),vt&&T(),vt=!0,Ke=document.title,r=$t((ye=r)||Ke),Le()!==Ku.SAMPLING_MODES.NONE){G();var i=Pe,o=i.track,l=u(me||ze),c=u(ge||Be),d=R();d.add("e","pv"),d.add("url",l),d.add("page",r),d.add("refr",c),o.call(i,d,(t||[]).concat(e?e():[]),n)}},trackPagePing:function(e){void 0===e&&(e={}),function(e){var t=e.context;e=e.contextCallback;var n=new Date,r=!1;if(gt.enabled&&!gt.installed){r=gt.installed=!0;var i={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0},set:function(){}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),i.hasSupport=e}}};i.update();var o="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(i,"hasSupport")?rn(document,o,p,{passive:!0}):rn(document,o,p),m(),o=function(e,t){return void 0===t&&(t=p),function(e){return rn(document,e,t)}},"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(o(document)),["resize","focus","blur"].forEach(o(window)),o(window,v)("scroll")}if(gt.enabled&&(Je||r))for(n in Se=n.getTime(),n=void 0,gt.configurations)(r=gt.configurations[n])&&(window.clearInterval(r.activityInterval),z(r,t,e))}(e)},trackVideoEvent:function(e){var t,n,r;void 0===e&&(e={});try{var i=this.core.getConfig(),o=!1;if(null!==(n=null===(t=null==i?void 0:i.customEventTrackingConfiguration)||void 0===t?void 0:t.enabled)&&void 0!==n?n:od.customEventTrackingConfiguration.enabled)if(""==e.name||null==e.name)console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");else{e.ced=De(e.ced),e.old=De(e.old),e.new=De(e.new),e.tags=De(e.tags),e.cen&&Ku.V2A_CUSTOM_EVENTS.includes(e.name)&&(e.name=e.cen,o=!0);var a=null===(r=null==i?void 0:i.customEventTrackingConfiguration)||void 0===r?void 0:r.blocklist;if(!(null!=a&&a.includes("*")||null!=a&&a.some((function(t){return 0<(null==t?void 0:t.length)&&e.name.toLowerCase().includes(t.toLowerCase())}))))if(!0===o){var s=e.name,l=A(e,["isTrusted","name","cen","new","old"]);this.core.track($({name:s,data:JSON.stringify(l)}),e.context,e.timestamp)}else this.core.track(function(e){return Q({event:{sc:"cv/ve/1-0-6",dt:ee({name:e.name,sid:e.sid,iid:e.iid,clid:e.clid,st:e.st,sst:e.sst,an:e.an,cl:e.cl,lv:e.lv,pn:e.pn,vid:e.vid,fw:e.fw,fwv:e.fwv,mn:e.mn,mv:e.mv,url:e.url,tags:e.tags,cen:e.cen,ced:e.ced,oldsc:e.oldsc,newsc:e.newsc,err:e.err,br:e.br,ft:e.ft,avgbr:e.avgbr})}})}({name:e.name,sid:e.sid,iid:e.iid,clid:e.clid,st:e.st,sst:e.sst,an:e.an,cl:e.cl,lv:e.lv,pn:e.pn,vid:e.vid,fw:e.fw,fwv:e.fwv,mn:e.mn,mv:e.mv,url:e.url,tags:e.tags,cen:e.cen,ced:e.ced,oldsc:e.old,newsc:e.new,err:e.err,br:e.br,ft:e.ft,avgbr:e.avgbr}),e.context,e.timestamp)}}catch(e){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",e)}},trackCustomEvent:function(e){var t,n,r,i,o;void 0===e&&(e={});try{if(Le()!==Ku.SAMPLING_MODES.NONE){var s=null===(t=null==a?void 0:a.core)||void 0===t?void 0:t.getConfig();if(null!==(r=null===(n=null==s?void 0:s.customEventTrackingConfiguration)||void 0===n?void 0:n.enabled)&&void 0!==r?r:od.customEventTrackingConfiguration.enabled)if(!e.name||"string"==typeof e.name&&""==e.name.trim())console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");else{var l=e.data;try{"string"!=typeof e.data&&(l=JSON.stringify(e.data))}catch(e){}var c=null===(i=null==s?void 0:s.customEventTrackingConfiguration)||void 0===i?void 0:i.blocklist;null!=c&&c.includes("*")||null!=c&&c.some((function(t){return 0<(null==t?void 0:t.length)&&e.name.toLowerCase().includes(t.toLowerCase())}))||null===(o=null==a?void 0:a.core)||void 0===o||o.track($({name:e.name,data:l}),e.context,e.timestamp)}}}catch(e){console.warn("Conviva App Tracker:: Unable to track custom event! "+e)}},trackSSEEvent:function(e){var t;void 0===e&&(e={});try{Le()!==Ku.SAMPLING_MODES.NONE&&(null===(t=null==a?void 0:a.core)||void 0===t||t.track($(e),e.context,e.timestamp))}catch(e){}},trackNetworkRequest:function(e){var t,n,r,i,o,s,l,c,u,d,f,h;void 0===e&&(e={});try{var p=null===(r=null==a?void 0:a.core)||void 0===r?void 0:r.getConfig().networkRequestTrackingConfiguration,v=e.responseDetails.responseTime-e.requestDetails.requestTime;try{v=parseFloat(v.toFixed(3))}catch(e){console.warn("Conviva App Tracker:: exception while converting duration to 3 decimal",e)}try{var g=pn(((t={targetUrl:null===(i=null==e?void 0:e.requestDetails)||void 0===i?void 0:i.url,method:null===(o=null==e?void 0:e.requestDetails)||void 0===o?void 0:o.method,responseStatusCode:null!==(s=null==e?void 0:e.responseDetails)&&void 0!==s&&s.status?e.responseDetails.status:0,responseStatusText:null!==(l=null==e?void 0:e.responseDetails)&&void 0!==l&&l.statusText?e.responseDetails.statusText:"ok"})[Qu.request_headers]=null===(c=null==e?void 0:e.requestDetails)||void 0===c?void 0:c.headers,t[Qu.response_headers]=null===(u=null==e?void 0:e.responseDetails)||void 0===u?void 0:u.headers,t.duration=v,t),null==p?void 0:p.collectattr,e,null==p?void 0:p.maxQueryLength,null==p?void 0:p.rbl);if(null!==(d=null==e?void 0:e.requestDetails)&&void 0!==d&&d[Ku.TRACEPARENT_HEADER_KEY]){var m=((n={})[Ku.TRACEPARENT_HEADER_KEY]=null===(f=null==e?void 0:e.requestDetails)||void 0===f?void 0:f[Ku.TRACEPARENT_HEADER_KEY],n);g[Qu.request_headers]=g[Qu.request_headers]?Tr(Tr({},g[Qu.request_headers]),m):m}if(null===(h=null==a?void 0:a.core)||void 0===h);else{var y=h.track,w=Q({event:{sc:"cv/nr/1-0-5",dt:ee({targetUrl:g.targetUrl,method:g.method,queryParameters:g.queryParameters,responseStatusCode:g.responseStatusCode,responseStatusText:g.responseStatusText,rqh:g.rqh,rsh:g.rsh,rqb:g.rqb,rsb:g.rsb,rqq:g.rqq,requestSize:g.requestSize,responseSize:g.responseSize,duration:g.duration,contentType:g.contentType,requestTimestamp:g.requestTimestamp,responseTimestamp:g.responseTimestamp})}});y.call(h,w,e.context,e.timestamp)}}catch(e){console.warn("Conviva App Tracker:: Network request could not be tracked due to an exception!!",e)}}catch(e){console.warn("Conviva App Tracker:: Network request could not be tracked due to an exception!!",e)}},trackButtonClick:function(e){var t,n,r;try{var i=null===(t=null==vd?void 0:vd.core)||void 0===t?void 0:t.getConfig();!0===(null===(n=null==i?void 0:i.clickcc)||void 0===n?void 0:n.en)&&(e.elementType="button",null===(r=null==vd?void 0:vd.core)||void 0===r||r.track($({name:"conviva_click",data:JSON.stringify(e)}),D(void 0,void 0)))}catch(e){Yr.warn("Conviva App Tracker caused Exception in sendButtonClick method of user click tracking module",e)}},trackLinkClick:function(e){var t,n,r;try{var i=null===(t=null==vd?void 0:vd.core)||void 0===t?void 0:t.getConfig();!0===(null===(n=null==i?void 0:i.clickcc)||void 0===n?void 0:n.en)&&(e.elementType="link",null===(r=null==vd?void 0:vd.core)||void 0===r||r.track($({name:"conviva_click",data:JSON.stringify(e)}),D(void 0,void 0)))}catch(e){Yr.warn("Conviva App Tracker caused Exception in sendLinkClick method of user click tracking module",e)}},trackErrorEvent:function(e){Kn(e)},setCustomTags:function(e){void 0===e&&(e={}),P(e)},setMetaCustomTags:function(e){void 0===e&&(e={}),function(e){try{var t=Object.keys(e);L(JSON.stringify(e))?t.forEach((function(t){""!==t&&Object.defineProperty(Ye,t,{value:""+e[t],writable:!0,enumerable:!0,configurable:!0})})):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(e){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",e)}}(e)},unsetCustomTags:function(e){void 0===e&&(e=[]),U(e)},preservePageViewId:function(){pt=!0},disableAnonymousTracking:function(e){i.anonymousTracking=!1,_(e),S(),ht.executeQueue()},enableAnonymousTracking:function(e){var t;i.anonymousTracking=null===(t=e&&(null==e?void 0:e.options))||void 0===t||t,_(e),at||T()},clearUserData:k,setKeepAliveInBG:function(e){void 0===e&&(e=!1),mt=e},clearTimers:function(){sd=null,wt.cleanupNetworkRequestHandler();try{Od=a,removeEventListener("error",Wn,!0),removeEventListener("unhandledrejection",Yn,!0)}catch(e){console.warn("Conviva App Tracker caused Exception in disableErrorTracking method of error tracking module",e)}if(zn(),null==de||de.abort(),$u=Ju=void 0,jd&&window.clearInterval(jd),gt.enabled){var e=void 0;for(e in gt.configurations){var t=gt.configurations[e];t&&window.clearInterval(t.activityInterval)}}a&&(a.core=null),this.tracker=null},getSamplingMode:Le,getPageViewSent:function(){return vt},setPageMetaTagsAsCustomTags:function(){F()},determineShouldTrack:function(e,t,n,r,i,o){return An(e,t,n,r,i,o)}};Rd=yt;var wt=Kd.getInstance(yt,i,Le);return wt.initiateNetworkRequestTracking(),Tr(Tr({},yt),{id:e,namespace:t,core:Pe,sharedState:r})}(e,t,n,r,i);var a=Tr(Tr({},e),{addPlugin:function(e){var t,n,r;null===(t=null==a?void 0:a.core)||void 0===t||t.addPlugin(e),null===(r=(n=e.plugin).activateBrowserPlugin)||void 0===r||r.call(n,a)}});o.forEach((function(e){var t;null===(t=e.activateBrowserPlugin)||void 0===t||t.call(e,a)})),function(e,t){var n;if(void 0===t&&(t=!0),!1!==t){var r=null===(n=null==e?void 0:e.core)||void 0===n?void 0:n.getConfig();null==e||e.trackPagePing({context:En(null==r?void 0:r.performanceContextConfig).contexts()});try{var i=function(){null==e||e.trackCustomEvent({name:"conviva_window_loaded",data:"{}",context:En(null==r?void 0:r.performanceContextConfig).contexts()}),null==e||e.setPageMetaTagsAsCustomTags()},o=0,a=0;"complete"===document.readyState?setTimeout((function(){try{i()}catch(e){console.warn("ConvivaAppTracker : issue while detecting readyState complete",e)}}),0):null===window||void 0===window||window.addEventListener("load",(function(){setTimeout((function(){try{i()}catch(e){console.warn("ConvivaAppTracker : issue while registering window loaded event",e)}}),0)}),{signal:$u}),null===document||void 0===document||document.addEventListener("visibilitychange",(function(){var t,n;try{if((null==e?void 0:e.getSamplingMode())!==Ku.SAMPLING_MODES.NONE)if("hidden"===document.visibilityState)setTimeout((function(){var t,n;try{var r=null===(t=null==e?void 0:e.core)||void 0===t?void 0:t.getConfig();if(a++,null!=r&&r.lifecycleAutotracking)if(null===(n=null==e?void 0:e.core)||void 0===n);else{var i=n.track,o=Q({event:{sc:"sp/abg/1-0-0",dt:ee({backgroundIndex:a})}});i.call(n,o)}"hidden"!==document.visibilityState||null!=e&&e.getPageViewSent()||null==e||e.trackCustomEvent({name:"conviva_app_backgrnd_before_page_view",data:"{}"})}catch(e){console.warn("ConvivaAppTracker : issue while tracking visibility change",e)}}),0);else{var r=null===(t=null==e?void 0:e.core)||void 0===t?void 0:t.getConfig();o++,null!=r&&r.lifecycleAutotracking&&(null===(n=null==e?void 0:e.core)||void 0===n||n.track(Q({event:{sc:"sp/afg/1-0-0",dt:ee({foregroundIndex:o})}})))}}catch(e){console.warn("convivaAppTracker visibilitychange failed "+e)}}),{signal:$u}),"undefined"!=typeof document&&document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",(function(t){t&&e&&(null==e?void 0:e.getSamplingMode())!==Ku.SAMPLING_MODES.NONE&&(null==e||e.trackVideoEvent(t))}),{signal:$u})}catch(e){console.warn("convivaAppTracker error in page load metrics"+e)}}}(a,null==i?void 0:i.enableCommonEvents),tr(a);try{Od=a,function(){var e,t,n,r,i,o,a;try{var s=null===(e=null==Od?void 0:Od.core)||void 0===e?void 0:e.getConfig(),l=null===(n=null===(t=null==s?void 0:s.collectionRateLimit)||void 0===t?void 0:t.exceptionAutotracking)||void 0===n?void 0:n.maxEvents,c=null===(i=null===(r=null==s?void 0:s.collectionRateLimit)||void 0===r?void 0:r.exceptionAutotracking)||void 0===i?void 0:i.disconnectDuration,u=null===(a=null===(o=null==s?void 0:s.collectionRateLimit)||void 0===o?void 0:o.exceptionAutotracking)||void 0===a?void 0:a.timeWindow;Md=new Xd(l,c,u,null==Od?void 0:Od.core,null==Od?void 0:Od.getSamplingMode)}catch(e){console.warn("Conviva App Tracker caused Exception in initialiseRateLimiter method of error tracking module",e)}}(),null!==window&&void 0!==window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",(function(){var e,t,n,r,i,o,a,s=null===(e=null==Od?void 0:Od.core)||void 0===e?void 0:e.getConfig();e=null===(n=null===(t=null==s?void 0:s.collectionRateLimit)||void 0===t?void 0:t.exceptionAutotracking)||void 0===n?void 0:n.maxEvents,t=null===(i=null===(r=null==s?void 0:s.collectionRateLimit)||void 0===r?void 0:r.exceptionAutotracking)||void 0===i?void 0:i.disconnectDuration,r=null===(a=null===(o=null==s?void 0:s.collectionRateLimit)||void 0===o?void 0:o.exceptionAutotracking)||void 0===a?void 0:a.timeWindow,null==Md||Md.updateErrortRateLimitConfig(e,t,r)}),{signal:$u}),rn(window,"error",Wn,!0),rn(window,"unhandledrejection",Yn,!0)}catch(e){console.warn("Conviva App Tracker caused Exception in enableErrorTracking method of error tracking module",e)}vd=a,wr(a);try{Pd=a,Qf(kr),Kf(kr),zf(kr)}catch(e){console.warn("Conviva App Tracker caused Exception in enabling Web Vitals tracking",e)}return ar(a,i),a}function Sr(e,t){try{Ar(null!=e?e:Object.keys($f),$f).forEach(t)}catch(e){Yr.error("Function failed",e)}}function Er(e,t,n,r,i){return $f.hasOwnProperty(e)?null:($f[e]=Cr(e,t,n,r,i),$f[e])}function Ar(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)?n.push(t[i]):Yr.warn(i+" not configured")}return n}function Ir(){function e(){var e;if(!t.hasLoaded)for(t.hasLoaded=!0,e=0;e<t.registeredOnLoadHandlers.length;e++)t.registeredOnLoadHandlers[e]();return!0}var t=new eh,n=document,r=window;return rn(r,"beforeunload",(function(){try{t.bufferFlushers.forEach((function(e){e(!1)}))}catch(e){console.warn("Conviva App Tracker:: Error in flushBuffers of constructor ".concat(e))}}),!1),"loading"===document.readyState?(n.addEventListener?n.addEventListener("DOMContentLoaded",(function t(){n.removeEventListener("DOMContentLoaded",t,!1),e()})):n.attachEvent&&n.attachEvent("onreadystatechange",(function t(){"complete"===n.readyState&&(n.detachEvent("onreadystatechange",t),e())})),rn(r,"load",e,!1)):e(),t}var Tr=function(){return Tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Tr.apply(this,arguments)},xr={},Rr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Rr){var Or=new Uint8Array(16);xr=function(){return Rr(Or),Or}}else{var Mr=Array(16);xr=function(){for(var e,t=0;16>t;t++)0==(3&t)&&(e=4294967296*Math.random()),Mr[t]=e>>>((3&t)<<3)&255;return Mr}}for(var Nr=[],Lr=0;256>Lr;++Lr)Nr[Lr]=(Lr+256).toString(16).substr(1);var Dr,Pr,Ur=function(e,t){return t=t||0,[Nr[e[t++]],Nr[e[t++]],Nr[e[t++]],Nr[e[t++]],"-",Nr[e[t++]],Nr[e[t++]],"-",Nr[e[t++]],Nr[e[t++]],"-",Nr[e[t++]],Nr[e[t++]],"-",Nr[e[t++]],Nr[e[t++]],Nr[e[t++]],Nr[e[t++]],Nr[e[t++]],Nr[e[t++]]].join("")},Fr=xr,zr=0,Br=0,jr=xr,Gr=function(e,t,n){if(n=t&&n||0,"string"==typeof e&&(t="binary"===e?Array(16):null,e=null),(e=(e=e||{}).random||(e.rng||jr)())[6]=15&e[6]|64,e[8]=63&e[8]|128,t)for(var r=0;16>r;++r)t[n+r]=e[r];return t||Ur(e)};Gr.v1=function(e,t,n){n=t&&n||0;var r=t||[],i=(e=e||{}).node||Dr,o=void 0!==e.clockseq?e.clockseq:Pr;if(null==i||null==o){var a=Fr();null==i&&(i=Dr=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==o&&(o=Pr=16383&(a[6]<<8|a[7]))}a=void 0!==e.msecs?e.msecs:(new Date).getTime();var s=void 0!==e.nsecs?e.nsecs:Br+1,l=a-zr+(s-Br)/1e4;if(0>l&&void 0===e.clockseq&&(o=o+1&16383),(0>l||a>zr)&&void 0===e.nsecs&&(s=0),1e4<=s)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(zr=a,Br=s,Pr=o,e=(1e4*(268435455&(a+=122192928e5))+s)%4294967296,r[n++]=e>>>24&255,r[n++]=e>>>16&255,r[n++]=e>>>8&255,r[n++]=255&e,e=a/4294967296*1e4&268435455,r[n++]=e>>>8&255,r[n++]=255&e,r[n++]=e>>>24&15|16,r[n++]=e>>>16&255,r[n++]=o>>>8|128,r[n++]=255&o,o=0;6>o;++o)r[n+o]=i[o];return t||Ur(r)};var Hr,Vr,Zr=Gr.v4=Gr,qr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";(Vr=Hr||(Hr={}))[Vr.none=0]="none",Vr[Vr.error=1]="error",Vr[Vr.warn=2]="warn",Vr[Vr.debug=3]="debug",Vr[Vr.info=4]="info";var Wr,Yr=function(e){return void 0===e&&(e=Hr.warn),{setLogLevel:function(t){e=Hr[t]?t:Hr.warn},warn:function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];e>=Hr.warn&&"undefined"!=typeof console&&(i="Conviva: "+t,n?console.warn.apply(console,x([i+"\n",n],r,!1)):console.warn.apply(console,x([i],r,!1)))},error:function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];e>=Hr.error&&"undefined"!=typeof console&&(i="Conviva: "+t+"\n",n?console.error.apply(console,x([i+"\n",n],r,!1)):console.error.apply(console,x([i],r,!1)))},debug:function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e>=Hr.debug&&"undefined"!=typeof console&&console.debug.apply(console,x(["Conviva: "+t],n,!1))},info:function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e>=Hr.info&&"undefined"!=typeof console&&console.info.apply(console,x(["Conviva: "+t],n,!1))}}}();!function(e){e.response_body="rsb",e.request_body="rqb",e.response_headers="rsh",e.request_headers="rqh",e.request_query="rqq"}(Wr||(Wr={}));var Kr={},Jr={};!function(){var e={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(t){if(t.constructor==Number)return 16711935&e.rotl(t,8)|4278255360&e.rotl(t,24);for(var n=0;n<t.length;n++)t[n]=e.endian(t[n]);return t},randomBytes:function(e){for(var t=[];0<e;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],i=0;4>i;i++)8*n+6*i<=8*e.length?t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&t.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(n))>>>6-2*r);return t}};Jr=e}();var Xr={utf8:{stringToBytes:function(e){return Xr.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(Xr.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}},Qr=Xr;!function(){var e=Jr,t=Qr.utf8,n=Qr.bin,r=function(r,i){var o=e.wordsToBytes,a=r;a.constructor==String?a=t.stringToBytes(a):"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||(a=a.toString()),r=e.bytesToWords(a);var s=8*a.length;a=[];var l=1732584193,c=-271733879,u=-1732584194,d=271733878,f=-1009589776;for(r[s>>5]|=128<<24-s%32,r[15+(s+64>>>9<<4)]=s,s=0;s<r.length;s+=16){for(var h=l,p=c,v=u,g=d,m=f,y=0;80>y;y++){if(16>y)a[y]=r[s+y];else{var w=a[y-3]^a[y-8]^a[y-14]^a[y-16];a[y]=w<<1|w>>>31}w=(l<<5|l>>>27)+f+(a[y]>>>0)+(20>y?1518500249+(c&u|~c&d):40>y?1859775393+(c^u^d):60>y?(c&u|c&d|u&d)-1894007588:(c^u^d)-899497514),f=d,d=u,u=c<<30|c>>>2,c=l,l=w}l+=h,c+=p,u+=v,d+=g,f+=m}return o=o.call(e,[l,c,u,d,f]),i&&i.asBytes?o:i&&i.asString?n.bytesToString(o):e.bytesToHex(o)};r._blocksize=16,r._digestsize=20,Kr=r}();var $r=Kr,ei=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ti=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ni=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ri=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ii=Array(576);te(ii);var oi=Array(60);te(oi);var ai=Array(512);te(ai);var si=Array(256);te(si);var li=Array(29);te(li);var ci=Array(30);te(ci);var ui,di,fi,hi=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},pi=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,hi(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},vi=function(e,t,n){pi(e,n[2*t],n[2*t+1])},gi=function(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(0<--t);return n>>>1},mi=function(e,t,n){var r,i=Array(16),o=0;for(r=1;15>=r;r++)o=o+n[r-1]<<1,i[r]=o;for(n=0;n<=t;n++)0!==(o=e[2*n+1])&&(e[2*n]=gi(i[o]++,o))},yi=function(e){var t;for(t=0;286>t;t++)e.dyn_ltree[2*t]=0;for(t=0;30>t;t++)e.dyn_dtree[2*t]=0;for(t=0;19>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},wi=function(e){8<e.bi_valid?hi(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},bi=function(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},ki=function(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&bi(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!bi(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},_i=function(e,t,n){var r=0;if(0!==e.sym_next)do{var i=255&e.pending_buf[e.sym_buf+r++];i+=(255&e.pending_buf[e.sym_buf+r++])<<8;var o=e.pending_buf[e.sym_buf+r++];if(0===i)vi(e,o,t);else{var a=si[o];vi(e,a+256+1,t);var s=ei[a];0!==s&&(o-=li[a],pi(e,o,s)),a=256>--i?ai[i]:ai[256+(i>>>7)],vi(e,a,n),0!==(s=ti[a])&&(i-=ci[a],pi(e,i,s))}}while(r<e.sym_next);vi(e,256,t)},Ci=function(e,t){var n,r=t.dyn_tree,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.elems,s=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<a;n++)0!==r[2*n]?(e.heap[++e.heap_len]=s=n,e.depth[n]=0):r[2*n+1]=0;for(;2>e.heap_len;){var l=e.heap[++e.heap_len]=2>s?++s:0;r[2*l]=1,e.depth[l]=0,e.opt_len--,o&&(e.static_len-=i[2*l+1])}for(t.max_code=s,n=e.heap_len>>1;1<=n;n--)ki(e,r,n);l=a;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ki(e,r,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,r[2*l]=r[2*n]+r[2*i],e.depth[l]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,r[2*n+1]=r[2*i+1]=l,e.heap[1]=l++,ki(e,r,1)}while(2<=e.heap_len);e.heap[--e.heap_max]=e.heap[1],n=t.dyn_tree,l=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits;var c,u=t.stat_desc.extra_base,d=t.stat_desc.max_length,f=0;for(c=0;15>=c;c++)e.bl_count[c]=0;for(n[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;573>t;t++){var h=e.heap[t];if((c=n[2*n[2*h+1]+1]+1)>d&&(c=d,f++),n[2*h+1]=c,!(h>l)){e.bl_count[c]++;var p=0;h>=u&&(p=a[h-u]);var v=n[2*h];e.opt_len+=v*(c+p),o&&(e.static_len+=v*(i[2*h+1]+p))}}if(0!==f){do{for(c=d-1;0===e.bl_count[c];)c--;e.bl_count[c]--,e.bl_count[c+1]+=2,e.bl_count[d]--,f-=2}while(0<f);for(c=d;0!==c;c--)for(h=e.bl_count[c];0!==h;)(i=e.heap[--t])>l||(n[2*i+1]!==c&&(e.opt_len+=(c-n[2*i+1])*n[2*i],n[2*i+1]=c),h--)}mi(r,s,e.bl_count)},Si=function(e,t,n){var r,i=-1,o=t[1],a=0,s=7,l=4;for(0===o&&(s=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++){var c=o;o=t[2*(r+1)+1],++a<s&&c===o||(a<l?e.bl_tree[2*c]+=a:0!==c?(c!==i&&e.bl_tree[2*c]++,e.bl_tree[32]++):10>=a?e.bl_tree[34]++:e.bl_tree[36]++,a=0,i=c,0===o?(s=138,l=3):c===o?(s=6,l=3):(s=7,l=4))}},Ei=function(e,t,n){var r,i=-1,o=t[1],a=0,s=7,l=4;for(0===o&&(s=138,l=3),r=0;r<=n;r++){var c=o;if(o=t[2*(r+1)+1],!(++a<s&&c===o)){if(a<l)do{vi(e,c,e.bl_tree)}while(0!=--a);else 0!==c?(c!==i&&(vi(e,c,e.bl_tree),a--),vi(e,16,e.bl_tree),pi(e,a-3,2)):10>=a?(vi(e,17,e.bl_tree),pi(e,a-3,3)):(vi(e,18,e.bl_tree),pi(e,a-11,7));a=0,i=c,0===o?(s=138,l=3):c===o?(s=6,l=3):(s=7,l=4)}}},Ai=!1,Ii=function(e,t,n,r){pi(e,r?1:0,3),wi(e),hi(e,n),hi(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},Ti=function(e,t,n,r){var i,o=65535&e|0;for(e=e>>>16&65535|0;0!==n;){n-=i=2e3<n?2e3:n;do{e=e+(o=o+t[r++]|0)|0}while(--i);o%=65521,e%=65521}return o|e<<16|0},xi=new Uint32Array(function(){for(var e,t=[],n=0;256>n;n++){e=n;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}()),Ri=function(e,t,n,r){for(n=r+n,e^=-1;r<n;r++)e=e>>>8^xi[255&(e^t[r])];return-1^e},Oi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Mi={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Ni=function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(si[n]+256+1)]++,e.dyn_dtree[2*(256>t?ai[t]:ai[256+(t>>>7)])]++),e.sym_next===e.sym_end},Li=Mi.Z_NO_FLUSH,Di=Mi.Z_PARTIAL_FLUSH,Pi=Mi.Z_FULL_FLUSH,Ui=Mi.Z_FINISH,Fi=Mi.Z_BLOCK,zi=Mi.Z_OK,Bi=Mi.Z_STREAM_END,ji=Mi.Z_STREAM_ERROR,Gi=Mi.Z_DATA_ERROR,Hi=Mi.Z_BUF_ERROR,Vi=Mi.Z_DEFAULT_COMPRESSION,Zi=Mi.Z_FILTERED,qi=Mi.Z_HUFFMAN_ONLY,Wi=Mi.Z_RLE,Yi=Mi.Z_FIXED,Ki=Mi.Z_DEFAULT_STRATEGY,Ji=Mi.Z_UNKNOWN,Xi=Mi.Z_DEFLATED,Qi=function(e,t){return e.msg=Oi[t],t},$i=function(e){for(var t=e.length;0<=--t;)e[t]=0},eo=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},to=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},no=function(e,t){var n=0<=e.block_start?e.block_start:-1,r=e.strstart-e.block_start,i=0;if(0<e.level){for(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;31>=t;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;256>t;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),Ci(e,e.l_desc),Ci(e,e.d_desc),Si(e,e.dyn_ltree,e.l_desc.max_code),Si(e,e.dyn_dtree,e.d_desc.max_code),Ci(e,e.bl_desc),i=18;3<=i&&0===e.bl_tree[2*ri[i]+1];i--);e.opt_len+=3*(i+1)+14;var o=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3;a<=o&&(o=a)}else o=a=r+5;if(r+4<=o&&-1!==n)Ii(e,n,r,t);else if(4===e.strategy||a===o)pi(e,2+(t?1:0),3),_i(e,ii,oi);else{for(pi(e,4+(t?1:0),3),n=e.l_desc.max_code+1,r=e.d_desc.max_code+1,i+=1,pi(e,n-257,5),pi(e,r-1,5),pi(e,i-4,4),o=0;o<i;o++)pi(e,e.bl_tree[2*ri[o]+1],3);Ei(e,e.dyn_ltree,n-1),Ei(e,e.dyn_dtree,r-1),_i(e,e.dyn_ltree,e.dyn_dtree)}yi(e),t&&wi(e),e.block_start=e.strstart,to(e.strm)},ro=function(e,t){e.pending_buf[e.pending++]=t},io=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},oo=function(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=Ti(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Ri(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},ao=function(e,t){var n=e.max_chain_length,r=e.strstart,i=e.prev_length,o=e.nice_match,a=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,s=e.window,l=e.w_mask,c=e.prev,u=e.strstart+258,d=s[r+i-1],f=s[r+i];e.prev_length>=e.good_match&&(n>>=2),o>e.lookahead&&(o=e.lookahead);do{var h=t;if(s[h+i]===f&&s[h+i-1]===d&&s[h]===s[r]&&s[++h]===s[r+1]){for(r+=2,h++;s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&r<u;);if(h=258-(u-r),r=u-258,h>i){if(e.match_start=t,i=h,h>=o)break;d=s[r+i-1],f=s[r+i]}}}while((t=c[t&l])>a&&0!=--n);return i<=e.lookahead?i:e.lookahead},so=function(e){var t=e.w_size;do{var n=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-262)){e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart);var r,i=e,o=i.w_size,a=r=i.hash_size;do{var s=i.head[--a];i.head[a]=s>=o?s-o:0}while(--r);a=r=o;do{s=i.prev[--a],i.prev[a]=s>=o?s-o:0}while(--r);n+=t}if(0===e.strm.avail_in)break;if(n=oo(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=n,3<=e.lookahead+e.insert)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=eo(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=eo(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(3>e.lookahead+e.insert)););}while(262>e.lookahead&&0!==e.strm.avail_in)},lo=function(e,t){var n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r=0,i=e.strm.avail_in;do{var o=65535,a=e.bi_valid+42>>3;if(e.strm.avail_out<a)break;a=e.strm.avail_out-a;var s=e.strstart-e.block_start;if(o>s+e.strm.avail_in&&(o=s+e.strm.avail_in),o>a&&(o=a),o<n&&(0===o&&t!==Ui||t===Li||o!==s+e.strm.avail_in))break;r=t===Ui&&o===s+e.strm.avail_in?1:0,Ii(e,0,0,r),e.pending_buf[e.pending-4]=o,e.pending_buf[e.pending-3]=o>>8,e.pending_buf[e.pending-2]=~o,e.pending_buf[e.pending-1]=~o>>8,to(e.strm),s&&(s>o&&(s=o),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,o-=s),o&&(oo(e.strm,e.strm.output,e.strm.next_out,o),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o)}while(0===r);return(i-=e.strm.avail_in)&&(i>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=i&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),2>e.matches&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-i,e.strm.next_in),e.strstart),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),r?4:t!==Li&&t!==Ui&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),2>e.matches&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(oo(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,n=(a=65535<e.pending_buf_size-a?65535:e.pending_buf_size-a)>e.w_size?e.w_size:a,((s=e.strstart-e.block_start)>=n||(s||t===Ui)&&t!==Li&&0===e.strm.avail_in&&s<=a)&&(o=s>a?a:s,r=t===Ui&&0===e.strm.avail_in&&o===s?1:0,Ii(e,e.block_start,o,r),e.block_start+=o,to(e.strm)),r?3:1)},co=function(e,t){for(var n;;){if(262>e.lookahead){if(so(e),262>e.lookahead&&t===Li)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=eo(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=ao(e,n)),3<=e.match_length)if(n=Ni(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){e.match_length--;do{e.strstart++,e.ins_h=eo(e,e.ins_h,e.window[e.strstart+3-1]),e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=eo(e,e.ins_h,e.window[e.strstart+1]);else n=Ni(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(no(e,!1),0===e.strm.avail_out))return 1}return e.insert=2>e.strstart?e.strstart:2,t===Ui?(no(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(no(e,!1),0===e.strm.avail_out)?1:2},uo=function(e,t){for(var n,r;;){if(262>e.lookahead){if(so(e),262>e.lookahead&&t===Li)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=eo(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=ao(e,n),5>=e.match_length&&(e.strategy===Zi||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),3<=e.prev_length&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,n=Ni(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=eo(e,e.ins_h,e.window[e.strstart+3-1]),e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(no(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=Ni(e,0,e.window[e.strstart-1]))&&no(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(Ni(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=2>e.strstart?e.strstart:2,t===Ui?(no(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(no(e,!1),0===e.strm.avail_out)?1:2},fo=[new ie(0,0,0,0,lo),new ie(4,4,8,4,co),new ie(4,5,16,8,co),new ie(4,6,32,32,co),new ie(4,4,16,16,uo),new ie(8,16,32,32,uo),new ie(8,16,128,128,uo),new ie(8,32,128,256,uo),new ie(32,128,258,1024,uo),new ie(32,258,258,4096,uo)],ho=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},po=function(e){if(ho(e))return Qi(e,ji);e.total_in=e.total_out=0,e.data_type=Ji;var t=e.state;if(t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,!Ai){var n,r,i;for(e=Array(16),i=r=0;28>i;i++)for(li[i]=r,n=0;n<1<<ei[i];n++)si[r++]=i;for(si[r-1]=i,i=r=0;16>i;i++)for(ci[i]=r,n=0;n<1<<ti[i];n++)ai[r++]=i;for(r>>=7;30>i;i++)for(ci[i]=r<<7,n=0;n<1<<ti[i]-7;n++)ai[256+r++]=i;for(n=0;15>=n;n++)e[n]=0;for(n=0;143>=n;)ii[2*n+1]=8,n++,e[8]++;for(;255>=n;)ii[2*n+1]=9,n++,e[9]++;for(;279>=n;)ii[2*n+1]=7,n++,e[7]++;for(;287>=n;)ii[2*n+1]=8,n++,e[8]++;for(mi(ii,287,e),n=0;30>n;n++)oi[2*n+1]=5,oi[2*n]=gi(n,5);ui=new ne(ii,ei,257,286,15),di=new ne(oi,ti,0,30,15),fi=new ne([],ni,0,19,7),Ai=!0}return t.l_desc=new re(t.dyn_ltree,ui),t.d_desc=new re(t.dyn_dtree,di),t.bl_desc=new re(t.bl_tree,fi),t.bi_buf=0,t.bi_valid=0,yi(t),zi},vo=function(e){var t=po(e);return t===zi&&((e=e.state).window_size=2*e.w_size,$i(e.head),e.max_lazy_match=fo[e.level].max_lazy,e.good_match=fo[e.level].good_length,e.nice_match=fo[e.level].nice_length,e.max_chain_length=fo[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t},go=function(e,t,n,r,i,o){if(!e)return ji;var a=1;if(t===Vi&&(t=6),0>r?(a=0,r=-r):15<r&&(a=2,r-=16),1>i||9<i||n!==Xi||8>r||15<r||0>t||9<t||0>o||o>Yi||8===r&&1!==a)return Qi(e,ji);8===r&&(r=9);var s=new oe;return e.state=s,s.strm=e,s.status=42,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=n,vo(e)},mo={deflateInit:function(e,t){return go(e,t,Xi,15,8,Ki)},deflateInit2:go,deflateReset:vo,deflateResetKeep:po,deflateSetHeader:function(e,t){return ho(e)||2!==e.state.wrap?ji:(e.state.gzhead=t,zi)},deflate:function(e,t){if(ho(e)||t>Fi||0>t)return e?Qi(e,ji):ji;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==Ui)return Qi(e,0===e.avail_out?Hi:ji);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(to(e),0===e.avail_out)return n.last_flush=-1,zi}else if(0===e.avail_in&&2*t-(4<t?9:0)<=2*r-(4<r?9:0)&&t!==Ui)return Qi(e,Hi);if(666===n.status&&0!==e.avail_in)return Qi(e,Hi);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status&&(r=Xi+(n.w_bits-8<<4)<<8,r|=(n.strategy>=qi||2>n.level?0:6>n.level?1:6===n.level?2:3)<<6,0!==n.strstart&&(r|=32),io(n,r+(31-r%31)),0!==n.strstart&&(io(n,e.adler>>>16),io(n,65535&e.adler)),e.adler=1,n.status=113,to(e),0!==n.pending))return n.last_flush=-1,zi;if(57===n.status)if(e.adler=0,ro(n,31),ro(n,139),ro(n,8),n.gzhead)ro(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ro(n,255&n.gzhead.time),ro(n,n.gzhead.time>>8&255),ro(n,n.gzhead.time>>16&255),ro(n,n.gzhead.time>>24&255),ro(n,9===n.level?2:n.strategy>=qi||2>n.level?4:0),ro(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(ro(n,255&n.gzhead.extra.length),ro(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Ri(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(ro(n,0),ro(n,0),ro(n,0),ro(n,0),ro(n,0),ro(n,9===n.level?2:n.strategy>=qi||2>n.level?4:0),ro(n,3),n.status=113,to(e),0!==n.pending)return n.last_flush=-1,zi;if(69===n.status){if(n.gzhead.extra){r=n.pending;for(var i=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+i>n.pending_buf_size;){var o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>r&&(e.adler=Ri(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex+=o,to(e),0!==n.pending)return n.last_flush=-1,zi;r=0,i-=o}o=new Uint8Array(n.gzhead.extra),n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>r&&(e.adler=Ri(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Ri(e.adler,n.pending_buf,n.pending-r,r)),to(e),0!==n.pending)return n.last_flush=-1,zi;r=0}i=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,ro(n,i)}while(0!==i);n.gzhead.hcrc&&n.pending>r&&(e.adler=Ri(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Ri(e.adler,n.pending_buf,n.pending-r,r)),to(e),0!==n.pending)return n.last_flush=-1,zi;r=0}i=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,ro(n,i)}while(0!==i);n.gzhead.hcrc&&n.pending>r&&(e.adler=Ri(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(to(e),0!==n.pending))return n.last_flush=-1,zi;ro(n,255&e.adler),ro(n,e.adler>>8&255),e.adler=0}if(n.status=113,to(e),0!==n.pending)return n.last_flush=-1,zi}if(0!==e.avail_in||0!==n.lookahead||t!==Li&&666!==n.status){if(r=0===n.level?lo(n,t):n.strategy===qi?function(e,t){for(var n;;){if(0===e.lookahead&&(so(e),0===e.lookahead)){if(t===Li)return 1;break}if(e.match_length=0,n=Ni(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(no(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ui?(no(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(no(e,!1),0===e.strm.avail_out)?1:2}(n,t):n.strategy===Wi?function(e,t){for(var n,r,i,o=e.window;;){if(258>=e.lookahead){if(so(e),258>=e.lookahead&&t===Li)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(n=o[r=e.strstart-1])===o[++r]&&n===o[++r]&&n===o[++r]){for(i=e.strstart+258;n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&r<i;);e.match_length=258-(i-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(n=Ni(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ni(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(no(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ui?(no(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(no(e,!1),0===e.strm.avail_out)?1:2}(n,t):fo[n.level].func(n,t),3!==r&&4!==r||(n.status=666),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),zi;if(2===r&&(t===Di?(pi(n,2,3),vi(n,256,ii),16===n.bi_valid?(hi(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):8<=n.bi_valid&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)):t!==Fi&&(Ii(n,0,0,!1),t===Pi&&($i(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),to(e),0===e.avail_out))return n.last_flush=-1,zi}return t!==Ui?zi:0>=n.wrap?Bi:(2===n.wrap?(ro(n,255&e.adler),ro(n,e.adler>>8&255),ro(n,e.adler>>16&255),ro(n,e.adler>>24&255),ro(n,255&e.total_in),ro(n,e.total_in>>8&255),ro(n,e.total_in>>16&255),ro(n,e.total_in>>24&255)):(io(n,e.adler>>>16),io(n,65535&e.adler)),to(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?zi:Bi)},deflateEnd:function(e){if(ho(e))return ji;var t=e.state.status;return e.state=null,113===t?Qi(e,Gi):zi},deflateSetDictionary:function(e,t){var n=t.length;if(ho(e))return ji;var r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return ji;if(1===i&&(e.adler=Ti(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&($i(r.head),r.strstart=0,r.block_start=0,r.insert=0);var o=new Uint8Array(r.w_size);o.set(t.subarray(n-r.w_size,n),0),t=o,n=r.w_size}o=e.avail_in;var a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,so(r);3<=r.lookahead;){t=r.strstart,n=r.lookahead-2;do{r.ins_h=eo(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--n);r.strstart=t,r.lookahead=2,so(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,r.wrap=i,zi},deflateInfo:"pako deflate (from Nodeca project)"},yo={assign:function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==C(n))throw new TypeError(n+"must be non-object");for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},flattenChunks:function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;t=new Uint8Array(t),r=n=0;for(var i=e.length;n<i;n++){var o=e[n];t.set(o,r),r+=o.length}return t}},wo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Vr){wo=!1}for(var bo=new Uint8Array(256),ko=0;256>ko;ko++)bo[ko]=252<=ko?6:248<=ko?5:240<=ko?4:224<=ko?3:192<=ko?2:1;bo[254]=bo[254]=1;var _o={string2buf:function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,r=e.length,i=0;for(t=0;t<r;t++){var o=e.charCodeAt(t);if(55296==(64512&o)&&t+1<r){var a=e.charCodeAt(t+1);56320==(64512&a)&&(o=65536+(o-55296<<10)+(a-56320),t++)}i+=128>o?1:2048>o?2:65536>o?3:4}var s=new Uint8Array(i);for(t=n=0;n<i;t++)55296==(64512&(o=e.charCodeAt(t)))&&t+1<r&&(56320==(64512&(a=e.charCodeAt(t+1)))&&(o=65536+(o-55296<<10)+(a-56320),t++)),128>o?s[n++]=o:(2048>o?s[n++]=192|o>>>6:(65536>o?s[n++]=224|o>>>12:(s[n++]=240|o>>>18,s[n++]=128|o>>>12&63),s[n++]=128|o>>>6&63),s[n++]=128|63&o);return s},buf2string:function(e,t){var n,r,i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));for(t=Array(2*i),n=r=0;n<i;){var o=e[n++];if(128>o)t[r++]=o;else{var a=bo[o];if(4<a)t[r++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;1<a&&n<i;)o=o<<6|63&e[n++],a--;1<a?t[r++]=65533:65536>o?t[r++]=o:(o-=65536,t[r++]=55296|o>>10&1023,t[r++]=56320|1023&o)}}}if(65534>(e=r)&&t.subarray&&wo)t=String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));else{for(i="",n=0;n<e;n++)i+=String.fromCharCode(t[n]);t=i}return t},utf8border:function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;0<=n&&128==(192&e[n]);)n--;return 0>n||0===n?t:n+bo[e[n]]>t?n:t}},Co=function(){this.input=null,this.total_in=this.avail_in=this.next_in=0,this.output=null,this.total_out=this.avail_out=this.next_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},So=Object.prototype.toString,Eo=Mi.Z_NO_FLUSH,Ao=Mi.Z_SYNC_FLUSH,Io=Mi.Z_FULL_FLUSH,To=Mi.Z_FINISH,xo=Mi.Z_OK,Ro=Mi.Z_STREAM_END,Oo=Mi.Z_DEFAULT_COMPRESSION,Mo=Mi.Z_DEFAULT_STRATEGY,No=Mi.Z_DEFLATED;ae.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;for(t=t===~~t?t:!0===t?To:Eo,"string"==typeof e?n.input=_o.string2buf(e):"[object ArrayBuffer]"===So.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(t===Ao||t===Io)&&6>=n.avail_out)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if((e=mo.deflate(n,t))===Ro)return 0<n.next_out&&this.onData(n.output.subarray(0,n.next_out)),e=mo.deflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===xo;if(0===n.avail_out)this.onData(n.output);else if(0<t&&0<n.next_out)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}return!0},ae.prototype.onData=function(e){this.chunks.push(e)},ae.prototype.onEnd=function(e){e===xo&&(this.result=yo.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Lo,Do,Po=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Uo=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Fo=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),zo=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Bo=function(e,t,n,r,i,o,a,s){var l,c,u,d,f,h,p,v=s.bits,g=new Uint16Array(16),m=new Uint16Array(16);for(l=0;15>=l;l++)g[l]=0;for(c=0;c<r;c++)g[t[n+c]]++;var y=v;for(u=15;1<=u&&0===g[u];u--);if(y>u&&(y=u),0===u)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(v=1;v<u&&0===g[v];v++);for(y<v&&(y=v),l=d=1;15>=l;l++)if(d<<=1,0>(d-=g[l]))return-1;if(0<d&&(0===e||1!==u))return-1;for(m[1]=0,l=1;15>l;l++)m[l+1]=m[l]+g[l];for(c=0;c<r;c++)0!==t[n+c]&&(a[m[t[n+c]]++]=c);if(0===e)var w=p=a,b=20;else 1===e?(w=Po,p=Uo,b=257):(w=Fo,p=zo,b=0);c=f=0,l=v;var k=o;r=y,m=0;var _=-1,C=1<<y,S=C-1;if(1===e&&852<C||2===e&&592<C)return 1;for(;;){var E=l-m;if(a[c]+1<b)var A=0,I=a[c];else a[c]>=b?(A=p[a[c]-b],I=w[a[c]-b]):(A=96,I=0);d=1<<l-m,v=h=1<<r;do{i[k+(f>>m)+(h-=d)]=E<<24|A<<16|I|0}while(0!==h);for(d=1<<l-1;f&d;)d>>=1;if(0!==d?(f&=d-1,f+=d):f=0,c++,0==--g[l]){if(l===u)break;l=t[n+a[c]]}if(l>y&&(f&S)!==_){for(0===m&&(m=y),k+=v,d=1<<(r=l-m);r+m<u&&!(0>=(d-=g[r+m]));)r++,d<<=1;if(C+=1<<r,1===e&&852<C||2===e&&592<C)return 1;i[_=f&S]=y<<24|r<<16|k-o|0}}return 0!==f&&(i[k+f]=l-m<<24|4194304),s.bits=y,0},jo=Mi.Z_FINISH,Go=Mi.Z_BLOCK,Ho=Mi.Z_TREES,Vo=Mi.Z_OK,Zo=Mi.Z_STREAM_END,qo=Mi.Z_NEED_DICT,Wo=Mi.Z_STREAM_ERROR,Yo=Mi.Z_DATA_ERROR,Ko=Mi.Z_MEM_ERROR,Jo=Mi.Z_BUF_ERROR,Xo=Mi.Z_DEFLATED,Qo=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)},$o=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||16180>t.mode||16211<t.mode?1:0},ea=function(e){if($o(e))return Wo;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Vo},ta=function(e){if($o(e))return Wo;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ea(e)},na=function(e,t){if($o(e))return Wo;var n=e.state;if(0>t){var r=0;t=-t}else r=5+(t>>4),48>t&&(t&=15);return t&&(8>t||15<t)?Wo:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,ta(e))},ra=function(e,t){if(!e)return Wo;var n=new le;return e.state=n,n.strm=e,n.window=null,n.mode=16180,(t=na(e,t))!==Vo&&(e.state=null),t},ia=!0,oa=function(e,t,n,r){var i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):((e=i.wsize-i.wnext)>r&&(e=r),i.window.set(t.subarray(n-r,n-r+e),i.wnext),(r-=e)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=e,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=e))),0},aa={inflateReset:ta,inflateReset2:na,inflateResetKeep:ea,inflateInit:function(e){return ra(e,15)},inflateInit2:ra,inflate:function(e,t){var n=new Uint8Array(4),r=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if($o(e)||!e.output||!e.input&&0!==e.avail_in)return Wo;var i=e.state;16191===i.mode&&(i.mode=16192);var o=e.next_out,a=e.output,s=e.avail_out,l=e.next_in,c=e.input,u=e.avail_in,d=i.hold,f=i.bits,h=u,p=s,v=Vo;e:for(;;)switch(i.mode){case 16180:if(0===i.wrap){i.mode=16192;break}for(;16>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(2&i.wrap&&35615===d){0===i.wbits&&(i.wbits=15),i.check=0,n[0]=255&d,n[1]=d>>>8&255,i.check=Ri(i.check,n,2,0),f=d=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",i.mode=16209;break}if((15&d)!==Xo){e.msg="unknown compression method",i.mode=16209;break}f-=4;var g=8+(15&(d>>>=4));if(0===i.wbits&&(i.wbits=g),15<g||g>i.wbits){e.msg="invalid window size",i.mode=16209;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=512&d?16189:16191,f=d=0;break;case 16181:for(;16>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(i.flags=d,(255&i.flags)!==Xo){e.msg="unknown compression method",i.mode=16209;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=16209;break}i.head&&(i.head.text=d>>8&1),512&i.flags&&4&i.wrap&&(n[0]=255&d,n[1]=d>>>8&255,i.check=Ri(i.check,n,2,0)),f=d=0,i.mode=16182;case 16182:for(;32>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}i.head&&(i.head.time=d),512&i.flags&&4&i.wrap&&(n[0]=255&d,n[1]=d>>>8&255,n[2]=d>>>16&255,n[3]=d>>>24&255,i.check=Ri(i.check,n,4,0)),f=d=0,i.mode=16183;case 16183:for(;16>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}i.head&&(i.head.xflags=255&d,i.head.os=d>>8),512&i.flags&&4&i.wrap&&(n[0]=255&d,n[1]=d>>>8&255,i.check=Ri(i.check,n,2,0)),f=d=0,i.mode=16184;case 16184:if(1024&i.flags){for(;16>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}i.length=d,i.head&&(i.head.extra_len=d),512&i.flags&&4&i.wrap&&(n[0]=255&d,n[1]=d>>>8&255,i.check=Ri(i.check,n,2,0)),f=d=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags){var m=i.length;if(m>u&&(m=u),m&&(i.head&&(g=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(c.subarray(l,l+m),g)),512&i.flags&&4&i.wrap&&(i.check=Ri(i.check,c,m,l)),u-=m,l+=m,i.length-=m),i.length)break e}i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===u)break e;m=0;do{g=c[l+m++],i.head&&g&&65536>i.length&&(i.head.name+=String.fromCharCode(g))}while(g&&m<u);if(512&i.flags&&4&i.wrap&&(i.check=Ri(i.check,c,m,l)),u-=m,l+=m,g)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===u)break e;m=0;do{g=c[l+m++],i.head&&g&&65536>i.length&&(i.head.comment+=String.fromCharCode(g))}while(g&&m<u);if(512&i.flags&&4&i.wrap&&(i.check=Ri(i.check,c,m,l)),u-=m,l+=m,g)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;16>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(4&i.wrap&&d!==(65535&i.check)){e.msg="header crc mismatch",i.mode=16209;break}f=d=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=16191;break;case 16189:for(;32>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}e.adler=i.check=Qo(d),f=d=0,i.mode=16190;case 16190:if(0===i.havedict)return e.next_out=o,e.avail_out=s,e.next_in=l,e.avail_in=u,i.hold=d,i.bits=f,qo;e.adler=i.check=1,i.mode=16191;case 16191:if(t===Go||t===Ho)break e;case 16192:if(i.last){d>>>=7&f,f-=7&f,i.mode=16206;break}for(;3>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}switch(i.last=1&d,--f,3&(d>>>=1)){case 0:i.mode=16193;break;case 1:if(m=i,ia){for(Lo=new Int32Array(512),Do=new Int32Array(32),g=0;144>g;)m.lens[g++]=8;for(;256>g;)m.lens[g++]=9;for(;280>g;)m.lens[g++]=7;for(;288>g;)m.lens[g++]=8;for(Bo(1,m.lens,0,288,Lo,0,m.work,{bits:9}),g=0;32>g;)m.lens[g++]=5;Bo(2,m.lens,0,32,Do,0,m.work,{bits:5}),ia=!1}if(m.lencode=Lo,m.lenbits=9,m.distcode=Do,m.distbits=5,i.mode=16199,t===Ho){d>>>=2,f-=2;break e}break;case 2:i.mode=16196;break;case 3:e.msg="invalid block type",i.mode=16209}d>>>=2,f-=2;break;case 16193:for(d>>>=7&f,f-=7&f;32>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",i.mode=16209;break}if(i.length=65535&d,f=d=0,i.mode=16194,t===Ho)break e;case 16194:i.mode=16195;case 16195:if(m=i.length){if(m>u&&(m=u),m>s&&(m=s),0===m)break e;a.set(c.subarray(l,l+m),o),u-=m,l+=m,s-=m,o+=m,i.length-=m;break}i.mode=16191;break;case 16196:for(;14>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(i.nlen=257+(31&d),d>>>=5,f-=5,i.ndist=1+(31&d),d>>>=5,f-=5,i.ncode=4+(15&d),d>>>=4,f-=4,286<i.nlen||30<i.ndist){e.msg="too many length or distance symbols",i.mode=16209;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;3>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}i.lens[r[i.have++]]=7&d,d>>>=3,f-=3}for(;19>i.have;)i.lens[r[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,m={bits:i.lenbits},v=Bo(0,i.lens,0,19,i.lencode,0,i.work,m),i.lenbits=m.bits,v){e.msg="invalid code lengths set",i.mode=16209;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;;){var y=i.lencode[d&(1<<i.lenbits)-1];if(m=y>>>24,y&=65535,m<=f)break;if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(16>y)d>>>=m,f-=m,i.lens[i.have++]=y;else{if(16===y){for(g=m+2;f<g;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(d>>>=m,f-=m,0===i.have){e.msg="invalid bit length repeat",i.mode=16209;break}g=i.lens[i.have-1],m=3+(3&d),d>>>=2,f-=2}else if(17===y){for(g=m+3;f<g;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}f-=m,g=0,m=3+(7&(d>>>=m)),d>>>=3,f-=3}else{for(g=m+7;f<g;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}f-=m,g=0,m=11+(127&(d>>>=m)),d>>>=7,f-=7}if(i.have+m>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=16209;break}for(;m--;)i.lens[i.have++]=g}}if(16209===i.mode)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=16209;break}if(i.lenbits=9,m={bits:i.lenbits},v=Bo(1,i.lens,0,i.nlen,i.lencode,0,i.work,m),i.lenbits=m.bits,v){e.msg="invalid literal/lengths set",i.mode=16209;break}if(i.distbits=6,i.distcode=i.distdyn,m={bits:i.distbits},v=Bo(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,m),i.distbits=m.bits,v){e.msg="invalid distances set",i.mode=16209;break}if(i.mode=16199,t===Ho)break e;case 16199:i.mode=16200;case 16200:if(6<=u&&258<=s){e.next_out=o,e.avail_out=s,e.next_in=l,e.avail_in=u,i.hold=d,i.bits=f;var w=e,b=w.state,k=w.next_in;a=w.input;var _=k+(w.avail_in-5),C=w.next_out;c=w.output;var S=C-(p-w.avail_out),E=C+(w.avail_out-257),A=b.dmax;y=b.wsize;var I=b.whave,T=b.wnext,x=b.window;g=b.hold,m=b.bits,f=b.lencode,d=b.distcode,s=(1<<b.lenbits)-1,u=(1<<b.distbits)-1;t:do{15>m&&(g+=a[k++]<<m,m+=8,g+=a[k++]<<m,m+=8);var R=f[g&s];n:for(;;){if(g>>>=o=R>>>24,m-=o,0===(o=R>>>16&255))c[C++]=65535&R;else{if(!(16&o)){if(0==(64&o)){R=f[(65535&R)+(g&(1<<o)-1)];continue n}32&o?b.mode=16191:(w.msg="invalid literal/length code",b.mode=16209);break t}l=65535&R,(o&=15)&&(m<o&&(g+=a[k++]<<m,m+=8),l+=g&(1<<o)-1,g>>>=o,m-=o),15>m&&(g+=a[k++]<<m,m+=8,g+=a[k++]<<m,m+=8),R=d[g&u];r:for(;;){if(g>>>=o=R>>>24,m-=o,!(16&(o=R>>>16&255))){if(0==(64&o)){R=d[(65535&R)+(g&(1<<o)-1)];continue r}w.msg="invalid distance code",b.mode=16209;break t}var O=65535&R;if(m<(o&=15)&&(g+=a[k++]<<m,(m+=8)<o&&(g+=a[k++]<<m,m+=8)),(O+=g&(1<<o)-1)>A){w.msg="invalid distance too far back",b.mode=16209;break t}if(g>>>=o,m-=o,O>(o=C-S)){if((o=O-o)>I&&b.sane){w.msg="invalid distance too far back",b.mode=16209;break t}var M=0;if(R=x,0===T){if(M+=y-o,o<l){l-=o;do{c[C++]=x[M++]}while(--o);M=C-O,R=c}}else if(T<o){if(M+=y+T-o,(o-=T)<l){l-=o;do{c[C++]=x[M++]}while(--o);if(M=0,T<l){l-=o=T;do{c[C++]=x[M++]}while(--o);M=C-O,R=c}}}else if(M+=T-o,o<l){l-=o;do{c[C++]=x[M++]}while(--o);M=C-O,R=c}for(;2<l;)c[C++]=R[M++],c[C++]=R[M++],c[C++]=R[M++],l-=3;l&&(c[C++]=R[M++],1<l&&(c[C++]=R[M++]))}else{M=C-O;do{c[C++]=c[M++],c[C++]=c[M++],c[C++]=c[M++],l-=3}while(2<l);l&&(c[C++]=c[M++],1<l&&(c[C++]=c[M++]))}break}}break}}while(k<_&&C<E);k-=l=m>>3,m-=l<<3,w.next_in=k,w.next_out=C,w.avail_in=k<_?_-k+5:5-(k-_),w.avail_out=C<E?E-C+257:257-(C-E),b.hold=g&(1<<m)-1,b.bits=m,o=e.next_out,a=e.output,s=e.avail_out,l=e.next_in,c=e.input,u=e.avail_in,d=i.hold,f=i.bits,16191===i.mode&&(i.back=-1);break}for(i.back=0;m=(y=i.lencode[d&(1<<i.lenbits)-1])>>>24,g=y>>>16&255,y&=65535,!(m<=f);){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(g&&0==(240&g)){for(x=m,T=g,I=y;m=(y=i.lencode[I+((d&(1<<x+T)-1)>>x)])>>>24,g=y>>>16&255,y&=65535,!(x+m<=f);){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}d>>>=x,f-=x,i.back+=x}if(d>>>=m,f-=m,i.back+=m,i.length=y,0===g){i.mode=16205;break}if(32&g){i.back=-1,i.mode=16191;break}if(64&g){e.msg="invalid literal/length code",i.mode=16209;break}i.extra=15&g,i.mode=16201;case 16201:if(i.extra){for(g=i.extra;f<g;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}i.length+=d&(1<<i.extra)-1,d>>>=i.extra,f-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;m=(y=i.distcode[d&(1<<i.distbits)-1])>>>24,g=y>>>16&255,y&=65535,!(m<=f);){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(0==(240&g)){for(x=m,T=g,I=y;m=(y=i.distcode[I+((d&(1<<x+T)-1)>>x)])>>>24,g=y>>>16&255,y&=65535,!(x+m<=f);){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}d>>>=x,f-=x,i.back+=x}if(d>>>=m,f-=m,i.back+=m,64&g){e.msg="invalid distance code",i.mode=16209;break}i.offset=y,i.extra=15&g,i.mode=16203;case 16203:if(i.extra){for(g=i.extra;f<g;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}i.offset+=d&(1<<i.extra)-1,d>>>=i.extra,f-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=16209;break}i.mode=16204;case 16204:if(0===s)break e;if(m=p-s,i.offset>m){if((m=i.offset-m)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=16209;break}m>i.wnext?(m-=i.wnext,g=i.wsize-m):g=i.wnext-m,m>i.length&&(m=i.length),x=i.window}else x=a,g=o-i.offset,m=i.length;m>s&&(m=s),s-=m,i.length-=m;do{a[o++]=x[g++]}while(--m);0===i.length&&(i.mode=16200);break;case 16205:if(0===s)break e;a[o++]=i.length,s--,i.mode=16200;break;case 16206:if(i.wrap){for(;32>f;){if(0===u)break e;u--,d|=c[l++]<<f,f+=8}if(p-=s,e.total_out+=p,i.total+=p,4&i.wrap&&p&&(e.adler=i.check=i.flags?Ri(i.check,a,p,o-p):Ti(i.check,a,p,o-p)),p=s,4&i.wrap&&(i.flags?d:Qo(d))!==i.check){e.msg="incorrect data check",i.mode=16209;break}f=d=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;32>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(4&i.wrap&&d!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=16209;break}f=d=0}i.mode=16208;case 16208:v=Zo;break e;case 16209:v=Yo;break e;case 16210:return Ko;default:return Wo}return e.next_out=o,e.avail_out=s,e.next_in=l,e.avail_in=u,i.hold=d,i.bits=f,(i.wsize||p!==e.avail_out&&16209>i.mode&&(16206>i.mode||t!==jo))&&oa(e,e.output,e.next_out,p-e.avail_out),h-=e.avail_in,p-=e.avail_out,e.total_in+=h,e.total_out+=p,i.total+=p,4&i.wrap&&p&&(e.adler=i.check=i.flags?Ri(i.check,a,p,e.next_out-p):Ti(i.check,a,p,e.next_out-p)),e.data_type=i.bits+(i.last?64:0)+(16191===i.mode?128:0)+(16199===i.mode||16194===i.mode?256:0),(0===h&&0===p||t===jo)&&v===Vo&&(v=Jo),v},inflateEnd:function(e){if($o(e))return Wo;var t=e.state;return t.window&&(t.window=null),e.state=null,Vo},inflateGetHeader:function(e,t){return $o(e)||0==(2&(e=e.state).wrap)?Wo:(e.head=t,t.done=!1,Vo)},inflateSetDictionary:function(e,t){var n=t.length;if($o(e))return Wo;var r=e.state;if(0!==r.wrap&&16190!==r.mode)return Wo;if(16190===r.mode&&Ti(1,t,n,0)!==r.check)return Yo;return oa(e,t,n,n)?(r.mode=16210,Ko):(r.havedict=1,Vo)},inflateInfo:"pako inflate (from Nodeca project)"},sa=function(){this.os=this.xflags=this.time=this.text=0,this.extra=null,this.extra_len=0,this.comment=this.name="",this.hcrc=0,this.done=!1},la=Object.prototype.toString,ca=Mi.Z_NO_FLUSH,ua=Mi.Z_FINISH,da=Mi.Z_OK,fa=Mi.Z_STREAM_END,ha=Mi.Z_NEED_DICT,pa=Mi.Z_STREAM_ERROR,va=Mi.Z_DATA_ERROR,ga=Mi.Z_MEM_ERROR;ce.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;if(this.ended)return!1;var o=t===~~t?t:!0===t?ua:ca;for("[object ArrayBuffer]"===la.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(t=aa.inflate(n,o))===ha&&i&&((t=aa.inflateSetDictionary(n,i))===da?t=aa.inflate(n,o):t===va&&(t=ha));0<n.avail_in&&t===fa&&0<n.state.wrap&&0!==e[n.next_in];)aa.inflateReset(n),t=aa.inflate(n,o);switch(t){case pa:case va:case ha:case ga:return this.onEnd(t),this.ended=!0,!1}var a=n.avail_out;if(n.next_out&&(0===n.avail_out||t===fa))if("string"===this.options.to){var s=_o.utf8border(n.output,n.next_out),l=n.next_out-s,c=_o.buf2string(n.output,s);n.next_out=l,n.avail_out=r-l,l&&n.output.set(n.output.subarray(s,s+l),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(t!==da||0!==a){if(t===fa){t=aa.inflateEnd(this.strm),this.onEnd(t),this.ended=!0;break}if(0===n.avail_in)break}}return!0},ce.prototype.onData=function(e){this.chunks.push(e)},ce.prototype.onEnd=function(e){e===da&&(this.result="string"===this.options.to?this.chunks.join(""):yo.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ma,ya,wa,ba={Deflate:ae,deflate:se,deflateRaw:function(e,t){return(t=t||{}).raw=!0,se(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,se(e,t)},Inflate:ce,inflate:ue,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ue(e,t)},ungzip:ue,constants:Mi},ka=["inputs"],_a=["inputId"],Ca=["inputs"],Sa=["inputId"],Ea=["type"],Aa=Object.defineProperty,Ia=function(e,t,n){return(t="symbol"!==C(t)?t+"":t)in e?Aa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ta=Object.defineProperty,xa=function(e,t,n){return(t="symbol"!==C(t)?t+"":t)in e?Ta(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ra=function(e){return e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e}(Ra||{}),Oa={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Ma={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Na={},La={},Da={},Pa={childNodes:function(e){return fe("Node",e,"childNodes")},parentNode:function(e){return fe("Node",e,"parentNode")},parentElement:function(e){return fe("Node",e,"parentElement")},textContent:function(e){return fe("Node",e,"textContent")},contains:function(e,t){return he("Node",e,"contains")(t)},getRootNode:function(e){return he("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?fe("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?fe("Element",e,"shadowRoot"):null},querySelector:function(e,t){return fe("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return fe("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return de("MutationObserver").constructor}},Ua=s((function e(){i(this,e),xa(this,"idNodeMap",new Map),xa(this,"nodeMetaMap",new WeakMap)}),[{key:"getId",value:function(e){var t;return e&&null!=(e=null==(t=this.getMeta(e))?void 0:t.id)?e:-1}},{key:"getNode",value:function(e){return this.idNodeMap.get(e)||null}},{key:"getIds",value:function(){return Array.from(this.idNodeMap.keys())}},{key:"getMeta",value:function(e){return this.nodeMetaMap.get(e)||null}},{key:"removeNodeFromMap",value:function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))}},{key:"has",value:function(e){return this.idNodeMap.has(e)}},{key:"hasNode",value:function(e){return this.nodeMetaMap.has(e)}},{key:"add",value:function(e,t){this.idNodeMap.set(t.id,e),this.nodeMetaMap.set(e,t)}},{key:"replace",value:function(e,t){var n=this.getNode(e);n&&(n=this.nodeMetaMap.get(n))&&this.nodeMetaMap.set(t,n),this.idNodeMap.set(e,t)}},{key:"reset",value:function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}]),Fa=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,za=/^(?:[a-z+]+:)?\/\//i,Ba=/^www\..*/i,ja=/^(data:)([^,]*),(.*)/i,Ga=1,Ha=/[^a-z0-9-_:]/,Va=/^[^ \t\n\r\u000c]+/,Za=/^[, \t\n\r\u000c]+/,qa=new WeakMap,Wa={},Ya=String,Ka=function(){return{isColorSupported:!1,reset:Ya,bold:Ya,dim:Ya,italic:Ya,underline:Ya,inverse:Ya,hidden:Ya,strikethrough:Ya,black:Ya,red:Ya,green:Ya,yellow:Ya,blue:Ya,magenta:Ya,cyan:Ya,white:Ya,gray:Ya,bgBlack:Ya,bgRed:Ya,bgGreen:Ya,bgYellow:Ya,bgBlue:Ya,bgMagenta:Ya,bgCyan:Ya,bgWhite:Ya}};(Wa=Ka()).createColors=Ka;var Ja=Wa,Xa=function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),Qa=function(e){function t(e,n,o,a,s,l){i(this,t);var c=r(this,t,[e]);return c.name="CssSyntaxError",c.reason=e,s&&(c.file=s),a&&(c.source=a),l&&(c.plugin=l),void 0!==n&&void 0!==o&&("number"==typeof n?(c.line=n,c.column=o):(c.line=n.line,c.column=n.column,c.endLine=o.line,c.endColumn=o.column)),c.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(c,t),c}return f(t,e),s(t,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var t=this;if(!this.source)return"";var n=this.source;null==e&&(e=Ja.isColorSupported),Xa&&e&&(n=Xa(n)),n=n.split(/\r?\n/);var r=Math.max(this.line-3,0),i=Math.min(this.line+2,n.length),o=String(i).length;if(e)var a=(e=Ja.createColors(!0)).bold,s=e.gray,l=e.red,c=function(e){return a(l(e))},u=function(e){return s(e)};else c=u=function(e){return e};return n.slice(r,i).map((function(e,n){var i=r+1+n;return n=" "+(" "+i).slice(-o)+" | ",i===t.line?(i=u(n.replace(/\d/g," "))+e.slice(0,t.column-1).replace(/[^\t]/g," "),c(">")+u(n)+e+"\n "+i+c("^")):" "+u(n)+e})).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(E(Error));Qa.default=Qa;var $a=Symbol("isClean"),es=Symbol("my"),ts={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1},ns=s((function e(t){i(this,e),this.builder=t}),[{key:"atrule",value:function(e,t){var n="@"+e.name,r=e.params?this.rawValue(e,"params"):"";void 0!==e.raws.afterName?n+=e.raws.afterName:r&&(n+=" "),e.nodes?this.block(e,n+r):this.builder(n+r+((e.raws.between||"")+(t?";":"")),e)}},{key:"beforeAfter",value:function(e,t){t="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var n=e.parent,r=0;n&&"root"!==n.type;)r+=1,n=n.parent;if(t.includes("\n")&&(e=this.raw(e,null,"indent")).length)for(n=0;n<r;n++)t+=e;return t}},{key:"block",value:function(e,t){var n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),t=this.raw(e,"after")):t=this.raw(e,"after","emptyBody"),t&&this.builder(t),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var t=e.nodes.length-1;0<t&&"comment"===e.nodes[t].type;)--t;for(var n=this.raw(e,"semicolon"),r=0;r<e.nodes.length;r++){var i=e.nodes[r],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==r||n)}}},{key:"comment",value:function(e){var t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}},{key:"decl",value:function(e,t){var n=this.raw(e,"between","colon");n=e.prop+n+this.rawValue(e,"value"),e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,t,n){if(n||(n=t),t){var r=e.raws[t];if(void 0!==r)return r}var i=e.parent;if("before"===n&&(!i||"root"===i.type&&i.first===e||i&&"document"===i.type))return"";if(!i)return ts[n];if((i=e.root()).rawCache||(i.rawCache={}),void 0!==i.rawCache[n])return i.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);var o="raw"+function(e){return e[0].toUpperCase()+e.slice(1)}(n);return this[o]?r=this[o](i,e):i.walk((function(e){if(void 0!==(r=e.raws[t]))return!1})),void 0===r&&(r=ts[n]),i.rawCache[n]=r}},{key:"rawBeforeClose",value:function(e){var t;return e.walk((function(e){if(e.nodes&&0<e.nodes.length&&void 0!==e.raws.after)return(t=e.raws.after).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawBeforeComment",value:function(e,t){var n;return e.walkComments((function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeDecl",value:function(e,t){var n;return e.walkDecls((function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeOpen",value:function(e){var t;return e.walk((function(e){if("decl"!==e.type&&void 0!==(t=e.raws.between))return!1})),t}},{key:"rawBeforeRule",value:function(e){var t;return e.walk((function(n){if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return(t=n.raws.before).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawColon",value:function(e){var t;return e.walkDecls((function(e){if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}},{key:"rawEmptyBody",value:function(e){var t;return e.walk((function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(t=e.raws.after))return!1})),t}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk((function(n){var r=n.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==n.raws.before)return n=n.raws.before.split("\n"),t=(t=n[n.length-1]).replace(/\S/g,""),!1})),t);var t}},{key:"rawSemicolon",value:function(e){var t;return e.walk((function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(t=e.raws.semicolon))return!1})),t}},{key:"rawValue",value:function(e,t){var n=e[t];return(e=e.raws[t])&&e.value===n?e.raw:n}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,t){if(!this[e.type])throw Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}]),rs=ns.default=ns;Le.default=Le;var is=s((function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var n in i(this,e),this.raws={},this[$a]=!1,this[es]=!0,t)if("nodes"===n){this.nodes=[];var r,o=l(t[n]);try{for(o.s();!(r=o.n()).done;){var a=r.value;"function"==typeof a.clone?this.append(a.clone()):this.append(a)}}catch(e){o.e(e)}finally{o.f()}}else this[n]=t[n]}),[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(t.input.from,":").concat(t.start.line,":").concat(t.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(e in t)this[e]=t[e];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=De(this);for(e in t)n[e]=t[e];return n}},{key:"cloneAfter",value:function(){var e=this.clone(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return this.parent.insertAfter(this,e),e}},{key:"cloneBefore",value:function(){var e=this.clone(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return this.parent.insertBefore(this,e),e}},{key:"error",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var n=this.rangeBy(t),r=n.end;return n=n.start,this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new Qa(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:"root"===t?function(){return e.root().toProxy()}:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[$a]){this[$a]=!1;for(var e=this;e=e.parent;)e[$a]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,t){var n=this.source.start;return e.index?n=this.positionInside(e.index,t):e.word&&-1!==(e=(t=this.toString()).indexOf(e.word))&&(n=this.positionInside(e,t)),n}},{key:"positionInside",value:function(e,t){t=t||this.toString();for(var n=this.source.start.column,r=this.source.start.line,i=0;i<e;i++)"\n"===t[i]?(n=1,r+=1):n+=1;return{column:n,line:r}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var t={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){var r=this.toString(),i=r.indexOf(e.word);-1!==i&&(t=this.positionInside(i,r),n=this.positionInside(i+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<t.line||n.line===t.line&&n.column<=t.column)&&(n={column:t.column+1,line:t.line}),{end:n,start:t}}},{key:"raw",value:function(e,t){return(new ns).raw(this,e,t)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,t=!1,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];for(n=0;n<r.length;n++)(i=r[n])===this?t=!0:t?(this.parent.insertAfter(e,i),e=i):this.parent.insertBefore(e,i);t||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,t){e={};var n=null==t;t=t||new Map;var r,i=0;for(r in this)if(Object.prototype.hasOwnProperty.call(this,r)&&"parent"!==r&&"proxyCache"!==r){var o=this[r];if(Array.isArray(o))e[r]=o.map((function(e){return"object"===C(e)&&e.toJSON?e.toJSON(null,t):e}));else if("object"===C(o)&&o.toJSON)e[r]=o.toJSON(null,t);else if("source"===r){var a=t.get(o.input);null==a&&(a=i,t.set(o.input,i),i++),e[r]={end:o.end,inputId:a,start:o.start}}else e[r]=o}return n&&(e.inputs=k(t.keys()).map((function(e){return e.toJSON()}))),e}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Le;e.stringify&&(e=e.stringify);var t="";return e(this,(function(e){t+=e})),t}},{key:"warn",value:function(e,t,n){var r,i={node:this};for(r in n)i[r]=n[r];return e.warn(t,i)}},{key:"proxyOf",get:function(){return this}}]);is.default=is;var os=function(e){function t(e){return i(this,t),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=v(v({},e),{},{value:String(e.value)})),(e=r(this,t,[e])).type="decl",e}return f(t,e),s(t,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(is);os.default=os;var as=Xa.SourceMapConsumer,ss=Xa.SourceMapGenerator,ls=Xa.existsSync,cs=Xa.readFileSync,us=Xa.dirname,ds=Xa.join,fs=s((function e(t,n){i(this,e),!1!==n.map&&(this.loadAnnotation(t),this.inline=this.startWith(this.annotation,"data:"),t=this.loadMap(n.from,n.map?n.map.prev:void 0),!this.mapFile&&n.from&&(this.mapFile=n.from),this.mapFile&&(this.root=us(this.mapFile)),t&&(this.text=t))}),[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new as(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return e=e.substr(RegExp.lastMatch.length),e=Buffer?Buffer.from(e,"base64").toString():window.atob(e);throw e=e.match(/data:application\/json;([^,]+),/)[1],Error("Unsupported source map encoding "+e)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===C(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(t){t=e.lastIndexOf(t.pop());var n=e.indexOf("*/",t);-1<t&&-1<n&&(this.annotation=this.getAnnotationURL(e.substring(t,n)))}}},{key:"loadFile",value:function(e){if(this.root=us(e),ls(e))return this.mapFile=e,cs(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof as)return ss.fromSourceMap(t).toString();if(t instanceof ss)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw Error("Unsupported previous source map format: "+t.toString())}if(e=t(e)){if(!(t=this.loadFile(e)))throw Error("Unable to load previous source map: "+e.toString());return t}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation)return t=this.annotation,e&&(t=ds(us(e),t)),this.loadFile(t)}}},{key:"startWith",value:function(e,t){return!!e&&e.substr(0,t.length)===t}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&0<this.consumer().sourcesContent.length)}}]);fs.default=fs;var hs=Xa.SourceMapConsumer,ps=Xa.SourceMapGenerator,vs=Xa.fileURLToPath,gs=Xa.pathToFileURL,ms=Xa.isAbsolute,ys=Xa.resolve,ws=function(){for(var e="",t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:21;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},bs=Symbol("fromOffsetCache"),ks=!(!hs||!ps),_s=!(!ys||!ms),Cs=s((function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(i(this,e),null==t||"object"===C(t)&&!t.toString)throw Error("PostCSS received ".concat(t," instead of CSS string"));this.css=t.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,n.from&&(!_s||/^\w+:\/\//.test(n.from)||ms(n.from)?this.file=n.from:this.file=ys(n.from)),_s&&ks&&(n=new fs(this.css,n)).text&&(this.map=n,n=n.consumer().file,!this.file&&n&&(this.file=this.mapResolve(n))),this.file||(this.id="<input css "+ws(6)+">"),this.map&&(this.map.file=this.from)}),[{key:"error",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(t&&"object"===C(t)){var i=t,o=n;"number"==typeof i.offset?(t=(i=this.fromOffset(i.offset)).line,n=i.col):(t=i.line,n=i.column),"number"==typeof o.offset?(i=(o=this.fromOffset(o.offset)).line,o=o.col):(i=o.line,o=o.column)}else if(!n){var a=this.fromOffset(t);t=a.line,n=a.col}return(r=(a=this.origin(t,n,i,o))?new Qa(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):new Qa(e,void 0===i?t:{column:n,line:t},void 0===i?n:{column:o,line:i},this.css,this.file,r.plugin)).input={column:n,endColumn:o,endLine:i,line:t,source:this.css},this.file&&(gs&&(r.input.url=gs(this.file).toString()),r.input.file=this.file),r}},{key:"fromOffset",value:function(e){if(this[bs])var t=this[bs];else{var n=this.css.split("\n");t=Array(n.length);for(var r=0,i=0,o=n.length;i<o;i++)t[i]=r,r+=n[i].length+1;this[bs]=t}if(n=0,e>=t[t.length-1])n=t.length-1;else for(r=t.length-2;n<r;)if(e<t[i=n+(r-n>>1)])r=i-1;else{if(!(e>=t[i+1])){n=i;break}n=i+1}return{col:e-t[n]+1,line:n+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:ys(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,t,n,r){if(!this.map)return!1;var i,o=this.map.consumer();if(!(e=o.originalPositionFor({column:t,line:e})).source)return!1;if("number"==typeof n&&(i=o.originalPositionFor({column:r,line:n})),n=ms(e.source)?gs(e.source):new URL(e.source,this.map.consumer().sourceRoot||gs(this.map.mapFile)),i={column:e.column,endColumn:i&&i.column,endLine:i&&i.line,line:e.line,url:n.toString()},"file:"===n.protocol){if(!vs)throw Error("file: protocol is not available in this PostCSS build");i.file=vs(n)}return(o=o.sourceContentFor(e.source))&&(i.source=o),i}},{key:"toJSON",value:function(){for(var e={},t=0,n=["hasBOM","css","file","id"];t<n.length;t++){var r=n[t];null!=this[r]&&(e[r]=this[r])}return this.map&&(e.map=v({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}]);Cs.default=Cs,Xa&&Xa.registerInput&&Xa.registerInput(Cs);var Ss=Xa.SourceMapConsumer,Es=Xa.SourceMapGenerator,As=Xa.dirname,Is=Xa.relative,Ts=Xa.resolve,xs=Xa.sep,Rs=Xa.pathToFileURL,Os=!(!Ss||!Es),Ms=!!(As&&Ts&&Is&&xs),Ns=s((function e(t,n,r,o){i(this,e),this.stringify=t,this.mapOpts=r.map||{},this.root=n,this.opts=r,this.originalCSS=this.css=o,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}),[{key:"addAnnotation",value:function(){var e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map",t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,t=l(this.previous());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.toUrl(this.path(n.file)),i=n.root||As(n.file),o=void 0;!1===this.mapOpts.sourcesContent?(o=new Ss(n.text)).sourcesContent&&(o.sourcesContent=null):o=n.consumer(),this.map.applySourceMap(o,r,this.toUrl(this.path(i)))}}catch(e){t.e(e)}finally{t.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,t=this.root.nodes.length-1;0<=t;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),Ms&&Os&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,(function(t){e+=t})),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Es.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Es({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&0<this.previous().length&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new Es({file:this.outputFile(),ignoreInvalidMapping:!0});var t,n,r=1,i=1,o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(function(a,s,l){e.css+=a,s&&"end"!==l&&(o.generated.line=r,o.generated.column=i-1,s.source&&s.source.start?(o.source=e.sourcePath(s),o.original.line=s.source.start.line,o.original.column=s.source.start.column-1):(o.source="<no source>",o.original.line=1,o.original.column=0),e.map.addMapping(o)),(t=a.match(/\n/g))?(r+=t.length,n=a.lastIndexOf("\n"),i=a.length-n):i+=a.length,s&&"start"!==l&&(a=s.parent||{raws:{}},"decl"!==s.type&&("atrule"!==s.type||s.nodes)||s!==a.last||a.raws.semicolon)&&(s.source&&s.source.end?(o.source=e.sourcePath(s),o.original.line=s.source.end.line,o.original.column=s.source.end.column-1,o.generated.line=r,o.generated.column=i-2):(o.source="<no source>",o.original.line=1,o.original.column=0,o.generated.line=r,o.generated.column=i-1),e.map.addMapping(o))}))}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((function(e){return e.annotation})))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((function(e){return e.inline})))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:0<this.previous().length}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((function(e){return e.withContent()}))}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute||60===e.charCodeAt(0)||/^\w+:\/\//.test(e))return e;var t=this.memoizedPaths.get(e);return t||(t=this.opts.to?As(this.opts.to):".","string"==typeof this.mapOpts.annotation&&(t=As(Ts(t,this.mapOpts.annotation))),t=Is(t,e),this.memoizedPaths.set(e,t),t)}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((function(t){t.source&&t.source.input.map&&(t=t.source.input.map,e.previousMaps.includes(t)||e.previousMaps.push(t))}));else{var t=new Cs(this.originalCSS,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,t={};if(this.root)this.root.walk((function(n){if(n.source){var r=n.source.input.from;r&&!t[r]&&(t[r]=!0,r=e.usesFileUrls?e.toFileUrl(r):e.toUrl(e.path(r)),e.map.setSourceContent(r,n.source.input.css))}}));else if(this.css){var n=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(n,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var t=this.memoizedFileURLs.get(e);if(t)return t;if(Rs)return t=Rs(e).toString(),this.memoizedFileURLs.set(e,t),t;throw Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var t=this.memoizedURLs.get(e);return t||("\\"===xs&&(e=e.replace(/\\/g,"/")),t=encodeURI(e).replace(/[#?]/g,encodeURIComponent),this.memoizedURLs.set(e,t),t)}}]),Ls=function(e){function t(e){return i(this,t),(e=r(this,t,[e])).type="comment",e}return f(t,e),s(t)}(is);Ls.default=Ls;var Ds,Ps,Us,Fs,zs=$a,Bs=function(e){function t(){return i(this,t),r(this,t,arguments)}return f(t,e),s(t,[{key:"append",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(e=0;e<t.length;e++){var r;n=l(n=this.normalize(t[e],this.last));try{for(n.s();!(r=n.n()).done;)this.proxyOf.nodes.push(r.value)}catch(e){n.e(e)}finally{n.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(b(t,"cleanRaws",this,3)([e]),this.nodes){var n,r=l(this.nodes);try{for(r.s();!(n=r.n()).done;)n.value.cleanRaws(e)}catch(e){r.e(e)}finally{r.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var t,n=this.getIterator();this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],!1!==(t=e(this.proxyOf.nodes[t],t)));)this.indexes[n]+=1;return delete this.indexes[n],t}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={});var e=this.lastEach+=1;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return e[t].apply(e,k(r.map((function(e){return"function"==typeof e?function(t,n){return e(t.toProxy(),n)}:e}))))}:"every"===t||"some"===t?function(n){return e[t]((function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.apply(void 0,[e.toProxy()].concat(r))}))}:"root"===t?function(){return e.root().toProxy()}:"nodes"===t?e.nodes.map((function(e){return e.toProxy()})):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,t){var n,r=this.index(e);t=this.normalize(t,this.proxyOf.nodes[r]).reverse(),r=this.index(e),e=l(t);try{for(e.s();!(n=e.n()).done;)this.proxyOf.nodes.splice(r+1,0,n.value)}catch(t){e.e(t)}finally{e.f()}for(var i in this.indexes)r<(n=this.indexes[i])&&(this.indexes[i]=n+t.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,t){var n,r=this.index(e);t=this.normalize(t,this.proxyOf.nodes[r],0===r&&"prepend").reverse(),r=this.index(e),e=l(t);try{for(e.s();!(n=e.n()).done;)this.proxyOf.nodes.splice(r,0,n.value)}catch(t){e.e(t)}finally{e.f()}for(var i in this.indexes)r<=(n=this.indexes[i])&&(this.indexes[i]=n+t.length);return this.markDirty(),this}},{key:"normalize",value:function(e,n){var r=this;if("string"==typeof e)e=Pe(Ds(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var i,o=l(e=e.slice(0));try{for(o.s();!(i=o.n()).done;){var a=i.value;a.parent&&a.parent.removeChild(a,"ignore")}}catch(e){o.e(e)}finally{o.f()}}else if("root"===e.type&&"document"!==this.type){i=l(e=e.nodes.slice(0));try{for(i.s();!(o=i.n()).done;){var s=o.value;s.parent&&s.parent.removeChild(s,"ignore")}}catch(e){i.e(e)}finally{i.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new os(e)]}else if(e.selector)e=[new Ps(e)];else if(e.name)e=[new Us(e)];else{if(!e.text)throw Error("Unknown node type in node creation");e=[new Ls(e)]}return e.map((function(e){return e[es]||t.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[zs]&&Ue(e),void 0===e.raws.before&&n&&void 0!==n.raws.before&&(e.raws.before=n.raws.before.replace(/\S/g,"")),e.parent=r.proxyOf,e}))}},{key:"prepend",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;e=l(t=t.reverse());try{for(e.s();!(r=e.n()).done;){var i,o=this.normalize(r.value,this.first,"prepend").reverse(),a=l(o);try{for(a.s();!(i=a.n()).done;)this.proxyOf.nodes.unshift(i.value)}catch(e){a.e(e)}finally{a.f()}for(var s in this.indexes)this.indexes[s]+=o.length}}catch(t){e.e(t)}finally{e.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,t=l(this.proxyOf.nodes);try{for(t.s();!(e=t.n()).done;)e.value.parent=void 0}catch(e){t.e(e)}finally{t.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var t;for(t in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes){var n=this.indexes[t];n>=e&&(this.indexes[t]=n-1)}return this.markDirty(),this}},{key:"replaceValues",value:function(e,t,n){return n||(n=t,t={}),this.walkDecls((function(r){t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,n))})),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each((function(t,n){try{var r=e(t,n)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r}))}},{key:"walkAtRules",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("atrule"===n.type&&e.test(n.name))return t(n,r)})):this.walk((function(n,r){if("atrule"===n.type&&n.name===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("atrule"===e.type)return t(e,n)})))}},{key:"walkComments",value:function(e){return this.walk((function(t,n){if("comment"===t.type)return e(t,n)}))}},{key:"walkDecls",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("decl"===n.type&&e.test(n.prop))return t(n,r)})):this.walk((function(n,r){if("decl"===n.type&&n.prop===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("decl"===e.type)return t(e,n)})))}},{key:"walkRules",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("rule"===n.type&&e.test(n.selector))return t(n,r)})):this.walk((function(n,r){if("rule"===n.type&&n.selector===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("rule"===e.type)return t(e,n)})))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(is);Bs.registerParse=function(e){Ds=e},Bs.registerRule=function(e){Ps=e},Bs.registerAtRule=function(e){Us=e},Bs.registerRoot=function(e){Fs=e},Bs.default=Bs,Bs.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,Us.prototype):"rule"===e.type?Object.setPrototypeOf(e,Ps.prototype):"decl"===e.type?Object.setPrototypeOf(e,os.prototype):"comment"===e.type?Object.setPrototypeOf(e,Ls.prototype):"root"===e.type&&Object.setPrototypeOf(e,Fs.prototype),e[es]=!0,e.nodes&&e.nodes.forEach((function(e){Bs.rebuild(e)}))};var js,Gs,Hs=function(e){function t(e){return i(this,t),(e=r(this,t,[v({type:"document"},e)])).nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"toResult",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new js(new Gs,this,e).stringify()}}])}(Bs);Hs.registerLazyResult=function(e){js=e},Hs.registerProcessor=function(e){Gs=e},Hs.default=Hs;var Vs=s((function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(i(this,e),this.type="warning",this.text=t,n.node&&n.node.source){var r=n.node.rangeBy(n);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(var o in n)this[o]=n[o]}),[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}]);Vs.default=Vs;var Zs=s((function e(t,n,r){i(this,e),this.processor=t,this.messages=[],this.root=n,this.opts=r,this.map=this.css=void 0}),[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!t.plugin&&this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin),t=new Vs(e,t),this.messages.push(t),t}},{key:"warnings",value:function(){return this.messages.filter((function(e){return"warning"===e.type}))}},{key:"content",get:function(){return this.css}}]);Zs.default=Zs;var qs=/[\t\n\f\r "#'()/;[\\\]{}]/g,Ws=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Ys=/.[\r\n"'(/\\]/,Ks=/[\da-f]/i,Js=function(e){function t(e){return i(this,t),(e=r(this,t,[e])).type="atrule",e}return f(t,e),s(t,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return b(t,"append",this,3)(n)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return b(t,"prepend",this,3)(n)}}])}(Bs);Js.default=Js,Bs.registerAtRule(Js);var Xs,Qs,$s=function(e){function t(e){return i(this,t),(e=r(this,t,[e])).type="root",e.nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"normalize",value:function(e,n,r){if(e=b(t,"normalize",this,3)([e]),n)if("prepend"===r)1<this.nodes.length?n.raws.before=this.nodes[1].raws.before:delete n.raws.before;else if(this.first!==n){var i;r=l(e);try{for(r.s();!(i=r.n()).done;)i.value.raws.before=n.raws.before}catch(e){r.e(e)}finally{r.f()}}return e}},{key:"removeChild",value:function(e,n){var r=this.index(e);return!n&&0===r&&1<this.nodes.length&&(this.nodes[1].raws.before=this.nodes[r].raws.before),b(t,"removeChild",this,3)([e])}},{key:"toResult",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Xs(new Qs,this,e).stringify()}}])}(Bs);$s.registerLazyResult=function(e){Xs=e},$s.registerProcessor=function(e){Qs=e},$s.default=$s,Bs.registerRoot($s);var el={comma:function(e){return el.split(e,[","],!0)},space:function(e){return el.split(e,[" ","\n","\t"])},split:function(e,t,n){var r,i=[],o="",a=!1,s=0,c=!1,u="",d=!1;e=l(e);try{for(e.s();!(r=e.n()).done;){var f=r.value;d?d=!1:"\\"===f?d=!0:c?f===u&&(c=!1):'"'===f||"'"===f?(c=!0,u=f):"("===f?s+=1:")"===f?0<s&&--s:0===s&&t.includes(f)&&(a=!0),a?(""!==o&&i.push(o.trim()),o="",a=!1):o+=f}}catch(t){e.e(t)}finally{e.f()}return(n||""!==o)&&i.push(o.trim()),i}},tl=el;el.default=el;var nl=function(e){function t(e){return i(this,t),(e=r(this,t,[e])).type="rule",e.nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"selectors",get:function(){return tl.comma(this.selector)},set:function(e){var t=this.selector?this.selector.match(/,\s*/):null;t=t?t[0]:","+this.raw("between","beforeOpen"),this.selector=e.join(t)}}])}(Bs);nl.default=nl,Bs.registerRule(nl);var rl={empty:!0,space:!0},il=s((function e(t){i(this,e),this.input=t,this.current=this.root=new $s,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:t,start:{column:1,line:1,offset:0}}}),[{key:"atrule",value:function(e){var t=new Js;t.name=e[1].slice(1),""===t.name&&this.unnamedAtrule(t,e),this.init(t,e[2]);var n,r=!1,i=!1,o=[];for(n=[];!this.tokenizer.endOfFile();){var a=(e=this.tokenizer.nextToken())[0];if("("===a||"["===a?n.push("("===a?")":"]"):"{"===a&&0<n.length?n.push("}"):a===n[n.length-1]&&n.pop(),0===n.length){if(";"===a){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}if("{"===a){i=!0;break}if("}"===a){if(0<o.length){for(a=o[n=o.length-1];a&&"space"===a[0];)a=o[--n];a&&(t.source.end=this.getPosition(a[3]||a[2]),t.source.end.offset++)}this.end(e);break}o.push(e)}else o.push(e);if(this.tokenizer.endOfFile()){r=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(o),o.length?(t.raws.afterName=this.spacesAndCommentsFromStart(o),this.raw(t,"params",o),r&&(e=o[o.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),i&&(t.nodes=[],this.current=t)}},{key:"checkMissedSemicolon",value:function(e){var t=this.colon(e);if(!1!==t){var n=0;for(--t;0<=t;t--){var r=e[t];if("space"!==r[0]&&2===(n+=1))break}throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}}},{key:"colon",value:function(e){var t,n=0;e=l(e.entries());try{for(e.s();!(t=e.n()).done;){var r=w(t.value,2),i=r[0],o=r[1],a=o[0];if("("===a&&(n+=1),")"===a&&--n,0===n&&":"===a){if(s){if("word"===s[0]&&"progid"===s[1])continue;return i}this.doubleColon(o)}var s=o}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"comment",value:function(e){var t=new Ls;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,e=e[1].slice(2,-2),/^\s*$/.test(e)?(t.text="",t.raws.left=e,t.raws.right=""):(e=e.match(/^(\s*)([^]*\S)(\s*)$/),t.text=e[2],t.raws.left=e[1],t.raws.right=e[3])}},{key:"createTokenizer",value:function(){this.tokenizer=function(e){function t(t){throw e.error("Unclosed "+t,v)}var n,r,i,o,a,s,l,c,u,d,f=e.css.valueOf(),h=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).ignoreErrors,p=f.length,v=0,g=[],m=[];return{back:function(e){m.push(e)},endOfFile:function(){return 0===m.length&&v>=p},nextToken:function(e){if(m.length)return m.pop();if(!(v>=p)){switch(e=!!e&&e.ignoreUnclosed,n=f.charCodeAt(v)){case 10:case 32:case 9:case 13:case 12:r=v;do{r+=1,n=f.charCodeAt(r)}while(32===n||10===n||9===n||13===n||12===n);d=["space",f.slice(v,r)],v=r-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:e=String.fromCharCode(n),d=[e,e,v];break;case 40:if(c=g.length?g.pop()[1]:"",u=f.charCodeAt(v+1),"url"===c&&39!==u&&34!==u&&32!==u&&10!==u&&9!==u&&12!==u&&13!==u){r=v;do{if(s=!1,-1===(r=f.indexOf(")",r+1))){if(h||e){r=v;break}t("bracket")}for(l=r;92===f.charCodeAt(l-1);)--l,s=!s}while(s);d=["brackets",f.slice(v,r+1),v,r],v=r}else r=f.indexOf(")",v+1),o=f.slice(v,r+1),-1===r||Ys.test(o)?d=["(","(",v]:(d=["brackets",o,v,r],v=r);break;case 39:case 34:i=39===n?"'":'"',r=v;do{if(s=!1,-1===(r=f.indexOf(i,r+1))){if(h||e){r=v+1;break}t("string")}for(l=r;92===f.charCodeAt(l-1);)--l,s=!s}while(s);d=["string",f.slice(v,r+1),v,r],v=r;break;case 64:qs.lastIndex=v+1,qs.test(f),r=0===qs.lastIndex?f.length-1:qs.lastIndex-2,d=["at-word",f.slice(v,r+1),v,r],v=r;break;case 92:for(r=v,a=!0;92===f.charCodeAt(r+1);)r+=1,a=!a;if(n=f.charCodeAt(r+1),a&&47!==n&&32!==n&&10!==n&&9!==n&&13!==n&&12!==n&&(r+=1,Ks.test(f.charAt(r)))){for(;Ks.test(f.charAt(r+1));)r+=1;32===f.charCodeAt(r+1)&&(r+=1)}d=["word",f.slice(v,r+1),v,r],v=r;break;default:47===n&&42===f.charCodeAt(v+1)?(0===(r=f.indexOf("*/",v+2)+1)&&(h||e?r=f.length:t("comment")),d=["comment",f.slice(v,r+1),v,r]):(Ws.lastIndex=v+1,Ws.test(f),r=0===Ws.lastIndex?f.length-1:Ws.lastIndex-2,d=["word",f.slice(v,r+1),v,r],g.push(d)),v=r}return v++,d}},position:function(){return v}}}(this.input)}},{key:"decl",value:function(e,t){var n=new os;this.init(n,e[0][2]);var r,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||function(e){for(var t=e.length-1;0<=t;t--){var n=e[t];if(n=n[3]||n[2])return n}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length&&":"!==(i=e[0][0])&&"space"!==i&&"comment"!==i;)n.prop+=e.shift()[1];for(n.raws.between="";e.length;){if(":"===(r=e.shift())[0]){n.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),n.raws.between+=r[1]}for("_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1)),i=[];e.length&&("space"===(r=e[0][0])||"comment"===r);)i.push(e.shift());this.precheckMissedSemicolon(e);for(var o=e.length-1;0<=o;o--){if("!important"===(r=e[o])[1].toLowerCase()){n.important=!0,r=this.stringFrom(e,o)," !important"!==(r=this.spacesFromEnd(e)+r)&&(n.raws.important=r);break}if("important"===r[1].toLowerCase()){for(var a=e.slice(0),s="",l=o;0<l;l--){var c=a[l][0];if(0===s.trim().indexOf("!")&&"space"!==c)break;s=a.pop()[1]+s}0===s.trim().indexOf("!")&&(n.important=!0,n.raws.important=s,e=a)}if("space"!==r[0]&&"comment"!==r[0])break}e.some((function(e){return"space"!==e[0]&&"comment"!==e[0]}))&&(n.raws.between+=i.map((function(e){return e[1]})).join(""),i=[]),this.raw(n,"value",i.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var t=new nl;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){this.spaces+=e[1],this.current.nodes&&(e=this.current.nodes[this.current.nodes.length-1])&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}},{key:"getPosition",value:function(e){var t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}},{key:"init",value:function(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var t=!1,n=!1,r=null,i=[],o=e[1].startsWith("--"),a=[],s=e;s;){if(e=s[0],a.push(s),"("===e||"["===e)r||(r=s),i.push("("===e?")":"]");else if(o&&n&&"{"===e)r||(r=s),i.push("}");else if(0===i.length){if(";"===e){if(n)return void this.decl(a,o);break}if("{"===e)return void this.rule(a);if("}"===e){this.tokenizer.back(a.pop()),t=!0;break}":"===e&&(n=!0)}else e===i[i.length-1]&&(i.pop(),0===i.length&&(r=null));s=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),0<i.length&&this.unclosedBracket(r),t&&n){if(!o)for(;a.length&&("space"===(s=a[a.length-1][0])||"comment"===s);)this.tokenizer.back(a.pop());this.decl(a,o)}else this.unknownWord(a)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,t,n,r){for(var i,o,a,s=n.length,l="",c=!0,u=0;u<s;u+=1)"space"!==(o=(i=n[u])[0])||u!==s-1||r?"comment"===o?(a=n[u-1]?n[u-1][0]:"empty",o=n[u+1]?n[u+1][0]:"empty",rl[a]||rl[o]||","===l.slice(-1)?c=!1:l+=i[1]):l+=i[1]:c=!1;c||(n=n.reduce((function(e,t){return e+t[1]}),""),e.raws[t]={raw:n,value:l}),e[t]=l}},{key:"rule",value:function(e){e.pop();var t=new nl;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var t,n="";e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)n=e.pop()[1]+n;return n}},{key:"spacesAndCommentsFromStart",value:function(e){for(var t,n="";e.length&&("space"===(t=e[0][0])||"comment"===t);)n+=e.shift()[1];return n}},{key:"spacesFromEnd",value:function(e){for(var t="";e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t}},{key:"stringFrom",value:function(e,t){for(var n="",r=t;r<e.length;r++)n+=e[r][1];return e.splice(t,e.length-t),n}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}]),ol=Cs;Fe.default=Fe,Bs.registerParse(Fe);var al,sl=$a,ll={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},cl={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},ul={Once:!0,postcssPlugin:!0,prepare:!0},dl={},fl=s((function e(t,n,r){var o=this;if(i(this,e),this.processed=this.stringified=!1,"object"!==C(n)||null===n||"root"!==n.type&&"document"!==n.type)if(n instanceof e||n instanceof Zs){var a=Ge(n.root);n.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=n.map)}else{var s=Fe;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{a=s(n,r)}catch(e){this.processed=!0,this.error=e}a&&!a[es]&&Bs.rebuild(a)}else a=Ge(n);this.result=new Zs(t,a,r),this.helpers=v(v({},dl),{},{postcss:dl,result:this.result}),this.plugins=this.processor.plugins.map((function(e){return"object"===C(e)&&e.prepare?v(v({},e),e.prepare(o.result)):e}))}),[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,t){var n=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin||(e.plugin=n.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var t,n=function(t,n,r){e.listeners[n]||(e.listeners[n]=[]),e.listeners[n].push([t,r])},r=l(this.plugins);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("object"===C(i))for(var o in i){if(!cl[o]&&/^[A-Z]/.test(o))throw Error("Unknown event ".concat(o," in ").concat(i.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!ul[o])if("object"===C(i[o]))for(var a in i[o])n(i,"*"===a?o:o+"-"+a.toLowerCase(),i[o][a]);else"function"==typeof i[o]&&n(i,o,i[o])}}}catch(e){r.e(e)}finally{r.f()}this.hasListener=0<Object.keys(this.listeners).length}},{key:"runAsync",value:(al=n(m().mark((function e(){var t,n,r,i,o,a,s,c,u,d,f=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.plugin=0;case 2:if(!(t<this.plugins.length)){e.next=17;break}if(n=this.plugins[t],!ze(r=this.runOnRoot(n))){e.next=14;break}return e.prev=6,e.next=9,r;case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),this.handleError(e.t0);case 14:t++,e.next=2;break;case 17:if(this.prepareVisitors(),!this.hasListener){e.next=56;break}i=this.result.root;case 20:if(i[sl]){e.next=39;break}i[sl]=!0,o=[je(i)];case 23:if(!(0<o.length)){e.next=37;break}if(!ze(a=this.visitTick(o))){e.next=35;break}return e.prev=26,e.next=29,a;case 29:e.next=35;break;case 31:throw e.prev=31,e.t1=e.catch(26),s=o[o.length-1].node,this.handleError(e.t1,s);case 35:e.next=23;break;case 37:e.next=20;break;case 39:if(!this.listeners.OnceExit){e.next=56;break}c=l(this.listeners.OnceExit),e.prev=41,d=m().mark((function e(){var t,n,r,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w(u.value,2),n=t[0],r=t[1],f.result.lastPlugin=n,e.prev=2,"document"!==i.type){e.next=9;break}return o=i.nodes.map((function(e){return r(e,f.helpers)})),e.next=7,Promise.all(o);case 7:e.next=11;break;case 9:return e.next=11,r(i,f.helpers);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(2),f.handleError(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})),c.s();case 44:if((u=c.n()).done){e.next=48;break}return e.delegateYield(d(),"t2",46);case 46:e.next=44;break;case 48:e.next=53;break;case 50:e.prev=50,e.t3=e.catch(41),c.e(e.t3);case 53:return e.prev=53,c.f(),e.finish(53);case 56:return this.processed=!0,e.abrupt("return",this.stringify());case 58:case"end":return e.stop()}}),e,this,[[6,11],[26,31],[41,50,53,56]])}))),function(){return al.apply(this,arguments)})},{key:"runOnRoot",value:function(e){var t=this;this.result.lastPlugin=e;try{if("object"===C(e)&&e.Once){if("document"===this.result.root.type){var n=this.result.root.nodes.map((function(n){return e.Once(n,t.helpers)}));return ze(n[0])?Promise.all(n):n}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,t=Le;return e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify),e=new Ns(t,this.result.root,this.result.opts).generate(),this.result.css=e[0],this.result.map=e[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,t=l(this.plugins);try{for(t.s();!(e=t.n()).done;)if(ze(this.runOnRoot(e.value)))throw this.getAsyncError()}catch(e){t.e(e)}finally{t.f()}if(this.prepareVisitors(),this.hasListener){for(t=this.result.root;!t[sl];)t[sl]=!0,this.walkSync(t);if(this.listeners.OnceExit)if("document"===t.type){var n;t=l(t.nodes);try{for(t.s();!(n=t.n()).done;)this.visitSync(this.listeners.OnceExit,n.value)}catch(e){t.e(e)}finally{t.f()}}else this.visitSync(this.listeners.OnceExit,t)}return this.result}},{key:"then",value:function(e,t){return this.async().then(e,t)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,t){var n;e=l(e);try{for(e.s();!(n=e.n()).done;){var r=w(n.value,2),i=r[1];this.result.lastPlugin=r[0];var o=void 0;try{o=i(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(ze(o))throw this.getAsyncError()}}catch(t){e.e(t)}finally{e.f()}}},{key:"visitTick",value:function(e){var t=e[e.length-1],n=t.node,r=t.visitors;if("root"===n.type||"document"===n.type||n.parent){if(0<r.length&&t.visitorIndex<r.length){var i=w(r[t.visitorIndex],2);e=i[0],i=i[1],t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return i(n.toProxy(),this.helpers)}catch(e){throw this.handleError(e,n)}}if(0!==t.iterator){for(r=t.iterator;i=n.nodes[n.indexes[r]];)if(n.indexes[r]+=1,!i[sl])return i[sl]=!0,void e.push(je(i));t.iterator=0,delete n.indexes[r]}for(r=t.events;t.eventIndex<r.length;){if(i=r[t.eventIndex],t.eventIndex+=1,0===i)return void(n.nodes&&n.nodes.length&&(n[sl]=!0,t.iterator=n.getIterator()));if(this.listeners[i])return void(t.visitors=this.listeners[i])}}e.pop()}},{key:"walkSync",value:function(e){var t=this;e[sl]=!0;var n,r=Be(e);r=l(r);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0===i)e.nodes&&e.each((function(e){e[sl]||t.walkSync(e)}));else{var o=this.listeners[i];if(o&&this.visitSync(o,e.toProxy()))break}}}catch(e){r.e(e)}finally{r.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);fl.registerPostcss=function(e){dl=e},fl.default=fl,$s.registerLazyResult(fl),Hs.registerLazyResult(fl);var hl=s((function e(t,n,r){i(this,e),n=n.toString(),this.stringified=!1,this._processor=t,this._css=n,this._opts=r,this._map=void 0,this.result=new Zs(this._processor,void 0,this._opts),this.result.css=n;var o=this;Object.defineProperty(this.result,"root",{get:function(){return o.root}}),(t=new Ns(Le,void 0,this._opts,n)).isMap()?(t=(n=w(t=t.generate(),2))[0],n=n[1],t&&(this.result.css=t),n&&(this.result.map=n)):(t.clearAnnotation(),this.result.css=t.css)}),[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,t){return this.async().then(e,t)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;try{var e=Fe(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}]);hl.default=hl;var pl=s((function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];i(this,e),this.version="8.4.38",this.plugins=this.normalize(t)}),[{key:"normalize",value:function(e){var t,n=[];e=l(e);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"===C(r)&&Array.isArray(r.plugins))n=n.concat(r.plugins);else if("object"===C(r)&&r.postcssPlugin)n.push(r);else if("function"==typeof r)n.push(r);else if("object"!==C(r)||!r.parse&&!r.stringify)throw Error(r+" is not a PostCSS plugin")}}catch(t){e.e(t)}finally{e.f()}return n}},{key:"process",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||t.parser||t.stringifier||t.syntax?new fl(this,e,t):new hl(this,e,t)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}]);pl.default=pl,$s.registerProcessor(pl),Hs.registerProcessor(pl);var vl=os,gl=fs,ml=Ls,yl=Js,wl=Cs,bl=$s,kl=nl;He.default=He;var _l=pl;Ve.plugin=function(e,t){function n(){console&&console.warn&&!i&&(i=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));var n=t.apply(void 0,arguments);return n.postcssPlugin=e,n.postcssVersion=(new _l).version,n}var r,i=!1;return Object.defineProperty(n,"postcss",{get:function(){return r||(r=n()),r}}),n.process=function(e,t,r){return Ve([n(r)]).process(e,t)},n},Ve.stringify=Le,Ve.parse=Fe,Ve.fromJSON=He,Ve.list=tl,Ve.comment=function(e){return new Ls(e)},Ve.atRule=function(e){return new Js(e)},Ve.decl=function(e){return new os(e)},Ve.rule=function(e){return new nl(e)},Ve.root=function(e){return new $s(e)},Ve.document=function(e){return new Hs(e)},Ve.CssSyntaxError=Qa,Ve.Declaration=os,Ve.Container=Bs,Ve.Processor=_l,Ve.Document=Hs,Ve.Comment=Ls,Ve.Warning=Vs,Ve.AtRule=Js,Ve.Result=Zs,Ve.Input=Cs,Ve.Rule=nl,Ve.Root=$s,Ve.Node=is,fl.registerPostcss(Ve),Ve.default=Ve;var Cl=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Ve);Cl.stringify,Cl.fromJSON,Cl.plugin,Cl.parse,Cl.list,Cl.document,Cl.comment,Cl.atRule,Cl.rule,Cl.decl,Cl.root,Cl.CssSyntaxError,Cl.Declaration,Cl.Container,Cl.Processor,Cl.Document,Cl.Comment,Cl.Warning,Cl.AtRule,Cl.Result,Cl.Input,Cl.Rule,Cl.Root,Cl.Node;var Sl=Object.defineProperty,El=function(e,t,n){return(t="symbol"!==C(t)?t+"":t)in e?Sl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Al={},Il=String,Tl=function(){return{isColorSupported:!1,reset:Il,bold:Il,dim:Il,italic:Il,underline:Il,inverse:Il,hidden:Il,strikethrough:Il,black:Il,red:Il,green:Il,yellow:Il,blue:Il,magenta:Il,cyan:Il,white:Il,gray:Il,bgBlack:Il,bgRed:Il,bgGreen:Il,bgYellow:Il,bgBlue:Il,bgMagenta:Il,bgCyan:Il,bgWhite:Il}};(Al=Tl()).createColors=Tl;var xl=Al,Rl=function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),Ol=function(e){function t(e,n,o,a,s,l){i(this,t);var c=r(this,t,[e]);return c.name="CssSyntaxError",c.reason=e,s&&(c.file=s),a&&(c.source=a),l&&(c.plugin=l),void 0!==n&&void 0!==o&&("number"==typeof n?(c.line=n,c.column=o):(c.line=n.line,c.column=n.column,c.endLine=o.line,c.endColumn=o.column)),c.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(c,t),c}return f(t,e),s(t,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var t=this;if(!this.source)return"";var n=this.source;null==e&&(e=xl.isColorSupported),Rl&&e&&(n=Rl(n)),n=n.split(/\r?\n/);var r=Math.max(this.line-3,0),i=Math.min(this.line+2,n.length),o=String(i).length;if(e)var a=(e=xl.createColors(!0)).bold,s=e.gray,l=e.red,c=function(e){return a(l(e))},u=function(e){return s(e)};else c=u=function(e){return e};return n.slice(r,i).map((function(e,n){var i=r+1+n;return n=" "+(" "+i).slice(-o)+" | ",i===t.line?(i=u(n.replace(/\d/g," "))+e.slice(0,t.column-1).replace(/[^\t]/g," "),c(">")+u(n)+e+"\n "+i+c("^")):" "+u(n)+e})).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(E(Error));Ol.default=Ol;var Ml=Symbol("isClean"),Nl=Symbol("my"),Ll={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1},Dl=s((function e(t){i(this,e),this.builder=t}),[{key:"atrule",value:function(e,t){var n="@"+e.name,r=e.params?this.rawValue(e,"params"):"";void 0!==e.raws.afterName?n+=e.raws.afterName:r&&(n+=" "),e.nodes?this.block(e,n+r):this.builder(n+r+((e.raws.between||"")+(t?";":"")),e)}},{key:"beforeAfter",value:function(e,t){t="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var n=e.parent,r=0;n&&"root"!==n.type;)r+=1,n=n.parent;if(t.includes("\n")&&(e=this.raw(e,null,"indent")).length)for(n=0;n<r;n++)t+=e;return t}},{key:"block",value:function(e,t){var n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),t=this.raw(e,"after")):t=this.raw(e,"after","emptyBody"),t&&this.builder(t),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var t=e.nodes.length-1;0<t&&"comment"===e.nodes[t].type;)--t;for(var n=this.raw(e,"semicolon"),r=0;r<e.nodes.length;r++){var i=e.nodes[r],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==r||n)}}},{key:"comment",value:function(e){var t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}},{key:"decl",value:function(e,t){var n=this.raw(e,"between","colon");n=e.prop+n+this.rawValue(e,"value"),e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,t,n){if(n||(n=t),t){var r=e.raws[t];if(void 0!==r)return r}var i=e.parent;if("before"===n&&(!i||"root"===i.type&&i.first===e||i&&"document"===i.type))return"";if(!i)return Ll[n];if((i=e.root()).rawCache||(i.rawCache={}),void 0!==i.rawCache[n])return i.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);var o="raw"+function(e){return e[0].toUpperCase()+e.slice(1)}(n);return this[o]?r=this[o](i,e):i.walk((function(e){if(void 0!==(r=e.raws[t]))return!1})),void 0===r&&(r=Ll[n]),i.rawCache[n]=r}},{key:"rawBeforeClose",value:function(e){var t;return e.walk((function(e){if(e.nodes&&0<e.nodes.length&&void 0!==e.raws.after)return(t=e.raws.after).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawBeforeComment",value:function(e,t){var n;return e.walkComments((function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeDecl",value:function(e,t){var n;return e.walkDecls((function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeOpen",value:function(e){var t;return e.walk((function(e){if("decl"!==e.type&&void 0!==(t=e.raws.between))return!1})),t}},{key:"rawBeforeRule",value:function(e){var t;return e.walk((function(n){if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return(t=n.raws.before).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawColon",value:function(e){var t;return e.walkDecls((function(e){if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}},{key:"rawEmptyBody",value:function(e){var t;return e.walk((function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(t=e.raws.after))return!1})),t}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk((function(n){var r=n.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==n.raws.before)return n=n.raws.before.split("\n"),t=(t=n[n.length-1]).replace(/\S/g,""),!1})),t);var t}},{key:"rawSemicolon",value:function(e){var t;return e.walk((function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(t=e.raws.semicolon))return!1})),t}},{key:"rawValue",value:function(e,t){var n=e[t];return(e=e.raws[t])&&e.value===n?e.raw:n}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,t){if(!this[e.type])throw Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}]),Pl=Dl.default=Dl;Ze.default=Ze;var Ul=s((function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var n in i(this,e),this.raws={},this[Ml]=!1,this[Nl]=!0,t)if("nodes"===n){this.nodes=[];var r,o=l(t[n]);try{for(o.s();!(r=o.n()).done;){var a=r.value;"function"==typeof a.clone?this.append(a.clone()):this.append(a)}}catch(e){o.e(e)}finally{o.f()}}else this[n]=t[n]}),[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(t.input.from,":").concat(t.start.line,":").concat(t.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(e in t)this[e]=t[e];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=qe(this);for(e in t)n[e]=t[e];return n}},{key:"cloneAfter",value:function(){var e=this.clone(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return this.parent.insertAfter(this,e),e}},{key:"cloneBefore",value:function(){var e=this.clone(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return this.parent.insertBefore(this,e),e}},{key:"error",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var n=this.rangeBy(t),r=n.end;return n=n.start,this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new Ol(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:"root"===t?function(){return e.root().toProxy()}:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[Ml]){this[Ml]=!1;for(var e=this;e=e.parent;)e[Ml]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,t){var n=this.source.start;return e.index?n=this.positionInside(e.index,t):e.word&&-1!==(e=(t=this.toString()).indexOf(e.word))&&(n=this.positionInside(e,t)),n}},{key:"positionInside",value:function(e,t){t=t||this.toString();for(var n=this.source.start.column,r=this.source.start.line,i=0;i<e;i++)"\n"===t[i]?(n=1,r+=1):n+=1;return{column:n,line:r}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var t={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){var r=this.toString(),i=r.indexOf(e.word);-1!==i&&(t=this.positionInside(i,r),n=this.positionInside(i+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<t.line||n.line===t.line&&n.column<=t.column)&&(n={column:t.column+1,line:t.line}),{end:n,start:t}}},{key:"raw",value:function(e,t){return(new Dl).raw(this,e,t)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,t=!1,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];for(n=0;n<r.length;n++)(i=r[n])===this?t=!0:t?(this.parent.insertAfter(e,i),e=i):this.parent.insertBefore(e,i);t||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,t){e={};var n=null==t;t=t||new Map;var r,i=0;for(r in this)if(Object.prototype.hasOwnProperty.call(this,r)&&"parent"!==r&&"proxyCache"!==r){var o=this[r];if(Array.isArray(o))e[r]=o.map((function(e){return"object"===C(e)&&e.toJSON?e.toJSON(null,t):e}));else if("object"===C(o)&&o.toJSON)e[r]=o.toJSON(null,t);else if("source"===r){var a=t.get(o.input);null==a&&(a=i,t.set(o.input,i),i++),e[r]={end:o.end,inputId:a,start:o.start}}else e[r]=o}return n&&(e.inputs=k(t.keys()).map((function(e){return e.toJSON()}))),e}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ze;e.stringify&&(e=e.stringify);var t="";return e(this,(function(e){t+=e})),t}},{key:"warn",value:function(e,t,n){var r,i={node:this};for(r in n)i[r]=n[r];return e.warn(t,i)}},{key:"proxyOf",get:function(){return this}}]);Ul.default=Ul;var Fl=function(e){function t(e){return i(this,t),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=v(v({},e),{},{value:String(e.value)})),(e=r(this,t,[e])).type="decl",e}return f(t,e),s(t,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(Ul);Fl.default=Fl;var zl=Rl.SourceMapConsumer,Bl=Rl.SourceMapGenerator,jl=Rl.existsSync,Gl=Rl.readFileSync,Hl=Rl.dirname,Vl=Rl.join,Zl=s((function e(t,n){i(this,e),!1!==n.map&&(this.loadAnnotation(t),this.inline=this.startWith(this.annotation,"data:"),t=this.loadMap(n.from,n.map?n.map.prev:void 0),!this.mapFile&&n.from&&(this.mapFile=n.from),this.mapFile&&(this.root=Hl(this.mapFile)),t&&(this.text=t))}),[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new zl(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return e=e.substr(RegExp.lastMatch.length),e=Buffer?Buffer.from(e,"base64").toString():window.atob(e);throw e=e.match(/data:application\/json;([^,]+),/)[1],Error("Unsupported source map encoding "+e)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===C(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(t){t=e.lastIndexOf(t.pop());var n=e.indexOf("*/",t);-1<t&&-1<n&&(this.annotation=this.getAnnotationURL(e.substring(t,n)))}}},{key:"loadFile",value:function(e){if(this.root=Hl(e),jl(e))return this.mapFile=e,Gl(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof zl)return Bl.fromSourceMap(t).toString();if(t instanceof Bl)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw Error("Unsupported previous source map format: "+t.toString())}if(e=t(e)){if(!(t=this.loadFile(e)))throw Error("Unable to load previous source map: "+e.toString());return t}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation)return t=this.annotation,e&&(t=Vl(Hl(e),t)),this.loadFile(t)}}},{key:"startWith",value:function(e,t){return!!e&&e.substr(0,t.length)===t}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&0<this.consumer().sourcesContent.length)}}]);Zl.default=Zl;var ql=Rl.SourceMapConsumer,Wl=Rl.SourceMapGenerator,Yl=Rl.fileURLToPath,Kl=Rl.pathToFileURL,Jl=Rl.isAbsolute,Xl=Rl.resolve,Ql=function(){for(var e="",t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:21;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},$l=Symbol("fromOffsetCache"),ec=!(!ql||!Wl),tc=!(!Xl||!Jl),nc=s((function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(i(this,e),null==t||"object"===C(t)&&!t.toString)throw Error("PostCSS received ".concat(t," instead of CSS string"));this.css=t.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,n.from&&(!tc||/^\w+:\/\//.test(n.from)||Jl(n.from)?this.file=n.from:this.file=Xl(n.from)),tc&&ec&&(n=new Zl(this.css,n)).text&&(this.map=n,n=n.consumer().file,!this.file&&n&&(this.file=this.mapResolve(n))),this.file||(this.id="<input css "+Ql(6)+">"),this.map&&(this.map.file=this.from)}),[{key:"error",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(t&&"object"===C(t)){var i=t,o=n;"number"==typeof i.offset?(t=(i=this.fromOffset(i.offset)).line,n=i.col):(t=i.line,n=i.column),"number"==typeof o.offset?(i=(o=this.fromOffset(o.offset)).line,o=o.col):(i=o.line,o=o.column)}else if(!n){var a=this.fromOffset(t);t=a.line,n=a.col}return(r=(a=this.origin(t,n,i,o))?new Ol(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):new Ol(e,void 0===i?t:{column:n,line:t},void 0===i?n:{column:o,line:i},this.css,this.file,r.plugin)).input={column:n,endColumn:o,endLine:i,line:t,source:this.css},this.file&&(Kl&&(r.input.url=Kl(this.file).toString()),r.input.file=this.file),r}},{key:"fromOffset",value:function(e){if(this[$l])var t=this[$l];else{var n=this.css.split("\n");t=Array(n.length);for(var r=0,i=0,o=n.length;i<o;i++)t[i]=r,r+=n[i].length+1;this[$l]=t}if(n=0,e>=t[t.length-1])n=t.length-1;else for(r=t.length-2;n<r;)if(e<t[i=n+(r-n>>1)])r=i-1;else{if(!(e>=t[i+1])){n=i;break}n=i+1}return{col:e-t[n]+1,line:n+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:Xl(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,t,n,r){if(!this.map)return!1;var i,o=this.map.consumer();if(!(e=o.originalPositionFor({column:t,line:e})).source)return!1;if("number"==typeof n&&(i=o.originalPositionFor({column:r,line:n})),n=Jl(e.source)?Kl(e.source):new URL(e.source,this.map.consumer().sourceRoot||Kl(this.map.mapFile)),i={column:e.column,endColumn:i&&i.column,endLine:i&&i.line,line:e.line,url:n.toString()},"file:"===n.protocol){if(!Yl)throw Error("file: protocol is not available in this PostCSS build");i.file=Yl(n)}return(o=o.sourceContentFor(e.source))&&(i.source=o),i}},{key:"toJSON",value:function(){for(var e={},t=0,n=["hasBOM","css","file","id"];t<n.length;t++){var r=n[t];null!=this[r]&&(e[r]=this[r])}return this.map&&(e.map=v({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}]);nc.default=nc,Rl&&Rl.registerInput&&Rl.registerInput(nc);var rc=Rl.SourceMapConsumer,ic=Rl.SourceMapGenerator,oc=Rl.dirname,ac=Rl.relative,sc=Rl.resolve,lc=Rl.sep,cc=Rl.pathToFileURL,uc=!(!rc||!ic),dc=!!(oc&&sc&&ac&&lc),fc=s((function e(t,n,r,o){i(this,e),this.stringify=t,this.mapOpts=r.map||{},this.root=n,this.opts=r,this.originalCSS=this.css=o,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}),[{key:"addAnnotation",value:function(){var e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map",t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,t=l(this.previous());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.toUrl(this.path(n.file)),i=n.root||oc(n.file),o=void 0;!1===this.mapOpts.sourcesContent?(o=new rc(n.text)).sourcesContent&&(o.sourcesContent=null):o=n.consumer(),this.map.applySourceMap(o,r,this.toUrl(this.path(i)))}}catch(e){t.e(e)}finally{t.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,t=this.root.nodes.length-1;0<=t;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),dc&&uc&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,(function(t){e+=t})),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=ic.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new ic({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&0<this.previous().length&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new ic({file:this.outputFile(),ignoreInvalidMapping:!0});var t,n,r=1,i=1,o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(function(a,s,l){e.css+=a,s&&"end"!==l&&(o.generated.line=r,o.generated.column=i-1,s.source&&s.source.start?(o.source=e.sourcePath(s),o.original.line=s.source.start.line,o.original.column=s.source.start.column-1):(o.source="<no source>",o.original.line=1,o.original.column=0),e.map.addMapping(o)),(t=a.match(/\n/g))?(r+=t.length,n=a.lastIndexOf("\n"),i=a.length-n):i+=a.length,s&&"start"!==l&&(a=s.parent||{raws:{}},"decl"!==s.type&&("atrule"!==s.type||s.nodes)||s!==a.last||a.raws.semicolon)&&(s.source&&s.source.end?(o.source=e.sourcePath(s),o.original.line=s.source.end.line,o.original.column=s.source.end.column-1,o.generated.line=r,o.generated.column=i-2):(o.source="<no source>",o.original.line=1,o.original.column=0,o.generated.line=r,o.generated.column=i-1),e.map.addMapping(o))}))}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((function(e){return e.annotation})))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((function(e){return e.inline})))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:0<this.previous().length}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((function(e){return e.withContent()}))}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute||60===e.charCodeAt(0)||/^\w+:\/\//.test(e))return e;var t=this.memoizedPaths.get(e);return t||(t=this.opts.to?oc(this.opts.to):".","string"==typeof this.mapOpts.annotation&&(t=oc(sc(t,this.mapOpts.annotation))),t=ac(t,e),this.memoizedPaths.set(e,t),t)}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((function(t){t.source&&t.source.input.map&&(t=t.source.input.map,e.previousMaps.includes(t)||e.previousMaps.push(t))}));else{var t=new nc(this.originalCSS,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,t={};if(this.root)this.root.walk((function(n){if(n.source){var r=n.source.input.from;r&&!t[r]&&(t[r]=!0,r=e.usesFileUrls?e.toFileUrl(r):e.toUrl(e.path(r)),e.map.setSourceContent(r,n.source.input.css))}}));else if(this.css){var n=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(n,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var t=this.memoizedFileURLs.get(e);if(t)return t;if(cc)return t=cc(e).toString(),this.memoizedFileURLs.set(e,t),t;throw Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var t=this.memoizedURLs.get(e);return t||("\\"===lc&&(e=e.replace(/\\/g,"/")),t=encodeURI(e).replace(/[#?]/g,encodeURIComponent),this.memoizedURLs.set(e,t),t)}}]),hc=function(e){function t(e){return i(this,t),(e=r(this,t,[e])).type="comment",e}return f(t,e),s(t)}(Ul);hc.default=hc;var pc,vc,gc,mc,yc=Ml,wc=function(e){function t(){return i(this,t),r(this,t,arguments)}return f(t,e),s(t,[{key:"append",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(e=0;e<t.length;e++){var r;n=l(n=this.normalize(t[e],this.last));try{for(n.s();!(r=n.n()).done;)this.proxyOf.nodes.push(r.value)}catch(e){n.e(e)}finally{n.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(b(t,"cleanRaws",this,3)([e]),this.nodes){var n,r=l(this.nodes);try{for(r.s();!(n=r.n()).done;)n.value.cleanRaws(e)}catch(e){r.e(e)}finally{r.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var t,n=this.getIterator();this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],!1!==(t=e(this.proxyOf.nodes[t],t)));)this.indexes[n]+=1;return delete this.indexes[n],t}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={});var e=this.lastEach+=1;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return e[t].apply(e,k(r.map((function(e){return"function"==typeof e?function(t,n){return e(t.toProxy(),n)}:e}))))}:"every"===t||"some"===t?function(n){return e[t]((function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.apply(void 0,[e.toProxy()].concat(r))}))}:"root"===t?function(){return e.root().toProxy()}:"nodes"===t?e.nodes.map((function(e){return e.toProxy()})):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,t){var n,r=this.index(e);t=this.normalize(t,this.proxyOf.nodes[r]).reverse(),r=this.index(e),e=l(t);try{for(e.s();!(n=e.n()).done;)this.proxyOf.nodes.splice(r+1,0,n.value)}catch(t){e.e(t)}finally{e.f()}for(var i in this.indexes)r<(n=this.indexes[i])&&(this.indexes[i]=n+t.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,t){var n,r=this.index(e);t=this.normalize(t,this.proxyOf.nodes[r],0===r&&"prepend").reverse(),r=this.index(e),e=l(t);try{for(e.s();!(n=e.n()).done;)this.proxyOf.nodes.splice(r,0,n.value)}catch(t){e.e(t)}finally{e.f()}for(var i in this.indexes)r<=(n=this.indexes[i])&&(this.indexes[i]=n+t.length);return this.markDirty(),this}},{key:"normalize",value:function(e,n){var r=this;if("string"==typeof e)e=We(pc(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var i,o=l(e=e.slice(0));try{for(o.s();!(i=o.n()).done;){var a=i.value;a.parent&&a.parent.removeChild(a,"ignore")}}catch(e){o.e(e)}finally{o.f()}}else if("root"===e.type&&"document"!==this.type){i=l(e=e.nodes.slice(0));try{for(i.s();!(o=i.n()).done;){var s=o.value;s.parent&&s.parent.removeChild(s,"ignore")}}catch(e){i.e(e)}finally{i.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new Fl(e)]}else if(e.selector)e=[new vc(e)];else if(e.name)e=[new gc(e)];else{if(!e.text)throw Error("Unknown node type in node creation");e=[new hc(e)]}return e.map((function(e){return e[Nl]||t.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[yc]&&Ye(e),void 0===e.raws.before&&n&&void 0!==n.raws.before&&(e.raws.before=n.raws.before.replace(/\S/g,"")),e.parent=r.proxyOf,e}))}},{key:"prepend",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;e=l(t=t.reverse());try{for(e.s();!(r=e.n()).done;){var i,o=this.normalize(r.value,this.first,"prepend").reverse(),a=l(o);try{for(a.s();!(i=a.n()).done;)this.proxyOf.nodes.unshift(i.value)}catch(e){a.e(e)}finally{a.f()}for(var s in this.indexes)this.indexes[s]+=o.length}}catch(t){e.e(t)}finally{e.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,t=l(this.proxyOf.nodes);try{for(t.s();!(e=t.n()).done;)e.value.parent=void 0}catch(e){t.e(e)}finally{t.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var t;for(t in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes){var n=this.indexes[t];n>=e&&(this.indexes[t]=n-1)}return this.markDirty(),this}},{key:"replaceValues",value:function(e,t,n){return n||(n=t,t={}),this.walkDecls((function(r){t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,n))})),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each((function(t,n){try{var r=e(t,n)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r}))}},{key:"walkAtRules",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("atrule"===n.type&&e.test(n.name))return t(n,r)})):this.walk((function(n,r){if("atrule"===n.type&&n.name===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("atrule"===e.type)return t(e,n)})))}},{key:"walkComments",value:function(e){return this.walk((function(t,n){if("comment"===t.type)return e(t,n)}))}},{key:"walkDecls",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("decl"===n.type&&e.test(n.prop))return t(n,r)})):this.walk((function(n,r){if("decl"===n.type&&n.prop===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("decl"===e.type)return t(e,n)})))}},{key:"walkRules",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("rule"===n.type&&e.test(n.selector))return t(n,r)})):this.walk((function(n,r){if("rule"===n.type&&n.selector===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("rule"===e.type)return t(e,n)})))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(Ul);wc.registerParse=function(e){pc=e},wc.registerRule=function(e){vc=e},wc.registerAtRule=function(e){gc=e},wc.registerRoot=function(e){mc=e},wc.default=wc,wc.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,gc.prototype):"rule"===e.type?Object.setPrototypeOf(e,vc.prototype):"decl"===e.type?Object.setPrototypeOf(e,Fl.prototype):"comment"===e.type?Object.setPrototypeOf(e,hc.prototype):"root"===e.type&&Object.setPrototypeOf(e,mc.prototype),e[Nl]=!0,e.nodes&&e.nodes.forEach((function(e){wc.rebuild(e)}))};var bc,kc,_c=function(e){function t(e){return i(this,t),(e=r(this,t,[v({type:"document"},e)])).nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"toResult",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new bc(new kc,this,e).stringify()}}])}(wc);_c.registerLazyResult=function(e){bc=e},_c.registerProcessor=function(e){kc=e},_c.default=_c;var Cc=s((function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(i(this,e),this.type="warning",this.text=t,n.node&&n.node.source){var r=n.node.rangeBy(n);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(var o in n)this[o]=n[o]}),[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}]);Cc.default=Cc;var Sc=s((function e(t,n,r){i(this,e),this.processor=t,this.messages=[],this.root=n,this.opts=r,this.map=this.css=void 0}),[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!t.plugin&&this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin),t=new Cc(e,t),this.messages.push(t),t}},{key:"warnings",value:function(){return this.messages.filter((function(e){return"warning"===e.type}))}},{key:"content",get:function(){return this.css}}]);Sc.default=Sc;var Ec=/[\t\n\f\r "#'()/;[\\\]{}]/g,Ac=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Ic=/.[\r\n"'(/\\]/,Tc=/[\da-f]/i,xc=function(e){function t(e){return i(this,t),(e=r(this,t,[e])).type="atrule",e}return f(t,e),s(t,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return b(t,"append",this,3)(n)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return b(t,"prepend",this,3)(n)}}])}(wc);xc.default=xc,wc.registerAtRule(xc);var Rc,Oc,Mc=function(e){function t(e){return i(this,t),(e=r(this,t,[e])).type="root",e.nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"normalize",value:function(e,n,r){if(e=b(t,"normalize",this,3)([e]),n)if("prepend"===r)1<this.nodes.length?n.raws.before=this.nodes[1].raws.before:delete n.raws.before;else if(this.first!==n){var i;r=l(e);try{for(r.s();!(i=r.n()).done;)i.value.raws.before=n.raws.before}catch(e){r.e(e)}finally{r.f()}}return e}},{key:"removeChild",value:function(e,n){var r=this.index(e);return!n&&0===r&&1<this.nodes.length&&(this.nodes[1].raws.before=this.nodes[r].raws.before),b(t,"removeChild",this,3)([e])}},{key:"toResult",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Rc(new Oc,this,e).stringify()}}])}(wc);Mc.registerLazyResult=function(e){Rc=e},Mc.registerProcessor=function(e){Oc=e},Mc.default=Mc,wc.registerRoot(Mc);var Nc={comma:function(e){return Nc.split(e,[","],!0)},space:function(e){return Nc.split(e,[" ","\n","\t"])},split:function(e,t,n){var r,i=[],o="",a=!1,s=0,c=!1,u="",d=!1;e=l(e);try{for(e.s();!(r=e.n()).done;){var f=r.value;d?d=!1:"\\"===f?d=!0:c?f===u&&(c=!1):'"'===f||"'"===f?(c=!0,u=f):"("===f?s+=1:")"===f?0<s&&--s:0===s&&t.includes(f)&&(a=!0),a?(""!==o&&i.push(o.trim()),o="",a=!1):o+=f}}catch(t){e.e(t)}finally{e.f()}return(n||""!==o)&&i.push(o.trim()),i}},Lc=Nc;Nc.default=Nc;var Dc=function(e){function t(e){return i(this,t),(e=r(this,t,[e])).type="rule",e.nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"selectors",get:function(){return Lc.comma(this.selector)},set:function(e){var t=this.selector?this.selector.match(/,\s*/):null;t=t?t[0]:","+this.raw("between","beforeOpen"),this.selector=e.join(t)}}])}(wc);Dc.default=Dc,wc.registerRule(Dc);var Pc={empty:!0,space:!0},Uc=s((function e(t){i(this,e),this.input=t,this.current=this.root=new Mc,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:t,start:{column:1,line:1,offset:0}}}),[{key:"atrule",value:function(e){var t=new xc;t.name=e[1].slice(1),""===t.name&&this.unnamedAtrule(t,e),this.init(t,e[2]);var n,r=!1,i=!1,o=[];for(n=[];!this.tokenizer.endOfFile();){var a=(e=this.tokenizer.nextToken())[0];if("("===a||"["===a?n.push("("===a?")":"]"):"{"===a&&0<n.length?n.push("}"):a===n[n.length-1]&&n.pop(),0===n.length){if(";"===a){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}if("{"===a){i=!0;break}if("}"===a){if(0<o.length){for(a=o[n=o.length-1];a&&"space"===a[0];)a=o[--n];a&&(t.source.end=this.getPosition(a[3]||a[2]),t.source.end.offset++)}this.end(e);break}o.push(e)}else o.push(e);if(this.tokenizer.endOfFile()){r=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(o),o.length?(t.raws.afterName=this.spacesAndCommentsFromStart(o),this.raw(t,"params",o),r&&(e=o[o.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),i&&(t.nodes=[],this.current=t)}},{key:"checkMissedSemicolon",value:function(e){var t=this.colon(e);if(!1!==t){var n=0;for(--t;0<=t;t--){var r=e[t];if("space"!==r[0]&&2===(n+=1))break}throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}}},{key:"colon",value:function(e){var t,n=0;e=l(e.entries());try{for(e.s();!(t=e.n()).done;){var r=w(t.value,2),i=r[0],o=r[1],a=o[0];if("("===a&&(n+=1),")"===a&&--n,0===n&&":"===a){if(s){if("word"===s[0]&&"progid"===s[1])continue;return i}this.doubleColon(o)}var s=o}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"comment",value:function(e){var t=new hc;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,e=e[1].slice(2,-2),/^\s*$/.test(e)?(t.text="",t.raws.left=e,t.raws.right=""):(e=e.match(/^(\s*)([^]*\S)(\s*)$/),t.text=e[2],t.raws.left=e[1],t.raws.right=e[3])}},{key:"createTokenizer",value:function(){this.tokenizer=function(e){function t(t){throw e.error("Unclosed "+t,v)}var n,r,i,o,a,s,l,c,u,d,f=e.css.valueOf(),h=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).ignoreErrors,p=f.length,v=0,g=[],m=[];return{back:function(e){m.push(e)},endOfFile:function(){return 0===m.length&&v>=p},nextToken:function(e){if(m.length)return m.pop();if(!(v>=p)){switch(e=!!e&&e.ignoreUnclosed,n=f.charCodeAt(v)){case 10:case 32:case 9:case 13:case 12:r=v;do{r+=1,n=f.charCodeAt(r)}while(32===n||10===n||9===n||13===n||12===n);d=["space",f.slice(v,r)],v=r-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:e=String.fromCharCode(n),d=[e,e,v];break;case 40:if(c=g.length?g.pop()[1]:"",u=f.charCodeAt(v+1),"url"===c&&39!==u&&34!==u&&32!==u&&10!==u&&9!==u&&12!==u&&13!==u){r=v;do{if(s=!1,-1===(r=f.indexOf(")",r+1))){if(h||e){r=v;break}t("bracket")}for(l=r;92===f.charCodeAt(l-1);)--l,s=!s}while(s);d=["brackets",f.slice(v,r+1),v,r],v=r}else r=f.indexOf(")",v+1),o=f.slice(v,r+1),-1===r||Ic.test(o)?d=["(","(",v]:(d=["brackets",o,v,r],v=r);break;case 39:case 34:i=39===n?"'":'"',r=v;do{if(s=!1,-1===(r=f.indexOf(i,r+1))){if(h||e){r=v+1;break}t("string")}for(l=r;92===f.charCodeAt(l-1);)--l,s=!s}while(s);d=["string",f.slice(v,r+1),v,r],v=r;break;case 64:Ec.lastIndex=v+1,Ec.test(f),r=0===Ec.lastIndex?f.length-1:Ec.lastIndex-2,d=["at-word",f.slice(v,r+1),v,r],v=r;break;case 92:for(r=v,a=!0;92===f.charCodeAt(r+1);)r+=1,a=!a;if(n=f.charCodeAt(r+1),a&&47!==n&&32!==n&&10!==n&&9!==n&&13!==n&&12!==n&&(r+=1,Tc.test(f.charAt(r)))){for(;Tc.test(f.charAt(r+1));)r+=1;32===f.charCodeAt(r+1)&&(r+=1)}d=["word",f.slice(v,r+1),v,r],v=r;break;default:47===n&&42===f.charCodeAt(v+1)?(0===(r=f.indexOf("*/",v+2)+1)&&(h||e?r=f.length:t("comment")),d=["comment",f.slice(v,r+1),v,r]):(Ac.lastIndex=v+1,Ac.test(f),r=0===Ac.lastIndex?f.length-1:Ac.lastIndex-2,d=["word",f.slice(v,r+1),v,r],g.push(d)),v=r}return v++,d}},position:function(){return v}}}(this.input)}},{key:"decl",value:function(e,t){var n=new Fl;this.init(n,e[0][2]);var r,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||function(e){for(var t=e.length-1;0<=t;t--){var n=e[t];if(n=n[3]||n[2])return n}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length&&":"!==(i=e[0][0])&&"space"!==i&&"comment"!==i;)n.prop+=e.shift()[1];for(n.raws.between="";e.length;){if(":"===(r=e.shift())[0]){n.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),n.raws.between+=r[1]}for("_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1)),i=[];e.length&&("space"===(r=e[0][0])||"comment"===r);)i.push(e.shift());this.precheckMissedSemicolon(e);for(var o=e.length-1;0<=o;o--){if("!important"===(r=e[o])[1].toLowerCase()){n.important=!0,r=this.stringFrom(e,o)," !important"!==(r=this.spacesFromEnd(e)+r)&&(n.raws.important=r);break}if("important"===r[1].toLowerCase()){for(var a=e.slice(0),s="",l=o;0<l;l--){var c=a[l][0];if(0===s.trim().indexOf("!")&&"space"!==c)break;s=a.pop()[1]+s}0===s.trim().indexOf("!")&&(n.important=!0,n.raws.important=s,e=a)}if("space"!==r[0]&&"comment"!==r[0])break}e.some((function(e){return"space"!==e[0]&&"comment"!==e[0]}))&&(n.raws.between+=i.map((function(e){return e[1]})).join(""),i=[]),this.raw(n,"value",i.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var t=new Dc;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){this.spaces+=e[1],this.current.nodes&&(e=this.current.nodes[this.current.nodes.length-1])&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}},{key:"getPosition",value:function(e){var t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}},{key:"init",value:function(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var t=!1,n=!1,r=null,i=[],o=e[1].startsWith("--"),a=[],s=e;s;){if(e=s[0],a.push(s),"("===e||"["===e)r||(r=s),i.push("("===e?")":"]");else if(o&&n&&"{"===e)r||(r=s),i.push("}");else if(0===i.length){if(";"===e){if(n)return void this.decl(a,o);break}if("{"===e)return void this.rule(a);if("}"===e){this.tokenizer.back(a.pop()),t=!0;break}":"===e&&(n=!0)}else e===i[i.length-1]&&(i.pop(),0===i.length&&(r=null));s=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),0<i.length&&this.unclosedBracket(r),t&&n){if(!o)for(;a.length&&("space"===(s=a[a.length-1][0])||"comment"===s);)this.tokenizer.back(a.pop());this.decl(a,o)}else this.unknownWord(a)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,t,n,r){for(var i,o,a,s=n.length,l="",c=!0,u=0;u<s;u+=1)"space"!==(o=(i=n[u])[0])||u!==s-1||r?"comment"===o?(a=n[u-1]?n[u-1][0]:"empty",o=n[u+1]?n[u+1][0]:"empty",Pc[a]||Pc[o]||","===l.slice(-1)?c=!1:l+=i[1]):l+=i[1]:c=!1;c||(n=n.reduce((function(e,t){return e+t[1]}),""),e.raws[t]={raw:n,value:l}),e[t]=l}},{key:"rule",value:function(e){e.pop();var t=new Dc;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var t,n="";e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)n=e.pop()[1]+n;return n}},{key:"spacesAndCommentsFromStart",value:function(e){for(var t,n="";e.length&&("space"===(t=e[0][0])||"comment"===t);)n+=e.shift()[1];return n}},{key:"spacesFromEnd",value:function(e){for(var t="";e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t}},{key:"stringFrom",value:function(e,t){for(var n="",r=t;r<e.length;r++)n+=e[r][1];return e.splice(t,e.length-t),n}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}]),Fc=nc;Ke.default=Ke,wc.registerParse(Ke);var zc=Ml,Bc={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},jc={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Gc={Once:!0,postcssPlugin:!0,prepare:!0},Hc={},Vc=s((function e(t,n,r){var o=this;if(i(this,e),this.processed=this.stringified=!1,"object"!==C(n)||null===n||"root"!==n.type&&"document"!==n.type)if(n instanceof e||n instanceof Sc){var a=$e(n.root);n.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=n.map)}else{var s=Ke;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{a=s(n,r)}catch(e){this.processed=!0,this.error=e}a&&!a[Nl]&&wc.rebuild(a)}else a=$e(n);this.result=new Sc(t,a,r),this.helpers=v(v({},Hc),{},{postcss:Hc,result:this.result}),this.plugins=this.processor.plugins.map((function(e){return"object"===C(e)&&e.prepare?v(v({},e),e.prepare(o.result)):e}))}),[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,t){var n=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin||(e.plugin=n.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var t,n=function(t,n,r){e.listeners[n]||(e.listeners[n]=[]),e.listeners[n].push([t,r])},r=l(this.plugins);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("object"===C(i))for(var o in i){if(!jc[o]&&/^[A-Z]/.test(o))throw Error("Unknown event ".concat(o," in ").concat(i.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!Gc[o])if("object"===C(i[o]))for(var a in i[o])n(i,"*"===a?o:o+"-"+a.toLowerCase(),i[o][a]);else"function"==typeof i[o]&&n(i,o,i[o])}}}catch(e){r.e(e)}finally{r.f()}this.hasListener=0<Object.keys(this.listeners).length}},{key:"runAsync",value:function(){var e=n(m().mark((function e(){var t,n,r,i,o,a,s,c,u,d,f=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.plugin=0;case 2:if(!(t<this.plugins.length)){e.next=17;break}if(n=this.plugins[t],!Je(r=this.runOnRoot(n))){e.next=14;break}return e.prev=6,e.next=9,r;case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),this.handleError(e.t0);case 14:t++,e.next=2;break;case 17:if(this.prepareVisitors(),!this.hasListener){e.next=56;break}i=this.result.root;case 20:if(i[zc]){e.next=39;break}i[zc]=!0,o=[Qe(i)];case 23:if(!(0<o.length)){e.next=37;break}if(!Je(a=this.visitTick(o))){e.next=35;break}return e.prev=26,e.next=29,a;case 29:e.next=35;break;case 31:throw e.prev=31,e.t1=e.catch(26),s=o[o.length-1].node,this.handleError(e.t1,s);case 35:e.next=23;break;case 37:e.next=20;break;case 39:if(!this.listeners.OnceExit){e.next=56;break}c=l(this.listeners.OnceExit),e.prev=41,d=m().mark((function e(){var t,n,r,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w(u.value,2),n=t[0],r=t[1],f.result.lastPlugin=n,e.prev=2,"document"!==i.type){e.next=9;break}return o=i.nodes.map((function(e){return r(e,f.helpers)})),e.next=7,Promise.all(o);case 7:e.next=11;break;case 9:return e.next=11,r(i,f.helpers);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(2),f.handleError(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})),c.s();case 44:if((u=c.n()).done){e.next=48;break}return e.delegateYield(d(),"t2",46);case 46:e.next=44;break;case 48:e.next=53;break;case 50:e.prev=50,e.t3=e.catch(41),c.e(e.t3);case 53:return e.prev=53,c.f(),e.finish(53);case 56:return this.processed=!0,e.abrupt("return",this.stringify());case 58:case"end":return e.stop()}}),e,this,[[6,11],[26,31],[41,50,53,56]])})));return function(){return e.apply(this,arguments)}}()},{key:"runOnRoot",value:function(e){var t=this;this.result.lastPlugin=e;try{if("object"===C(e)&&e.Once){if("document"===this.result.root.type){var n=this.result.root.nodes.map((function(n){return e.Once(n,t.helpers)}));return Je(n[0])?Promise.all(n):n}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,t=Ze;return e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify),e=new fc(t,this.result.root,this.result.opts).generate(),this.result.css=e[0],this.result.map=e[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,t=l(this.plugins);try{for(t.s();!(e=t.n()).done;)if(Je(this.runOnRoot(e.value)))throw this.getAsyncError()}catch(e){t.e(e)}finally{t.f()}if(this.prepareVisitors(),this.hasListener){for(t=this.result.root;!t[zc];)t[zc]=!0,this.walkSync(t);if(this.listeners.OnceExit)if("document"===t.type){var n;t=l(t.nodes);try{for(t.s();!(n=t.n()).done;)this.visitSync(this.listeners.OnceExit,n.value)}catch(e){t.e(e)}finally{t.f()}}else this.visitSync(this.listeners.OnceExit,t)}return this.result}},{key:"then",value:function(e,t){return this.async().then(e,t)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,t){var n;e=l(e);try{for(e.s();!(n=e.n()).done;){var r=w(n.value,2),i=r[1];this.result.lastPlugin=r[0];var o=void 0;try{o=i(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(Je(o))throw this.getAsyncError()}}catch(t){e.e(t)}finally{e.f()}}},{key:"visitTick",value:function(e){var t=e[e.length-1],n=t.node,r=t.visitors;if("root"===n.type||"document"===n.type||n.parent){if(0<r.length&&t.visitorIndex<r.length){var i=w(r[t.visitorIndex],2);e=i[0],i=i[1],t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return i(n.toProxy(),this.helpers)}catch(e){throw this.handleError(e,n)}}if(0!==t.iterator){for(r=t.iterator;i=n.nodes[n.indexes[r]];)if(n.indexes[r]+=1,!i[zc])return i[zc]=!0,void e.push(Qe(i));t.iterator=0,delete n.indexes[r]}for(r=t.events;t.eventIndex<r.length;){if(i=r[t.eventIndex],t.eventIndex+=1,0===i)return void(n.nodes&&n.nodes.length&&(n[zc]=!0,t.iterator=n.getIterator()));if(this.listeners[i])return void(t.visitors=this.listeners[i])}}e.pop()}},{key:"walkSync",value:function(e){var t=this;e[zc]=!0;var n,r=Xe(e);r=l(r);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0===i)e.nodes&&e.each((function(e){e[zc]||t.walkSync(e)}));else{var o=this.listeners[i];if(o&&this.visitSync(o,e.toProxy()))break}}}catch(e){r.e(e)}finally{r.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);Vc.registerPostcss=function(e){Hc=e},Vc.default=Vc,Mc.registerLazyResult(Vc),_c.registerLazyResult(Vc);var Zc=s((function e(t,n,r){i(this,e),n=n.toString(),this.stringified=!1,this._processor=t,this._css=n,this._opts=r,this._map=void 0,this.result=new Sc(this._processor,void 0,this._opts),this.result.css=n;var o=this;Object.defineProperty(this.result,"root",{get:function(){return o.root}}),(t=new fc(Ze,void 0,this._opts,n)).isMap()?(t=(n=w(t=t.generate(),2))[0],n=n[1],t&&(this.result.css=t),n&&(this.result.map=n)):(t.clearAnnotation(),this.result.css=t.css)}),[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,t){return this.async().then(e,t)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;try{var e=Ke(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}]);Zc.default=Zc;var qc=s((function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];i(this,e),this.version="8.4.38",this.plugins=this.normalize(t)}),[{key:"normalize",value:function(e){var t,n=[];e=l(e);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"===C(r)&&Array.isArray(r.plugins))n=n.concat(r.plugins);else if("object"===C(r)&&r.postcssPlugin)n.push(r);else if("function"==typeof r)n.push(r);else if("object"!==C(r)||!r.parse&&!r.stringify)throw Error(r+" is not a PostCSS plugin")}}catch(t){e.e(t)}finally{e.f()}return n}},{key:"process",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||t.parser||t.stringifier||t.syntax?new Vc(this,e,t):new Zc(this,e,t)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}]);qc.default=qc,Mc.registerProcessor(qc),_c.registerProcessor(qc);var Wc=Fl,Yc=Zl,Kc=hc,Jc=xc,Xc=nc,Qc=Mc,$c=Dc;et.default=et;var eu=qc;tt.plugin=function(e,t){function n(){console&&console.warn&&!i&&(i=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));var n=t.apply(void 0,arguments);return n.postcssPlugin=e,n.postcssVersion=(new eu).version,n}var r,i=!1;return Object.defineProperty(n,"postcss",{get:function(){return r||(r=n()),r}}),n.process=function(e,t,r){return tt([n(r)]).process(e,t)},n},tt.stringify=Ze,tt.parse=Ke,tt.fromJSON=et,tt.list=Lc,tt.comment=function(e){return new hc(e)},tt.atRule=function(e){return new xc(e)},tt.decl=function(e){return new Fl(e)},tt.rule=function(e){return new Dc(e)},tt.root=function(e){return new Mc(e)},tt.document=function(e){return new _c(e)},tt.CssSyntaxError=Ol,tt.Declaration=Fl,tt.Container=wc,tt.Processor=eu,tt.Document=_c,tt.Comment=hc,tt.Warning=Cc,tt.AtRule=xc,tt.Result=Sc,tt.Input=nc,tt.Rule=Dc,tt.Root=Mc,tt.Node=Ul,Vc.registerPostcss(tt),tt.default=tt;var tu=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(tt);tu.stringify,tu.fromJSON,tu.plugin,tu.parse,tu.list,tu.document,tu.comment,tu.atRule,tu.rule,tu.decl,tu.root,tu.CssSyntaxError,tu.Declaration,tu.Container,tu.Processor,tu.Document,tu.Comment,tu.Warning,tu.AtRule,tu.Result,tu.Input,tu.Rule,tu.Root,tu.Node;var nu=function(){function e(){i(this,e),El(this,"parentElement",null),El(this,"parentNode",null),El(this,"ownerDocument"),El(this,"firstChild",null),El(this,"lastChild",null),El(this,"previousSibling",null),El(this,"nextSibling",null),El(this,"ELEMENT_NODE",1),El(this,"TEXT_NODE",3),El(this,"nodeType"),El(this,"nodeName"),El(this,"RRNodeType")}return s(e,[{key:"childNodes",get:function(){for(var e=[],t=this.firstChild;t;)e.push(t),t=t.nextSibling;return e}},{key:"contains",value:function(t){if(!(t instanceof e))return!1;if(t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}},{key:"appendChild",value:function(e){throw Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"insertBefore",value:function(e,t){throw Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}},{key:"removeChild",value:function(e){throw Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"toString",value:function(){return"RRNode"}}])}(),ru={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},iu={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},ou={},au={},su={},lu={childNodes:function(e){return rt("Node",e,"childNodes")},parentNode:function(e){return rt("Node",e,"parentNode")},parentElement:function(e){return rt("Node",e,"parentElement")},textContent:function(e){return rt("Node",e,"textContent")},contains:function(e,t){return it("Node",e,"contains")(t)},getRootNode:function(e){return it("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?rt("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?rt("Element",e,"shadowRoot"):null},querySelector:function(e,t){return rt("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return rt("Element",e,"querySelectorAll")(t)},mutationObserver:ot},cu={map:{},getId:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),-1},getNode:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),null},removeNodeFromMap:function(){console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.")},has:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),!1},reset:function(){console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.")}};"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(cu=new Proxy(cu,{get:function(e,t,n){return"map"===t&&console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),Reflect.get(e,t,n)}}));var uu=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(uu=function(){return(new Date).getTime()});for(var du,fu=s((function e(){i(this,e),Ia(this,"id",1),Ia(this,"styleIDMap",new WeakMap),Ia(this,"idStyleMap",new Map)}),[{key:"getId",value:function(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}},{key:"has",value:function(e){return this.styleIDMap.has(e)}},{key:"add",value:function(e,t){return this.has(e)?this.getId(e):(t=void 0===t?this.id++:t,this.styleIDMap.set(e,t),this.idStyleMap.set(t,e),t)}},{key:"getStyle",value:function(e){return this.idStyleMap.get(e)||null}},{key:"reset",value:function(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}},{key:"generateId",value:function(){return this.id++}}]),hu=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(hu||{}),pu=function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e}(pu||{}),vu=function(e){return e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e}(vu||{}),gu=function(e){return e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e}(gu||{}),mu=function(e){return e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e}(mu||{}),yu=function(e){return e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e}(yu||{}),wu=function(e){return e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e}(wu||{}),bu=s((function e(){i(this,e),Ia(this,"length",0),Ia(this,"head",null),Ia(this,"tail",null)}),[{key:"get",value:function(e){if(e>=this.length)throw Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}},{key:"addNode",value:function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&"__ln"in e.previousSibling){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else e.nextSibling&&"__ln"in e.nextSibling&&e.nextSibling.__ln.previous?(n=e.nextSibling.__ln.previous,t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)):(this.head&&(this.head.previous=t),t.next=this.head,this.head=t);null===t.next&&(this.tail=t),this.length++}},{key:"removeNode",value:function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next)?t.next.previous=t.previous:this.tail=t.previous:(this.head=t.next)?this.head.previous=null:this.tail=null,e.__ln&&delete e.__ln,this.length--)}}]),ku=function(e,t){return"".concat(e,"@").concat(t)},_u=s((function e(){var t=this;i(this,e),Ia(this,"frozen",!1),Ia(this,"locked",!1),Ia(this,"texts",[]),Ia(this,"attributes",[]),Ia(this,"attributeMap",new WeakMap),Ia(this,"removes",[]),Ia(this,"mapRemoves",[]),Ia(this,"movedMap",{}),Ia(this,"addedSet",new Set),Ia(this,"movedSet",new Set),Ia(this,"droppedSet",new Set),Ia(this,"removesSubTreeCache",new Set),Ia(this,"mutationCb"),Ia(this,"blockClass"),Ia(this,"blockSelector"),Ia(this,"maskTextClass"),Ia(this,"maskTextSelector"),Ia(this,"inlineStylesheet"),Ia(this,"maskInputOptions"),Ia(this,"maskTextFn"),Ia(this,"maskInputFn"),Ia(this,"keepIframeSrcFn"),Ia(this,"recordCanvas"),Ia(this,"inlineImages"),Ia(this,"slimDOMOptions"),Ia(this,"dataURLOptions"),Ia(this,"doc"),Ia(this,"mirror"),Ia(this,"iframeManager"),Ia(this,"stylesheetManager"),Ia(this,"shadowDomManager"),Ia(this,"canvasManager"),Ia(this,"processedNodeManager"),Ia(this,"unattachedDoc"),Ia(this,"processMutations",(function(e){e.forEach(t.processMutation),t.emit()})),Ia(this,"emit",(function(){if(!t.frozen&&!t.locked){for(var e=[],n=new Set,r=new bu,i=function(e){for(var n=-2;-2===n;)n=(e=e&&e.nextSibling)&&t.mirror.getId(e);return n},o=function(o){var a=lu.parentNode(o);if(a&&kt(o)){var s=!1;if(o.nodeType===Node.TEXT_NODE){var l=a.tagName;if("TEXTAREA"===l)return;"STYLE"===l&&t.addedSet.has(a)&&(s=!0)}if(a=pe(a)?t.mirror.getId(bt(o)):t.mirror.getId(a),l=i(o),-1===a||-1===l)return r.addNode(o);(s=Me(o,{doc:t.doc,mirror:t.mirror,blockClass:t.blockClass,blockSelector:t.blockSelector,maskTextClass:t.maskTextClass,maskTextSelector:t.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:t.inlineStylesheet,maskInputOptions:t.maskInputOptions,maskTextFn:t.maskTextFn,maskInputFn:t.maskInputFn,slimDOMOptions:t.slimDOMOptions,dataURLOptions:t.dataURLOptions,recordCanvas:t.recordCanvas,inlineImages:t.inlineImages,onSerialize:function(e){"IFRAME"===e.nodeName&&t.mirror.getMeta(e)&&t.iframeManager.addIframe(e),yt(e,t.mirror)&&t.stylesheetManager.trackLinkElement(e),wt(o)&&t.shadowDomManager.addShadowRoot(lu.shadowRoot(o),t.doc)},onIframeLoad:function(e,n){t.iframeManager.attachIframe(e,n),t.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:function(e,n){t.stylesheetManager.attachLinkElement(e,n)},cssCaptured:s}))&&(e.push({parentId:a,nextId:l,node:s}),n.add(s.id))}};t.mapRemoves.length;)t.mirror.removeNodeFromMap(t.mapRemoves.shift());var a,s,c=l(t.movedSet);try{for(c.s();!(a=c.n()).done;){var u=a.value;Ct(t.removesSubTreeCache,u,t.mirror)&&!t.movedSet.has(lu.parentNode(u))||o(u)}}catch(e){c.e(e)}finally{c.f()}c=l(t.addedSet);try{for(c.s();!(s=c.n()).done;){var d=s.value;St(t.droppedSet,d)||Ct(t.removesSubTreeCache,d,t.mirror)?St(t.movedSet,d)?o(d):t.droppedSet.add(d):o(d)}}catch(e){c.e(e)}finally{c.f()}for(d=null;r.length;){if(s=null,d&&(c=t.mirror.getId(lu.parentNode(d.value)),a=i(d.value),-1!==c&&-1!==a&&(s=d)),!s)for(d=r.tail;d;)if(c=d,d=d.previous,c&&(a=t.mirror.getId(lu.parentNode(c.value)),-1!==i(c.value))){if(-1!==a){s=c;break}if((a=lu.parentNode(c.value))&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=lu.host(a),-1!==t.mirror.getId(a))){s=c;break}}if(!s){for(;r.head;)r.removeNode(r.head.value);break}d=s.previous,r.removeNode(s.value),o(s.value)}((o={texts:t.texts.map((function(e){var n=e.node,r=lu.parentNode(n);return r&&"TEXTAREA"===r.tagName&&t.genTextAreaValueMutation(r),{id:t.mirror.getId(n),value:e.value}})).filter((function(e){return!n.has(e.id)})).filter((function(e){return t.mirror.has(e.id)})),attributes:t.attributes.map((function(e){var n=e.attributes;if("string"==typeof n.style){var r=JSON.stringify(e.styleDiff),i=JSON.stringify(e._unchangedStyles);r.length<n.style.length&&(r+i).split("var(").length===n.style.split("var(").length&&(n.style=e.styleDiff)}return{id:t.mirror.getId(e.node),attributes:n}})).filter((function(e){return!n.has(e.id)})).filter((function(e){return t.mirror.has(e.id)})),removes:t.removes,adds:e}).texts.length||o.attributes.length||o.removes.length||o.adds.length)&&(t.texts=[],t.attributes=[],t.attributeMap=new WeakMap,t.removes=[],t.addedSet=new Set,t.movedSet=new Set,t.droppedSet=new Set,t.removesSubTreeCache=new Set,t.movedMap={},t.mutationCb(o))}})),Ia(this,"genTextAreaValueMutation",(function(e){var n=t.attributeMap.get(e);n||(n={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},t.attributes.push(n),t.attributeMap.set(e,n)),n.attributes.value=Array.from(lu.childNodes(e),(function(e){return lu.textContent(e)||""})).join("")})),Ia(this,"processMutation",(function(e){if(!vt(e.target,t.mirror,t.slimDOMOptions))switch(e.type){case"characterData":var n=lu.textContent(e.target);pt(e.target,t.blockClass,t.blockSelector,!1)||n===e.oldValue||t.texts.push({value:xe(e.target,t.maskTextClass,t.maskTextSelector,!0)&&n?t.maskTextFn?t.maskTextFn(n,ht(e.target)):n.replace(/[\S]/g,"*"):n,node:e.target});break;case"attributes":n=e.target;var r=e.attributeName,i=e.target.getAttribute(r);if("value"===r){var o=we(n);i=ye({element:n,maskInputOptions:t.maskInputOptions,tagName:n.tagName,type:o,value:i,maskInputFn:t.maskInputFn})}if(pt(e.target,t.blockClass,t.blockSelector,!1)||i===e.oldValue)break;if(o=t.attributeMap.get(e.target),"IFRAME"===n.tagName&&"src"===r&&!t.keepIframeSrcFn(i)){if(n.contentDocument)break;r="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},t.attributes.push(o),t.attributeMap.set(e.target,o)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!Ie(n.tagName,r))if(o.attributes[r]=Ae(t.doc,n.tagName.toLowerCase(),r.toLowerCase(),i),"style"===r){if(!t.unattachedDoc)try{t.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){t.unattachedDoc=t.doc}r=t.unattachedDoc.createElement("span"),e.oldValue&&r.setAttribute("style",e.oldValue),i=0;for(var a=Array.from(n.style);i<a.length;i++){var s=a[i],l=n.style.getPropertyValue(s),c=n.style.getPropertyPriority(s);l!==r.style.getPropertyValue(s)||c!==r.style.getPropertyPriority(s)?o.styleDiff[s]=""===c?l:[l,c]:o._unchangedStyles[s]=[l,c]}for(i=0,r=Array.from(r.style);i<r.length;i++)a=r[i],""===n.style.getPropertyValue(a)&&(o.styleDiff[a]=!1)}else"open"===r&&"DIALOG"===n.tagName&&(n.matches("dialog:modal")?o.attributes.rr_open_mode="modal":o.attributes.rr_open_mode="non-modal");break;case"childList":pt(e.target,t.blockClass,t.blockSelector,!0)||("TEXTAREA"===e.target.tagName?t.genTextAreaValueMutation(e.target):(e.addedNodes.forEach((function(n){return t.genAdds(n,e.target)})),e.removedNodes.forEach((function(n){var r=t.mirror.getId(n),i=pe(e.target)?t.mirror.getId(lu.host(e.target)):t.mirror.getId(e.target);pt(e.target,t.blockClass,t.blockSelector,!1)||vt(n,t.mirror,t.slimDOMOptions)||-1===t.mirror.getId(n)||(t.addedSet.has(n)?(_t(t.addedSet,n),t.droppedSet.add(n)):t.addedSet.has(e.target)&&-1===r||gt(e.target,t.mirror)||(t.movedSet.has(n)&&t.movedMap[ku(r,i)]?_t(t.movedSet,n):(t.removes.push({parentId:i,id:r,isShadow:!(!pe(e.target)||!ve(e.target))||void 0}),function(e,t){for(var n=[e];n.length;)e=n.pop(),t.has(e)||(t.add(e),lu.childNodes(e).forEach((function(e){return n.push(e)})))}(n,t.removesSubTreeCache))),t.mapRemoves.push(n))}))))}})),Ia(this,"genAdds",(function(e,n){if(!t.processedNodeManager.inOtherBuffer(e,t)&&!t.addedSet.has(e)&&!t.movedSet.has(e)){if(t.mirror.hasNode(e)){if(vt(e,t.mirror,t.slimDOMOptions))return;t.movedSet.add(e);var r=null;n&&t.mirror.hasNode(n)&&(r=t.mirror.getId(n)),r&&-1!==r&&(t.movedMap[ku(t.mirror.getId(e),r)]=!0)}else t.addedSet.add(e),t.droppedSet.delete(e);pt(e,t.blockClass,t.blockSelector,!1)||(lu.childNodes(e).forEach((function(e){return t.genAdds(e)})),wt(e)&&lu.childNodes(lu.shadowRoot(e)).forEach((function(n){t.processedNodeManager.add(n,t),t.genAdds(n,e)})))}}))}),[{key:"init",value:function(e){var t=this;"mutationCb blockClass blockSelector maskTextClass maskTextSelector inlineStylesheet maskInputOptions maskTextFn maskInputFn keepIframeSrcFn recordCanvas inlineImages slimDOMOptions dataURLOptions doc mirror iframeManager stylesheetManager shadowDomManager canvasManager processedNodeManager".split(" ").forEach((function(n){t[n]=e[n]}))}},{key:"freeze",value:function(){this.frozen=!0,this.canvasManager.freeze()}},{key:"unfreeze",value:function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}},{key:"isFrozen",value:function(){return this.frozen}},{key:"lock",value:function(){this.locked=!0,this.canvasManager.lock()}},{key:"unlock",value:function(){this.locked=!1,this.canvasManager.unlock(),this.emit()}},{key:"reset",value:function(){this.shadowDomManager.reset(),this.canvasManager.reset()}}]),Cu=function(e){return du?function(){try{return e.apply(void 0,arguments)}catch(e){if(!du||!0!==du(e))throw e}}:e},Su=[],Eu=["INPUT","TEXTAREA","SELECT"],Au=new WeakMap,Iu=s((function e(t){i(this,e),Ia(this,"iframeIdToRemoteIdMap",new WeakMap),Ia(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=t}),[{key:"getId",value:function(e,t,n,r){return n=n||this.getIdToRemoteIdMap(e),e=r||this.getRemoteIdToIdMap(e),(r=n.get(t))||(r=this.generateIdFn(),n.set(t,r),e.set(r,t)),r}},{key:"getIds",value:function(e,t){var n=this,r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map((function(t){return n.getId(e,t,r,i)}))}},{key:"getRemoteId",value:function(e,t,n){return e=n||this.getRemoteIdToIdMap(e),"number"!=typeof t||(t=e.get(t))?t:-1}},{key:"getRemoteIds",value:function(e,t){var n=this,r=this.getRemoteIdToIdMap(e);return t.map((function(t){return n.getRemoteId(e,t,r)}))}},{key:"reset",value:function(e){e?(this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)):(this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap)}},{key:"getIdToRemoteIdMap",value:function(e){var t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}},{key:"getRemoteIdToIdMap",value:function(e){var t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}]),Tu=s((function e(t){i(this,e),Ia(this,"iframes",new WeakMap),Ia(this,"crossOriginIframeMap",new WeakMap),Ia(this,"crossOriginIframeMirror",new Iu(Ce)),Ia(this,"crossOriginIframeStyleMirror"),Ia(this,"crossOriginIframeRootIdMap",new WeakMap),Ia(this,"mirror"),Ia(this,"mutationCb"),Ia(this,"wrappedEmit"),Ia(this,"loadListener"),Ia(this,"stylesheetManager"),Ia(this,"recordCrossOriginIframes"),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Iu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}),[{key:"addIframe",value:function(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}},{key:"addLoadListener",value:function(e){this.loadListener=e}},{key:"attachIframe",value:function(e,t){var n,r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(n=e.contentWindow)||n.addEventListener("message",this.handleMessage.bind(this))),null==(r=this.loadListener)||r.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&0<e.contentDocument.adoptedStyleSheets.length&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}},{key:"handleMessage",value:function(e){if("rrweb"===e.data.type&&e.origin===e.data.origin&&e.source){var t=this.crossOriginIframeMap.get(e.source);t&&(t=this.transformCrossOriginEvent(t,e.data.event))&&this.wrappedEmit(t,e.data.isCheckout)}}},{key:"transformCrossOriginEvent",value:function(e,t){var n=this;switch(t.type){case hu.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);var r=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(t.data.node,r),{timestamp:t.timestamp,type:hu.IncrementalSnapshot,data:{source:pu.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case hu.Plugin:return t;case hu.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case hu.IncrementalSnapshot:switch(t.data.source){case pu.Mutation:return t.data.adds.forEach((function(t){n.replaceIds(t,e,["parentId","nextId","previousId"]),n.replaceIdOnNode(t.node,e);var r=n.crossOriginIframeRootIdMap.get(e);r&&n.patchRootIdOnNode(t.node,r)})),t.data.removes.forEach((function(t){n.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((function(t){n.replaceIds(t,e,["id"])})),t.data.texts.forEach((function(t){n.replaceIds(t,e,["id"])})),t;case pu.Drag:case pu.TouchMove:case pu.MouseMove:return t.data.positions.forEach((function(t){n.replaceIds(t,e,["id"])})),t;case pu.MediaInteraction:case pu.MouseInteraction:case pu.Scroll:case pu.CanvasMutation:case pu.Input:return this.replaceIds(t.data,e,["id"]),t;case pu.StyleSheetRule:case pu.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case pu.Font:return t;case pu.Selection:return t.data.ranges.forEach((function(t){n.replaceIds(t,e,["start","end"])})),t;case pu.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(r=t.data.styles)||r.forEach((function(t){n.replaceStyleIds(t,e,["styleId"])})),t}}return!1}},{key:"replace",value:function(e,t,n,r){var i;r=l(r);try{for(r.s();!(i=r.n()).done;){var o=i.value;(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]))}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"replaceIds",value:function(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}},{key:"replaceStyleIds",value:function(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}},{key:"replaceIdOnNode",value:function(e,t){var n=this;this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((function(e){n.replaceIdOnNode(e,t)}))}},{key:"patchRootIdOnNode",value:function(e,t){var n=this;e.type===wu.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((function(e){n.patchRootIdOnNode(e,t)}))}}]),xu=s((function e(t){i(this,e),Ia(this,"shadowDoms",new WeakSet),Ia(this,"mutationCb"),Ia(this,"scrollCb"),Ia(this,"bypassOptions"),Ia(this,"mirror"),Ia(this,"restoreHandlers",[]),this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}),[{key:"init",value:function(){this.reset(),this.patchAttachShadow(Element,document)}},{key:"addShadowRoot",value:function(e,t){var n=this;if(ve(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var r=It(v(v({},this.bypassOptions),{},{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push((function(){return r.disconnect()})),this.restoreHandlers.push(Rt(v(v({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout((function(){e.adoptedStyleSheets&&0<e.adoptedStyleSheets.length&&n.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,n.mirror.getId(lu.host(e))),n.restoreHandlers.push(Pt({mirror:n.mirror,stylesheetManager:n.bypassOptions.stylesheetManager},e))}),0)}}},{key:"observeAttachShadow",value:function(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}},{key:"patchAttachShadow",value:function(e,t){var n=this;this.restoreHandlers.push(ct(e.prototype,"attachShadow",(function(e){return function(r){r=e.call(this,r);var i=lu.shadowRoot(this);return i&&kt(this)&&n.addShadowRoot(i,t),r}})))}},{key:"reset",value:function(){this.restoreHandlers.forEach((function(e){try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}]),Ru="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ou=0;64>Ou;Ou++)Ru["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Ou)]=Ou;var Mu,Nu,Lu,Du=function(e){var t,n=(e=new Uint8Array(e)).length,r="";for(t=0;t<n;t+=3)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e[t]>>2],r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&e[t])<<4|e[t+1]>>4],r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&e[t+1])<<2|e[t+2]>>6],r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&e[t+2]];return 2==n%3?r=r.substring(0,r.length-1)+"=":1==n%3&&(r=r.substring(0,r.length-2)+"=="),r},Pu=new Map,Uu=function(e,t,n){if(e&&(zu(e,t)||"object"===C(e))){t=e.constructor.name;var r=Pu.get(n);return r||(r=new Map,Pu.set(n,r)),r.has(t)||r.set(t,[]),-1===(t=(n=r.get(t)).indexOf(e))&&(t=n.length,n.push(e)),t}},Fu=function(e,t,n){return e.map((function(e){return qt(e,t,n)}))},zu=function(e,t){return!!"WebGLActiveInfo WebGLBuffer WebGLFramebuffer WebGLProgram WebGLRenderbuffer WebGLShader WebGLShaderPrecisionFormat WebGLTexture WebGLUniformLocation WebGLVertexArrayObject WebGLVertexArrayObjectOES".split(" ").filter((function(e){return"function"==typeof t[e]})).find((function(n){return e instanceof t[n]}))},Bu="undefined"!=typeof window&&window.Blob&&new Blob([function(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}("KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=")],{type:"text/javascript;charset=utf-8"}),ju=s((function e(t){var n=this;i(this,e),Ia(this,"pendingCanvasMutations",new Map),Ia(this,"rafStamps",{latestId:0,invokeId:null}),Ia(this,"mirror"),Ia(this,"mutationCb"),Ia(this,"resetObservers"),Ia(this,"frozen",!1),Ia(this,"locked",!1),Ia(this,"processMutation",(function(e,t){(n.rafStamps.invokeId&&n.rafStamps.latestId!==n.rafStamps.invokeId||!n.rafStamps.invokeId)&&(n.rafStamps.invokeId=n.rafStamps.latestId),n.pendingCanvasMutations.has(e)||n.pendingCanvasMutations.set(e,[]),n.pendingCanvasMutations.get(e).push(t)}));var r=t.sampling;r=void 0===r?"all":r;var o=t.win,a=t.blockClass,s=t.blockSelector,l=t.recordCanvas,c=t.dataURLOptions;this.mutationCb=t.mutationCb,this.mirror=t.mirror,l&&"all"===r&&this.initCanvasMutationObserver(o,a,s),l&&"number"==typeof r&&this.initCanvasFPSObserver(r,o,a,s,{dataURLOptions:c})}),[{key:"reset",value:function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}},{key:"freeze",value:function(){this.frozen=!0}},{key:"unfreeze",value:function(){this.frozen=!1}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"initCanvasFPSObserver",value:function(e,t,r,i,o){var a=this,s=Wt(t,r,i,!0),l=new Map,c=new Kt;c.onmessage=function(e){var t=e.data.id;l.set(t,!1),"base64"in e.data&&(e=e.data,a.mutationCb({id:t,type:mu["2D"],commands:[{property:"clearRect",args:[0,0,e.width,e.height]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:e.base64}],type:e.type}]},0,0]}]}))};var u=1e3/e,d=0,f=function(e){var s;d&&e-d<u||(d=e,function(){var e=[];return t.document.querySelectorAll("canvas").forEach((function(t){pt(t,r,i,!0)||e.push(t)})),e}().forEach((s=n(m().mark((function e(t){var n,r,i,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.mirror.getId(t),!l.get(r)){e.next=3;break}return e.abrupt("return");case 3:if(0!==t.width&&0!==t.height){e.next=5;break}return e.abrupt("return");case 5:return l.set(r,!0),["webgl","webgl2"].includes(t.__context)&&(i=t.getContext(t.__context),!1===(null==(n=null==i?void 0:i.getContextAttributes())?void 0:n.preserveDrawingBuffer)&&i.clear(i.COLOR_BUFFER_BIT)),e.next=9,createImageBitmap(t);case 9:s=e.sent,c.postMessage({id:r,bitmap:s,width:t.width,height:t.height,dataURLOptions:o.dataURLOptions},[s]);case 11:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)}))),h=requestAnimationFrame(f)},h=requestAnimationFrame(f);this.resetObservers=function(){s(),cancelAnimationFrame(h)}}},{key:"initCanvasMutationObserver",value:function(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var r=Wt(e,t,n,!1),i=function(e,t,n,r){var i,o=[],a=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);a=l(a);try{var s=function(){var a=i.value;try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])return 1;var s=ct(t.CanvasRenderingContext2D.prototype,a,(function(i){return function(){for(var o=this,s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return pt(this.canvas,n,r,!0)||setTimeout((function(){var n=Fu(l,t,o);e(o.canvas,{type:mu["2D"],property:a,args:n})}),0),i.apply(this,l)}}));o.push(s)}catch(n){s=lt(t.CanvasRenderingContext2D.prototype,a,{set:function(t){e(this.canvas,{type:mu["2D"],property:a,args:[t],setter:!0})}}),o.push(s)}};for(a.s();!(i=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}return function(){o.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,n),o=function(e,t,n,r){var i=[];return i.push.apply(i,k(Yt(t.WebGLRenderingContext.prototype,mu.WebGL,e,n,r,t))),void 0!==t.WebGL2RenderingContext&&i.push.apply(i,k(Yt(t.WebGL2RenderingContext.prototype,mu.WebGL2,e,n,r,t))),function(){i.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,n);this.resetObservers=function(){r(),i(),o()}}},{key:"startPendingCanvasMutationFlusher",value:function(){var e=this;requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))}},{key:"startRAFTimestamping",value:function(){var e=this,t=function(n){e.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)}},{key:"flushPendingCanvasMutations",value:function(){var e=this;this.pendingCanvasMutations.forEach((function(t,n){t=e.mirror.getId(n),e.flushPendingCanvasMutationFor(n,t)})),requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))}},{key:"flushPendingCanvasMutationFor",value:function(e,t){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(e);if(n&&-1!==t){var r=n.map((function(e){return e.type,g(e,Ea)}));this.mutationCb({id:t,type:n[0].type,commands:r}),this.pendingCanvasMutations.delete(e)}}}}]),Gu=s((function e(t){i(this,e),Ia(this,"trackedLinkElements",new WeakSet),Ia(this,"mutationCb"),Ia(this,"adoptedStyleSheetCb"),Ia(this,"styleMirror",new fu),this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}),[{key:"attachLinkElement",value:function(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}},{key:"trackLinkElement",value:function(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}},{key:"adoptStyleSheets",value:function(e,t){var n=this;if(0!==e.length){var r,i={id:t,styleIds:[]},o=[];e=l(e);try{for(t=function(){var e=r.value;if(n.styleMirror.has(e))var t=n.styleMirror.getId(e);else t=n.styleMirror.add(e),o.push({styleId:t,rules:Array.from(e.rules||CSSRule,(function(t,n){return{rule:me(t,e.href),index:n}}))});i.styleIds.push(t)},e.s();!(r=e.n()).done;)t()}catch(t){e.e(t)}finally{e.f()}0<o.length&&(i.styles=o),this.adoptedStyleSheetCb(i)}}},{key:"reset",value:function(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}},{key:"trackStylesheetInLinkElement",value:function(e){}}]),Hu=s((function e(){i(this,e),Ia(this,"nodeMap",new WeakMap),Ia(this,"active",!1)}),[{key:"inOtherBuffer",value:function(e,t){return(e=this.nodeMap.get(e))&&Array.from(e).some((function(e){return e!==t}))}},{key:"add",value:function(e,t){var n=this;this.active||(this.active=!0,requestAnimationFrame((function(){n.nodeMap=new WeakMap,n.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}},{key:"destroy",value:function(){}}]),Vu=!1;try{if(2!==Array.from([1],(function(e){return 2*e}))[0]){var Zu=document.createElement("iframe");document.body.appendChild(Zu),Array.from=(null==(ma=Zu.contentWindow)?void 0:ma.Array.from)||Array.from,document.body.removeChild(Zu)}}catch(Vr){console.debug("Unable to override Array.from",Vr)}var qu,Wu,Yu=new Ua;Jt.addCustomEvent=function(e,t){if(!Vu)throw Error("please add custom event after start recording");Mu({type:hu.Custom,data:{tag:e,payload:t}})},Jt.freezePage=function(){Su.forEach((function(e){return e.freeze()}))},Jt.takeFullSnapshot=function(e){if(!Vu)throw Error("please take full snapshot after start recording");Nu(e)},Jt.mirror=Yu,function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(qu||(qu={})),function(e){e.BRAND="DeviceBrand",e.MANUFACTURER="DeviceManufacturer",e.MODEL="DeviceModel",e.TYPE="DeviceType",e.VERSION="DeviceVersion",e.OS_NAME="OperatingSystemName",e.OS_VERSION="OperatingSystemVersion",e.CATEGORY="DeviceCategory",e.FRAMEWORK_NAME="FrameworkName",e.FRAMEWORK_VERSION="FrameworkVersion"}(Wu||(Wu={}));var Ku,Ju,Xu={DeviceType:{CONSOLE:"Console",DESKTOP:"DESKTOP",MOBILE:"Mobile",SETTOP:"Settop",SMARTTV:"SmartTV",TABLET:"Tablet",VEHICLE:"Vehicle",OTHER:"Other"},DeviceCategory:{ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",KAIOS_DEVICE:"KAIOS",LG_TV:"LGTV",LINUX:"LNX",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",VIDAA_DEVICE:"VIDAA",VIZIO_TV:"VIZIOTV",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB"}};!function(e){var t,n,r,i;e.TRACEPARENT_HEADER_KEY="traceparent",e.BAGGAGE_HEADER_KEY="baggage",(r=n=e.SAMPLING_MODES||(e.SAMPLING_MODES={})).NONE="NONE",r.RCFG="RCFG",function(e){e.DERIVED="DERIVED",e.DEFAULT="DEFAULT"}(e.SAMPLING_STATUS||(e.SAMPLING_STATUS={})),function(e){e.SAMPLED="sl",e.NON_SAMPLED="nsl"}(i=e.SAMPLING_ACTION||(e.SAMPLING_ACTION={})),e.DEFAULT_SAMPLING_ACTION=((t={})[i.SAMPLED]=n.RCFG,t[i.NON_SAMPLED]=n.NONE,t),function(e){e.DEFAULT="def",e.CACHED="cac",e.REMOTE="rem"}(e.CONFIG_SOURCE||(e.CONFIG_SOURCE={})),function(e){e[e.APP=0]="APP",e[e.REMOTE=1]="REMOTE",e[e.MERGE=2]="MERGE"}(e.CONFIG_PREFERENCES||(e.CONFIG_PREFERENCES={})),function(e){e[e.DISABLED=0]="DISABLED",e[e.PERFORMANCE_TIMING=1]="PERFORMANCE_TIMING",e[e.PERFORMANCE_NAVIGATION_TIMING=2]="PERFORMANCE_NAVIGATION_TIMING"}(e.PERFORMANCE_CONTEXT||(e.PERFORMANCE_CONTEXT={})),function(e){e.DO_NOT_FETCH_UPDATE_TIMER="updateTimer",e.IMMEDIATE_FETCH="urgentFetch",e.UPDATE_TIMER_WITH_DIFF="checkDiff"}(e.RC_FETCH_MODE||(e.RC_FETCH_MODE={})),function(e){e.AUTO="auto",e.MANUAL="manual",e.BOTH="both"}(e.NETWORK_REQUEST_EVENT_COLLECTION_MODE||(e.NETWORK_REQUEST_EVENT_COLLECTION_MODE={})),e.REMOTE_CONFIG_STORAGE_KEY="ConvivaRemoteConfig",e.END_POINT_STORAGE_KEY="ConvivaEndpoint",e.DEFAULT_END_POINT="https://appgw.conviva.com",e.REMOTE_CONFIG_URL_PREFIX="https://rc.conviva.com/js/",e.REMOTE_CONFIG_FILE_NAME="/remote_config.json",e.SAMPLING_STORAGE_RANDOM_NUMBER_KEY="ConvivaSamplingRandomNumber",e.VISUAL_LABELLING_CONFIG="ConvivaVisualLabellingConfig",e.SESSION_RECORDING_STARTED="ConvivaSessionRecordingStarted",e.DIAGNOSTIC_INFO_MAX_LENGTH={MAX_MESSAGE_LENGTH:1024,MAX_STACK_LENGTH:2048,MAX_CLASSNAME_LENGTH:1024,MAX_EXCEPTION_NAME_LENGTH:1024},e.CLICK_KEY_MAX_LENGTH=1024,e.CLICK_DEBOUNCING_DELAY=300,e.CLICK_MAX_DEPTH=16,e.MAX_NATIVE_SCAN=16,e.MAX_NATIVE_SCAN_LEGACY=8,e.PAGE_URL_QUERY_PARAMS="pgq",e.V2A_CUSTOM_EVENTS=["c3.video.custom_event","c3.sdk.custom_event","c3.ad.custom_event"]}(Ku||(Ku={})),"function"==typeof AbortController&&(Ju=new AbortController);var Qu,$u=null==Ju?void 0:Ju.signal;!function(e){e.response_body="rsb",e.request_body="rqb",e.response_headers="rsh",e.request_headers="rqh",e.request_query="rqq"}(Qu||(Qu={}));var ed,td=10240,nd=function(e){try{var t=void 0;return null!=e&&(t=e["content-type"]||e["Content-Type"]||e["Content-type"]),t}catch(e){}},rd={};!function(e){e.APPLICATION_BACKGROUND="abg",e.APPLICATION_ERROR="ae",e.WEBVITALS_LCP="conviva_webvitals_lcp",e.WEBVITALS_CLS="conviva_webvitals_cls",e.WEBVITALS_INP="conviva_webvitals_inp"}(ed||(ed={}));var id,od={cacheRefreshInterval:30,base64:!1,lifecycleAutotracking:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{enabled:!0},softNavigationTrackingConfiguration:{enabled:!1,idleWindowMs:600,maxMeasurementMs:1e4,includeHashChanges:!1,domainAllowlist:[],domainBlocklist:["sdk.fra-01.braze.eu","tr.snapchat.com","analytics.google.com","ams.creativecdn.com","analytics.tiktok.com"]},networkRequestTrackingConfiguration:{eventCollectionMode:Ku.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH,blocklist:["*"]},traceparentconfig:{enabled:!1,pref:Ku.CONFIG_PREFERENCES.MERGE,targetUrl:[]},baggageConfiguration:{enabled:!1,targetUrl:[],attributeExtraction:[]},performanceContextConfig:1,configurationVersion:-1,catRcLastUpdatedTs:0,endpoint:Ku.DEFAULT_END_POINT,applicationContext:!0,maxLocalStorageQueueSize:10,emitterConfiguration:{batching:{enabled:!0,byteLimitPostInKB:250,batchingIntervalInSec:5,urgentEvents:[ed.APPLICATION_BACKGROUND,ed.APPLICATION_ERROR,ed.WEBVITALS_LCP,ed.WEBVITALS_CLS,ed.WEBVITALS_INP]}},enc:"gzip",mend:!0,di:{en:!1,lim:30},clickcc:{en:!0,cssSelectorList:'\n  [role="button"],\n  [data-role="button"],\n  li,\n  [class^="btn"],\n  [class*="click"],\n  [data-click],\n  [data-action],\n  [tabindex]:not([tabindex="-1"]),\n  [onclick],\n  [role="datepicker"],\n  [class*="datepicker"],\n  [class*="date-picker"],\n  [class*="mat-datepicker"],\n  [class*="ant-picker"],\n  [class*="v-date-picker"],\n  [class*="react-datepicker"],\n  [class*="ngx-datepicker"],\n  [data-ng-click],\n  [ng-click],\n  [v-on\\:click],\n  [\\@click],\n  [data-test-id*="click"],\n  [data-testid*="button"],\n  [class*="-btn"],\n  [class*="-button"],\n  [class*="mat-button"],\n  [class*="v-btn"],\n  [class*="v-icon-button"],\n  [data-listener-count-click],\n  [class*="Button"]\n',uiMode:"closest"},collectionRateLimit:{exceptionAutotracking:{maxEvents:20,timeWindow:1e3,disconnectDuration:2e3}},evtStreamTrackingConfiguration:{enabled:!1,collect:[],block:[],conditionalCollectAttr:[],richContentInference:{cond:[]}},valueProbes:{enabled:!1,probes:[]},webVitals:{enabled:!1,collectattr:[]}},ad="cws.conviva.com rcg.conviva.com /wsg /ctp remote_config pings.conviva.com .m3u8 .mpd .ism .m4 .mp4 .ts .png .jpg .jpeg .bmp google-analytics.com googlesyndication.com googleapis stats.g.doubleclick chartbeat.com omtrdc.net app-measurement.com firebase nr-data.net newrelic bitmovin.com/impression bitmovin.com/analytics api.segment.io youbora hotjar mixpanel.com clevertap auryc .aac .vtt .googlevideo webp appsflyer facebook dynatrace mparticle npaw .pdf bookkeeper kochava mp3 marketingcloudapis demdex scorecardresearch lura.live perimeterx.net permutive.app segment.com vaicore.site boomtrain ketchcdn qualtrics .svg amplitude datadoghq branch.io hotjar splunkcloud".split(" ");!function(e){e.NONE="none",e.GZIP="gzip"}(id||(id={}));var sd,ld,cd=function(e){var t={};return e.trim().split(/[\r\n]+/).forEach((function(e){var n=(e=e.split(":"))[1];t[e[0].trim()]=null==n?void 0:n.trim()})),t},ud=function(e){var t={};return e.forEach((function(e,n){t[n]=e})),t},dd="/ctp /wsg remote_config rc.conviva.com pings.conviva.com rcg.conviva.com".split(" ");!function(e){e[e.NETWORK_REQUEST=0]="NETWORK_REQUEST",e[e.CUSTOM_EVENT=1]="CUSTOM_EVENT",e[e.SSE_EVENT=2]="SSE_EVENT"}(ld||(ld={}));var fd,hd,pd,vd,gd,md=0,yd=0,wd=Ku.CONFIG_SOURCE.DEFAULT,bd=0,kd=!1,_d=null,Cd=null,Sd=0,Ed='\n  button,\n  a,\n  select,\n  textarea,\n  input:not([type="hidden"]),\n  summary,\n  video,\n  audio\n'.replace(/\s+/g,"")||"",Ad='\n[class*="card"]\n'.replace(/\s+/g,"")||"",Id="undefined"!=typeof window&&null!==window&&void 0!==window&&window.localStorage?localStorage.getItem(Ku.REMOTE_CONFIG_STORAGE_KEY):null,Td=Id?null===(hd=null===(fd=JSON.parse(Id).clickcc)||void 0===fd?void 0:fd.cssSelectorList)||void 0===hd?void 0:hd.replace(/\s+/g,""):null===(pd=od.clickcc)||void 0===pd?void 0:pd.cssSelectorList;!function(e){e.BOTH="both",e.CLOSEST="closest",e.RAW="raw"}(gd||(gd={})),"undefined"!=typeof Element&&Element.prototype&&!Element.prototype.closest&&(Element.prototype.closest=function(e){try{for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}}catch(e){Yr.warn("Conviva App Tracker caused Exception in closest polyfill method of user click tracking module",e)}return null});var xd,Rd,Od,Md,Nd,Ld,Dd,Pd,Ud,Fd=function(e){this.cacheRefreshInterval=e.cacheRefreshInterval,this.base64=e.base64,this.corePlugins=e.corePlugins,this.callback=e.callback,this.lifecycleAutotracking=e.lifecycleAutotracking,this.exceptionAutotracking=e.exceptionAutotracking,this.enablePeriodicHeartbeat=e.enablePeriodicHeartbeat,this.periodicHeartbeatInterval=e.periodicHeartbeatInterval,this.enc=e.enc,this.maxLocalStorageQueueSize=e.maxLocalStorageQueueSize,this.maxPostBytes=e.maxPostBytes,this.maxGetBytes=e.maxGetBytes,this.bufferSize=e.bufferSize,this.customEventTrackingConfiguration=e.customEventTrackingConfiguration,this.softNavigationTrackingConfiguration=e.softNavigationTrackingConfiguration,this.networkRequestTrackingConfiguration=e.networkRequestTrackingConfiguration,this.traceparentconfig=e.traceparentconfig,this.baggageConfiguration=e.baggageConfiguration,this.metaTagsTrackingConfiguration=e.metaTagsTrackingConfiguration,this.performanceContextConfig=e.performanceContextConfig,this.mend=e.mend,this.configurationVersion=e.configurationVersion,this.catRcLastUpdatedTs=e.catRcLastUpdatedTs,this.endpoint=e.endpoint,this.emitterConfiguration=e.emitterConfiguration,this.controlIngestConfig=e.controlIngestConfig,this.applicationContext=e.applicationContext,this.di=e.di,this.clickcc=e.clickcc,this.collectionRateLimit=e.collectionRateLimit,this.pageUrlTrackingConfig=e.pageUrlTrackingConfig,this.sessionReplayConfiguration=e.sessionReplayConfiguration,this.evtStreamTrackingConfiguration=e.evtStreamTrackingConfiguration,this.valueProbes=e.valueProbes,this.webVitals=e.webVitals},zd=function(){function e(){this.cacheRefreshInterval=od.cacheRefreshInterval,this.base64=od.base64,this.lifecycleAutotracking=od.lifecycleAutotracking,this.exceptionAutotracking=od.exceptionAutotracking,this.enablePeriodicHeartbeat=od.enablePeriodicHeartbeat,this.periodicHeartbeatInterval=od.periodicHeartbeatInterval,this.customEventTrackingConfiguration=Tr({},od.customEventTrackingConfiguration),this.softNavigationTrackingConfiguration=Tr({},od.softNavigationTrackingConfiguration),this.networkRequestTrackingConfiguration=Tr({},od.networkRequestTrackingConfiguration),this.traceparentconfig=Tr({},od.traceparentconfig),this.baggageConfiguration=Tr({},od.baggageConfiguration),this.performanceContextConfig=od.performanceContextConfig,this.configurationVersion=od.configurationVersion,this.catRcLastUpdatedTs=od.catRcLastUpdatedTs,this.endpoint=od.endpoint,this.emitterConfiguration=od.emitterConfiguration,this.applicationContext=od.applicationContext,this.enc=od.enc,this.mend=od.mend,this.di=Tr({},od.di),this.clickcc=Tr({},od.clickcc),this.collectionRateLimit=Tr({},od.collectionRateLimit),this.evtStreamTrackingConfiguration=Tr({},od.evtStreamTrackingConfiguration),this.valueProbes=Tr({},od.valueProbes),this.webVitals=Tr({},od.webVitals)}return e.prototype.setCacheRefreshInterval=function(e){return this.cacheRefreshInterval="number"==typeof e&&1<=e&&Qt(e)?e:od.cacheRefreshInterval,this},e.prototype.setBase64=function(e){return"boolean"==typeof e&&(this.base64=e),this},e.prototype.setCorePlugins=function(e){return e&&(this.corePlugins=e),this},e.prototype.setCallback=function(e){return e&&(this.callback=e),this},e.prototype.setLifecycleAutotracking=function(e){return"boolean"==typeof e&&(this.lifecycleAutotracking=e),this},e.prototype.setExceptionAutotracking=function(e){return"boolean"==typeof e&&(this.exceptionAutotracking=e),this},e.prototype.setEnablePeriodicHeartbeat=function(e){return"boolean"==typeof e&&(this.enablePeriodicHeartbeat=e),this},e.prototype.setPeriodicHeartbeatInterval=function(e){return"number"==typeof e&&1<=e&&(this.periodicHeartbeatInterval=~~e),this},e.prototype.setEnc=function(e,t){return"string"==typeof e&&Object.values(id).includes(e)?this.enc=e:t&&"string"==typeof t&&Object.values(id).includes(t)?this.enc=t:this.enc=od.enc,this},e.prototype.setMaxLocalStorageQueueSize=function(e){return"number"==typeof e&&(this.maxLocalStorageQueueSize=e),this},e.prototype.setMaxGetBytes=function(e){return"number"==typeof e&&(this.maxGetBytes=e),this},e.prototype.setBufferSize=function(e){return"number"==typeof e&&(this.bufferSize=e),this},e.prototype.setCustomEventTrackingConfiguration=function(e){return e&&(this.customEventTrackingConfiguration=e),this},e.prototype.setSoftNavigationTrackingConfiguration=function(e){return e&&(this.softNavigationTrackingConfiguration=e),this},e.prototype.setEmitterConfiguration=function(e){return void 0!==e&&(void 0!==e.batching.enabled&&(this.emitterConfiguration.batching.enabled=e.batching.enabled),void 0!==e.batching.batchingIntervalInSec&&0<e.batching.batchingIntervalInSec&&(this.emitterConfiguration.batching.batchingIntervalInSec=e.batching.batchingIntervalInSec),"undefined"!=e.batching.byteLimitPostInKB&&0<e.batching.byteLimitPostInKB&&(this.emitterConfiguration.batching.byteLimitPostInKB=e.batching.byteLimitPostInKB),void 0!==e.batching.urgentEvents&&(this.emitterConfiguration.batching.urgentEvents=e.batching.urgentEvents)),this},e.prototype.setNetworkRequestTrackingConfiguration=function(e,t,n){return e&&(this.networkRequestTrackingConfiguration=e,this.networkRequestTrackingConfiguration.eventCollectionMode||(this.networkRequestTrackingConfiguration.eventCollectionMode=od.networkRequestTrackingConfiguration.eventCollectionMode),t&&(this.networkRequestTrackingConfiguration.blocklist||(this.networkRequestTrackingConfiguration.blocklist=[]),n&&this.networkRequestTrackingConfiguration.blocklist.push(n),this.networkRequestTrackingConfiguration.blocklist=this.networkRequestTrackingConfiguration.blocklist.concat(ad))),this},e.prototype.setTraceparentconfig=function(e){return e&&(this.traceparentconfig=e),this},e.prototype.setBaggageConfiguration=function(e){return null!=e&&("boolean"==typeof e.enabled&&(this.baggageConfiguration.enabled=e.enabled),void 0!==e.targetUrl&&(this.baggageConfiguration.targetUrl=e.targetUrl),void 0!==e.attributeExtraction&&(this.baggageConfiguration.attributeExtraction=e.attributeExtraction)),this},e.prototype.setMetaTagsTrackingConfiguration=function(e){return e&&(this.metaTagsTrackingConfiguration=e),this},e.prototype.setPerformanceContextConfig=function(e){return"number"==typeof e&&(this.performanceContextConfig=e),this},e.prototype.setMend=function(e,t){return"boolean"==typeof e?this.mend=e:"boolean"==typeof t&&(this.mend=t),this},e.prototype.setConfigurationVersion=function(e){return"number"==typeof e&&(this.configurationVersion=e),this},e.prototype.setCatRcLastUpdatedTs=function(e){return"number"==typeof e&&(this.catRcLastUpdatedTs=e),this},e.prototype.setEndPoint=function(e,t,n){return"string"==typeof n&&0<n.trim().length?this.endpoint=n:"string"==typeof e&&0<e.trim().length?this.endpoint=e:t&&"string"==typeof t&&0<t.trim().length?this.endpoint=t:this.endpoint=od.endpoint,this},e.prototype.setcontrolIngestConfig=function(e){return void 0!==e?this.controlIngestConfig=e:dn(),this},e.prototype.setApplicationContext=function(e){return void 0!==e&&(this.applicationContext=e),this},e.prototype.setDi=function(e){return void 0!==e&&(this.di=Tr(Tr({},this.di),e)),this},e.prototype.setClickcc=function(e){var t,n;return void 0!==e&&("boolean"==typeof e.en&&(this.clickcc.en=e.en),e.cssSelectorList&&0<e.cssSelectorList.trim().length&&(this.clickcc.cssSelectorList=e.cssSelectorList),"string"==typeof e.uiMode&&Object.values(gd).includes(e.uiMode)&&(this.clickcc.uiMode=e.uiMode),void 0!==e.block&&(this.clickcc.block=e.block),void 0!==e.collect&&(this.clickcc.collect=e.collect),void 0!==e.collectattr&&(this.clickcc.collectattr=e.collectattr)),"boolean"==typeof(null===(t=null==this?void 0:this.clickcc)||void 0===t?void 0:t.en)&&!0===(null===(n=null==this?void 0:this.clickcc)||void 0===n?void 0:n.en)?Fn():zn(),this},e.prototype.setCollectionRateLimit=function(e){return null!=e&&(this.collectionRateLimit=Tr(Tr({},this.collectionRateLimit),e)),this},e.prototype.setPageUrlTrackingConfig=function(e){return this.pageUrlTrackingConfig=void 0!==e?e:null,this},e.prototype.setSessionReplayConfiguration=function(e){return this.sessionReplayConfiguration=void 0!==e?e:null,this},e.prototype.setValueProbes=function(e){var t,n;return this.valueProbes=void 0!==e?Tr(Tr({},e),{enabled:null!==(t=null==e?void 0:e.enabled)&&void 0!==t&&t,probes:null!==(n=null==e?void 0:e.probes)&&void 0!==n?n:[]}):Tr({},od.valueProbes),this},e.prototype.setWebVitals=function(e){var t,n;return this.webVitals=void 0!==e?Tr(Tr({},e),{enabled:null!==(t=null==e?void 0:e.enabled)&&void 0!==t&&t,collectattr:null!==(n=null==e?void 0:e.collectattr)&&void 0!==n?n:[]}):Tr({},od.webVitals),this},e.prototype.setEvtStreamTrackingConfiguration=function(e){return void 0!==e&&("boolean"==typeof e.enabled&&(this.evtStreamTrackingConfiguration.enabled=e.enabled),void 0!==e.block&&(this.evtStreamTrackingConfiguration.block=e.block),void 0!==e.collect&&(this.evtStreamTrackingConfiguration.collect=e.collect),void 0!==e.conditionalCollectAttr&&(this.evtStreamTrackingConfiguration.conditionalCollectAttr=e.conditionalCollectAttr),void 0!==e.richContentInference&&(this.evtStreamTrackingConfiguration.richContentInference=e.richContentInference),void 0!==e.bufferMaxBytes&&(this.evtStreamTrackingConfiguration.bufferMaxBytes=e.bufferMaxBytes)),this},e.prototype.build=function(){return new Fd(this)},e}(),Bd=!1,jd=null,Gd=0,Hd=!1,Vd=function(e,t,n){var r,i,o,a,s,l={},c={};if("undefined"!=typeof window&&null!==window&&void 0!==window&&window.localStorage)try{localStorage.removeItem(Ku.END_POINT_STORAGE_KEY),(s=localStorage.getItem(Ku.REMOTE_CONFIG_STORAGE_KEY))?wd=Ku.CONFIG_SOURCE.CACHED:s=JSON.stringify(c)}catch(e){s=JSON.stringify(c),Hd=!0;var u={className:"fetchRemoteConfig - localstorage",error:e,configAppliedSrc:wd,configAppliedTime:bd};setTimeout((function(){Nn(sd,null==Rd?void 0:Rd.getSamplingMode,u)}),0),Yr.warn("Issue while fetching data from local storage")}else s=JSON.stringify(c);try{l=JSON.parse(s)}catch(e){Hd=!0;var d={className:"fetchRemoteConfig - parsing cached data",error:e,configAppliedSrc:wd,configAppliedTime:bd};setTimeout((function(){Nn(sd,null==Rd?void 0:Rd.getSamplingMode,d)}),0),Yr.warn("Issue while parsing storedConvivaRemoteConfig")}c=(new zd).setBase64(null==l?void 0:l.base64).setCacheRefreshInterval(null==l?void 0:l.cacheRefreshInterval).setLifecycleAutotracking(null==l?void 0:l.lifecycleAutotracking).setExceptionAutotracking(null==l?void 0:l.exceptionAutotracking).setEnablePeriodicHeartbeat(null==l?void 0:l.enablePeriodicHeartbeat).setPeriodicHeartbeatInterval(null==l?void 0:l.periodicHeartbeatInterval).setEnc(null==l?void 0:l.enc,null===(i=null===(r=null==n?void 0:n.configs)||void 0===r?void 0:r.network)||void 0===i?void 0:i.encoding).setMaxLocalStorageQueueSize(null==l?void 0:l.maxLocalStorageQueueSize).setMaxGetBytes(null==l?void 0:l.maxGetBytes).setBufferSize(null==l?void 0:l.bufferSize).setCustomEventTrackingConfiguration(null==l?void 0:l.customEventTrackingConfiguration).setSoftNavigationTrackingConfiguration(null==l?void 0:l.softNavigationTrackingConfiguration).setEndPoint(null==l?void 0:l.endpoint,n.gatewayUrl,n.proxyGatewayUrl).setNetworkRequestTrackingConfiguration(null==l?void 0:l.networkRequestTrackingConfiguration,!1).setMetaTagsTrackingConfiguration(null==l?void 0:l.metaTagsTrackingConfiguration).setTraceparentconfig(null==l?void 0:l.traceparentconfig).setBaggageConfiguration(null==l?void 0:l.baggageConfiguration).setMend(null==l?void 0:l.mend,null===(a=null===(o=null==n?void 0:n.configs)||void 0===o?void 0:o.network)||void 0===a?void 0:a.mergeEndpoint).setPerformanceContextConfig(null==l?void 0:l.performanceContextConfig).setConfigurationVersion(null==l?void 0:l.configurationVersion).setCatRcLastUpdatedTs(null==l?void 0:l.catRcLastUpdatedTs).setEmitterConfiguration(null==l?void 0:l.emitterConfiguration).setcontrolIngestConfig(null==l?void 0:l.controlIngestConfig).setApplicationContext(null==l?void 0:l.applicationContext).setDi(null==l?void 0:l.di).setClickcc(null==l?void 0:l.clickcc).setCollectionRateLimit(null==l?void 0:l.collectionRateLimit).setPageUrlTrackingConfig(null==l?void 0:l.pageUrlTrackingConfig).setSessionReplayConfiguration(null==l?void 0:l.sessionReplayConfiguration).setEvtStreamTrackingConfiguration(null==l?void 0:l.evtStreamTrackingConfiguration).setValueProbes(null==l?void 0:l.valueProbes).setWebVitals(null==l?void 0:l.webVitals).build(),r="Cached Config Applied",wd===Ku.CONFIG_SOURCE.DEFAULT&&(r="Default Config Applied"),bd=(new Date).getTime();var f={message:r,className:"browserTrackerCore",configAppliedSrc:wd,configAppliedTime:bd};setTimeout((function(){Nn(sd,null==Rd?void 0:Rd.getSamplingMode,f)}),0),e=e.split("js-")[1].split(" ")[0];var h=(n.proxyGatewayUrl?n.proxyGatewayUrl+"/js/":Ku.REMOTE_CONFIG_URL_PREFIX)+n.convivaCustomerKey+"/"+e+Ku.REMOTE_CONFIG_FILE_NAME;return window.XMLHttpRequest&&((xd=new XMLHttpRequest).onreadystatechange=function(){var e;try{if(4==xd.readyState)if(Bd=!1,200==xd.status){var r={message:"Remote config request is successful - ".concat("number"==typeof xd.status?xd.status:""),className:"configtimerCallback - onreadystatechange",configAppliedSrc:wd,configAppliedTime:bd};Nn(sd,null==Rd?void 0:Rd.getSamplingMode,r),Gd=0;var i=JSON.parse(xd.response);if(r=sd,(null==i?void 0:i.configurationBundle[0].namespace)!==t)Nn(sd,null==Rd?void 0:Rd.getSamplingMode,{message:"Remote Config not Applied due to a missing namespace",className:"updateRemoteConfig",configAppliedSrc:wd,configAppliedTime:bd});else{if(!i.hasOwnProperty("configurationVersion")||(null===(e=r.getConfig())||void 0===e?void 0:e.configurationVersion)===(null==i?void 0:i.configurationVersion)){var o=localStorage.getItem(Ku.REMOTE_CONFIG_STORAGE_KEY);if(o)return(o=JSON.parse(o)).catRcLastUpdatedTs=(new Date).getTime(),window.localStorage&&(localStorage.removeItem(Ku.REMOTE_CONFIG_STORAGE_KEY),localStorage.setItem(Ku.REMOTE_CONFIG_STORAGE_KEY,JSON.stringify(o))),void Nn(sd,null==Rd?void 0:Rd.getSamplingMode,{message:"Remote Config not Applied as same version is fetched",className:"updateRemoteConfig",configAppliedSrc:wd,configAppliedTime:bd})}c.catRcLastUpdatedTs=(new Date).getTime();var a=i.cri||i.cacheRefreshInterval||od.cacheRefreshInterval;if(a=1>a?od.cacheRefreshInterval:Qt(a)?a:od.cacheRefreshInterval,c.cacheRefreshInterval!=a&&(c.cacheRefreshInterval=a,Zd(c.cacheRefreshInterval,c.catRcLastUpdatedTs,n,h,Ku.RC_FETCH_MODE.DO_NOT_FETCH_UPDATE_TIMER)),Wd(i,c.catRcLastUpdatedTs,n)){var s=new Event("RemoteConfigUpdateApplied");null!==window&&void 0!==window&&window.dispatchEvent&&window.dispatchEvent(s)}}}else try{2>Gd&&window.setTimeout((function(){null!=n&&n.trackerConfigUrl?qd(null==n?void 0:n.trackerConfigUrl,!0):qd(h,!0)}),5e3*(Gd+1));var l={message:"Remote config request is not successful - ".concat("number"==typeof xd.status?xd.status:""),className:"configtimerCallback - onreadystatechange",configAppliedSrc:wd,configAppliedTime:bd};Nn(sd,null==Rd?void 0:Rd.getSamplingMode,l),2<=Gd&&Nn(sd,null==Rd?void 0:Rd.getSamplingMode,{message:"Remote config is not applied since failed to download remote config after 3 tries",className:"configtimerCallback - onreadystatechange",configAppliedSrc:wd,configAppliedTime:bd})}catch(e){}}catch(e){Bd=!1,console.warn("Conviva App Tracker:: Error in fetching remote-config ".concat(e)),Nn(sd,null==Rd?void 0:Rd.getSamplingMode,{className:"configtimerCallback - onreadystatechange",error:e,configAppliedSrc:wd,configAppliedTime:bd})}},Zd(c.cacheRefreshInterval,c.catRcLastUpdatedTs,n,h,void 0!==Hd&&!0===Hd?Ku.RC_FETCH_MODE.IMMEDIATE_FETCH:Ku.RC_FETCH_MODE.UPDATE_TIMER_WITH_DIFF)),{convivaRemoteTrackerConfig:c}},Zd=function(e,t,n,r,i){var o=n.trackerConfigUrl?n.trackerConfigUrl:r;if("number"==typeof jd){window.clearInterval(jd);var a={message:"Cancelling remote config timer",className:"updateRemoteConfig",extraData:{mode:i},configAppliedSrc:wd,configAppliedTime:bd};setTimeout((function(){Nn(sd,null==Rd?void 0:Rd.getSamplingMode,a)}),0)}var s=function(){var t={message:"Starting remote config timer with delay of ".concat(60*e," seconds"),className:"updateRemoteConfig",configAppliedSrc:wd,configAppliedTime:bd};setTimeout((function(){Nn(sd,null==Rd?void 0:Rd.getSamplingMode,t)}),0),jd=window.setInterval(qd,6e4*e,o)};try{var l=t?((new Date).getTime()-t)/6e4:e;if(n=e-l,r=3*e/100,"string"==typeof i&&i===Ku.RC_FETCH_MODE.DO_NOT_FETCH_UPDATE_TIMER)s();else if("string"==typeof i&&i===Ku.RC_FETCH_MODE.UPDATE_TIMER_WITH_DIFF&&0<t&&n>r){window.setTimeout((function(){qd(o),s()}),6e4*n);var c={message:"Starting remote config timer with delay of ".concat(60*n," seconds"),className:"updateRemoteConfig",extraData:{mode:i},configAppliedSrc:wd,configAppliedTime:bd};setTimeout((function(){Nn(sd,null==Rd?void 0:Rd.getSamplingMode,c)}),0)}else qd(o),s()}catch(e){console.warn("Conviva App Tracker:: Error in setting cacheRefreshIntervalTimer",e),qd(o),s();var u={className:"cacheRefreshIntervalTimer",error:e,configAppliedSrc:wd,configAppliedTime:bd};setTimeout((function(){Nn(sd,null==Rd?void 0:Rd.getSamplingMode,u)}),0)}},qd=function(e,t){try{if("boolean"==typeof Bd&&!1===Bd){t?Gd++:Gd=0,xd.timeout=3e4,xd.open("GET",e,!0),Bd=!0;var n={message:"Remote config fetch attempt",className:"updateRemoteConfig",configAppliedSrc:wd,configAppliedTime:bd};setTimeout((function(){Nn(sd,null==Rd?void 0:Rd.getSamplingMode,n)}),0),xd.send()}}catch(e){Bd=!1,Yr.warn("Conviva App Tracker:: Error in configtimerCallback ".concat(e));var r={className:"configtimerCallback",error:e,configAppliedSrc:wd,configAppliedTime:bd};setTimeout((function(){Nn(sd,null==Rd?void 0:Rd.getSamplingMode,r)}),0)}},Wd=function(e,t,n){var r,i,o,a,s,l,c,u,d,f,h,p,v,g,m,y,w,b,k,_,C,S,E,A,I,T,x,R,O,M,N,L,D,P,U,F=sd;try{var z=(new zd).setBase64(e.configurationBundle[0].trackerConfiguration.base64Encoding).setCacheRefreshInterval(e.cri||e.cacheRefreshInterval).setLifecycleAutotracking(null===(i=null===(r=e.configurationBundle[0])||void 0===r?void 0:r.trackerConfiguration)||void 0===i?void 0:i.lifecycleAutotracking).setExceptionAutotracking(null===(a=null===(o=e.configurationBundle[0])||void 0===o?void 0:o.trackerConfiguration)||void 0===a?void 0:a.exceptionAutotracking).setEnablePeriodicHeartbeat(null===(l=null===(s=e.configurationBundle[0])||void 0===s?void 0:s.trackerConfiguration)||void 0===l?void 0:l.enablePeriodicHeartbeat).setPeriodicHeartbeatInterval(null===(u=null===(c=e.configurationBundle[0])||void 0===c?void 0:c.trackerConfiguration)||void 0===u?void 0:u.periodicHeartbeatInterval).setEnc(null===(f=null===(d=e.configurationBundle[0])||void 0===d?void 0:d.networkConfiguration)||void 0===f?void 0:f.enc,null===(p=null===(h=null==n?void 0:n.configs)||void 0===h?void 0:h.network)||void 0===p?void 0:p.encoding).setMaxLocalStorageQueueSize(null===(g=null===(v=e.configurationBundle[0])||void 0===v?void 0:v.networkConfiguration)||void 0===g?void 0:g.maxLocalStorageQueueSize).setMaxGetBytes(null===(y=null===(m=e.configurationBundle[0])||void 0===m?void 0:m.networkConfiguration)||void 0===y?void 0:y.maxGetBytes).setBufferSize(null===(b=null===(w=e.configurationBundle[0])||void 0===w?void 0:w.networkConfiguration)||void 0===b?void 0:b.bufferSize).setCustomEventTrackingConfiguration(null===(k=e.configurationBundle[0])||void 0===k?void 0:k.customEventTrackingConfiguration).setSoftNavigationTrackingConfiguration(null===(_=e.configurationBundle[0])||void 0===_?void 0:_.softNavigationTrackingConfiguration).setEndPoint(null===(S=null===(C=e.configurationBundle[0])||void 0===C?void 0:C.networkConfiguration)||void 0===S?void 0:S.endpoint,n.gatewayUrl,n.proxyGatewayUrl).setNetworkRequestTrackingConfiguration(null===(E=e.configurationBundle[0])||void 0===E?void 0:E.networkRequestTrackingConfiguration,!0,null===(I=null===(A=e.configurationBundle[0])||void 0===A?void 0:A.networkConfiguration)||void 0===I?void 0:I.endpoint).setMetaTagsTrackingConfiguration(null===(T=e.configurationBundle[0])||void 0===T?void 0:T.metaTagsTrackingConfiguration).setTraceparentconfig(null===(x=e.configurationBundle[0])||void 0===x?void 0:x.traceparentconfig).setBaggageConfiguration(null===(R=e.configurationBundle[0])||void 0===R?void 0:R.baggageConfiguration).setMend(null===(M=null===(O=e.configurationBundle[0])||void 0===O?void 0:O.networkConfiguration)||void 0===M?void 0:M.mend,null===(L=null===(N=null==n?void 0:n.configs)||void 0===N?void 0:N.network)||void 0===L?void 0:L.mergeEndpoint).setPerformanceContextConfig(null===(P=null===(D=e.configurationBundle[0])||void 0===D?void 0:D.trackerConfiguration)||void 0===P?void 0:P.perfCx).setConfigurationVersion(e.configurationVersion).setCatRcLastUpdatedTs(t).setEmitterConfiguration(e.configurationBundle[0].emitterConfiguration).setcontrolIngestConfig(e["ctrl-ingst"]).setApplicationContext(e.configurationBundle[0].trackerConfiguration.applicationContext).setDi(e.configurationBundle[0].di).setClickcc(e.configurationBundle[0].clickcc).setCollectionRateLimit(e.configurationBundle[0].collectionRateLimit).setPageUrlTrackingConfig(e.configurationBundle[0].pageUrlTrackingConfig).setSessionReplayConfiguration(e.configurationBundle[0].sessionReplayConfiguration).setEvtStreamTrackingConfiguration(e.configurationBundle[0].evtStreamTrackingConfiguration).setValueProbes(e.configurationBundle[0].valueProbes).setWebVitals(e.configurationBundle[0].webVitals).build();wd=Ku.CONFIG_SOURCE.REMOTE,bd=(new Date).getTime(),null==F||F.setConfig(z),e={message:"Remote Config Applied",className:"updateRemoteConfig - tracker",configAppliedSrc:wd,configAppliedTime:bd},Nn(sd,null==Rd?void 0:Rd.getSamplingMode,e),null==Rd||Rd.setCollectorUrl(null===(U=null==F?void 0:F.getConfig())||void 0===U?void 0:U.endpoint,n.convivaCustomerKey);try{window.localStorage&&(localStorage.removeItem(Ku.REMOTE_CONFIG_STORAGE_KEY),localStorage.setItem(Ku.REMOTE_CONFIG_STORAGE_KEY,JSON.stringify(z)))}catch(e){Nn(sd,null==Rd?void 0:Rd.getSamplingMode,{className:"updateRemoteConfig - localstorage",error:e,configAppliedSrc:wd,configAppliedTime:bd}),console.warn("Conviva: Error while saving remote-config to localstorage",e)}}catch(t){return e={className:"updateRemoteConfig - tracker",error:t,configAppliedSrc:wd,configAppliedTime:bd},Nn(sd,null==Rd?void 0:Rd.getSamplingMode,e),console.warn("Conviva: Error while updating remote-config",t),!1}return!0},Yd={idleMs:3e4,maxEvents:1e4,bufferMaxBytes:1e6},Kd=function(){function e(e,t,n){var r;this.originalFetch=null===(r=null===window||void 0===window?void 0:window.fetch)||void 0===r?void 0:r.bind(window),this.sseCountStates=new Map,this.inflightRequests=0,this.core=sd,this.trackerMethods=e,this.trackerConfiguration=t,this.getSamplingMode=n,this.handleResponse=this.handleResponse.bind(this),this.addTraceparentHeader=this.addTraceparentHeader.bind(this),this.addBaggageHeader=this.addBaggageHeader.bind(this)}return e.prototype.cleanupNetworkRequestHandler=function(){e.instance=null},e.getInstance=function(t,n,r){return e.instance||(e.instance=new e(t,n,r)),e.instance},e.prototype.initiateNetworkRequestTracking=function(){try{this.decorateXMLHttpRequest(),this.decorateFetch(),this.decorateWebSocket(),this.decorateEventSource()}catch(e){console.warn("Conviva App Tracker:: Unable to track network request ".concat(e))}},e.prototype.decorateXMLHttpRequest=function(){var e=this,t=XMLHttpRequest.prototype.open,n=XMLHttpRequest.prototype.send,r=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.open=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{this._conviva={method:n[0],url:e.normalizeUrl(n[1]),headers:{}}}catch(e){console.warn("Conviva App Tracker:: Unable to normalizeUrl while open ".concat(e))}return t.apply(this,n)},XMLHttpRequest.prototype.setRequestHeader=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{this._conviva&&(this._conviva.headers[e[0]]=e[1])}catch(e){console.warn("Conviva App Tracker:: while setRequestHeader ".concat(e))}return r.apply(this,e)},XMLHttpRequest.prototype.send=function(){for(var t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{var o=this._conviva;if(!o)return;var a=e.addTraceparentHeader(this,o.url,o.headers),s=e.addBaggageHeader(this,o.url,o.headers,o.method,r[0]),l=e.createRequestDetails(o.method,o.url,o.headers,r[0],a,s);i=$u,e.shouldTrackForSoftNavigation(l.url||"")&&e.incrementInflightRequests(),this.addEventListener("load",(function(){e.shouldTrackForSoftNavigation(l.url||"")&&e.decrementInflightRequests(),e.handleResponse(t,l,"load")}),{signal:i}),this.addEventListener("error",(function(){e.shouldTrackForSoftNavigation(l.url||"")&&e.decrementInflightRequests(),e.handleResponse(t,l,"error")}),{signal:i}),this.addEventListener("abort",(function(){e.shouldTrackForSoftNavigation(l.url||"")&&e.decrementInflightRequests(),e.handleResponse(t,l,"abort")}),{signal:i}),this.addEventListener("timeout",(function(){e.shouldTrackForSoftNavigation(l.url||"")&&e.decrementInflightRequests(),e.handleResponse(t,l,"timeout")}),{signal:i})}catch(e){console.warn("Conviva App Tracker:: Unable to track network request while send ".concat(e))}return n.apply(this,r)}},e.prototype.decorateFetch=function(){window.fetch=this.interceptFetch.bind(this)},e.prototype.interceptFetch=function(e,t){var n,r,i,o,a,s,l,c,u;return I(this,void 0,void 0,(function(){var d,f,h,p,v,g,m,y,w,b,k,_,C,S,E,A,I,x,R,O,M,N,L,D,P,U=this;return T(this,(function(T){switch(T.label){case 0:if(p=h=null,g=this,!(e instanceof Request))return[3,5];f=null==e?void 0:e.clone();try{m=!1,null===(n=null==f?void 0:f.headers)||void 0===n||n.forEach((function(e,t){Ku.TRACEPARENT_HEADER_KEY===t&&(m=!0)})),m||null!==(h=this.generateTraceparentHeader(f.url))&&""!==h&&e.headers.set(Ku.TRACEPARENT_HEADER_KEY,h),y=!1,null===(r=null==f?void 0:f.headers)||void 0===r||r.forEach((function(e,t){Ku.BAGGAGE_HEADER_KEY===t&&(y=!0)})),y||(w={},f.headers.forEach((function(e,t){w[t]=e})),b={method:f.method,url:f.url,headers:w,body:void 0},null!==(p=this.generateBaggageHeader(f.url,b))&&""!==p&&e.headers.set(Ku.BAGGAGE_HEADER_KEY,p))}catch(e){console.warn("ConvivaAppTracker: Issue while adding traceparent header",e)}d=this.originalFetch(e),T.label=1;case 1:return T.trys.push([1,3,,4]),[4,f.text()];case 2:return v=T.sent(),[3,4];case 3:return T.sent(),[3,4];case 4:return[3,6];case 5:try{t&&t.headers?(k=g.core.getConfig(),(null!==(i=null==k?void 0:k.traceparentconfig)&&void 0!==i&&i.enabled||null!==(o=null==k?void 0:k.baggageConfiguration)&&void 0!==o&&o.enabled)&&(C=(_=t.headers instanceof Headers)?new Headers(t.headers):t.headers,S=!1,_?C.forEach((function(e,t){Ku.TRACEPARENT_HEADER_KEY===t&&(S=!0)})):Object.keys(C).forEach((function(e){Ku.TRACEPARENT_HEADER_KEY===e&&(S=!0)})),S||null!==(h=this.generateTraceparentHeader(e))&&""!==h&&(_?C.set(Ku.TRACEPARENT_HEADER_KEY,h):C[Ku.TRACEPARENT_HEADER_KEY]=h),E=!1,_?C.forEach((function(e,t){Ku.BAGGAGE_HEADER_KEY===t&&(E=!0)})):Object.keys(C).forEach((function(e){Ku.BAGGAGE_HEADER_KEY===e&&(E=!0)})),E||(A={},_?C.forEach((function(e,t){A[t]=e})):A=C,b={method:(null==t?void 0:t.method)||"GET",url:e,headers:A,body:null==t?void 0:t.body},null!==(p=this.generateBaggageHeader(e,b))&&""!==p&&(_?C.set(Ku.BAGGAGE_HEADER_KEY,p):C[Ku.BAGGAGE_HEADER_KEY]=p)),t.headers=C)):(k=g.core.getConfig(),(null!==(a=null==k?void 0:k.traceparentconfig)&&void 0!==a&&a.enabled||null!==(s=null==k?void 0:k.baggageConfiguration)&&void 0!==s&&s.enabled)&&(C=new Headers,null!==(h=this.generateTraceparentHeader(e))&&""!==h&&C.set(Ku.TRACEPARENT_HEADER_KEY,h),b={method:(null==t?void 0:t.method)||"GET",url:e,headers:{},body:null==t?void 0:t.body},null!==(p=this.generateBaggageHeader(e,b))&&""!==p&&C.set(Ku.BAGGAGE_HEADER_KEY,p),t||(t={}),t.headers=C))}catch(e){console.warn("ConvivaAppTracker: Issue while adding traceparent header",e)}d=this.originalFetch(e,t),f=new Request(e,t).clone(),v=null==t?void 0:t.body,T.label=6;case 6:try{I=void 0;try{I=ud(f.headers)}catch(e){}x={method:f.method,url:decodeURIComponent(f.url),headers:I,body:v,requestTimestamp:null===Date||void 0===Date?void 0:Date.now(),requestTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())},this.shouldTrackForSoftNavigation(f.url)&&this.incrementInflightRequests(),this.getSamplingMode()!==Ku.SAMPLING_MODES.NONE&&(R=this.core.getConfig().networkRequestTrackingConfiguration,O=this.core.getConfig().evtStreamTrackingConfiguration,M=R.blocklist,N=null===(u=null===(c=null===(l=this.trackerConfiguration)||void 0===l?void 0:l.configs)||void 0===c?void 0:c.networkRequestTracking)||void 0===u?void 0:u.safelist,L=R.collect,D=R.block,P=R.eventCollectionMode===Ku.NETWORK_REQUEST_EVENT_COLLECTION_MODE.AUTO||R.eventCollectionMode===Ku.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH,null!==h&&""!==h&&(x[Ku.TRACEPARENT_HEADER_KEY]=h),null!==p&&""!==p&&(x[Ku.BAGGAGE_HEADER_KEY]=p),d.then((function(e){var t,n,r;U.shouldTrackForSoftNavigation(f.url)&&U.decrementInflightRequests();try{var i=e.headers.get("content-type");if(O&&O.enabled&&i&&i.includes("text/event-stream")){var o=e.clone().body;o?jn(o,f.url,/\r?\n\r?\n/,Gn,(function(e){U.processStreamEvent(e,f.url,"conviva_sse_message")}),{idleMs:O.idleMs,maxEvents:O.maxEvents,bufferMaxBytes:O.bufferMaxBytes},(function(){U.cleanupSSECountState(f.url)})).catch((function(){})):console.warn("Conviva App Tracker:: Response body is null, cannot read as stream")}else if(function(e,t){var n;return(null===(n=null==t?void 0:t.configs)||void 0===n?void 0:n.plainTextChunkTracking)&&t.configs.plainTextChunkTracking.enabled&&t.configs.plainTextChunkTracking.endpoints.some((function(t){return e.includes(t)}))}(f.url,U.trackerConfiguration)){if(An(L,D,M,N,e,x)){var a=void 0;try{a=ud(e.headers)}catch(e){}var s={status:null==e?void 0:e.status,statusText:""!==(null==e?void 0:e.statusText)?null==e?void 0:e.statusText:void 0,headers:a,size:0,responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};U.trackerMethods.trackNetworkRequest({requestDetails:x,responseDetails:s})}(o=e.clone().body)?(U.resetStreamCountState(f.url),jn(o,f.url,null!==(r=null===(n=null===(t=U.trackerConfiguration.configs)||void 0===t?void 0:t.plainTextChunkTracking)||void 0===n?void 0:n.delimiter)&&void 0!==r?r:/\r?\n/,Hn,(function(e){U.processStreamEvent(e,f.url,"conviva_chunk_message")}),{idleMs:O.idleMs,maxEvents:O.maxEvents,bufferMaxBytes:O.bufferMaxBytes},(function(){U.cleanupSSECountState(f.url)})).catch((function(){}))):console.warn("Conviva App Tracker:: Response body is null, cannot read as stream")}else if(R&&R.enabled&&P){var l=An(L,D,M,N,e,x);if(l){a=void 0;try{a=ud(e.headers)}catch(e){}var c={status:null==e?void 0:e.status,statusText:""!==(null==e?void 0:e.statusText)?null==e?void 0:e.statusText:void 0,headers:a,size:0,responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};e.clone().json().then((function(e){c.body=e,null!=(e=U.core.getConfig().baggageConfiguration)&&e.enabled&&Bn(x,c,e,U.core),U.trackerMethods.trackNetworkRequest({requestDetails:x,responseDetails:c})})).catch((function(){var e=U.core.getConfig().baggageConfiguration;null!=e&&e.enabled&&Bn(x,c,e,U.core),U.trackerMethods.trackNetworkRequest({requestDetails:x,responseDetails:c})}))}}}catch(t){l=An(L,D,M,N,e,x),R&&R.enabled&&l&&P&&(s={statusText:t.toString(),responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())},U.trackerMethods.trackNetworkRequest({requestDetails:x,responseDetails:s}))}})).catch((function(e){U.shouldTrackForSoftNavigation(f.url)&&U.decrementInflightRequests();var t=An(L,D,M,N,null,x);R&&R.enabled&&t&&P&&(e={statusText:e.toString(),responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())},U.trackerMethods.trackNetworkRequest({requestDetails:x,responseDetails:e}))})))}catch(e){console.warn("Conviva App Tracker:: Unable to track network request while fetch interceptRequest ".concat(e))}return[2,d]}}))}))},e.prototype.handleResponse=function(e,t,n){var r,i,o,a;try{if(this.getSamplingMode()!==Ku.SAMPLING_MODES.NONE){var s=null===(r=this.core)||void 0===r?void 0:r.getConfig().networkRequestTrackingConfiguration,l=s.blocklist,c=null===(a=null===(o=null===(i=this.trackerConfiguration)||void 0===i?void 0:i.configs)||void 0===o?void 0:o.networkRequestTracking)||void 0===a?void 0:a.safelist,u=An(s.collect,s.block,l,c,e,t),d=s.eventCollectionMode===Ku.NETWORK_REQUEST_EVENT_COLLECTION_MODE.AUTO||s.eventCollectionMode===Ku.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH;if(s&&s.enabled&&d&&u){var f={status:e.status,statusText:e.statusText||("load"!==n?n:void 0),responseTimestamp:Date.now(),responseTime:performance.now()||Date.now(),headers:cd(e.getAllResponseHeaders()),body:e.response},h=this.core.getConfig().baggageConfiguration;null!=h&&h.enabled&&Bn(t,f,h,this.core),this.trackerMethods.trackNetworkRequest({requestDetails:t,responseDetails:f})}}}catch(e){Yr.warn("Conviva App Tracker:: Unable to track network request error while handleResponse ".concat(e))}},e.prototype.decorateWebSocket=function(){function e(e){n?n.has(e)||(n.add(e),t.addWebSocketEventListeners(e)):e.__convivaWsTag__||(e.__convivaWsTag__=!0,t.addWebSocketEventListeners(e))}var t=this,n="undefined"!=typeof WeakSet?new WeakSet:null,r=WebSocket.prototype.send;WebSocket.prototype.send=function(n){try{t.handleWebSocketSend(n,this),e(this)}catch(e){Yr.warn("Conviva WS tracking error:",e)}return r.apply(this,arguments)};var i=WebSocket;window.WebSocket=function(t,n){return e(t=new i(t,n)),t},window.WebSocket.prototype=i.prototype,Object.assign(window.WebSocket,i)},e.prototype.decorateEventSource=function(){var e=this,t="undefined"!=typeof WeakSet?new WeakSet:null,n=EventSource,r=n.prototype.close;window.EventSource=function(r,i){return r=new n(r,i),t?t.has(r)||(t.add(r),e.addEventSourceEventListeners(r)):r.__convivaEventSourceTag__||(r.__convivaEventSourceTag__=!0,e.addEventSourceEventListeners(r)),r},n.prototype.close=function(){var t,n=null!==(t=null==this?void 0:this.url)&&void 0!==t?t:"unknown";return e.handleEventSourceClose(n),r.call(this)},window.EventSource.prototype=n.prototype,Object.setPrototypeOf(window.EventSource,n)},e.prototype.addWebSocketEventListeners=function(e){var t=this,n=$u;e.addEventListener("message",(function(e){return t.handleWebSocketMessage(e)}),{signal:n}),e.addEventListener("open",(function(e){return t.handleWebSocketOpen(e)}),{signal:n}),e.addEventListener("close",(function(e){return t.handleWebSocketClose(e)}),{signal:n}),e.addEventListener("error",(function(e){return t.handleWebSocketError(e)}),{signal:n})},e.prototype.addEventSourceEventListeners=function(e){var t=this,n=$u;e.addEventListener("message",(function(e){return t.handleEventSourceMessage(e)}),{signal:n}),e.addEventListener("open",(function(e){return t.handleEventSourceOpen(e)}),{signal:n}),e.addEventListener("error",(function(e){return t.handleEventSourceError(e)}),{signal:n})},e.prototype.handleWebSocketOpen=function(e){try{var t={url:this.getWebSocketUrl(e.target),type:e.type,timestamp:Date.now()}}catch(n){t={data:e.data,url:e.target?this.getWebSocketUrl(e.target):void 0}}this.sendWebSocketEvent("open",t,{},!1)},e.prototype.handleWebSocketClose=function(e){try{var t={url:this.getWebSocketUrl(e.target),type:e.type,code:e.code,reason:e.reason,wasClean:e.wasClean,timestamp:Date.now()}}catch(n){t={data:e.data,url:e.target?this.getWebSocketUrl(e.target):void 0}}this.sendWebSocketEvent("close",t,{},!1)},e.prototype.handleWebSocketMessage=function(e){var t,n,r=null===(t=this.core)||void 0===t?void 0:t.getConfig().evtStreamTrackingConfiguration;t=null!==(n=null==r?void 0:r.bufferMaxBytes)&&void 0!==n?n:1048576;try{if(e.data instanceof ArrayBuffer){if(!(e.data.byteLength>t)){var i=new TextDecoder("utf-8",{fatal:!1}).decode(e.data),o=[];Zn(i).forEach((function(e){try{var t=JSON.parse(e.trim());o.push(t)}catch(t){o.push(e)}}));var a={data:o,url:this.getWebSocketUrl(e.target)};this.sendWebSocketEvent("server",a,{},!0)}}else{n=void 0;try{(n="string"==typeof e.data?JSON.parse(e.data):e.data).url=this.getWebSocketUrl(e.target)}catch(t){n={data:e.data,url:e.target?this.getWebSocketUrl(e.target):void 0}}this.sendWebSocketEvent("server",n)}}catch(t){e={data:e.data,url:e.target?this.getWebSocketUrl(e.target):void 0},this.sendWebSocketEvent("server",e)}},e.prototype.handleWebSocketSend=function(e,t){var n,r,i,o,a=null===(n=this.core)||void 0===n?void 0:n.getConfig().evtStreamTrackingConfiguration;n=null!==(r=null==a?void 0:a.bufferMaxBytes)&&void 0!==r?r:1048576;try{if(e instanceof ArrayBuffer){if(!(e.byteLength>n)){var s=new TextDecoder("utf-8",{fatal:!1}).decode(e),l=[];Zn(s).forEach((function(e){try{if("string"==typeof e){var t=JSON.parse(e);l.push(t)}else l.push(e)}catch(t){l.push(e)}}));var c={url:this.getWebSocketUrl(t)},u={data:l};this.sendWebSocketEvent("send",c,u,!0)}}else{var d="string"==typeof e?JSON.parse(e):e;c={url:this.getWebSocketUrl(t),type:null!==(o=null!==(i=d.type)&&void 0!==i?i:d.method)&&void 0!==o?o:void 0},this.sendWebSocketEvent("send",c,d)}}catch(n){c={url:this.getWebSocketUrl(t)},d={data:e},this.sendWebSocketEvent("send",c,d)}},e.prototype.handleWebSocketError=function(e){var t,n,r,i,o,a,s;try{var l={url:this.getWebSocketUrl(e.target),type:e.type,timestamp:Date.now(),readyState:this.getWebSocketReadyState(e.target),errorMessage:e.message||"WebSocket error occurred",errorType:(null===(t=e.error)||void 0===t?void 0:t.name)||"WebSocketError",errorCode:null===(n=e.error)||void 0===n?void 0:n.code,errorDetails:null===(r=e.error)||void 0===r?void 0:r.message,networkType:(null===(i=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===i?void 0:i.type)||"unknown",networkEffectiveType:(null===(o=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===o?void 0:o.effectiveType)||"unknown",networkDownlink:null===(a=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===a?void 0:a.downlink,networkRtt:null===(s=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===s?void 0:s.rtt,userAgent:null===navigator||void 0===navigator?void 0:navigator.userAgent}}catch(t){l={url:this.getWebSocketUrl(e.target),type:"error",timestamp:Date.now(),error:"Failed to process WebSocket error event: ".concat(t instanceof Error?t.message:String(t)),originalEvent:e}}this.sendWebSocketEvent("error",l)},e.prototype.handleEventSourceOpen=function(e){try{var t={url:this.getEventSourceUrl(e.target),type:e.type}}catch(n){t={data:e.data,url:e.target?this.getEventSourceUrl(e.target):void 0,type:e.type}}this.sendEventSourceEvent(t)},e.prototype.handleEventSourceMessage=function(e){var t={};try{if("string"==typeof e.data)try{t.data=JSON.parse(e.data)}catch(n){t.data=e.data}else t.data=e.data;t.url=this.getEventSourceUrl(e.target),t.type=e.type,t.id=e.lastEventId}catch(n){t={data:e.data,url:e.target?this.getEventSourceUrl(e.target):void 0,type:e.type,id:e.lastEventId}}this.sendEventSourceEvent(t)},e.prototype.handleEventSourceError=function(e){var t,n,r,i;try{var o={url:this.getEventSourceUrl(e.target),type:e.type,readyState:this.getEventSourceReadyState(e.target),errorMessage:e.message||"EventSource error occurred",errorType:"EventSourceError",networkType:(null===(t=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===t?void 0:t.type)||"unknown",networkEffectiveType:(null===(n=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===n?void 0:n.effectiveType)||"unknown",networkDownlink:null===(r=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===r?void 0:r.downlink,networkRtt:null===(i=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===i?void 0:i.rtt,userAgent:null===navigator||void 0===navigator?void 0:navigator.userAgent}}catch(t){o={url:this.getEventSourceUrl(e.target),type:"error",error:"Failed to process EventSource error event: ".concat(t instanceof Error?t.message:String(t)),originalEvent:e}}this.sendEventSourceEvent(o)},e.prototype.handleEventSourceClose=function(e){this.sendEventSourceEvent({url:e,type:"close"})},e.prototype.sendWebSocketEvent=function(e,t,n,r){var i;void 0===n&&(n={}),void 0===r&&(r=!1);try{var o=null===(i=this.core.getConfig())||void 0===i?void 0:i.evtStreamTrackingConfiguration;if(null!=o&&o.enabled){var a=this.getStreamCountState(t.url),s=Tr("send"===e?Tr(Tr({},t),n):Tr({},t),{event:e}),l=In(o.collect,o.block,s,t.url);if(null!=l&&l.result){var c=null==l?void 0:l.matchedConfig;if(!0===(null==c?void 0:c.count)&&(a.tokenCount++,null==l||!l.shouldSend))return;var u={url:t.url,id:t.id,type:t.type,event:e};if(!0===(null==c?void 0:c.countReset)&&(0<a.tokenCount&&(u.tokenCount=a.tokenCount),this.resetStreamCountState(t.url)),e="send"===e?n:t,n={},o.richContentInference&&o.richContentInference.cond)try{n=Vn(e,o.richContentInference,null==t?void 0:t.url)}catch(e){console.warn("Conviva App Tracker:: Error in rich content inference:",e)}if(o.conditionalCollectAttr&&0<o.conditionalCollectAttr.length){var d=wn(e,o.conditionalCollectAttr,t.url,In,null==o?void 0:o.maxQueryLength,r);0<Object.keys(d).length&&(u=Tr(Tr({},u),d))}0<Object.keys(n).length&&(u.richContentInference=n),this.trackerMethods.trackSSEEvent({name:"conviva_ws_message",data:JSON.stringify(u)})}}}catch(e){}},e.prototype.sendEventSourceEvent=function(e){var t,n;try{var r=null===(t=this.core.getConfig())||void 0===t?void 0:t.evtStreamTrackingConfiguration;if(null!=r&&r.enabled){var i=this.getStreamCountState((null==e?void 0:e.url)||""),o=Tr({},e),a=In(r.collect,r.block,o,(null==e?void 0:e.url)||"");if(null!=a&&a.result){var s=null==a?void 0:a.matchedConfig;if(!0===(null==s?void 0:s.count)&&(i.tokenCount++,null==a||!a.shouldSend))return;var l={url:(null===(n=null==e?void 0:e.url)||void 0===n?void 0:n.split("?")[0])||"",id:null==e?void 0:e.id,type:null==e?void 0:e.type};if(!0===(null==s?void 0:s.countReset)&&(0<i.tokenCount&&(l.tokenCount=i.tokenCount),this.resetStreamCountState((null==e?void 0:e.url)||"")),r.conditionalCollectAttr&&0<r.conditionalCollectAttr.length){var c=wn(e,r.conditionalCollectAttr,(null==e?void 0:e.url)||"",In,null==r?void 0:r.maxQueryLength,!1);0<Object.keys(c).length&&(l=Tr(Tr({},l),c))}if(r.richContentInference&&r.richContentInference.cond)try{var u=Vn(e,r.richContentInference,null==e?void 0:e.url);0<Object.keys(u).length&&(l.richContentInference=u)}catch(e){console.warn("Conviva App Tracker:: Error in rich content inference:",e)}this.trackerMethods.trackSSEEvent({name:"conviva_sse_message",data:JSON.stringify(l)})}}}catch(e){}},e.prototype.getWebSocketUrl=function(e){try{if(e&&"object"===C(e)&&"url"in e)return e.url}catch(e){}},e.prototype.getWebSocketReadyState=function(e){try{if(e&&"object"===C(e)&&"readyState"in e)return e.readyState}catch(e){}},e.prototype.getEventSourceUrl=function(e){try{if(e&&"object"===C(e)&&"url"in e)return e.url}catch(e){}},e.prototype.getEventSourceReadyState=function(e){try{if(e&&"object"===C(e)&&"readyState"in e)return e.readyState}catch(e){}},e.prototype.addTraceparentHeader=function(e,t,n){var r=null;return Ku.TRACEPARENT_HEADER_KEY in n||(r=this.generateTraceparentHeader(t))&&e.setRequestHeader(Ku.TRACEPARENT_HEADER_KEY,r),r},e.prototype.addBaggageHeader=function(e,t,n,r,i){return(t=this.generateBaggageHeader(t,{method:r||"GET",url:t,headers:n,body:i}))&&e.setRequestHeader(Ku.BAGGAGE_HEADER_KEY,t),t},e.prototype.createRequestDetails=function(e,t,n,r,i,o){return e={method:e,url:t,headers:n,body:r,requestTimestamp:Date.now(),requestTime:performance.now()||Date.now()},i&&(e[Ku.TRACEPARENT_HEADER_KEY]=i),o&&(e[Ku.BAGGAGE_HEADER_KEY]=o),e},e.prototype.normalizeUrl=function(e){if(e instanceof URL)return e.href;try{if("undefined"!=typeof document){var t=URL;if(document.baseURI)var n=document.baseURI;else{var r=document.querySelector("base");n=r&&r.href?r.href:document.location.href}return new t(e,n).href}}catch(e){}return e},e.prototype.generateTraceparentHeader=function(e){var t,n,r,i,o,a,s,l,c,u,d,f,h,p,v,g,m,y,w,b,k,_,C;try{if(this.core&&e){var S=this.core.getConfig(),E=Ku.CONFIG_PREFERENCES.MERGE,A=[];switch(null!==(r=null===(n=null===(t=this.trackerConfiguration)||void 0===t?void 0:t.configs)||void 0===n?void 0:n.traceparentGeneration)&&void 0!==r&&r.force?E=Ku.CONFIG_PREFERENCES.APP:null!==(i=null==S?void 0:S.traceparentconfig)&&void 0!==i&&i.pref&&(E=S.traceparentconfig.pref),E){case Ku.CONFIG_PREFERENCES.APP:if(!1===(null===(s=null===(a=null===(o=this.trackerConfiguration)||void 0===o?void 0:o.configs)||void 0===a?void 0:a.traceparentGeneration)||void 0===s?void 0:s.enabled))return"";A=(null===(u=null===(c=null===(l=this.trackerConfiguration)||void 0===l?void 0:l.configs)||void 0===c?void 0:c.traceparentGeneration)||void 0===u?void 0:u.targetUrl)||[];break;case Ku.CONFIG_PREFERENCES.REMOTE:if(!1===(null===(d=null==S?void 0:S.traceparentconfig)||void 0===d?void 0:d.enabled))return"";A=(null===(f=null==S?void 0:S.traceparentconfig)||void 0===f?void 0:f.targetUrl)||[];break;default:if((null==S||!S.traceparentconfig)&&!1===(null===(v=null===(p=null===(h=this.trackerConfiguration)||void 0===h?void 0:h.configs)||void 0===p?void 0:p.traceparentGeneration)||void 0===v?void 0:v.enabled)||(null===(m=null===(g=this.trackerConfiguration)||void 0===g?void 0:g.configs)||void 0===m||!m.traceparentGeneration)&&!1===(null===(y=null==S?void 0:S.traceparentconfig)||void 0===y?void 0:y.enabled))return"";var I=(null===(k=null===(b=null===(w=this.trackerConfiguration)||void 0===w?void 0:w.configs)||void 0===b?void 0:b.traceparentGeneration)||void 0===k?void 0:k.targetUrl)||[],T=(null===(_=null==S?void 0:S.traceparentconfig)||void 0===_?void 0:_.targetUrl)||[],R=new Set(x(x([],T,!0),I,!0));A=Array.from(R)}if(0<A.length&&(A.includes("*")||A.some((function(t){return 0<(null==t?void 0:t.length)&&e.toLowerCase().includes(null==t?void 0:t.toLowerCase())})))&&null!==(C=null==S?void 0:S.networkRequestTrackingConfiguration)&&void 0!==C&&C.enabled){var O=Array.from({length:32},(function(){return Math.floor(16*Math.random()).toString(16)})).join(""),M=Array.from({length:16},(function(){return Math.floor(16*Math.random()).toString(16)})).join("");return"00-".concat(O,"-").concat(M,"-00")}}}catch(e){console.warn("Conviva App Tracker:: Unable to generate traceparent header ".concat(e))}return""},e.prototype.generateBaggageHeader=function(e,t){var n,r;try{if(this.core&&e){var i=this.core.getConfig();if(!1===(null===(n=null==i?void 0:i.baggageConfiguration)||void 0===n?void 0:n.enabled))return"";t&&null!=i&&i.baggageConfiguration&&Bn(t,{},i.baggageConfiguration,this.core);var o=(null===(r=null==i?void 0:i.baggageConfiguration)||void 0===r?void 0:r.targetUrl)||[];if(0<o.length&&o.some((function(t){return 0<(null==t?void 0:t.length)&&e.toLowerCase().includes(null==t?void 0:t.toLowerCase())}))){t=[];var a=this.getConvivaClientId();a&&t.push("c3.client_id=".concat(a));var s=this.core.getConversationId();if(s&&t.push("c3.convid=".concat(s)),0<t.length)return t.join(", ")}}}catch(e){console.warn("Conviva App Tracker:: Unable to generate baggage header ".concat(e))}return""},e.prototype.getConvivaClientId=function(){try{if("undefined"!=typeof window&&null!==window&&void 0!==window&&window.localStorage){var e=window.localStorage.getItem("Conviva.sdkConfig"),t=JSON.parse(e||"{}");if(t&&"object"===C(t)&&t.clId)return t.clId}}catch(e){console.warn("Conviva App Tracker:: Unable to get client ID ".concat(e))}return""},e.prototype.updateSSETrackingConfig=function(e){Yd=Tr(Tr({},Yd),e)},e.prototype.getSSETrackingConfig=function(){return Tr({},Yd)},e.prototype.processStreamEvent=function(e,t,n){var r,i;try{if("ping"!==e.event){var o=e.data;try{o=JSON.parse(e.data)}catch(e){}var a={url:t,id:e.id,event:null!==(r=e.event)&&void 0!==r?r:"message",data:o},s=null===(i=this.core)||void 0===i?void 0:i.getConfig().evtStreamTrackingConfiguration;if(null!=s&&s.enabled){var l=this.getStreamCountState(t),c=In(s.collect,s.block,a,t);if(null!=c&&c.result){var u=null==c?void 0:c.matchedConfig;if(!0===(null==u?void 0:u.count)&&(l.tokenCount++,null==c||!c.shouldSend))return;if(e={},s.richContentInference&&s.richContentInference.cond)try{e=Vn(a,s.richContentInference,null==a?void 0:a.url)}catch(e){console.warn("Conviva App Tracker:: Error in rich content inference:",e)}var d={url:a.url,id:a.id,event:a.event};if(!0===(null==u?void 0:u.countReset)&&(0<l.tokenCount&&(d.tokenCount=l.tokenCount),this.resetStreamCountState(t)),s.conditionalCollectAttr&&0<s.conditionalCollectAttr.length){var f=wn(a,s.conditionalCollectAttr,t,In,null==s?void 0:s.maxQueryLength,!1);0<Object.keys(f).length&&(d=Tr(Tr({},d),f))}0<Object.keys(e).length&&(d.richContentInference=e),this.trackerMethods.trackSSEEvent({name:n,data:JSON.stringify(d)})}}}}catch(e){}},e.prototype.getStreamCountState=function(e){return this.sseCountStates.has(e)||this.sseCountStates.set(e,{tokenCount:0}),this.sseCountStates.get(e)},e.prototype.resetStreamCountState=function(e){this.sseCountStates.set(e,{tokenCount:0})},e.prototype.cleanupSSECountState=function(e){this.sseCountStates.delete(e)},e.prototype.getInflightRequests=function(){return this.inflightRequests},e.prototype.incrementInflightRequests=function(){this.inflightRequests++},e.prototype.decrementInflightRequests=function(){this.inflightRequests=Math.max(0,this.inflightRequests-1)},e.prototype.shouldTrackForSoftNavigation=function(e){try{var t=new URL(e).hostname,n=this.core.getConfig(),r=null==n?void 0:n.softNavigationTrackingConfiguration;return null==r||!r.domainBlocklist||0===r.domainBlocklist.length||!r.domainBlocklist.some((function(e){return t.endsWith(e)}))}catch(e){return!1}},e}(),Jd=function(e,t,n,r,i,o,a,s){var l,c,u,d,f,h,p=sd,v=function(){var e=p.getConfig();return!e.emitterConfiguration||!e.emitterConfiguration.batching||e.emitterConfiguration.batching.enabled};return qn(e,t,"localStorage"==n||"cookieAndLocalStorage"==n,r.eventMethod,i,(h=p.getConfig(),null!==(f=h.bufferSize?h.bufferSize:r.bufferSize)&&void 0!==f?f:20),(function(){var e,t=p.getConfig();return null!==(e=t.maxGetBytes?t.maxGetBytes:r.maxGetBytes)&&void 0!==e?e:0}),null===(l=r.useStm)||void 0===l||l,(function(){var e,t=p.getConfig();return null!==(e=t.maxLocalStorageQueueSize?t.maxLocalStorageQueueSize:r.maxLocalStorageQueueSize)&&void 0!==e?e:10}),null!==(c=r.connectionTimeout)&&void 0!==c?c:3e4,o,null!==(u=r.customHeaders)&&void 0!==u?u:{},null!==(d=r.withCredentials)&&void 0!==d&&d,a,(function(){var e,t,n,i=p.getConfig();return null!==(n=null!=i&&i.enc?i.enc:null===(t=null===(e=null==r?void 0:r.configs)||void 0===e?void 0:e.network)||void 0===t?void 0:t.encoding)&&void 0!==n?n:id.GZIP}),v,(function(){var e,t,n=p.getConfig();return v()?"number"==typeof(null===(t=null===(e=n.emitterConfiguration)||void 0===e?void 0:e.batching)||void 0===t?void 0:t.byteLimitPostInKB)?1e3*n.emitterConfiguration.batching.byteLimitPostInKB:25e4:4e4}),(function(){var e,t,n=null===(t=null===(e=p.getConfig().emitterConfiguration)||void 0===e?void 0:e.batching)||void 0===t?void 0:t.batchingIntervalInSec;return 1e3*("number"==typeof n?n:5)}),s)},Xd=function(){function e(e,t,n,r,i){void 0===e&&(e=20),void 0===t&&(t=2e3),void 0===n&&(n=1e3),this.eventMaxLimit=e,this.cooldown=t,this.windowStart=Date.now(),this.circuitBreakerUntil=this.eventCount=0,this.breakerPreviouslyOpen=!1,this.droppedCount=0,this.trackerCore=r,this.timeWindow=n,this.getSamplingMode=i}return e.prototype.isAllowedToSendEvent=function(){var e=Date.now();return e<this.circuitBreakerUntil?(this.droppedCount++,!1):(this.breakerPreviouslyOpen&&(this.breakerPreviouslyOpen=!1,Nn(this.trackerCore,this.getSamplingMode,{message:"Application Error",className:"errorRateLimiter - isAllowedToSendEvent",extraData:{droppedCount:this.droppedCount},configAppliedSrc:wd,configAppliedTime:bd}),this.droppedCount=0),e-this.windowStart<this.timeWindow?this.eventCount++:(this.windowStart=e,this.eventCount=1),!(this.eventCount>this.eventMaxLimit)||(this.circuitBreakerUntil=e+this.cooldown,this.breakerPreviouslyOpen=!0,this.droppedCount++,!1))},e.prototype.updateErrortRateLimitConfig=function(e,t,n){this.eventMaxLimit=e,this.cooldown=t,this.timeWindow=n},e}(),Qd=function(e,t){return e.length>t?"".concat(e.slice(0,t-3),"..."):e},$d={idleWindowMs:600,requireLcp:!1,lcpTimeoutMs:3e3,maxMeasurementMs:1e4,includeHashChanges:!1,domainAllowlist:[],domainBlocklist:["sdk.fra-01.braze.eu","tr.snapchat.com","analytics.google.com","ams.creativecdn.com","analytics.tiktok.com"]},ef=Tr({},$d),tf=null,nf=null,rf=null,of=function(){function e(e){if(4!==(e=e.split(".").map(Number)).length||e.some((function(e){return isNaN(e)})))throw Error("clientId must be in format 'a.b.c.d' with each part being a number");return e}function t(e,t){void 0===t&&(t=0),t=1+(0|t)|0;for(var n=0;4>n;n++)t=Math.imul(-1640531535,t)+(0|e[n])|0;return 0|t}function n(n){if(i)try{var r=e(n);void 0===(n=void 0)&&(n=BigInt(0));var o=BigInt(79),a=BigInt(1)+n;for(n=0;4>n;n++)a=o*a+BigInt(r[n]);var s=Number(BigInt.asIntN(32,a));return(s+Math.pow(2,31))/(Math.pow(2,32)-1)}catch(e){return 0}else try{return((s=t(e(n)))>>>0)/4294967295}catch(e){return 0}}function r(e){return 1-n(e)}var i="function"==typeof BigInt;return{clientIdHash:t,sampleRate:n,minimumSampleRateForInclusion:r,shouldInclude:function(e,t){return e/100>=r(t)}}}(),af=!1,sf=null,lf=null,cf=function(){function e(e,t,n){var r,i;this.detectionInterval=null,this._messageHandlers={},this._broadcastChannel=null,this._lastFlushSignalTimestamp=0,this.tracker=e,this.trackerConfiguration=t,this.sessionReplayConfig=n,e=new Blob(["/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\n!(function (t, e) {\n  'object' == typeof exports && 'undefined' != typeof module\n    ? e(exports)\n    : 'function' == typeof define && define.amd\n    ? define(['exports'], e)\n    : e(((t = 'undefined' != typeof globalThis ? globalThis : t || self).pako = {}));\n})(this, function (t) {\n  'use strict';\n  function e(t) {\n    let e = t.length;\n    for (; --e >= 0; ) t[e] = 0;\n  }\n  const a = 256,\n    i = 286,\n    n = 30,\n    s = 15,\n    r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]),\n    o = new Uint8Array([\n      0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13,\n    ]),\n    l = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]),\n    h = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]),\n    d = new Array(576);\n  e(d);\n  const _ = new Array(60);\n  e(_);\n  const f = new Array(512);\n  e(f);\n  const c = new Array(256);\n  e(c);\n  const u = new Array(29);\n  e(u);\n  const w = new Array(n);\n  function m(t, e, a, i, n) {\n    (this.static_tree = t),\n      (this.extra_bits = e),\n      (this.extra_base = a),\n      (this.elems = i),\n      (this.max_length = n),\n      (this.has_stree = t && t.length);\n  }\n  let b, g, p;\n  function k(t, e) {\n    (this.dyn_tree = t), (this.max_code = 0), (this.stat_desc = e);\n  }\n  e(w);\n  const v = (t) => (t < 256 ? f[t] : f[256 + (t >>> 7)]),\n    y = (t, e) => {\n      (t.pending_buf[t.pending++] = 255 & e), (t.pending_buf[t.pending++] = (e >>> 8) & 255);\n    },\n    x = (t, e, a) => {\n      t.bi_valid > 16 - a\n        ? ((t.bi_buf |= (e << t.bi_valid) & 65535),\n          y(t, t.bi_buf),\n          (t.bi_buf = e >> (16 - t.bi_valid)),\n          (t.bi_valid += a - 16))\n        : ((t.bi_buf |= (e << t.bi_valid) & 65535), (t.bi_valid += a));\n    },\n    z = (t, e, a) => {\n      x(t, a[2 * e], a[2 * e + 1]);\n    },\n    A = (t, e) => {\n      let a = 0;\n      do {\n        (a |= 1 & t), (t >>>= 1), (a <<= 1);\n      } while (--e > 0);\n      return a >>> 1;\n    },\n    E = (t, e, a) => {\n      const i = new Array(16);\n      let n,\n        r,\n        o = 0;\n      for (n = 1; n <= s; n++) (o = (o + a[n - 1]) << 1), (i[n] = o);\n      for (r = 0; r <= e; r++) {\n        let e = t[2 * r + 1];\n        0 !== e && (t[2 * r] = A(i[e]++, e));\n      }\n    },\n    R = (t) => {\n      let e;\n      for (e = 0; e < i; e++) t.dyn_ltree[2 * e] = 0;\n      for (e = 0; e < n; e++) t.dyn_dtree[2 * e] = 0;\n      for (e = 0; e < 19; e++) t.bl_tree[2 * e] = 0;\n      (t.dyn_ltree[512] = 1), (t.opt_len = t.static_len = 0), (t.sym_next = t.matches = 0);\n    },\n    Z = (t) => {\n      t.bi_valid > 8 ? y(t, t.bi_buf) : t.bi_valid > 0 && (t.pending_buf[t.pending++] = t.bi_buf),\n        (t.bi_buf = 0),\n        (t.bi_valid = 0);\n    },\n    U = (t, e, a, i) => {\n      const n = 2 * e,\n        s = 2 * a;\n      return t[n] < t[s] || (t[n] === t[s] && i[e] <= i[a]);\n    },\n    S = (t, e, a) => {\n      const i = t.heap[a];\n      let n = a << 1;\n      for (\n        ;\n        n <= t.heap_len &&\n        (n < t.heap_len && U(e, t.heap[n + 1], t.heap[n], t.depth) && n++, !U(e, i, t.heap[n], t.depth));\n\n      )\n        (t.heap[a] = t.heap[n]), (a = n), (n <<= 1);\n      t.heap[a] = i;\n    },\n    D = (t, e, i) => {\n      let n,\n        s,\n        l,\n        h,\n        d = 0;\n      if (0 !== t.sym_next)\n        do {\n          (n = 255 & t.pending_buf[t.sym_buf + d++]),\n            (n += (255 & t.pending_buf[t.sym_buf + d++]) << 8),\n            (s = t.pending_buf[t.sym_buf + d++]),\n            0 === n\n              ? z(t, s, e)\n              : ((l = c[s]),\n                z(t, l + a + 1, e),\n                (h = r[l]),\n                0 !== h && ((s -= u[l]), x(t, s, h)),\n                n--,\n                (l = v(n)),\n                z(t, l, i),\n                (h = o[l]),\n                0 !== h && ((n -= w[l]), x(t, n, h)));\n        } while (d < t.sym_next);\n      z(t, 256, e);\n    },\n    T = (t, e) => {\n      const a = e.dyn_tree,\n        i = e.stat_desc.static_tree,\n        n = e.stat_desc.has_stree,\n        r = e.stat_desc.elems;\n      let o,\n        l,\n        h,\n        d = -1;\n      for (t.heap_len = 0, t.heap_max = 573, o = 0; o < r; o++)\n        0 !== a[2 * o] ? ((t.heap[++t.heap_len] = d = o), (t.depth[o] = 0)) : (a[2 * o + 1] = 0);\n      for (; t.heap_len < 2; )\n        (h = t.heap[++t.heap_len] = d < 2 ? ++d : 0),\n          (a[2 * h] = 1),\n          (t.depth[h] = 0),\n          t.opt_len--,\n          n && (t.static_len -= i[2 * h + 1]);\n      for (e.max_code = d, o = t.heap_len >> 1; o >= 1; o--) S(t, a, o);\n      h = r;\n      do {\n        (o = t.heap[1]),\n          (t.heap[1] = t.heap[t.heap_len--]),\n          S(t, a, 1),\n          (l = t.heap[1]),\n          (t.heap[--t.heap_max] = o),\n          (t.heap[--t.heap_max] = l),\n          (a[2 * h] = a[2 * o] + a[2 * l]),\n          (t.depth[h] = (t.depth[o] >= t.depth[l] ? t.depth[o] : t.depth[l]) + 1),\n          (a[2 * o + 1] = a[2 * l + 1] = h),\n          (t.heap[1] = h++),\n          S(t, a, 1);\n      } while (t.heap_len >= 2);\n      (t.heap[--t.heap_max] = t.heap[1]),\n        ((t, e) => {\n          const a = e.dyn_tree,\n            i = e.max_code,\n            n = e.stat_desc.static_tree,\n            r = e.stat_desc.has_stree,\n            o = e.stat_desc.extra_bits,\n            l = e.stat_desc.extra_base,\n            h = e.stat_desc.max_length;\n          let d,\n            _,\n            f,\n            c,\n            u,\n            w,\n            m = 0;\n          for (c = 0; c <= s; c++) t.bl_count[c] = 0;\n          for (a[2 * t.heap[t.heap_max] + 1] = 0, d = t.heap_max + 1; d < 573; d++)\n            (_ = t.heap[d]),\n              (c = a[2 * a[2 * _ + 1] + 1] + 1),\n              c > h && ((c = h), m++),\n              (a[2 * _ + 1] = c),\n              _ > i ||\n                (t.bl_count[c]++,\n                (u = 0),\n                _ >= l && (u = o[_ - l]),\n                (w = a[2 * _]),\n                (t.opt_len += w * (c + u)),\n                r && (t.static_len += w * (n[2 * _ + 1] + u)));\n          if (0 !== m) {\n            do {\n              for (c = h - 1; 0 === t.bl_count[c]; ) c--;\n              t.bl_count[c]--, (t.bl_count[c + 1] += 2), t.bl_count[h]--, (m -= 2);\n            } while (m > 0);\n            for (c = h; 0 !== c; c--)\n              for (_ = t.bl_count[c]; 0 !== _; )\n                (f = t.heap[--d]),\n                  f > i ||\n                    (a[2 * f + 1] !== c && ((t.opt_len += (c - a[2 * f + 1]) * a[2 * f]), (a[2 * f + 1] = c)), _--);\n          }\n        })(t, e),\n        E(a, d, t.bl_count);\n    },\n    O = (t, e, a) => {\n      let i,\n        n,\n        s = -1,\n        r = e[1],\n        o = 0,\n        l = 7,\n        h = 4;\n      for (0 === r && ((l = 138), (h = 3)), e[2 * (a + 1) + 1] = 65535, i = 0; i <= a; i++)\n        (n = r),\n          (r = e[2 * (i + 1) + 1]),\n          (++o < l && n === r) ||\n            (o < h\n              ? (t.bl_tree[2 * n] += o)\n              : 0 !== n\n              ? (n !== s && t.bl_tree[2 * n]++, t.bl_tree[32]++)\n              : o <= 10\n              ? t.bl_tree[34]++\n              : t.bl_tree[36]++,\n            (o = 0),\n            (s = n),\n            0 === r ? ((l = 138), (h = 3)) : n === r ? ((l = 6), (h = 3)) : ((l = 7), (h = 4)));\n    },\n    I = (t, e, a) => {\n      let i,\n        n,\n        s = -1,\n        r = e[1],\n        o = 0,\n        l = 7,\n        h = 4;\n      for (0 === r && ((l = 138), (h = 3)), i = 0; i <= a; i++)\n        if (((n = r), (r = e[2 * (i + 1) + 1]), !(++o < l && n === r))) {\n          if (o < h)\n            do {\n              z(t, n, t.bl_tree);\n            } while (0 != --o);\n          else\n            0 !== n\n              ? (n !== s && (z(t, n, t.bl_tree), o--), z(t, 16, t.bl_tree), x(t, o - 3, 2))\n              : o <= 10\n              ? (z(t, 17, t.bl_tree), x(t, o - 3, 3))\n              : (z(t, 18, t.bl_tree), x(t, o - 11, 7));\n          (o = 0), (s = n), 0 === r ? ((l = 138), (h = 3)) : n === r ? ((l = 6), (h = 3)) : ((l = 7), (h = 4));\n        }\n    };\n  let F = !1;\n  const L = (t, e, a, i) => {\n    x(t, 0 + (i ? 1 : 0), 3),\n      Z(t),\n      y(t, a),\n      y(t, ~a),\n      a && t.pending_buf.set(t.window.subarray(e, e + a), t.pending),\n      (t.pending += a);\n  };\n  var N = (t, e, i, n) => {\n      let s,\n        r,\n        o = 0;\n      t.level > 0\n        ? (2 === t.strm.data_type &&\n            (t.strm.data_type = ((t) => {\n              let e,\n                i = 4093624447;\n              for (e = 0; e <= 31; e++, i >>>= 1) if (1 & i && 0 !== t.dyn_ltree[2 * e]) return 0;\n              if (0 !== t.dyn_ltree[18] || 0 !== t.dyn_ltree[20] || 0 !== t.dyn_ltree[26]) return 1;\n              for (e = 32; e < a; e++) if (0 !== t.dyn_ltree[2 * e]) return 1;\n              return 0;\n            })(t)),\n          T(t, t.l_desc),\n          T(t, t.d_desc),\n          (o = ((t) => {\n            let e;\n            for (\n              O(t, t.dyn_ltree, t.l_desc.max_code), O(t, t.dyn_dtree, t.d_desc.max_code), T(t, t.bl_desc), e = 18;\n              e >= 3 && 0 === t.bl_tree[2 * h[e] + 1];\n              e--\n            );\n            return (t.opt_len += 3 * (e + 1) + 5 + 5 + 4), e;\n          })(t)),\n          (s = (t.opt_len + 3 + 7) >>> 3),\n          (r = (t.static_len + 3 + 7) >>> 3),\n          r <= s && (s = r))\n        : (s = r = i + 5),\n        i + 4 <= s && -1 !== e\n          ? L(t, e, i, n)\n          : 4 === t.strategy || r === s\n          ? (x(t, 2 + (n ? 1 : 0), 3), D(t, d, _))\n          : (x(t, 4 + (n ? 1 : 0), 3),\n            ((t, e, a, i) => {\n              let n;\n              for (x(t, e - 257, 5), x(t, a - 1, 5), x(t, i - 4, 4), n = 0; n < i; n++)\n                x(t, t.bl_tree[2 * h[n] + 1], 3);\n              I(t, t.dyn_ltree, e - 1), I(t, t.dyn_dtree, a - 1);\n            })(t, t.l_desc.max_code + 1, t.d_desc.max_code + 1, o + 1),\n            D(t, t.dyn_ltree, t.dyn_dtree)),\n        R(t),\n        n && Z(t);\n    },\n    B = {\n      _tr_init: (t) => {\n        F ||\n          ((() => {\n            let t, e, a, h, k;\n            const v = new Array(16);\n            for (a = 0, h = 0; h < 28; h++) for (u[h] = a, t = 0; t < 1 << r[h]; t++) c[a++] = h;\n            for (c[a - 1] = h, k = 0, h = 0; h < 16; h++) for (w[h] = k, t = 0; t < 1 << o[h]; t++) f[k++] = h;\n            for (k >>= 7; h < n; h++) for (w[h] = k << 7, t = 0; t < 1 << (o[h] - 7); t++) f[256 + k++] = h;\n            for (e = 0; e <= s; e++) v[e] = 0;\n            for (t = 0; t <= 143; ) (d[2 * t + 1] = 8), t++, v[8]++;\n            for (; t <= 255; ) (d[2 * t + 1] = 9), t++, v[9]++;\n            for (; t <= 279; ) (d[2 * t + 1] = 7), t++, v[7]++;\n            for (; t <= 287; ) (d[2 * t + 1] = 8), t++, v[8]++;\n            for (E(d, 287, v), t = 0; t < n; t++) (_[2 * t + 1] = 5), (_[2 * t] = A(t, 5));\n            (b = new m(d, r, 257, i, s)), (g = new m(_, o, 0, n, s)), (p = new m(new Array(0), l, 0, 19, 7));\n          })(),\n          (F = !0)),\n          (t.l_desc = new k(t.dyn_ltree, b)),\n          (t.d_desc = new k(t.dyn_dtree, g)),\n          (t.bl_desc = new k(t.bl_tree, p)),\n          (t.bi_buf = 0),\n          (t.bi_valid = 0),\n          R(t);\n      },\n      _tr_stored_block: L,\n      _tr_flush_block: N,\n      _tr_tally: (t, e, i) => (\n        (t.pending_buf[t.sym_buf + t.sym_next++] = e),\n        (t.pending_buf[t.sym_buf + t.sym_next++] = e >> 8),\n        (t.pending_buf[t.sym_buf + t.sym_next++] = i),\n        0 === e ? t.dyn_ltree[2 * i]++ : (t.matches++, e--, t.dyn_ltree[2 * (c[i] + a + 1)]++, t.dyn_dtree[2 * v(e)]++),\n        t.sym_next === t.sym_end\n      ),\n      _tr_align: (t) => {\n        x(t, 2, 3),\n          z(t, 256, d),\n          ((t) => {\n            16 === t.bi_valid\n              ? (y(t, t.bi_buf), (t.bi_buf = 0), (t.bi_valid = 0))\n              : t.bi_valid >= 8 && ((t.pending_buf[t.pending++] = 255 & t.bi_buf), (t.bi_buf >>= 8), (t.bi_valid -= 8));\n          })(t);\n      },\n    };\n  var C = (t, e, a, i) => {\n    let n = (65535 & t) | 0,\n      s = ((t >>> 16) & 65535) | 0,\n      r = 0;\n    for (; 0 !== a; ) {\n      (r = a > 2e3 ? 2e3 : a), (a -= r);\n      do {\n        (n = (n + e[i++]) | 0), (s = (s + n) | 0);\n      } while (--r);\n      (n %= 65521), (s %= 65521);\n    }\n    return n | (s << 16) | 0;\n  };\n  const M = new Uint32Array(\n    (() => {\n      let t,\n        e = [];\n      for (var a = 0; a < 256; a++) {\n        t = a;\n        for (var i = 0; i < 8; i++) t = 1 & t ? 3988292384 ^ (t >>> 1) : t >>> 1;\n        e[a] = t;\n      }\n      return e;\n    })()\n  );\n  var H = (t, e, a, i) => {\n      const n = M,\n        s = i + a;\n      t ^= -1;\n      for (let a = i; a < s; a++) t = (t >>> 8) ^ n[255 & (t ^ e[a])];\n      return -1 ^ t;\n    },\n    j = {\n      2: 'need dictionary',\n      1: 'stream end',\n      0: '',\n      '-1': 'file error',\n      '-2': 'stream error',\n      '-3': 'data error',\n      '-4': 'insufficient memory',\n      '-5': 'buffer error',\n      '-6': 'incompatible version',\n    },\n    K = {\n      Z_NO_FLUSH: 0,\n      Z_PARTIAL_FLUSH: 1,\n      Z_SYNC_FLUSH: 2,\n      Z_FULL_FLUSH: 3,\n      Z_FINISH: 4,\n      Z_BLOCK: 5,\n      Z_TREES: 6,\n      Z_OK: 0,\n      Z_STREAM_END: 1,\n      Z_NEED_DICT: 2,\n      Z_ERRNO: -1,\n      Z_STREAM_ERROR: -2,\n      Z_DATA_ERROR: -3,\n      Z_MEM_ERROR: -4,\n      Z_BUF_ERROR: -5,\n      Z_NO_COMPRESSION: 0,\n      Z_BEST_SPEED: 1,\n      Z_BEST_COMPRESSION: 9,\n      Z_DEFAULT_COMPRESSION: -1,\n      Z_FILTERED: 1,\n      Z_HUFFMAN_ONLY: 2,\n      Z_RLE: 3,\n      Z_FIXED: 4,\n      Z_DEFAULT_STRATEGY: 0,\n      Z_BINARY: 0,\n      Z_TEXT: 1,\n      Z_UNKNOWN: 2,\n      Z_DEFLATED: 8,\n    };\n  const { _tr_init: P, _tr_stored_block: Y, _tr_flush_block: G, _tr_tally: X, _tr_align: W } = B,\n    {\n      Z_NO_FLUSH: q,\n      Z_PARTIAL_FLUSH: J,\n      Z_FULL_FLUSH: Q,\n      Z_FINISH: V,\n      Z_BLOCK: $,\n      Z_OK: tt,\n      Z_STREAM_END: et,\n      Z_STREAM_ERROR: at,\n      Z_DATA_ERROR: it,\n      Z_BUF_ERROR: nt,\n      Z_DEFAULT_COMPRESSION: st,\n      Z_FILTERED: rt,\n      Z_HUFFMAN_ONLY: ot,\n      Z_RLE: lt,\n      Z_FIXED: ht,\n      Z_DEFAULT_STRATEGY: dt,\n      Z_UNKNOWN: _t,\n      Z_DEFLATED: ft,\n    } = K,\n    ct = 258,\n    ut = 262,\n    wt = 42,\n    mt = 113,\n    bt = 666,\n    gt = (t, e) => ((t.msg = j[e]), e),\n    pt = (t) => 2 * t - (t > 4 ? 9 : 0),\n    kt = (t) => {\n      let e = t.length;\n      for (; --e >= 0; ) t[e] = 0;\n    },\n    vt = (t) => {\n      let e,\n        a,\n        i,\n        n = t.w_size;\n      (e = t.hash_size), (i = e);\n      do {\n        (a = t.head[--i]), (t.head[i] = a >= n ? a - n : 0);\n      } while (--e);\n      (e = n), (i = e);\n      do {\n        (a = t.prev[--i]), (t.prev[i] = a >= n ? a - n : 0);\n      } while (--e);\n    };\n  let yt = (t, e, a) => ((e << t.hash_shift) ^ a) & t.hash_mask;\n  const xt = (t) => {\n      const e = t.state;\n      let a = e.pending;\n      a > t.avail_out && (a = t.avail_out),\n        0 !== a &&\n          (t.output.set(e.pending_buf.subarray(e.pending_out, e.pending_out + a), t.next_out),\n          (t.next_out += a),\n          (e.pending_out += a),\n          (t.total_out += a),\n          (t.avail_out -= a),\n          (e.pending -= a),\n          0 === e.pending && (e.pending_out = 0));\n    },\n    zt = (t, e) => {\n      G(t, t.block_start >= 0 ? t.block_start : -1, t.strstart - t.block_start, e),\n        (t.block_start = t.strstart),\n        xt(t.strm);\n    },\n    At = (t, e) => {\n      t.pending_buf[t.pending++] = e;\n    },\n    Et = (t, e) => {\n      (t.pending_buf[t.pending++] = (e >>> 8) & 255), (t.pending_buf[t.pending++] = 255 & e);\n    },\n    Rt = (t, e, a, i) => {\n      let n = t.avail_in;\n      return (\n        n > i && (n = i),\n        0 === n\n          ? 0\n          : ((t.avail_in -= n),\n            e.set(t.input.subarray(t.next_in, t.next_in + n), a),\n            1 === t.state.wrap\n              ? (t.adler = C(t.adler, e, n, a))\n              : 2 === t.state.wrap && (t.adler = H(t.adler, e, n, a)),\n            (t.next_in += n),\n            (t.total_in += n),\n            n)\n      );\n    },\n    Zt = (t, e) => {\n      let a,\n        i,\n        n = t.max_chain_length,\n        s = t.strstart,\n        r = t.prev_length,\n        o = t.nice_match;\n      const l = t.strstart > t.w_size - ut ? t.strstart - (t.w_size - ut) : 0,\n        h = t.window,\n        d = t.w_mask,\n        _ = t.prev,\n        f = t.strstart + ct;\n      let c = h[s + r - 1],\n        u = h[s + r];\n      t.prev_length >= t.good_match && (n >>= 2), o > t.lookahead && (o = t.lookahead);\n      do {\n        if (((a = e), h[a + r] === u && h[a + r - 1] === c && h[a] === h[s] && h[++a] === h[s + 1])) {\n          (s += 2), a++;\n          do {} while (\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            s < f\n          );\n          if (((i = ct - (f - s)), (s = f - ct), i > r)) {\n            if (((t.match_start = e), (r = i), i >= o)) break;\n            (c = h[s + r - 1]), (u = h[s + r]);\n          }\n        }\n      } while ((e = _[e & d]) > l && 0 != --n);\n      return r <= t.lookahead ? r : t.lookahead;\n    },\n    Ut = (t) => {\n      const e = t.w_size;\n      let a, i, n;\n      do {\n        if (\n          ((i = t.window_size - t.lookahead - t.strstart),\n          t.strstart >= e + (e - ut) &&\n            (t.window.set(t.window.subarray(e, e + e - i), 0),\n            (t.match_start -= e),\n            (t.strstart -= e),\n            (t.block_start -= e),\n            t.insert > t.strstart && (t.insert = t.strstart),\n            vt(t),\n            (i += e)),\n          0 === t.strm.avail_in)\n        )\n          break;\n        if (((a = Rt(t.strm, t.window, t.strstart + t.lookahead, i)), (t.lookahead += a), t.lookahead + t.insert >= 3))\n          for (\n            n = t.strstart - t.insert, t.ins_h = t.window[n], t.ins_h = yt(t, t.ins_h, t.window[n + 1]);\n            t.insert &&\n            ((t.ins_h = yt(t, t.ins_h, t.window[n + 3 - 1])),\n            (t.prev[n & t.w_mask] = t.head[t.ins_h]),\n            (t.head[t.ins_h] = n),\n            n++,\n            t.insert--,\n            !(t.lookahead + t.insert < 3));\n\n          );\n      } while (t.lookahead < ut && 0 !== t.strm.avail_in);\n    },\n    St = (t, e) => {\n      let a,\n        i,\n        n,\n        s = t.pending_buf_size - 5 > t.w_size ? t.w_size : t.pending_buf_size - 5,\n        r = 0,\n        o = t.strm.avail_in;\n      do {\n        if (((a = 65535), (n = (t.bi_valid + 42) >> 3), t.strm.avail_out < n)) break;\n        if (\n          ((n = t.strm.avail_out - n),\n          (i = t.strstart - t.block_start),\n          a > i + t.strm.avail_in && (a = i + t.strm.avail_in),\n          a > n && (a = n),\n          a < s && ((0 === a && e !== V) || e === q || a !== i + t.strm.avail_in))\n        )\n          break;\n        (r = e === V && a === i + t.strm.avail_in ? 1 : 0),\n          Y(t, 0, 0, r),\n          (t.pending_buf[t.pending - 4] = a),\n          (t.pending_buf[t.pending - 3] = a >> 8),\n          (t.pending_buf[t.pending - 2] = ~a),\n          (t.pending_buf[t.pending - 1] = ~a >> 8),\n          xt(t.strm),\n          i &&\n            (i > a && (i = a),\n            t.strm.output.set(t.window.subarray(t.block_start, t.block_start + i), t.strm.next_out),\n            (t.strm.next_out += i),\n            (t.strm.avail_out -= i),\n            (t.strm.total_out += i),\n            (t.block_start += i),\n            (a -= i)),\n          a &&\n            (Rt(t.strm, t.strm.output, t.strm.next_out, a),\n            (t.strm.next_out += a),\n            (t.strm.avail_out -= a),\n            (t.strm.total_out += a));\n      } while (0 === r);\n      return (\n        (o -= t.strm.avail_in),\n        o &&\n          (o >= t.w_size\n            ? ((t.matches = 2),\n              t.window.set(t.strm.input.subarray(t.strm.next_in - t.w_size, t.strm.next_in), 0),\n              (t.strstart = t.w_size),\n              (t.insert = t.strstart))\n            : (t.window_size - t.strstart <= o &&\n                ((t.strstart -= t.w_size),\n                t.window.set(t.window.subarray(t.w_size, t.w_size + t.strstart), 0),\n                t.matches < 2 && t.matches++,\n                t.insert > t.strstart && (t.insert = t.strstart)),\n              t.window.set(t.strm.input.subarray(t.strm.next_in - o, t.strm.next_in), t.strstart),\n              (t.strstart += o),\n              (t.insert += o > t.w_size - t.insert ? t.w_size - t.insert : o)),\n          (t.block_start = t.strstart)),\n        t.high_water < t.strstart && (t.high_water = t.strstart),\n        r\n          ? 4\n          : e !== q && e !== V && 0 === t.strm.avail_in && t.strstart === t.block_start\n          ? 2\n          : ((n = t.window_size - t.strstart),\n            t.strm.avail_in > n &&\n              t.block_start >= t.w_size &&\n              ((t.block_start -= t.w_size),\n              (t.strstart -= t.w_size),\n              t.window.set(t.window.subarray(t.w_size, t.w_size + t.strstart), 0),\n              t.matches < 2 && t.matches++,\n              (n += t.w_size),\n              t.insert > t.strstart && (t.insert = t.strstart)),\n            n > t.strm.avail_in && (n = t.strm.avail_in),\n            n &&\n              (Rt(t.strm, t.window, t.strstart, n),\n              (t.strstart += n),\n              (t.insert += n > t.w_size - t.insert ? t.w_size - t.insert : n)),\n            t.high_water < t.strstart && (t.high_water = t.strstart),\n            (n = (t.bi_valid + 42) >> 3),\n            (n = t.pending_buf_size - n > 65535 ? 65535 : t.pending_buf_size - n),\n            (s = n > t.w_size ? t.w_size : n),\n            (i = t.strstart - t.block_start),\n            (i >= s || ((i || e === V) && e !== q && 0 === t.strm.avail_in && i <= n)) &&\n              ((a = i > n ? n : i),\n              (r = e === V && 0 === t.strm.avail_in && a === i ? 1 : 0),\n              Y(t, t.block_start, a, r),\n              (t.block_start += a),\n              xt(t.strm)),\n            r ? 3 : 1)\n      );\n    },\n    Dt = (t, e) => {\n      let a, i;\n      for (;;) {\n        if (t.lookahead < ut) {\n          if ((Ut(t), t.lookahead < ut && e === q)) return 1;\n          if (0 === t.lookahead) break;\n        }\n        if (\n          ((a = 0),\n          t.lookahead >= 3 &&\n            ((t.ins_h = yt(t, t.ins_h, t.window[t.strstart + 3 - 1])),\n            (a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),\n            (t.head[t.ins_h] = t.strstart)),\n          0 !== a && t.strstart - a <= t.w_size - ut && (t.match_length = Zt(t, a)),\n          t.match_length >= 3)\n        )\n          if (\n            ((i = X(t, t.strstart - t.match_start, t.match_length - 3)),\n            (t.lookahead -= t.match_length),\n            t.match_length <= t.max_lazy_match && t.lookahead >= 3)\n          ) {\n            t.match_length--;\n            do {\n              t.strstart++,\n                (t.ins_h = yt(t, t.ins_h, t.window[t.strstart + 3 - 1])),\n                (a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),\n                (t.head[t.ins_h] = t.strstart);\n            } while (0 != --t.match_length);\n            t.strstart++;\n          } else\n            (t.strstart += t.match_length),\n              (t.match_length = 0),\n              (t.ins_h = t.window[t.strstart]),\n              (t.ins_h = yt(t, t.ins_h, t.window[t.strstart + 1]));\n        else (i = X(t, 0, t.window[t.strstart])), t.lookahead--, t.strstart++;\n        if (i && (zt(t, !1), 0 === t.strm.avail_out)) return 1;\n      }\n      return (\n        (t.insert = t.strstart < 2 ? t.strstart : 2),\n        e === V\n          ? (zt(t, !0), 0 === t.strm.avail_out ? 3 : 4)\n          : t.sym_next && (zt(t, !1), 0 === t.strm.avail_out)\n          ? 1\n          : 2\n      );\n    },\n    Tt = (t, e) => {\n      let a, i, n;\n      for (;;) {\n        if (t.lookahead < ut) {\n          if ((Ut(t), t.lookahead < ut && e === q)) return 1;\n          if (0 === t.lookahead) break;\n        }\n        if (\n          ((a = 0),\n          t.lookahead >= 3 &&\n            ((t.ins_h = yt(t, t.ins_h, t.window[t.strstart + 3 - 1])),\n            (a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),\n            (t.head[t.ins_h] = t.strstart)),\n          (t.prev_length = t.match_length),\n          (t.prev_match = t.match_start),\n          (t.match_length = 2),\n          0 !== a &&\n            t.prev_length < t.max_lazy_match &&\n            t.strstart - a <= t.w_size - ut &&\n            ((t.match_length = Zt(t, a)),\n            t.match_length <= 5 &&\n              (t.strategy === rt || (3 === t.match_length && t.strstart - t.match_start > 4096)) &&\n              (t.match_length = 2)),\n          t.prev_length >= 3 && t.match_length <= t.prev_length)\n        ) {\n          (n = t.strstart + t.lookahead - 3),\n            (i = X(t, t.strstart - 1 - t.prev_match, t.prev_length - 3)),\n            (t.lookahead -= t.prev_length - 1),\n            (t.prev_length -= 2);\n          do {\n            ++t.strstart <= n &&\n              ((t.ins_h = yt(t, t.ins_h, t.window[t.strstart + 3 - 1])),\n              (a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),\n              (t.head[t.ins_h] = t.strstart));\n          } while (0 != --t.prev_length);\n          if (((t.match_available = 0), (t.match_length = 2), t.strstart++, i && (zt(t, !1), 0 === t.strm.avail_out)))\n            return 1;\n        } else if (t.match_available) {\n          if (\n            ((i = X(t, 0, t.window[t.strstart - 1])),\n            i && zt(t, !1),\n            t.strstart++,\n            t.lookahead--,\n            0 === t.strm.avail_out)\n          )\n            return 1;\n        } else (t.match_available = 1), t.strstart++, t.lookahead--;\n      }\n      return (\n        t.match_available && ((i = X(t, 0, t.window[t.strstart - 1])), (t.match_available = 0)),\n        (t.insert = t.strstart < 2 ? t.strstart : 2),\n        e === V\n          ? (zt(t, !0), 0 === t.strm.avail_out ? 3 : 4)\n          : t.sym_next && (zt(t, !1), 0 === t.strm.avail_out)\n          ? 1\n          : 2\n      );\n    };\n  function Ot(t, e, a, i, n) {\n    (this.good_length = t), (this.max_lazy = e), (this.nice_length = a), (this.max_chain = i), (this.func = n);\n  }\n  const It = [\n    new Ot(0, 0, 0, 0, St),\n    new Ot(4, 4, 8, 4, Dt),\n    new Ot(4, 5, 16, 8, Dt),\n    new Ot(4, 6, 32, 32, Dt),\n    new Ot(4, 4, 16, 16, Tt),\n    new Ot(8, 16, 32, 32, Tt),\n    new Ot(8, 16, 128, 128, Tt),\n    new Ot(8, 32, 128, 256, Tt),\n    new Ot(32, 128, 258, 1024, Tt),\n    new Ot(32, 258, 258, 4096, Tt),\n  ];\n  function Ft() {\n    (this.strm = null),\n      (this.status = 0),\n      (this.pending_buf = null),\n      (this.pending_buf_size = 0),\n      (this.pending_out = 0),\n      (this.pending = 0),\n      (this.wrap = 0),\n      (this.gzhead = null),\n      (this.gzindex = 0),\n      (this.method = ft),\n      (this.last_flush = -1),\n      (this.w_size = 0),\n      (this.w_bits = 0),\n      (this.w_mask = 0),\n      (this.window = null),\n      (this.window_size = 0),\n      (this.prev = null),\n      (this.head = null),\n      (this.ins_h = 0),\n      (this.hash_size = 0),\n      (this.hash_bits = 0),\n      (this.hash_mask = 0),\n      (this.hash_shift = 0),\n      (this.block_start = 0),\n      (this.match_length = 0),\n      (this.prev_match = 0),\n      (this.match_available = 0),\n      (this.strstart = 0),\n      (this.match_start = 0),\n      (this.lookahead = 0),\n      (this.prev_length = 0),\n      (this.max_chain_length = 0),\n      (this.max_lazy_match = 0),\n      (this.level = 0),\n      (this.strategy = 0),\n      (this.good_match = 0),\n      (this.nice_match = 0),\n      (this.dyn_ltree = new Uint16Array(1146)),\n      (this.dyn_dtree = new Uint16Array(122)),\n      (this.bl_tree = new Uint16Array(78)),\n      kt(this.dyn_ltree),\n      kt(this.dyn_dtree),\n      kt(this.bl_tree),\n      (this.l_desc = null),\n      (this.d_desc = null),\n      (this.bl_desc = null),\n      (this.bl_count = new Uint16Array(16)),\n      (this.heap = new Uint16Array(573)),\n      kt(this.heap),\n      (this.heap_len = 0),\n      (this.heap_max = 0),\n      (this.depth = new Uint16Array(573)),\n      kt(this.depth),\n      (this.sym_buf = 0),\n      (this.lit_bufsize = 0),\n      (this.sym_next = 0),\n      (this.sym_end = 0),\n      (this.opt_len = 0),\n      (this.static_len = 0),\n      (this.matches = 0),\n      (this.insert = 0),\n      (this.bi_buf = 0),\n      (this.bi_valid = 0);\n  }\n  const Lt = (t) => {\n      if (!t) return 1;\n      const e = t.state;\n      return !e ||\n        e.strm !== t ||\n        (e.status !== wt &&\n          57 !== e.status &&\n          69 !== e.status &&\n          73 !== e.status &&\n          91 !== e.status &&\n          103 !== e.status &&\n          e.status !== mt &&\n          e.status !== bt)\n        ? 1\n        : 0;\n    },\n    Nt = (t) => {\n      if (Lt(t)) return gt(t, at);\n      (t.total_in = t.total_out = 0), (t.data_type = _t);\n      const e = t.state;\n      return (\n        (e.pending = 0),\n        (e.pending_out = 0),\n        e.wrap < 0 && (e.wrap = -e.wrap),\n        (e.status = 2 === e.wrap ? 57 : e.wrap ? wt : mt),\n        (t.adler = 2 === e.wrap ? 0 : 1),\n        (e.last_flush = -2),\n        P(e),\n        tt\n      );\n    },\n    Bt = (t) => {\n      const e = Nt(t);\n      var a;\n      return (\n        e === tt &&\n          (((a = t.state).window_size = 2 * a.w_size),\n          kt(a.head),\n          (a.max_lazy_match = It[a.level].max_lazy),\n          (a.good_match = It[a.level].good_length),\n          (a.nice_match = It[a.level].nice_length),\n          (a.max_chain_length = It[a.level].max_chain),\n          (a.strstart = 0),\n          (a.block_start = 0),\n          (a.lookahead = 0),\n          (a.insert = 0),\n          (a.match_length = a.prev_length = 2),\n          (a.match_available = 0),\n          (a.ins_h = 0)),\n        e\n      );\n    },\n    Ct = (t, e, a, i, n, s) => {\n      if (!t) return at;\n      let r = 1;\n      if (\n        (e === st && (e = 6),\n        i < 0 ? ((r = 0), (i = -i)) : i > 15 && ((r = 2), (i -= 16)),\n        n < 1 || n > 9 || a !== ft || i < 8 || i > 15 || e < 0 || e > 9 || s < 0 || s > ht || (8 === i && 1 !== r))\n      )\n        return gt(t, at);\n      8 === i && (i = 9);\n      const o = new Ft();\n      return (\n        (t.state = o),\n        (o.strm = t),\n        (o.status = wt),\n        (o.wrap = r),\n        (o.gzhead = null),\n        (o.w_bits = i),\n        (o.w_size = 1 << o.w_bits),\n        (o.w_mask = o.w_size - 1),\n        (o.hash_bits = n + 7),\n        (o.hash_size = 1 << o.hash_bits),\n        (o.hash_mask = o.hash_size - 1),\n        (o.hash_shift = ~~((o.hash_bits + 3 - 1) / 3)),\n        (o.window = new Uint8Array(2 * o.w_size)),\n        (o.head = new Uint16Array(o.hash_size)),\n        (o.prev = new Uint16Array(o.w_size)),\n        (o.lit_bufsize = 1 << (n + 6)),\n        (o.pending_buf_size = 4 * o.lit_bufsize),\n        (o.pending_buf = new Uint8Array(o.pending_buf_size)),\n        (o.sym_buf = o.lit_bufsize),\n        (o.sym_end = 3 * (o.lit_bufsize - 1)),\n        (o.level = e),\n        (o.strategy = s),\n        (o.method = a),\n        Bt(t)\n      );\n    };\n  var Mt = {\n    deflateInit: (t, e) => Ct(t, e, ft, 15, 8, dt),\n    deflateInit2: Ct,\n    deflateReset: Bt,\n    deflateResetKeep: Nt,\n    deflateSetHeader: (t, e) => (Lt(t) || 2 !== t.state.wrap ? at : ((t.state.gzhead = e), tt)),\n    deflate: (t, e) => {\n      if (Lt(t) || e > $ || e < 0) return t ? gt(t, at) : at;\n      const a = t.state;\n      if (!t.output || (0 !== t.avail_in && !t.input) || (a.status === bt && e !== V))\n        return gt(t, 0 === t.avail_out ? nt : at);\n      const i = a.last_flush;\n      if (((a.last_flush = e), 0 !== a.pending)) {\n        if ((xt(t), 0 === t.avail_out)) return (a.last_flush = -1), tt;\n      } else if (0 === t.avail_in && pt(e) <= pt(i) && e !== V) return gt(t, nt);\n      if (a.status === bt && 0 !== t.avail_in) return gt(t, nt);\n      if ((a.status === wt && 0 === a.wrap && (a.status = mt), a.status === wt)) {\n        let e = (ft + ((a.w_bits - 8) << 4)) << 8,\n          i = -1;\n        if (\n          ((i = a.strategy >= ot || a.level < 2 ? 0 : a.level < 6 ? 1 : 6 === a.level ? 2 : 3),\n          (e |= i << 6),\n          0 !== a.strstart && (e |= 32),\n          (e += 31 - (e % 31)),\n          Et(a, e),\n          0 !== a.strstart && (Et(a, t.adler >>> 16), Et(a, 65535 & t.adler)),\n          (t.adler = 1),\n          (a.status = mt),\n          xt(t),\n          0 !== a.pending)\n        )\n          return (a.last_flush = -1), tt;\n      }\n      if (57 === a.status)\n        if (((t.adler = 0), At(a, 31), At(a, 139), At(a, 8), a.gzhead))\n          At(\n            a,\n            (a.gzhead.text ? 1 : 0) +\n              (a.gzhead.hcrc ? 2 : 0) +\n              (a.gzhead.extra ? 4 : 0) +\n              (a.gzhead.name ? 8 : 0) +\n              (a.gzhead.comment ? 16 : 0)\n          ),\n            At(a, 255 & a.gzhead.time),\n            At(a, (a.gzhead.time >> 8) & 255),\n            At(a, (a.gzhead.time >> 16) & 255),\n            At(a, (a.gzhead.time >> 24) & 255),\n            At(a, 9 === a.level ? 2 : a.strategy >= ot || a.level < 2 ? 4 : 0),\n            At(a, 255 & a.gzhead.os),\n            a.gzhead.extra &&\n              a.gzhead.extra.length &&\n              (At(a, 255 & a.gzhead.extra.length), At(a, (a.gzhead.extra.length >> 8) & 255)),\n            a.gzhead.hcrc && (t.adler = H(t.adler, a.pending_buf, a.pending, 0)),\n            (a.gzindex = 0),\n            (a.status = 69);\n        else if (\n          (At(a, 0),\n          At(a, 0),\n          At(a, 0),\n          At(a, 0),\n          At(a, 0),\n          At(a, 9 === a.level ? 2 : a.strategy >= ot || a.level < 2 ? 4 : 0),\n          At(a, 3),\n          (a.status = mt),\n          xt(t),\n          0 !== a.pending)\n        )\n          return (a.last_flush = -1), tt;\n      if (69 === a.status) {\n        if (a.gzhead.extra) {\n          let e = a.pending,\n            i = (65535 & a.gzhead.extra.length) - a.gzindex;\n          for (; a.pending + i > a.pending_buf_size; ) {\n            let n = a.pending_buf_size - a.pending;\n            if (\n              (a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex, a.gzindex + n), a.pending),\n              (a.pending = a.pending_buf_size),\n              a.gzhead.hcrc && a.pending > e && (t.adler = H(t.adler, a.pending_buf, a.pending - e, e)),\n              (a.gzindex += n),\n              xt(t),\n              0 !== a.pending)\n            )\n              return (a.last_flush = -1), tt;\n            (e = 0), (i -= n);\n          }\n          let n = new Uint8Array(a.gzhead.extra);\n          a.pending_buf.set(n.subarray(a.gzindex, a.gzindex + i), a.pending),\n            (a.pending += i),\n            a.gzhead.hcrc && a.pending > e && (t.adler = H(t.adler, a.pending_buf, a.pending - e, e)),\n            (a.gzindex = 0);\n        }\n        a.status = 73;\n      }\n      if (73 === a.status) {\n        if (a.gzhead.name) {\n          let e,\n            i = a.pending;\n          do {\n            if (a.pending === a.pending_buf_size) {\n              if (\n                (a.gzhead.hcrc && a.pending > i && (t.adler = H(t.adler, a.pending_buf, a.pending - i, i)),\n                xt(t),\n                0 !== a.pending)\n              )\n                return (a.last_flush = -1), tt;\n              i = 0;\n            }\n            (e = a.gzindex < a.gzhead.name.length ? 255 & a.gzhead.name.charCodeAt(a.gzindex++) : 0), At(a, e);\n          } while (0 !== e);\n          a.gzhead.hcrc && a.pending > i && (t.adler = H(t.adler, a.pending_buf, a.pending - i, i)), (a.gzindex = 0);\n        }\n        a.status = 91;\n      }\n      if (91 === a.status) {\n        if (a.gzhead.comment) {\n          let e,\n            i = a.pending;\n          do {\n            if (a.pending === a.pending_buf_size) {\n              if (\n                (a.gzhead.hcrc && a.pending > i && (t.adler = H(t.adler, a.pending_buf, a.pending - i, i)),\n                xt(t),\n                0 !== a.pending)\n              )\n                return (a.last_flush = -1), tt;\n              i = 0;\n            }\n            (e = a.gzindex < a.gzhead.comment.length ? 255 & a.gzhead.comment.charCodeAt(a.gzindex++) : 0), At(a, e);\n          } while (0 !== e);\n          a.gzhead.hcrc && a.pending > i && (t.adler = H(t.adler, a.pending_buf, a.pending - i, i));\n        }\n        a.status = 103;\n      }\n      if (103 === a.status) {\n        if (a.gzhead.hcrc) {\n          if (a.pending + 2 > a.pending_buf_size && (xt(t), 0 !== a.pending)) return (a.last_flush = -1), tt;\n          At(a, 255 & t.adler), At(a, (t.adler >> 8) & 255), (t.adler = 0);\n        }\n        if (((a.status = mt), xt(t), 0 !== a.pending)) return (a.last_flush = -1), tt;\n      }\n      if (0 !== t.avail_in || 0 !== a.lookahead || (e !== q && a.status !== bt)) {\n        let i =\n          0 === a.level\n            ? St(a, e)\n            : a.strategy === ot\n            ? ((t, e) => {\n                let a;\n                for (;;) {\n                  if (0 === t.lookahead && (Ut(t), 0 === t.lookahead)) {\n                    if (e === q) return 1;\n                    break;\n                  }\n                  if (\n                    ((t.match_length = 0),\n                    (a = X(t, 0, t.window[t.strstart])),\n                    t.lookahead--,\n                    t.strstart++,\n                    a && (zt(t, !1), 0 === t.strm.avail_out))\n                  )\n                    return 1;\n                }\n                return (\n                  (t.insert = 0),\n                  e === V\n                    ? (zt(t, !0), 0 === t.strm.avail_out ? 3 : 4)\n                    : t.sym_next && (zt(t, !1), 0 === t.strm.avail_out)\n                    ? 1\n                    : 2\n                );\n              })(a, e)\n            : a.strategy === lt\n            ? ((t, e) => {\n                let a, i, n, s;\n                const r = t.window;\n                for (;;) {\n                  if (t.lookahead <= ct) {\n                    if ((Ut(t), t.lookahead <= ct && e === q)) return 1;\n                    if (0 === t.lookahead) break;\n                  }\n                  if (\n                    ((t.match_length = 0),\n                    t.lookahead >= 3 &&\n                      t.strstart > 0 &&\n                      ((n = t.strstart - 1), (i = r[n]), i === r[++n] && i === r[++n] && i === r[++n]))\n                  ) {\n                    s = t.strstart + ct;\n                    do {} while (\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      n < s\n                    );\n                    (t.match_length = ct - (s - n)), t.match_length > t.lookahead && (t.match_length = t.lookahead);\n                  }\n                  if (\n                    (t.match_length >= 3\n                      ? ((a = X(t, 1, t.match_length - 3)),\n                        (t.lookahead -= t.match_length),\n                        (t.strstart += t.match_length),\n                        (t.match_length = 0))\n                      : ((a = X(t, 0, t.window[t.strstart])), t.lookahead--, t.strstart++),\n                    a && (zt(t, !1), 0 === t.strm.avail_out))\n                  )\n                    return 1;\n                }\n                return (\n                  (t.insert = 0),\n                  e === V\n                    ? (zt(t, !0), 0 === t.strm.avail_out ? 3 : 4)\n                    : t.sym_next && (zt(t, !1), 0 === t.strm.avail_out)\n                    ? 1\n                    : 2\n                );\n              })(a, e)\n            : It[a.level].func(a, e);\n        if (((3 !== i && 4 !== i) || (a.status = bt), 1 === i || 3 === i))\n          return 0 === t.avail_out && (a.last_flush = -1), tt;\n        if (\n          2 === i &&\n          (e === J\n            ? W(a)\n            : e !== $ &&\n              (Y(a, 0, 0, !1),\n              e === Q && (kt(a.head), 0 === a.lookahead && ((a.strstart = 0), (a.block_start = 0), (a.insert = 0)))),\n          xt(t),\n          0 === t.avail_out)\n        )\n          return (a.last_flush = -1), tt;\n      }\n      return e !== V\n        ? tt\n        : a.wrap <= 0\n        ? et\n        : (2 === a.wrap\n            ? (At(a, 255 & t.adler),\n              At(a, (t.adler >> 8) & 255),\n              At(a, (t.adler >> 16) & 255),\n              At(a, (t.adler >> 24) & 255),\n              At(a, 255 & t.total_in),\n              At(a, (t.total_in >> 8) & 255),\n              At(a, (t.total_in >> 16) & 255),\n              At(a, (t.total_in >> 24) & 255))\n            : (Et(a, t.adler >>> 16), Et(a, 65535 & t.adler)),\n          xt(t),\n          a.wrap > 0 && (a.wrap = -a.wrap),\n          0 !== a.pending ? tt : et);\n    },\n    deflateEnd: (t) => {\n      if (Lt(t)) return at;\n      const e = t.state.status;\n      return (t.state = null), e === mt ? gt(t, it) : tt;\n    },\n    deflateSetDictionary: (t, e) => {\n      let a = e.length;\n      if (Lt(t)) return at;\n      const i = t.state,\n        n = i.wrap;\n      if (2 === n || (1 === n && i.status !== wt) || i.lookahead) return at;\n      if ((1 === n && (t.adler = C(t.adler, e, a, 0)), (i.wrap = 0), a >= i.w_size)) {\n        0 === n && (kt(i.head), (i.strstart = 0), (i.block_start = 0), (i.insert = 0));\n        let t = new Uint8Array(i.w_size);\n        t.set(e.subarray(a - i.w_size, a), 0), (e = t), (a = i.w_size);\n      }\n      const s = t.avail_in,\n        r = t.next_in,\n        o = t.input;\n      for (t.avail_in = a, t.next_in = 0, t.input = e, Ut(i); i.lookahead >= 3; ) {\n        let t = i.strstart,\n          e = i.lookahead - 2;\n        do {\n          (i.ins_h = yt(i, i.ins_h, i.window[t + 3 - 1])),\n            (i.prev[t & i.w_mask] = i.head[i.ins_h]),\n            (i.head[i.ins_h] = t),\n            t++;\n        } while (--e);\n        (i.strstart = t), (i.lookahead = 2), Ut(i);\n      }\n      return (\n        (i.strstart += i.lookahead),\n        (i.block_start = i.strstart),\n        (i.insert = i.lookahead),\n        (i.lookahead = 0),\n        (i.match_length = i.prev_length = 2),\n        (i.match_available = 0),\n        (t.next_in = r),\n        (t.input = o),\n        (t.avail_in = s),\n        (i.wrap = n),\n        tt\n      );\n    },\n    deflateInfo: 'pako deflate (from Nodeca project)',\n  };\n  const Ht = (t, e) => Object.prototype.hasOwnProperty.call(t, e);\n  var jt = function (t) {\n      const e = Array.prototype.slice.call(arguments, 1);\n      for (; e.length; ) {\n        const a = e.shift();\n        if (a) {\n          if ('object' != typeof a) throw new TypeError(a + 'must be non-object');\n          for (const e in a) Ht(a, e) && (t[e] = a[e]);\n        }\n      }\n      return t;\n    },\n    Kt = (t) => {\n      let e = 0;\n      for (let a = 0, i = t.length; a < i; a++) e += t[a].length;\n      const a = new Uint8Array(e);\n      for (let e = 0, i = 0, n = t.length; e < n; e++) {\n        let n = t[e];\n        a.set(n, i), (i += n.length);\n      }\n      return a;\n    };\n  let Pt = !0;\n  try {\n    String.fromCharCode.apply(null, new Uint8Array(1));\n  } catch (t) {\n    Pt = !1;\n  }\n  const Yt = new Uint8Array(256);\n  for (let t = 0; t < 256; t++) Yt[t] = t >= 252 ? 6 : t >= 248 ? 5 : t >= 240 ? 4 : t >= 224 ? 3 : t >= 192 ? 2 : 1;\n  Yt[254] = Yt[254] = 1;\n  var Gt = (t) => {\n      if ('function' == typeof TextEncoder && TextEncoder.prototype.encode) return new TextEncoder().encode(t);\n      let e,\n        a,\n        i,\n        n,\n        s,\n        r = t.length,\n        o = 0;\n      for (n = 0; n < r; n++)\n        (a = t.charCodeAt(n)),\n          55296 == (64512 & a) &&\n            n + 1 < r &&\n            ((i = t.charCodeAt(n + 1)), 56320 == (64512 & i) && ((a = 65536 + ((a - 55296) << 10) + (i - 56320)), n++)),\n          (o += a < 128 ? 1 : a < 2048 ? 2 : a < 65536 ? 3 : 4);\n      for (e = new Uint8Array(o), s = 0, n = 0; s < o; n++)\n        (a = t.charCodeAt(n)),\n          55296 == (64512 & a) &&\n            n + 1 < r &&\n            ((i = t.charCodeAt(n + 1)), 56320 == (64512 & i) && ((a = 65536 + ((a - 55296) << 10) + (i - 56320)), n++)),\n          a < 128\n            ? (e[s++] = a)\n            : a < 2048\n            ? ((e[s++] = 192 | (a >>> 6)), (e[s++] = 128 | (63 & a)))\n            : a < 65536\n            ? ((e[s++] = 224 | (a >>> 12)), (e[s++] = 128 | ((a >>> 6) & 63)), (e[s++] = 128 | (63 & a)))\n            : ((e[s++] = 240 | (a >>> 18)),\n              (e[s++] = 128 | ((a >>> 12) & 63)),\n              (e[s++] = 128 | ((a >>> 6) & 63)),\n              (e[s++] = 128 | (63 & a)));\n      return e;\n    },\n    Xt = (t, e) => {\n      const a = e || t.length;\n      if ('function' == typeof TextDecoder && TextDecoder.prototype.decode)\n        return new TextDecoder().decode(t.subarray(0, e));\n      let i, n;\n      const s = new Array(2 * a);\n      for (n = 0, i = 0; i < a; ) {\n        let e = t[i++];\n        if (e < 128) {\n          s[n++] = e;\n          continue;\n        }\n        let r = Yt[e];\n        if (r > 4) (s[n++] = 65533), (i += r - 1);\n        else {\n          for (e &= 2 === r ? 31 : 3 === r ? 15 : 7; r > 1 && i < a; ) (e = (e << 6) | (63 & t[i++])), r--;\n          r > 1\n            ? (s[n++] = 65533)\n            : e < 65536\n            ? (s[n++] = e)\n            : ((e -= 65536), (s[n++] = 55296 | ((e >> 10) & 1023)), (s[n++] = 56320 | (1023 & e)));\n        }\n      }\n      return ((t, e) => {\n        if (e < 65534 && t.subarray && Pt)\n          return String.fromCharCode.apply(null, t.length === e ? t : t.subarray(0, e));\n        let a = '';\n        for (let i = 0; i < e; i++) a += String.fromCharCode(t[i]);\n        return a;\n      })(s, n);\n    },\n    Wt = (t, e) => {\n      (e = e || t.length) > t.length && (e = t.length);\n      let a = e - 1;\n      for (; a >= 0 && 128 == (192 & t[a]); ) a--;\n      return a < 0 || 0 === a ? e : a + Yt[t[a]] > e ? a : e;\n    };\n  var qt = function () {\n    (this.input = null),\n      (this.next_in = 0),\n      (this.avail_in = 0),\n      (this.total_in = 0),\n      (this.output = null),\n      (this.next_out = 0),\n      (this.avail_out = 0),\n      (this.total_out = 0),\n      (this.msg = ''),\n      (this.state = null),\n      (this.data_type = 2),\n      (this.adler = 0);\n  };\n  const Jt = Object.prototype.toString,\n    {\n      Z_NO_FLUSH: Qt,\n      Z_SYNC_FLUSH: Vt,\n      Z_FULL_FLUSH: $t,\n      Z_FINISH: te,\n      Z_OK: ee,\n      Z_STREAM_END: ae,\n      Z_DEFAULT_COMPRESSION: ie,\n      Z_DEFAULT_STRATEGY: ne,\n      Z_DEFLATED: se,\n    } = K;\n  function re(t) {\n    this.options = jt({ level: ie, method: se, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: ne }, t || {});\n    let e = this.options;\n    e.raw && e.windowBits > 0\n      ? (e.windowBits = -e.windowBits)\n      : e.gzip && e.windowBits > 0 && e.windowBits < 16 && (e.windowBits += 16),\n      (this.err = 0),\n      (this.msg = ''),\n      (this.ended = !1),\n      (this.chunks = []),\n      (this.strm = new qt()),\n      (this.strm.avail_out = 0);\n    let a = Mt.deflateInit2(this.strm, e.level, e.method, e.windowBits, e.memLevel, e.strategy);\n    if (a !== ee) throw new Error(j[a]);\n    if ((e.header && Mt.deflateSetHeader(this.strm, e.header), e.dictionary)) {\n      let t;\n      if (\n        ((t =\n          'string' == typeof e.dictionary\n            ? Gt(e.dictionary)\n            : '[object ArrayBuffer]' === Jt.call(e.dictionary)\n            ? new Uint8Array(e.dictionary)\n            : e.dictionary),\n        (a = Mt.deflateSetDictionary(this.strm, t)),\n        a !== ee)\n      )\n        throw new Error(j[a]);\n      this._dict_set = !0;\n    }\n  }\n  function oe(t, e) {\n    const a = new re(e);\n    if ((a.push(t, !0), a.err)) throw a.msg || j[a.err];\n    return a.result;\n  }\n  (re.prototype.push = function (t, e) {\n    const a = this.strm,\n      i = this.options.chunkSize;\n    let n, s;\n    if (this.ended) return !1;\n    for (\n      s = e === ~~e ? e : !0 === e ? te : Qt,\n        'string' == typeof t\n          ? (a.input = Gt(t))\n          : '[object ArrayBuffer]' === Jt.call(t)\n          ? (a.input = new Uint8Array(t))\n          : (a.input = t),\n        a.next_in = 0,\n        a.avail_in = a.input.length;\n      ;\n\n    )\n      if (\n        (0 === a.avail_out && ((a.output = new Uint8Array(i)), (a.next_out = 0), (a.avail_out = i)),\n        (s === Vt || s === $t) && a.avail_out <= 6)\n      )\n        this.onData(a.output.subarray(0, a.next_out)), (a.avail_out = 0);\n      else {\n        if (((n = Mt.deflate(a, s)), n === ae))\n          return (\n            a.next_out > 0 && this.onData(a.output.subarray(0, a.next_out)),\n            (n = Mt.deflateEnd(this.strm)),\n            this.onEnd(n),\n            (this.ended = !0),\n            n === ee\n          );\n        if (0 !== a.avail_out) {\n          if (s > 0 && a.next_out > 0) this.onData(a.output.subarray(0, a.next_out)), (a.avail_out = 0);\n          else if (0 === a.avail_in) break;\n        } else this.onData(a.output);\n      }\n    return !0;\n  }),\n    (re.prototype.onData = function (t) {\n      this.chunks.push(t);\n    }),\n    (re.prototype.onEnd = function (t) {\n      t === ee && (this.result = Kt(this.chunks)), (this.chunks = []), (this.err = t), (this.msg = this.strm.msg);\n    });\n  var le = {\n    Deflate: re,\n    deflate: oe,\n    deflateRaw: function (t, e) {\n      return ((e = e || {}).raw = !0), oe(t, e);\n    },\n    gzip: function (t, e) {\n      return ((e = e || {}).gzip = !0), oe(t, e);\n    },\n    constants: K,\n  };\n  const he = 16209;\n  var de = function (t, e) {\n    let a, i, n, s, r, o, l, h, d, _, f, c, u, w, m, b, g, p, k, v, y, x, z, A;\n    const E = t.state;\n    (a = t.next_in),\n      (z = t.input),\n      (i = a + (t.avail_in - 5)),\n      (n = t.next_out),\n      (A = t.output),\n      (s = n - (e - t.avail_out)),\n      (r = n + (t.avail_out - 257)),\n      (o = E.dmax),\n      (l = E.wsize),\n      (h = E.whave),\n      (d = E.wnext),\n      (_ = E.window),\n      (f = E.hold),\n      (c = E.bits),\n      (u = E.lencode),\n      (w = E.distcode),\n      (m = (1 << E.lenbits) - 1),\n      (b = (1 << E.distbits) - 1);\n    t: do {\n      c < 15 && ((f += z[a++] << c), (c += 8), (f += z[a++] << c), (c += 8)), (g = u[f & m]);\n      e: for (;;) {\n        if (((p = g >>> 24), (f >>>= p), (c -= p), (p = (g >>> 16) & 255), 0 === p)) A[n++] = 65535 & g;\n        else {\n          if (!(16 & p)) {\n            if (0 == (64 & p)) {\n              g = u[(65535 & g) + (f & ((1 << p) - 1))];\n              continue e;\n            }\n            if (32 & p) {\n              E.mode = 16191;\n              break t;\n            }\n            (t.msg = 'invalid literal/length code'), (E.mode = he);\n            break t;\n          }\n          (k = 65535 & g),\n            (p &= 15),\n            p && (c < p && ((f += z[a++] << c), (c += 8)), (k += f & ((1 << p) - 1)), (f >>>= p), (c -= p)),\n            c < 15 && ((f += z[a++] << c), (c += 8), (f += z[a++] << c), (c += 8)),\n            (g = w[f & b]);\n          a: for (;;) {\n            if (((p = g >>> 24), (f >>>= p), (c -= p), (p = (g >>> 16) & 255), !(16 & p))) {\n              if (0 == (64 & p)) {\n                g = w[(65535 & g) + (f & ((1 << p) - 1))];\n                continue a;\n              }\n              (t.msg = 'invalid distance code'), (E.mode = he);\n              break t;\n            }\n            if (\n              ((v = 65535 & g),\n              (p &= 15),\n              c < p && ((f += z[a++] << c), (c += 8), c < p && ((f += z[a++] << c), (c += 8))),\n              (v += f & ((1 << p) - 1)),\n              v > o)\n            ) {\n              (t.msg = 'invalid distance too far back'), (E.mode = he);\n              break t;\n            }\n            if (((f >>>= p), (c -= p), (p = n - s), v > p)) {\n              if (((p = v - p), p > h && E.sane)) {\n                (t.msg = 'invalid distance too far back'), (E.mode = he);\n                break t;\n              }\n              if (((y = 0), (x = _), 0 === d)) {\n                if (((y += l - p), p < k)) {\n                  k -= p;\n                  do {\n                    A[n++] = _[y++];\n                  } while (--p);\n                  (y = n - v), (x = A);\n                }\n              } else if (d < p) {\n                if (((y += l + d - p), (p -= d), p < k)) {\n                  k -= p;\n                  do {\n                    A[n++] = _[y++];\n                  } while (--p);\n                  if (((y = 0), d < k)) {\n                    (p = d), (k -= p);\n                    do {\n                      A[n++] = _[y++];\n                    } while (--p);\n                    (y = n - v), (x = A);\n                  }\n                }\n              } else if (((y += d - p), p < k)) {\n                k -= p;\n                do {\n                  A[n++] = _[y++];\n                } while (--p);\n                (y = n - v), (x = A);\n              }\n              for (; k > 2; ) (A[n++] = x[y++]), (A[n++] = x[y++]), (A[n++] = x[y++]), (k -= 3);\n              k && ((A[n++] = x[y++]), k > 1 && (A[n++] = x[y++]));\n            } else {\n              y = n - v;\n              do {\n                (A[n++] = A[y++]), (A[n++] = A[y++]), (A[n++] = A[y++]), (k -= 3);\n              } while (k > 2);\n              k && ((A[n++] = A[y++]), k > 1 && (A[n++] = A[y++]));\n            }\n            break;\n          }\n        }\n        break;\n      }\n    } while (a < i && n < r);\n    (k = c >> 3),\n      (a -= k),\n      (c -= k << 3),\n      (f &= (1 << c) - 1),\n      (t.next_in = a),\n      (t.next_out = n),\n      (t.avail_in = a < i ? i - a + 5 : 5 - (a - i)),\n      (t.avail_out = n < r ? r - n + 257 : 257 - (n - r)),\n      (E.hold = f),\n      (E.bits = c);\n  };\n  const _e = 15,\n    fe = new Uint16Array([\n      3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258,\n      0, 0,\n    ]),\n    ce = new Uint8Array([\n      16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21,\n      16, 72, 78,\n    ]),\n    ue = new Uint16Array([\n      1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n      8193, 12289, 16385, 24577, 0, 0,\n    ]),\n    we = new Uint8Array([\n      16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28,\n      29, 29, 64, 64,\n    ]);\n  var me = (t, e, a, i, n, s, r, o) => {\n    const l = o.bits;\n    let h,\n      d,\n      _,\n      f,\n      c,\n      u,\n      w = 0,\n      m = 0,\n      b = 0,\n      g = 0,\n      p = 0,\n      k = 0,\n      v = 0,\n      y = 0,\n      x = 0,\n      z = 0,\n      A = null;\n    const E = new Uint16Array(16),\n      R = new Uint16Array(16);\n    let Z,\n      U,\n      S,\n      D = null;\n    for (w = 0; w <= _e; w++) E[w] = 0;\n    for (m = 0; m < i; m++) E[e[a + m]]++;\n    for (p = l, g = _e; g >= 1 && 0 === E[g]; g--);\n    if ((p > g && (p = g), 0 === g)) return (n[s++] = 20971520), (n[s++] = 20971520), (o.bits = 1), 0;\n    for (b = 1; b < g && 0 === E[b]; b++);\n    for (p < b && (p = b), y = 1, w = 1; w <= _e; w++) if (((y <<= 1), (y -= E[w]), y < 0)) return -1;\n    if (y > 0 && (0 === t || 1 !== g)) return -1;\n    for (R[1] = 0, w = 1; w < _e; w++) R[w + 1] = R[w] + E[w];\n    for (m = 0; m < i; m++) 0 !== e[a + m] && (r[R[e[a + m]]++] = m);\n    if (\n      (0 === t ? ((A = D = r), (u = 20)) : 1 === t ? ((A = fe), (D = ce), (u = 257)) : ((A = ue), (D = we), (u = 0)),\n      (z = 0),\n      (m = 0),\n      (w = b),\n      (c = s),\n      (k = p),\n      (v = 0),\n      (_ = -1),\n      (x = 1 << p),\n      (f = x - 1),\n      (1 === t && x > 852) || (2 === t && x > 592))\n    )\n      return 1;\n    for (;;) {\n      (Z = w - v),\n        r[m] + 1 < u ? ((U = 0), (S = r[m])) : r[m] >= u ? ((U = D[r[m] - u]), (S = A[r[m] - u])) : ((U = 96), (S = 0)),\n        (h = 1 << (w - v)),\n        (d = 1 << k),\n        (b = d);\n      do {\n        (d -= h), (n[c + (z >> v) + d] = (Z << 24) | (U << 16) | S | 0);\n      } while (0 !== d);\n      for (h = 1 << (w - 1); z & h; ) h >>= 1;\n      if ((0 !== h ? ((z &= h - 1), (z += h)) : (z = 0), m++, 0 == --E[w])) {\n        if (w === g) break;\n        w = e[a + r[m]];\n      }\n      if (w > p && (z & f) !== _) {\n        for (0 === v && (v = p), c += b, k = w - v, y = 1 << k; k + v < g && ((y -= E[k + v]), !(y <= 0)); )\n          k++, (y <<= 1);\n        if (((x += 1 << k), (1 === t && x > 852) || (2 === t && x > 592))) return 1;\n        (_ = z & f), (n[_] = (p << 24) | (k << 16) | (c - s) | 0);\n      }\n    }\n    return 0 !== z && (n[c + z] = ((w - v) << 24) | (64 << 16) | 0), (o.bits = p), 0;\n  };\n  const {\n      Z_FINISH: be,\n      Z_BLOCK: ge,\n      Z_TREES: pe,\n      Z_OK: ke,\n      Z_STREAM_END: ve,\n      Z_NEED_DICT: ye,\n      Z_STREAM_ERROR: xe,\n      Z_DATA_ERROR: ze,\n      Z_MEM_ERROR: Ae,\n      Z_BUF_ERROR: Ee,\n      Z_DEFLATED: Re,\n    } = K,\n    Ze = 16180,\n    Ue = 16190,\n    Se = 16191,\n    De = 16192,\n    Te = 16194,\n    Oe = 16199,\n    Ie = 16200,\n    Fe = 16206,\n    Le = 16209,\n    Ne = (t) => ((t >>> 24) & 255) + ((t >>> 8) & 65280) + ((65280 & t) << 8) + ((255 & t) << 24);\n  function Be() {\n    (this.strm = null),\n      (this.mode = 0),\n      (this.last = !1),\n      (this.wrap = 0),\n      (this.havedict = !1),\n      (this.flags = 0),\n      (this.dmax = 0),\n      (this.check = 0),\n      (this.total = 0),\n      (this.head = null),\n      (this.wbits = 0),\n      (this.wsize = 0),\n      (this.whave = 0),\n      (this.wnext = 0),\n      (this.window = null),\n      (this.hold = 0),\n      (this.bits = 0),\n      (this.length = 0),\n      (this.offset = 0),\n      (this.extra = 0),\n      (this.lencode = null),\n      (this.distcode = null),\n      (this.lenbits = 0),\n      (this.distbits = 0),\n      (this.ncode = 0),\n      (this.nlen = 0),\n      (this.ndist = 0),\n      (this.have = 0),\n      (this.next = null),\n      (this.lens = new Uint16Array(320)),\n      (this.work = new Uint16Array(288)),\n      (this.lendyn = null),\n      (this.distdyn = null),\n      (this.sane = 0),\n      (this.back = 0),\n      (this.was = 0);\n  }\n  const Ce = (t) => {\n      if (!t) return 1;\n      const e = t.state;\n      return !e || e.strm !== t || e.mode < Ze || e.mode > 16211 ? 1 : 0;\n    },\n    Me = (t) => {\n      if (Ce(t)) return xe;\n      const e = t.state;\n      return (\n        (t.total_in = t.total_out = e.total = 0),\n        (t.msg = ''),\n        e.wrap && (t.adler = 1 & e.wrap),\n        (e.mode = Ze),\n        (e.last = 0),\n        (e.havedict = 0),\n        (e.flags = -1),\n        (e.dmax = 32768),\n        (e.head = null),\n        (e.hold = 0),\n        (e.bits = 0),\n        (e.lencode = e.lendyn = new Int32Array(852)),\n        (e.distcode = e.distdyn = new Int32Array(592)),\n        (e.sane = 1),\n        (e.back = -1),\n        ke\n      );\n    },\n    He = (t) => {\n      if (Ce(t)) return xe;\n      const e = t.state;\n      return (e.wsize = 0), (e.whave = 0), (e.wnext = 0), Me(t);\n    },\n    je = (t, e) => {\n      let a;\n      if (Ce(t)) return xe;\n      const i = t.state;\n      return (\n        e < 0 ? ((a = 0), (e = -e)) : ((a = 5 + (e >> 4)), e < 48 && (e &= 15)),\n        e && (e < 8 || e > 15)\n          ? xe\n          : (null !== i.window && i.wbits !== e && (i.window = null), (i.wrap = a), (i.wbits = e), He(t))\n      );\n    },\n    Ke = (t, e) => {\n      if (!t) return xe;\n      const a = new Be();\n      (t.state = a), (a.strm = t), (a.window = null), (a.mode = Ze);\n      const i = je(t, e);\n      return i !== ke && (t.state = null), i;\n    };\n  let Pe,\n    Ye,\n    Ge = !0;\n  const Xe = (t) => {\n      if (Ge) {\n        (Pe = new Int32Array(512)), (Ye = new Int32Array(32));\n        let e = 0;\n        for (; e < 144; ) t.lens[e++] = 8;\n        for (; e < 256; ) t.lens[e++] = 9;\n        for (; e < 280; ) t.lens[e++] = 7;\n        for (; e < 288; ) t.lens[e++] = 8;\n        for (me(1, t.lens, 0, 288, Pe, 0, t.work, { bits: 9 }), e = 0; e < 32; ) t.lens[e++] = 5;\n        me(2, t.lens, 0, 32, Ye, 0, t.work, { bits: 5 }), (Ge = !1);\n      }\n      (t.lencode = Pe), (t.lenbits = 9), (t.distcode = Ye), (t.distbits = 5);\n    },\n    We = (t, e, a, i) => {\n      let n;\n      const s = t.state;\n      return (\n        null === s.window &&\n          ((s.wsize = 1 << s.wbits), (s.wnext = 0), (s.whave = 0), (s.window = new Uint8Array(s.wsize))),\n        i >= s.wsize\n          ? (s.window.set(e.subarray(a - s.wsize, a), 0), (s.wnext = 0), (s.whave = s.wsize))\n          : ((n = s.wsize - s.wnext),\n            n > i && (n = i),\n            s.window.set(e.subarray(a - i, a - i + n), s.wnext),\n            (i -= n)\n              ? (s.window.set(e.subarray(a - i, a), 0), (s.wnext = i), (s.whave = s.wsize))\n              : ((s.wnext += n), s.wnext === s.wsize && (s.wnext = 0), s.whave < s.wsize && (s.whave += n))),\n        0\n      );\n    };\n  var qe = {\n    inflateReset: He,\n    inflateReset2: je,\n    inflateResetKeep: Me,\n    inflateInit: (t) => Ke(t, 15),\n    inflateInit2: Ke,\n    inflate: (t, e) => {\n      let a,\n        i,\n        n,\n        s,\n        r,\n        o,\n        l,\n        h,\n        d,\n        _,\n        f,\n        c,\n        u,\n        w,\n        m,\n        b,\n        g,\n        p,\n        k,\n        v,\n        y,\n        x,\n        z = 0;\n      const A = new Uint8Array(4);\n      let E, R;\n      const Z = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n      if (Ce(t) || !t.output || (!t.input && 0 !== t.avail_in)) return xe;\n      (a = t.state),\n        a.mode === Se && (a.mode = De),\n        (r = t.next_out),\n        (n = t.output),\n        (l = t.avail_out),\n        (s = t.next_in),\n        (i = t.input),\n        (o = t.avail_in),\n        (h = a.hold),\n        (d = a.bits),\n        (_ = o),\n        (f = l),\n        (x = ke);\n      t: for (;;)\n        switch (a.mode) {\n          case Ze:\n            if (0 === a.wrap) {\n              a.mode = De;\n              break;\n            }\n            for (; d < 16; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if (2 & a.wrap && 35615 === h) {\n              0 === a.wbits && (a.wbits = 15),\n                (a.check = 0),\n                (A[0] = 255 & h),\n                (A[1] = (h >>> 8) & 255),\n                (a.check = H(a.check, A, 2, 0)),\n                (h = 0),\n                (d = 0),\n                (a.mode = 16181);\n              break;\n            }\n            if ((a.head && (a.head.done = !1), !(1 & a.wrap) || (((255 & h) << 8) + (h >> 8)) % 31)) {\n              (t.msg = 'incorrect header check'), (a.mode = Le);\n              break;\n            }\n            if ((15 & h) !== Re) {\n              (t.msg = 'unknown compression method'), (a.mode = Le);\n              break;\n            }\n            if (((h >>>= 4), (d -= 4), (y = 8 + (15 & h)), 0 === a.wbits && (a.wbits = y), y > 15 || y > a.wbits)) {\n              (t.msg = 'invalid window size'), (a.mode = Le);\n              break;\n            }\n            (a.dmax = 1 << a.wbits),\n              (a.flags = 0),\n              (t.adler = a.check = 1),\n              (a.mode = 512 & h ? 16189 : Se),\n              (h = 0),\n              (d = 0);\n            break;\n          case 16181:\n            for (; d < 16; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if (((a.flags = h), (255 & a.flags) !== Re)) {\n              (t.msg = 'unknown compression method'), (a.mode = Le);\n              break;\n            }\n            if (57344 & a.flags) {\n              (t.msg = 'unknown header flags set'), (a.mode = Le);\n              break;\n            }\n            a.head && (a.head.text = (h >> 8) & 1),\n              512 & a.flags &&\n                4 & a.wrap &&\n                ((A[0] = 255 & h), (A[1] = (h >>> 8) & 255), (a.check = H(a.check, A, 2, 0))),\n              (h = 0),\n              (d = 0),\n              (a.mode = 16182);\n          case 16182:\n            for (; d < 32; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            a.head && (a.head.time = h),\n              512 & a.flags &&\n                4 & a.wrap &&\n                ((A[0] = 255 & h),\n                (A[1] = (h >>> 8) & 255),\n                (A[2] = (h >>> 16) & 255),\n                (A[3] = (h >>> 24) & 255),\n                (a.check = H(a.check, A, 4, 0))),\n              (h = 0),\n              (d = 0),\n              (a.mode = 16183);\n          case 16183:\n            for (; d < 16; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            a.head && ((a.head.xflags = 255 & h), (a.head.os = h >> 8)),\n              512 & a.flags &&\n                4 & a.wrap &&\n                ((A[0] = 255 & h), (A[1] = (h >>> 8) & 255), (a.check = H(a.check, A, 2, 0))),\n              (h = 0),\n              (d = 0),\n              (a.mode = 16184);\n          case 16184:\n            if (1024 & a.flags) {\n              for (; d < 16; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (a.length = h),\n                a.head && (a.head.extra_len = h),\n                512 & a.flags &&\n                  4 & a.wrap &&\n                  ((A[0] = 255 & h), (A[1] = (h >>> 8) & 255), (a.check = H(a.check, A, 2, 0))),\n                (h = 0),\n                (d = 0);\n            } else a.head && (a.head.extra = null);\n            a.mode = 16185;\n          case 16185:\n            if (\n              1024 & a.flags &&\n              ((c = a.length),\n              c > o && (c = o),\n              c &&\n                (a.head &&\n                  ((y = a.head.extra_len - a.length),\n                  a.head.extra || (a.head.extra = new Uint8Array(a.head.extra_len)),\n                  a.head.extra.set(i.subarray(s, s + c), y)),\n                512 & a.flags && 4 & a.wrap && (a.check = H(a.check, i, c, s)),\n                (o -= c),\n                (s += c),\n                (a.length -= c)),\n              a.length)\n            )\n              break t;\n            (a.length = 0), (a.mode = 16186);\n          case 16186:\n            if (2048 & a.flags) {\n              if (0 === o) break t;\n              c = 0;\n              do {\n                (y = i[s + c++]), a.head && y && a.length < 65536 && (a.head.name += String.fromCharCode(y));\n              } while (y && c < o);\n              if ((512 & a.flags && 4 & a.wrap && (a.check = H(a.check, i, c, s)), (o -= c), (s += c), y)) break t;\n            } else a.head && (a.head.name = null);\n            (a.length = 0), (a.mode = 16187);\n          case 16187:\n            if (4096 & a.flags) {\n              if (0 === o) break t;\n              c = 0;\n              do {\n                (y = i[s + c++]), a.head && y && a.length < 65536 && (a.head.comment += String.fromCharCode(y));\n              } while (y && c < o);\n              if ((512 & a.flags && 4 & a.wrap && (a.check = H(a.check, i, c, s)), (o -= c), (s += c), y)) break t;\n            } else a.head && (a.head.comment = null);\n            a.mode = 16188;\n          case 16188:\n            if (512 & a.flags) {\n              for (; d < 16; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              if (4 & a.wrap && h !== (65535 & a.check)) {\n                (t.msg = 'header crc mismatch'), (a.mode = Le);\n                break;\n              }\n              (h = 0), (d = 0);\n            }\n            a.head && ((a.head.hcrc = (a.flags >> 9) & 1), (a.head.done = !0)), (t.adler = a.check = 0), (a.mode = Se);\n            break;\n          case 16189:\n            for (; d < 32; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            (t.adler = a.check = Ne(h)), (h = 0), (d = 0), (a.mode = Ue);\n          case Ue:\n            if (0 === a.havedict)\n              return (\n                (t.next_out = r), (t.avail_out = l), (t.next_in = s), (t.avail_in = o), (a.hold = h), (a.bits = d), ye\n              );\n            (t.adler = a.check = 1), (a.mode = Se);\n          case Se:\n            if (e === ge || e === pe) break t;\n          case De:\n            if (a.last) {\n              (h >>>= 7 & d), (d -= 7 & d), (a.mode = Fe);\n              break;\n            }\n            for (; d < 3; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            switch (((a.last = 1 & h), (h >>>= 1), (d -= 1), 3 & h)) {\n              case 0:\n                a.mode = 16193;\n                break;\n              case 1:\n                if ((Xe(a), (a.mode = Oe), e === pe)) {\n                  (h >>>= 2), (d -= 2);\n                  break t;\n                }\n                break;\n              case 2:\n                a.mode = 16196;\n                break;\n              case 3:\n                (t.msg = 'invalid block type'), (a.mode = Le);\n            }\n            (h >>>= 2), (d -= 2);\n            break;\n          case 16193:\n            for (h >>>= 7 & d, d -= 7 & d; d < 32; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if ((65535 & h) != ((h >>> 16) ^ 65535)) {\n              (t.msg = 'invalid stored block lengths'), (a.mode = Le);\n              break;\n            }\n            if (((a.length = 65535 & h), (h = 0), (d = 0), (a.mode = Te), e === pe)) break t;\n          case Te:\n            a.mode = 16195;\n          case 16195:\n            if (((c = a.length), c)) {\n              if ((c > o && (c = o), c > l && (c = l), 0 === c)) break t;\n              n.set(i.subarray(s, s + c), r), (o -= c), (s += c), (l -= c), (r += c), (a.length -= c);\n              break;\n            }\n            a.mode = Se;\n            break;\n          case 16196:\n            for (; d < 14; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if (\n              ((a.nlen = 257 + (31 & h)),\n              (h >>>= 5),\n              (d -= 5),\n              (a.ndist = 1 + (31 & h)),\n              (h >>>= 5),\n              (d -= 5),\n              (a.ncode = 4 + (15 & h)),\n              (h >>>= 4),\n              (d -= 4),\n              a.nlen > 286 || a.ndist > 30)\n            ) {\n              (t.msg = 'too many length or distance symbols'), (a.mode = Le);\n              break;\n            }\n            (a.have = 0), (a.mode = 16197);\n          case 16197:\n            for (; a.have < a.ncode; ) {\n              for (; d < 3; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (a.lens[Z[a.have++]] = 7 & h), (h >>>= 3), (d -= 3);\n            }\n            for (; a.have < 19; ) a.lens[Z[a.have++]] = 0;\n            if (\n              ((a.lencode = a.lendyn),\n              (a.lenbits = 7),\n              (E = { bits: a.lenbits }),\n              (x = me(0, a.lens, 0, 19, a.lencode, 0, a.work, E)),\n              (a.lenbits = E.bits),\n              x)\n            ) {\n              (t.msg = 'invalid code lengths set'), (a.mode = Le);\n              break;\n            }\n            (a.have = 0), (a.mode = 16198);\n          case 16198:\n            for (; a.have < a.nlen + a.ndist; ) {\n              for (\n                ;\n                (z = a.lencode[h & ((1 << a.lenbits) - 1)]),\n                  (m = z >>> 24),\n                  (b = (z >>> 16) & 255),\n                  (g = 65535 & z),\n                  !(m <= d);\n\n              ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              if (g < 16) (h >>>= m), (d -= m), (a.lens[a.have++] = g);\n              else {\n                if (16 === g) {\n                  for (R = m + 2; d < R; ) {\n                    if (0 === o) break t;\n                    o--, (h += i[s++] << d), (d += 8);\n                  }\n                  if (((h >>>= m), (d -= m), 0 === a.have)) {\n                    (t.msg = 'invalid bit length repeat'), (a.mode = Le);\n                    break;\n                  }\n                  (y = a.lens[a.have - 1]), (c = 3 + (3 & h)), (h >>>= 2), (d -= 2);\n                } else if (17 === g) {\n                  for (R = m + 3; d < R; ) {\n                    if (0 === o) break t;\n                    o--, (h += i[s++] << d), (d += 8);\n                  }\n                  (h >>>= m), (d -= m), (y = 0), (c = 3 + (7 & h)), (h >>>= 3), (d -= 3);\n                } else {\n                  for (R = m + 7; d < R; ) {\n                    if (0 === o) break t;\n                    o--, (h += i[s++] << d), (d += 8);\n                  }\n                  (h >>>= m), (d -= m), (y = 0), (c = 11 + (127 & h)), (h >>>= 7), (d -= 7);\n                }\n                if (a.have + c > a.nlen + a.ndist) {\n                  (t.msg = 'invalid bit length repeat'), (a.mode = Le);\n                  break;\n                }\n                for (; c--; ) a.lens[a.have++] = y;\n              }\n            }\n            if (a.mode === Le) break;\n            if (0 === a.lens[256]) {\n              (t.msg = 'invalid code -- missing end-of-block'), (a.mode = Le);\n              break;\n            }\n            if (\n              ((a.lenbits = 9),\n              (E = { bits: a.lenbits }),\n              (x = me(1, a.lens, 0, a.nlen, a.lencode, 0, a.work, E)),\n              (a.lenbits = E.bits),\n              x)\n            ) {\n              (t.msg = 'invalid literal/lengths set'), (a.mode = Le);\n              break;\n            }\n            if (\n              ((a.distbits = 6),\n              (a.distcode = a.distdyn),\n              (E = { bits: a.distbits }),\n              (x = me(2, a.lens, a.nlen, a.ndist, a.distcode, 0, a.work, E)),\n              (a.distbits = E.bits),\n              x)\n            ) {\n              (t.msg = 'invalid distances set'), (a.mode = Le);\n              break;\n            }\n            if (((a.mode = Oe), e === pe)) break t;\n          case Oe:\n            a.mode = Ie;\n          case Ie:\n            if (o >= 6 && l >= 258) {\n              (t.next_out = r),\n                (t.avail_out = l),\n                (t.next_in = s),\n                (t.avail_in = o),\n                (a.hold = h),\n                (a.bits = d),\n                de(t, f),\n                (r = t.next_out),\n                (n = t.output),\n                (l = t.avail_out),\n                (s = t.next_in),\n                (i = t.input),\n                (o = t.avail_in),\n                (h = a.hold),\n                (d = a.bits),\n                a.mode === Se && (a.back = -1);\n              break;\n            }\n            for (\n              a.back = 0;\n              (z = a.lencode[h & ((1 << a.lenbits) - 1)]),\n                (m = z >>> 24),\n                (b = (z >>> 16) & 255),\n                (g = 65535 & z),\n                !(m <= d);\n\n            ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if (b && 0 == (240 & b)) {\n              for (\n                p = m, k = b, v = g;\n                (z = a.lencode[v + ((h & ((1 << (p + k)) - 1)) >> p)]),\n                  (m = z >>> 24),\n                  (b = (z >>> 16) & 255),\n                  (g = 65535 & z),\n                  !(p + m <= d);\n\n              ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (h >>>= p), (d -= p), (a.back += p);\n            }\n            if (((h >>>= m), (d -= m), (a.back += m), (a.length = g), 0 === b)) {\n              a.mode = 16205;\n              break;\n            }\n            if (32 & b) {\n              (a.back = -1), (a.mode = Se);\n              break;\n            }\n            if (64 & b) {\n              (t.msg = 'invalid literal/length code'), (a.mode = Le);\n              break;\n            }\n            (a.extra = 15 & b), (a.mode = 16201);\n          case 16201:\n            if (a.extra) {\n              for (R = a.extra; d < R; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (a.length += h & ((1 << a.extra) - 1)), (h >>>= a.extra), (d -= a.extra), (a.back += a.extra);\n            }\n            (a.was = a.length), (a.mode = 16202);\n          case 16202:\n            for (\n              ;\n              (z = a.distcode[h & ((1 << a.distbits) - 1)]),\n                (m = z >>> 24),\n                (b = (z >>> 16) & 255),\n                (g = 65535 & z),\n                !(m <= d);\n\n            ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if (0 == (240 & b)) {\n              for (\n                p = m, k = b, v = g;\n                (z = a.distcode[v + ((h & ((1 << (p + k)) - 1)) >> p)]),\n                  (m = z >>> 24),\n                  (b = (z >>> 16) & 255),\n                  (g = 65535 & z),\n                  !(p + m <= d);\n\n              ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (h >>>= p), (d -= p), (a.back += p);\n            }\n            if (((h >>>= m), (d -= m), (a.back += m), 64 & b)) {\n              (t.msg = 'invalid distance code'), (a.mode = Le);\n              break;\n            }\n            (a.offset = g), (a.extra = 15 & b), (a.mode = 16203);\n          case 16203:\n            if (a.extra) {\n              for (R = a.extra; d < R; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (a.offset += h & ((1 << a.extra) - 1)), (h >>>= a.extra), (d -= a.extra), (a.back += a.extra);\n            }\n            if (a.offset > a.dmax) {\n              (t.msg = 'invalid distance too far back'), (a.mode = Le);\n              break;\n            }\n            a.mode = 16204;\n          case 16204:\n            if (0 === l) break t;\n            if (((c = f - l), a.offset > c)) {\n              if (((c = a.offset - c), c > a.whave && a.sane)) {\n                (t.msg = 'invalid distance too far back'), (a.mode = Le);\n                break;\n              }\n              c > a.wnext ? ((c -= a.wnext), (u = a.wsize - c)) : (u = a.wnext - c),\n                c > a.length && (c = a.length),\n                (w = a.window);\n            } else (w = n), (u = r - a.offset), (c = a.length);\n            c > l && (c = l), (l -= c), (a.length -= c);\n            do {\n              n[r++] = w[u++];\n            } while (--c);\n            0 === a.length && (a.mode = Ie);\n            break;\n          case 16205:\n            if (0 === l) break t;\n            (n[r++] = a.length), l--, (a.mode = Ie);\n            break;\n          case Fe:\n            if (a.wrap) {\n              for (; d < 32; ) {\n                if (0 === o) break t;\n                o--, (h |= i[s++] << d), (d += 8);\n              }\n              if (\n                ((f -= l),\n                (t.total_out += f),\n                (a.total += f),\n                4 & a.wrap && f && (t.adler = a.check = a.flags ? H(a.check, n, f, r - f) : C(a.check, n, f, r - f)),\n                (f = l),\n                4 & a.wrap && (a.flags ? h : Ne(h)) !== a.check)\n              ) {\n                (t.msg = 'incorrect data check'), (a.mode = Le);\n                break;\n              }\n              (h = 0), (d = 0);\n            }\n            a.mode = 16207;\n          case 16207:\n            if (a.wrap && a.flags) {\n              for (; d < 32; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              if (4 & a.wrap && h !== (4294967295 & a.total)) {\n                (t.msg = 'incorrect length check'), (a.mode = Le);\n                break;\n              }\n              (h = 0), (d = 0);\n            }\n            a.mode = 16208;\n          case 16208:\n            x = ve;\n            break t;\n          case Le:\n            x = ze;\n            break t;\n          case 16210:\n            return Ae;\n          default:\n            return xe;\n        }\n      return (\n        (t.next_out = r),\n        (t.avail_out = l),\n        (t.next_in = s),\n        (t.avail_in = o),\n        (a.hold = h),\n        (a.bits = d),\n        (a.wsize || (f !== t.avail_out && a.mode < Le && (a.mode < Fe || e !== be))) &&\n          We(t, t.output, t.next_out, f - t.avail_out),\n        (_ -= t.avail_in),\n        (f -= t.avail_out),\n        (t.total_in += _),\n        (t.total_out += f),\n        (a.total += f),\n        4 & a.wrap &&\n          f &&\n          (t.adler = a.check = a.flags ? H(a.check, n, f, t.next_out - f) : C(a.check, n, f, t.next_out - f)),\n        (t.data_type =\n          a.bits + (a.last ? 64 : 0) + (a.mode === Se ? 128 : 0) + (a.mode === Oe || a.mode === Te ? 256 : 0)),\n        ((0 === _ && 0 === f) || e === be) && x === ke && (x = Ee),\n        x\n      );\n    },\n    inflateEnd: (t) => {\n      if (Ce(t)) return xe;\n      let e = t.state;\n      return e.window && (e.window = null), (t.state = null), ke;\n    },\n    inflateGetHeader: (t, e) => {\n      if (Ce(t)) return xe;\n      const a = t.state;\n      return 0 == (2 & a.wrap) ? xe : ((a.head = e), (e.done = !1), ke);\n    },\n    inflateSetDictionary: (t, e) => {\n      const a = e.length;\n      let i, n, s;\n      return Ce(t)\n        ? xe\n        : ((i = t.state),\n          0 !== i.wrap && i.mode !== Ue\n            ? xe\n            : i.mode === Ue && ((n = 1), (n = C(n, e, a, 0)), n !== i.check)\n            ? ze\n            : ((s = We(t, e, a, a)), s ? ((i.mode = 16210), Ae) : ((i.havedict = 1), ke)));\n    },\n    inflateInfo: 'pako inflate (from Nodeca project)',\n  };\n  var Je = function () {\n    (this.text = 0),\n      (this.time = 0),\n      (this.xflags = 0),\n      (this.os = 0),\n      (this.extra = null),\n      (this.extra_len = 0),\n      (this.name = ''),\n      (this.comment = ''),\n      (this.hcrc = 0),\n      (this.done = !1);\n  };\n  const Qe = Object.prototype.toString,\n    {\n      Z_NO_FLUSH: Ve,\n      Z_FINISH: $e,\n      Z_OK: ta,\n      Z_STREAM_END: ea,\n      Z_NEED_DICT: aa,\n      Z_STREAM_ERROR: ia,\n      Z_DATA_ERROR: na,\n      Z_MEM_ERROR: sa,\n    } = K;\n  function ra(t) {\n    this.options = jt({ chunkSize: 65536, windowBits: 15, to: '' }, t || {});\n    const e = this.options;\n    e.raw &&\n      e.windowBits >= 0 &&\n      e.windowBits < 16 &&\n      ((e.windowBits = -e.windowBits), 0 === e.windowBits && (e.windowBits = -15)),\n      !(e.windowBits >= 0 && e.windowBits < 16) || (t && t.windowBits) || (e.windowBits += 32),\n      e.windowBits > 15 && e.windowBits < 48 && 0 == (15 & e.windowBits) && (e.windowBits |= 15),\n      (this.err = 0),\n      (this.msg = ''),\n      (this.ended = !1),\n      (this.chunks = []),\n      (this.strm = new qt()),\n      (this.strm.avail_out = 0);\n    let a = qe.inflateInit2(this.strm, e.windowBits);\n    if (a !== ta) throw new Error(j[a]);\n    if (\n      ((this.header = new Je()),\n      qe.inflateGetHeader(this.strm, this.header),\n      e.dictionary &&\n        ('string' == typeof e.dictionary\n          ? (e.dictionary = Gt(e.dictionary))\n          : '[object ArrayBuffer]' === Qe.call(e.dictionary) && (e.dictionary = new Uint8Array(e.dictionary)),\n        e.raw && ((a = qe.inflateSetDictionary(this.strm, e.dictionary)), a !== ta)))\n    )\n      throw new Error(j[a]);\n  }\n  function oa(t, e) {\n    const a = new ra(e);\n    if ((a.push(t), a.err)) throw a.msg || j[a.err];\n    return a.result;\n  }\n  (ra.prototype.push = function (t, e) {\n    const a = this.strm,\n      i = this.options.chunkSize,\n      n = this.options.dictionary;\n    let s, r, o;\n    if (this.ended) return !1;\n    for (\n      r = e === ~~e ? e : !0 === e ? $e : Ve,\n        '[object ArrayBuffer]' === Qe.call(t) ? (a.input = new Uint8Array(t)) : (a.input = t),\n        a.next_in = 0,\n        a.avail_in = a.input.length;\n      ;\n\n    ) {\n      for (\n        0 === a.avail_out && ((a.output = new Uint8Array(i)), (a.next_out = 0), (a.avail_out = i)),\n          s = qe.inflate(a, r),\n          s === aa &&\n            n &&\n            ((s = qe.inflateSetDictionary(a, n)), s === ta ? (s = qe.inflate(a, r)) : s === na && (s = aa));\n        a.avail_in > 0 && s === ea && a.state.wrap > 0 && 0 !== t[a.next_in];\n\n      )\n        qe.inflateReset(a), (s = qe.inflate(a, r));\n      switch (s) {\n        case ia:\n        case na:\n        case aa:\n        case sa:\n          return this.onEnd(s), (this.ended = !0), !1;\n      }\n      if (((o = a.avail_out), a.next_out && (0 === a.avail_out || s === ea)))\n        if ('string' === this.options.to) {\n          let t = Wt(a.output, a.next_out),\n            e = a.next_out - t,\n            n = Xt(a.output, t);\n          (a.next_out = e), (a.avail_out = i - e), e && a.output.set(a.output.subarray(t, t + e), 0), this.onData(n);\n        } else this.onData(a.output.length === a.next_out ? a.output : a.output.subarray(0, a.next_out));\n      if (s !== ta || 0 !== o) {\n        if (s === ea) return (s = qe.inflateEnd(this.strm)), this.onEnd(s), (this.ended = !0), !0;\n        if (0 === a.avail_in) break;\n      }\n    }\n    return !0;\n  }),\n    (ra.prototype.onData = function (t) {\n      this.chunks.push(t);\n    }),\n    (ra.prototype.onEnd = function (t) {\n      t === ta &&\n        ('string' === this.options.to ? (this.result = this.chunks.join('')) : (this.result = Kt(this.chunks))),\n        (this.chunks = []),\n        (this.err = t),\n        (this.msg = this.strm.msg);\n    });\n  var la = {\n    Inflate: ra,\n    inflate: oa,\n    inflateRaw: function (t, e) {\n      return ((e = e || {}).raw = !0), oa(t, e);\n    },\n    ungzip: oa,\n    constants: K,\n  };\n  const { Deflate: ha, deflate: da, deflateRaw: _a, gzip: fa } = le,\n    { Inflate: ca, inflate: ua, inflateRaw: wa, ungzip: ma } = la;\n  var ba = ha,\n    ga = da,\n    pa = _a,\n    ka = fa,\n    va = ca,\n    ya = ua,\n    xa = wa,\n    za = ma,\n    Aa = K,\n    Ea = {\n      Deflate: ba,\n      deflate: ga,\n      deflateRaw: pa,\n      gzip: ka,\n      Inflate: va,\n      inflate: ya,\n      inflateRaw: xa,\n      ungzip: za,\n      constants: Aa,\n    };\n  (t.Deflate = ba),\n    (t.Inflate = va),\n    (t.constants = Aa),\n    (t.default = Ea),\n    (t.deflate = ga),\n    (t.deflateRaw = pa),\n    (t.gzip = ka),\n    (t.inflate = ya),\n    (t.inflateRaw = xa),\n    (t.ungzip = za),\n    Object.defineProperty(t, '__esModule', { value: !0 });\n});\n","// Pako is now bundled directly into the worker blob, no need to import\n\nlet config = {};\nlet db;\nlet flushing = false;\nconst DB_NAME = 'conviva-session-record-db';\nconst STORE_NAME = 'events';\nconst POLICY_NAME = 'uploadPolicy';\nconst POLICY_KEY = 'policy';\nconst LOCK_STORE_NAME = 'flushLock';\nconst LOCK_KEY = 'lock';\nconst FLUSH_TIMESTAMP_STORE_NAME = 'flushTimestamp';\nconst FLUSH_TIMESTAMP_KEY = 'lastFlushTimestamp';\nconst MAX_EVENTS = 5000; //TODO: Check device storage\nconst FLUSH_TIME = 60 * 1000;\nconst FLUSH_COOLDOWN_TIME_BUFFER = 500; // 500 milliseconds buffer\nconst UPDATE_POLICY_EXPIRY_TIME = 3600; // 1 hour\nconst LOCK_TIMEOUT = 30000; // 30 seconds\nconst DEFAULT_GATEWAY_URL = 'https://rcg.conviva.com';\nlet flushTimer = null;\nlet initialEvents = [];\nlet uploadPolicyObject = null;\nlet initialFlushTimeout = null;\nconst workerScope = typeof self !== 'undefined' ? self : null;\n\nasync function openDB() {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, 3);\n    request.onupgradeneeded = (event) => {\n      const db = request.result;\n      const oldVersion = event.oldVersion;\n\n      if (db) {\n        // Version 1: Initial schema\n        if (oldVersion < 1) {\n          const store = db.createObjectStore(STORE_NAME, { keyPath: 'id', autoIncrement: true });\n          store.createIndex('byTimestamp', 'timestamp');\n          const policy = db.createObjectStore(POLICY_NAME, { keyPath: 'id' });\n          policy.put({ id: POLICY_KEY, value: null });\n        }\n\n        // Version 2: Add separate object store for flush lock (multi-tab coordination)\n        if (oldVersion < 2) {\n          const lockStore = db.createObjectStore(LOCK_STORE_NAME, { keyPath: 'id' });\n          lockStore.put({ id: LOCK_KEY, value: null });\n        }\n\n        // Version 3: Add object store for flush timestamp\n        if (oldVersion < 3) {\n          const flushTimestampStore = db.createObjectStore(FLUSH_TIMESTAMP_STORE_NAME, { keyPath: 'id' });\n          flushTimestampStore.put({ id: FLUSH_TIMESTAMP_KEY, value: null });\n        }\n      }\n    };\n    request.onsuccess = () => resolve(request.result);\n    request.onerror = () => reject(request.error);\n  });\n}\n\nfunction deleteDB() {\n  if (db) {\n    db.close();\n    db = null;\n  }\n  return new Promise((resolve, reject) => {\n    const deleteRequest = indexedDB.deleteDatabase(DB_NAME);\n\n    deleteRequest.onsuccess = () => {\n      resolve();\n    };\n\n    deleteRequest.onerror = () => {\n      reject(deleteRequest.error);\n    };\n\n    deleteRequest.onblocked = () => {};\n  });\n}\n\nasync function storeEvent(eventPayload) {\n  if (!db) {\n    initialEvents.push(eventPayload.event);\n    return;\n  }\n\n  try {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    if (initialEvents.length > 0) {\n      initialEvents.forEach((event) => store.add(event));\n      initialEvents = [];\n    }\n    store.add(eventPayload.event);\n\n    await tx.done;\n  } catch (error) {\n    //console.warn('Failed to store event:', error);\n  }\n}\n\nasync function getAllEvents() {\n  if (!db) {\n    return [];\n  }\n\n  const tx = db.transaction(STORE_NAME, 'readonly');\n  const store = tx.objectStore(STORE_NAME);\n  const index = store.index('byTimestamp');\n  const request = index.getAll();\n\n  return new Promise((resolve, reject) => {\n    tx.onerror = () => reject(tx.error);\n    request.onerror = () => reject(request.error);\n\n    request.onsuccess = () => resolve(request.result);\n  });\n}\n\nasync function pruneOldEvents() {\n  if (!db) {\n    return;\n  }\n\n  return new Promise((resolve) => {\n    let awaitingFlush = false;\n    let resolved = false;\n\n    const finish = () => {\n      if (!resolved) {\n        resolved = true;\n        resolve();\n      }\n    };\n\n    try {\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n      let initialCount = 0;\n\n      tx.oncomplete = () => {\n        if (!awaitingFlush) {\n          finish();\n        }\n      };\n      tx.onerror = () => {\n        finish(); // Resolve silently if transaction fails (e.g., database closing)\n      };\n      const countReq = store.count();\n\n      countReq.onsuccess = async () => {\n        initialCount = countReq.result;\n\n        if (initialCount <= MAX_EVENTS) {\n          finish(); // Resolve the promise when no pruning needed\n          return;\n        }\n        awaitingFlush = true;\n        try {\n          await flushEvents(true);\n        } catch (error) {\n          // Swallow errors to keep pruning resilient\n        } finally {\n          awaitingFlush = false;\n          finish();\n        }\n      };\n\n      countReq.onerror = () => {\n        finish(); // Resolve silently if count fails\n      };\n    } catch (error) {\n      finish(); // Resolve silently if transaction creation fails (e.g., InvalidStateError)\n    }\n  });\n}\n\nasync function setPolicyValue(value) {\n  if (!db) {\n    return;\n  }\n  try {\n    const tx = db.transaction(POLICY_NAME, 'readwrite');\n    const policyStore = tx.objectStore(POLICY_NAME);\n    policyStore.put({ id: POLICY_KEY, value });\n    await tx.done;\n  } catch (error) {}\n}\n\nasync function getPolicyValue() {\n  if (!db) {\n    return null;\n  }\n\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(POLICY_NAME, 'readonly');\n    const req = tx.objectStore(POLICY_NAME).get(POLICY_KEY); // e.g. 'policy'\n\n    req.onsuccess = () => resolve(req.result ? req.result.value : null); // <-- result, not value\n    req.onerror = () => reject(req.error);\n  });\n}\n\n/**\n * Try to acquire an IndexedDB-based flush lock.\n * Returns true if lock was acquired, false otherwise.\n * The lock expires after 30 seconds to prevent deadlocks.\n */\nasync function tryAcquireFlushLock() {\n  if (!db) {\n    return false;\n  }\n\n  try {\n    return new Promise((resolve) => {\n      const tx = db.transaction(LOCK_STORE_NAME, 'readwrite');\n      const store = tx.objectStore(LOCK_STORE_NAME);\n      const getReq = store.get(LOCK_KEY);\n\n      getReq.onsuccess = () => {\n        const lockData = getReq.result ? getReq.result.value : null;\n        const now = Date.now();\n\n        // Check if lock is available (null or expired)\n        if (!lockData || now - lockData.timestamp > LOCK_TIMEOUT) {\n          // Acquire the lock by setting current timestamp\n          const putReq = store.put({ id: LOCK_KEY, value: { timestamp: now } });\n          putReq.onsuccess = () => resolve(true);\n          putReq.onerror = () => resolve(false);\n        } else {\n          // Lock is held by another worker\n          resolve(false);\n        }\n      };\n\n      getReq.onerror = () => resolve(false);\n      tx.onerror = () => resolve(false);\n    });\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Release the IndexedDB-based flush lock.\n */\nasync function releaseFlushLock() {\n  if (!db) {\n    return;\n  }\n\n  try {\n    const tx = db.transaction(LOCK_STORE_NAME, 'readwrite');\n    const store = tx.objectStore(LOCK_STORE_NAME);\n    store.put({ id: LOCK_KEY, value: null });\n    await tx.done;\n  } catch (error) {\n    // Silently fail - lock will expire anyway\n  }\n}\n\n/**\n * Get the last flush timestamp from IndexedDB.\n * Returns null if no timestamp is stored.\n */\nasync function getLastFlushTimestamp() {\n  if (!db) {\n    return null;\n  }\n\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(FLUSH_TIMESTAMP_STORE_NAME, 'readonly');\n    const req = tx.objectStore(FLUSH_TIMESTAMP_STORE_NAME).get(FLUSH_TIMESTAMP_KEY);\n\n    req.onsuccess = () => resolve(req.result ? req.result.value : null);\n    req.onerror = () => reject(req.error);\n  });\n}\n\n/**\n * Set the last flush timestamp in IndexedDB.\n */\nasync function setLastFlushTimestamp(timestamp) {\n  if (!db) {\n    return;\n  }\n  try {\n    const tx = db.transaction(FLUSH_TIMESTAMP_STORE_NAME, 'readwrite');\n    const store = tx.objectStore(FLUSH_TIMESTAMP_STORE_NAME);\n    store.put({ id: FLUSH_TIMESTAMP_KEY, value: timestamp });\n    await tx.done;\n  } catch (error) {\n    // Silently fail\n  }\n}\n\n/**\n * Check if enough time has passed since the last flush.\n * Returns true if flush should be allowed, false otherwise.\n */\nasync function shouldAllowFlush(currentTimeStamp) {\n  const lastFlushTimestamp = await getLastFlushTimestamp();\n\n  // If no timestamp exists, allow flush\n  if (!lastFlushTimestamp) {\n    return true;\n  }\n  const timeSinceLastFlush = currentTimeStamp - lastFlushTimestamp;\n\n  // Allow flush if more than 1 minute has passed\n  const flushIntervalDelay = config.uploadInterval ? config.uploadInterval * 1000 : FLUSH_TIME;\n  return timeSinceLastFlush + FLUSH_COOLDOWN_TIME_BUFFER >= flushIntervalDelay;\n}\n\nif (workerScope) {\n  workerScope.onmessage = async (e) => {\n    const { type, payload } = e.data;\n\n    if (type === 'config') {\n      config = payload;\n      if (!db) {\n        db = await openDB();\n        await flushEvents();\n      }\n      await scheduleFlush();\n    }\n    if (type === 'event') {\n      await storeEvent(payload);\n      await pruneOldEvents();\n    }\n    if (type === 'delete') {\n      await flushEvents();\n      await deleteDB();\n      if (workerScope && typeof workerScope.postMessage === 'function') {\n        workerScope.postMessage({ type: 'deletion-complete' });\n      }\n    }\n  };\n}\n\nasync function scheduleFlush() {\n  if (flushTimer) {\n    clearInterval(flushTimer);\n    flushTimer = null;\n  }\n  if (initialFlushTimeout) {\n    clearTimeout(initialFlushTimeout);\n    initialFlushTimeout = null;\n  }\n\n  const intervalDelay = config.uploadInterval ? config.uploadInterval * 1000 : FLUSH_TIME;\n  const startFlushInterval = () => {\n    flushTimer = setInterval(async () => {\n      if (flushing) return;\n      try {\n        await flushEvents(true);\n      } catch (err) {\n        //console.warn(err);\n      }\n    }, intervalDelay);\n  };\n\n  const runInitialFlushAndStartInterval = async () => {\n    try {\n      await flushEvents(true);\n    } catch (err) {\n      //console.warn(err);\n    } finally {\n      startFlushInterval();\n    }\n  };\n\n  try {\n    const lastFlushTimestamp = await getLastFlushTimestamp();\n    if (lastFlushTimestamp) {\n      const flushIntervalDelay = config.uploadInterval ? config.uploadInterval * 1000 : FLUSH_TIME;\n      const targetFlushTime = lastFlushTimestamp + flushIntervalDelay;\n      const delay = Math.max(0, targetFlushTime - Date.now());\n\n      if (delay > 0) {\n        initialFlushTimeout = setTimeout(() => {\n          runInitialFlushAndStartInterval()\n            .catch(() => {})\n            .finally(() => {\n              initialFlushTimeout = null;\n            });\n        }, delay);\n        return;\n      }\n    }\n  } catch (err) {\n    // Failed to read last flush timestamp, fall back to immediate scheduling\n  }\n\n  startFlushInterval();\n}\n\nasync function flushAllEvents(takeSnapShot) {\n  try {\n    // Always flush events for the current recordId\n    const allEvents = await getAllEvents();\n    if (allEvents.length === 0) return;\n\n    await uploadBatch(allEvents);\n\n    // Remove only these events from the store\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    for (const evt of allEvents) {\n      store.delete(evt.id);\n    }\n    await tx.done;\n    if (takeSnapShot && workerScope && typeof workerScope.postMessage === 'function') {\n      workerScope.postMessage({ type: 'takeSnapShot' });\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function flushEvents(takeSnapShot = false) {\n  if (flushing || !db) return;\n\n  // Check if enough time has passed since the last flush\n  let currentTimeStamp = Date.now();\n  const canFlush = await shouldAllowFlush(currentTimeStamp);\n  if (!canFlush) {\n    // Skip flush if less than 1 minute has passed\n    return;\n  }\n  // Update the last flush timestamp\n  await setLastFlushTimestamp(currentTimeStamp);\n\n  flushing = true;\n\n  try {\n    // Try Web Locks API first (modern browsers)\n    if (navigator && navigator.locks && navigator.locks.request) {\n      await navigator.locks.request('session-replay-flush', { mode: 'exclusive', ifAvailable: true }, async (lock) => {\n        if (lock) {\n          await flushAllEvents(takeSnapShot);\n        }\n      });\n    } else {\n      // Fallback: Use IndexedDB-based locking for older browsers\n      const lockAcquired = await tryAcquireFlushLock();\n      if (lockAcquired) {\n        try {\n          await flushAllEvents(takeSnapShot);\n        } finally {\n          await releaseFlushLock();\n        }\n      }\n      // If lock not acquired, skip flush (another worker is handling it)\n    }\n  } catch (err) {\n    //console.warn('flush failed', err);\n  } finally {\n    flushing = false;\n  }\n}\n\nasync function uploadBatch(events) {\n  try {\n    if (!events || events.length === 0) {\n      return;\n    }\n    let tabId = events[0]['_tabId'];\n    let timestamp = events[0]['timestamp'];\n    const json = JSON.stringify(events);\n    const compressed = pako.gzip(json);\n    const blob = new Blob([compressed], { type: 'application/octet-stream' });\n    const blobName = getBlobNameRoundedToMinute(timestamp, tabId);\n    await uploadFileToGcs(blob, blobName);\n  } catch (error) {\n    //console.warn('Error uploading batch:', error);\n    throw error; // Re-throw to handle in flushEvents\n  }\n}\n\nfunction sleep(ms) {\n  return new Promise((res) => setTimeout(res, ms));\n}\n\nfunction getBlobNameRoundedToMinute(timestamp, tabId) {\n  const date = new Date(timestamp); // Uses current time\n  date.setUTCSeconds(0, 0); // Rounds down to the start of the current minute\n\n  const day = String(date.getUTCDate()).padStart(2, '0');\n  const month = String(date.getUTCMonth() + 1).padStart(2, '0'); // Months are 0-indexed\n  const year = String(date.getUTCFullYear()).slice(-2);\n  const hour = String(date.getUTCHours()).padStart(2, '0');\n\n  const epoch = Math.floor(date.getTime() / 1000); // Epoch time in seconds (UTC-based)\n\n  const uuid = getUUID(); // Generate a UUID for uniqueness\n\n  return `${year}-${month}-${day}-${hour}-${epoch}_${tabId}_${uuid}.gz`;\n}\n\nasync function uploadFileToGcs(blob, blobName) {\n  try {\n    if (!uploadPolicyObject) {\n      uploadPolicyObject = await getPolicyValue();\n    }\n    const isPolicyInvalid = uploadPolicyObject ? Date.now() >= uploadPolicyObject.expiry : true;\n    if (isPolicyInvalid) {\n      const expiryTimeInSec = config.policyExpiryTime || UPDATE_POLICY_EXPIRY_TIME; // Default to 1 hour if not set\n      const gatewayUrl = getGatewayUrl();\n      const response = await fetch(`${gatewayUrl}`);\n      if (!response.ok) {\n        throw new Error('Failed to get upload policy from server.');\n      }\n      let uploadPolicy = await response.json();\n      let isoString = uploadPolicy.fields['x-goog-date'];\n      let urlExpiryTimestamp = convertToUnixTimestamp(isoString) + expiryTimeInSec * 1000; // Convert to milliseconds\n      uploadPolicyObject = { policy: uploadPolicy, expiry: urlExpiryTimestamp };\n      await setPolicyValue(uploadPolicyObject); // Store the new policy\n    }\n  } catch (error) {\n    throw error;\n  }\n\n  if (\n    !uploadPolicyObject ||\n    !uploadPolicyObject.policy ||\n    !uploadPolicyObject.policy.fields ||\n    !uploadPolicyObject.policy.url ||\n    !uploadPolicyObject.policy.customerID\n  ) {\n    throw new Error('Invalid upload policy object');\n  }\n  const form = new FormData();\n  Object.entries(uploadPolicyObject.policy.fields).forEach(([k, v]) => form.append(k, v));\n  let key = `${uploadPolicyObject.policy.customerID}/${config.clId}/${blobName}`;\n  form.set('key', key); // override the dummy one\n  form.append('file', blob, blobName);\n\n  try {\n    const uploadResponse = await fetch(uploadPolicyObject.policy.url, {\n      method: 'POST',\n      body: form,\n    });\n    if (!uploadResponse.ok) {\n      const errorText = await uploadResponse.text();\n      throw new Error(`GCS Upload Error: ${uploadResponse.status} ${errorText}`);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nfunction getGatewayUrl() {\n  const expiryTimeInSec = config.policyExpiryTime || UPDATE_POLICY_EXPIRY_TIME;\n  let endPointUrl = config.endpoint || DEFAULT_GATEWAY_URL;\n  return `${endPointUrl}/sr?clientId=${config.clId}&expiryTimeInSec=${expiryTimeInSec}&customerKey=${config.customerKey}`;\n}\n\nfunction convertToUnixTimestamp(isoString) {\n  const date = new Date(isoString.replace(/^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})Z$/, '$1-$2-$3T$4:$5:$6Z'));\n  const unixTimestampInMilliSceonds = date.getTime();\n  return unixTimestampInMilliSceonds;\n}\n\nfunction getUUID() {\n  return Date.now().toString();\n}\n"],{type:"application/javascript"}),this._workerUrl=URL.createObjectURL(e),this.worker=new Worker(this._workerUrl),this.recordingReady=this.recording=!1,this.recordId=Date.now().toString(),this._storageListener=this._handleStorageEvent.bind(this),this.worker.postMessage({type:"config",payload:Tr(Tr(Tr({},null===(r=this.sessionReplayConfig)||void 0===r?void 0:r.emitterConfiguration),null===(i=this.sessionReplayConfig)||void 0===i?void 0:i.networkConfiguration),{customerKey:this.trackerConfiguration.convivaCustomerKey,clId:nr().clId,recordId:this.recordId})}),this._handleVisibilityChange=this._handleVisibilityChange.bind(this),this.snapshotHandler=this.snapshotHandler.bind(this),this.takeFullSnapshot=this.takeFullSnapshot.bind(this),this.snapshotHandler(),this._initBroadcastChannel()}return e.prototype.takeFullSnapshot=function(e){if(void 0===e&&(e=!1),"function"==typeof Jt.takeFullSnapshot){var t=function(){try{Jt.takeFullSnapshot(e)}catch(e){}};"requestIdleCallback"in window?requestIdleCallback(t,{timeout:1e3}):setTimeout(t,0)}},e.prototype.snapshotHandler=function(){var e=this;this._messageHandlers.snapShotHandler=function(t){"takeSnapShot"===t.data.type&&("visible"===document.visibilityState?e.takeFullSnapshot(!0):e._broadcastFlushSignal())},this.worker.addEventListener("message",this._messageHandlers.snapShotHandler)},e.prototype.initiateRecording=function(){var e=this;this.startRecording().catch((function(t){e.recording=!1,e.tracker.setCustomTags({isSR:!1})})),document.addEventListener("visibilitychange",this._handleVisibilityChange,{signal:$u}),!this._broadcastChannel&&"undefined"!=typeof window&&this._storageListener&&window.addEventListener("storage",this._storageListener)},e.prototype.startRecording=function(){var e,t,n,r,i,o,a,s,l,c,u,d,f,h,p,v,g,m,y,w,b,k,_,C,S,E,A,x,R,O,M,N,L,D,P,U,F,z,B,j,G,H,V,Z,q,W,Y,K,J,X,Q,$,ee,te,ne,re,ie,oe,ae,se,le,ce,ue;return I(this,void 0,void 0,(function(){var I,de=this;return T(this,(function(T){switch(T.label){case 0:if(this.recording)return[2];this.recording=!0,this.tracker.setCustomTags({isSR:!0}),T.label=1;case 1:return T.trys.push([1,3,,4]),[4,this.waitForPageStability()];case 2:return T.sent(),I="complete"===document.readyState?0:null!==(n=null===(t=null===(e=this.sessionReplayConfig)||void 0===e?void 0:e.webRecorderConfiguration)||void 0===t?void 0:t.recordAfter)&&void 0!==n?n:"load",this.stopFn=Jt({blockSelector:null!==(o=null===(i=null===(r=this.sessionReplayConfig)||void 0===r?void 0:r.webRecorderConfiguration)||void 0===i?void 0:i.blockSelector)&&void 0!==o?o:void 0,ignoreSelector:null!==(l=null===(s=null===(a=this.sessionReplayConfig)||void 0===a?void 0:a.webRecorderConfiguration)||void 0===s?void 0:s.ignoreSelector)&&void 0!==l?l:void 0,ignoreCSSAttributes:null!==(d=null===(u=null===(c=this.sessionReplayConfig)||void 0===c?void 0:c.webRecorderConfiguration)||void 0===u?void 0:u.ignoreCSSAttributes)&&void 0!==d?d:void 0,maskTextSelector:null!==(p=null===(h=null===(f=this.sessionReplayConfig)||void 0===f?void 0:f.webRecorderConfiguration)||void 0===h?void 0:h.maskTextSelector)&&void 0!==p?p:void 0,maskAllInputs:null!==(m=null===(g=null===(v=this.sessionReplayConfig)||void 0===v?void 0:v.webRecorderConfiguration)||void 0===g?void 0:g.maskAllInputs)&&void 0!==m&&m,maskInputOptions:null!==(b=null===(w=null===(y=this.sessionReplayConfig)||void 0===y?void 0:y.webRecorderConfiguration)||void 0===w?void 0:w.maskInputOptions)&&void 0!==b?b:{password:!0,email:!0,textarea:!0,text:!0,tel:!0},slimDOMOptions:null!==(C=null===(_=null===(k=this.sessionReplayConfig)||void 0===k?void 0:k.webRecorderConfiguration)||void 0===_?void 0:_.slimDOMOptions)&&void 0!==C?C:{comment:!1,headWhitespace:!1,headMetaDescKeywords:!1,headMetaSocial:!1,headMetaRobots:!1,headMetaHttpEquiv:!1,headMetaAuthorship:!1,headMetaVerification:!1},dataURLOptions:null!==(A=null===(E=null===(S=this.sessionReplayConfig)||void 0===S?void 0:S.webRecorderConfiguration)||void 0===E?void 0:E.dataURLOptions)&&void 0!==A?A:{},inlineStylesheet:null===(O=null===(R=null===(x=this.sessionReplayConfig)||void 0===x?void 0:x.webRecorderConfiguration)||void 0===R?void 0:R.inlineStylesheet)||void 0===O||O,recordCanvas:null!==(L=null===(N=null===(M=this.sessionReplayConfig)||void 0===M?void 0:M.webRecorderConfiguration)||void 0===N?void 0:N.recordCanvas)&&void 0!==L&&L,recordCrossOriginIframes:null!==(U=null===(P=null===(D=this.sessionReplayConfig)||void 0===D?void 0:D.webRecorderConfiguration)||void 0===P?void 0:P.recordCrossOriginIframes)&&void 0!==U&&U,recordAfter:I,inlineImages:null!==(B=null===(z=null===(F=this.sessionReplayConfig)||void 0===F?void 0:F.webRecorderConfiguration)||void 0===z?void 0:z.inlineImages)&&void 0!==B&&B,collectFonts:null!==(H=null===(G=null===(j=this.sessionReplayConfig)||void 0===j?void 0:j.webRecorderConfiguration)||void 0===G?void 0:G.collectFonts)&&void 0!==H&&H,userTriggeredOnInput:null!==(q=null===(Z=null===(V=this.sessionReplayConfig)||void 0===V?void 0:V.webRecorderConfiguration)||void 0===Z?void 0:Z.userTriggeredOnInput)&&void 0!==q&&q,sampling:{mousemove:null!==(K=null===(Y=null===(W=this.sessionReplayConfig)||void 0===W?void 0:W.webRecorderConfiguration)||void 0===Y?void 0:Y.mousemove)&&void 0!==K&&K,mouseInteraction:null!==(Q=null===(X=null===(J=this.sessionReplayConfig)||void 0===J?void 0:J.webRecorderConfiguration)||void 0===X?void 0:X.mouseInteraction)&&void 0!==Q?Q:{MouseUp:!1,MouseDown:!1,Click:!0,ContextMenu:!0,DblClick:!0,Focus:!0,Blur:!0,TouchStart:!1,TouchEnd:!1},scroll:null!==(te=null===(ee=null===($=this.sessionReplayConfig)||void 0===$?void 0:$.webRecorderConfiguration)||void 0===ee?void 0:ee.scroll)&&void 0!==te?te:300,media:null!==(ie=null===(re=null===(ne=this.sessionReplayConfig)||void 0===ne?void 0:ne.webRecorderConfiguration)||void 0===re?void 0:re.media)&&void 0!==ie?ie:1e3,input:null!==(se=null===(ae=null===(oe=this.sessionReplayConfig)||void 0===oe?void 0:oe.webRecorderConfiguration)||void 0===ae?void 0:ae.input)&&void 0!==se?se:"last"},checkoutEveryNms:null!==(ue=null===(ce=null===(le=this.sessionReplayConfig)||void 0===le?void 0:le.webRecorderConfiguration)||void 0===ce?void 0:ce.checkoutEveryNms)&&void 0!==ue?ue:0,emit:function(e){var t;"visible"!==document.visibilityState||3===e.type&&7===(null===(t=e.data)||void 0===t?void 0:t.source)||!e||"number"!=typeof e.timestamp||(e._tabId=de.recordId,de.worker.postMessage({type:"event",payload:{event:e}}))}}),this.initializeRecordingReadiness(),this.startCommunicationElementWatcher(),[3,4];case 3:throw T.sent();case 4:return[2]}}))}))},e.prototype.initializeRecordingReadiness=function(){var e=this,t=0,n=function(){if(t++,e.isPageTrulyReady()||20<=t)e.recordingReady=!0;else{var r=e.detectSlowNetwork()?1e3:500;setTimeout(n,r)}};n()},e.prototype.isPageTrulyReady=function(){return 2<=["interactive"===document.readyState||"complete"===document.readyState,document.body&&0<document.body.children.length,!this.hasCriticalPendingRequests()].filter(Boolean).length},e.prototype.hasCriticalPendingRequests=function(){if("performance"in window&&"getEntriesByType"in performance){var e=performance.getEntriesByType("navigation")[0];if(e)return 0===e.domContentLoadedEventEnd}return!1},e.prototype.waitForPageStability=function(){return I(this,void 0,void 0,(function(){var e=this;return T(this,(function(t){return[2,new Promise((function(t){if("complete"!==document.readyState||e.hasCriticalPendingRequests()){var n=function(){"complete"!==document.readyState||e.hasCriticalPendingRequests()?setTimeout(n,100):t()};n();var r=e.detectSlowNetwork()?1e4:6e3;setTimeout((function(){t()}),r)}else t()}))]}))}))},e.prototype.startCommunicationElementWatcher=function(){var e=this,t=!1,n=null,r=this.detectSlowNetwork()?2e3:500;this.detectionInterval=setInterval((function(){var r,i,o,a;if(e.recording){if(e.recording&&e.recordingReady&&!t){var s=null===(i=null===(r=e.sessionReplayConfig)||void 0===r?void 0:r.webRecorderConfiguration)||void 0===i?void 0:i.chatContainer;r=null===(a=null===(o=e.sessionReplayConfig)||void 0===o?void 0:o.webRecorderConfiguration)||void 0===a?void 0:a.chatRoot,s&&r&&(o=document.querySelector(s))&&o.shadowRoot&&((a=o=o.shadowRoot.querySelector(r))&&(a=o.isConnected,s=!!o.shadowRoot,r=o.textContent&&0<o.textContent.trim().length,o=s&&0<o.shadowRoot.children.length,a=a&&(r||o||s)),a&&(t=!0,function(){if(n&&(clearTimeout(n),n=null),e.recording&&e.recordingReady&&"hidden"!==document.visibilityState){var t=e.detectSlowNetwork()?1500:500;n=setTimeout((function(){e.recording&&e.recordingReady&&"function"==typeof Jt.takeFullSnapshot&&(e.takeFullSnapshot(!0),n=null)}),t)}}(),e.detectionInterval&&(clearInterval(e.detectionInterval),e.detectionInterval=null)))}}else e.detectionInterval&&(clearInterval(e.detectionInterval),e.detectionInterval=null)}),r)},e.prototype.stopRecording=function(e){var t=this;if(void 0===e&&(e=!1),this.recording){if(this.recordingReady=this.recording=!1,this.stopFn&&(this.stopFn(),this.stopFn=null),this.detectionInterval&&(clearInterval(this.detectionInterval),this.detectionInterval=null),this.userInteractionHandlers&&(this.userInteractionHandlers.forEach((function(e){document.removeEventListener(e.event,e.handler)})),this.userInteractionHandlers=null),this.interactionTimeout&&(clearTimeout(this.interactionTimeout),this.interactionTimeout=null),document.removeEventListener("visibilitychange",this._handleVisibilityChange),!this._broadcastChannel&&"undefined"!=typeof window&&this._storageListener&&window.removeEventListener("storage",this._storageListener),this._broadcastChannel){try{this._broadcastChannel.onmessage=null,this._broadcastChannel.close()}catch(e){}this._broadcastChannel=null}this._messageHandlers.snapShotHandler&&(this.worker.removeEventListener("message",this._messageHandlers.snapShotHandler),delete this._messageHandlers.snapShotHandler),e&&(this.worker.postMessage({type:"delete"}),this.tracker.setCustomTags({isSR:!1})),this._messageHandlers.deletionHandler=function(e){var n;if("deletion-complete"===(null===(n=e.data)||void 0===n?void 0:n.type))try{t._messageHandlers.deletionHandler&&(t.worker.removeEventListener("message",t._messageHandlers.deletionHandler),delete t._messageHandlers.deletionHandler),t.worker.terminate(),URL.revokeObjectURL(t._workerUrl)}catch(e){}},this.worker.addEventListener("message",this._messageHandlers.deletionHandler)}},e.prototype._handleVisibilityChange=function(){var e,t,n,r;if("visible"===document.visibilityState&&this.recording&&this.recordingReady){var i=null===(t=null===(e=this.sessionReplayConfig)||void 0===e?void 0:e.webRecorderConfiguration)||void 0===t?void 0:t.chatContainer;if(e=null===(r=null===(n=this.sessionReplayConfig)||void 0===n?void 0:n.webRecorderConfiguration)||void 0===r?void 0:r.chatRoot,(n=i?document.querySelector(i):null)&&n.shadowRoot&&(n=e?n.shadowRoot.querySelector(e):null)&&n.isConnected)return;this.takeFullSnapshot(!0)}},e.prototype._initBroadcastChannel=function(){var e=this;try{"undefined"!=typeof BroadcastChannel&&(this._broadcastChannel=new BroadcastChannel("conviva-session-replay"),this._broadcastChannel.onmessage=function(t){e._handleBroadcastChannelMessage(t)})}catch(e){this._broadcastChannel=null}},e.prototype._handleBroadcastChannelMessage=function(e){if(e&&e.data&&"flush-signal"===e.data.type&&this.recording&&this.recordingReady)try{var t=e.data.payload;(null==t?void 0:t.recordId)===this.recordId||(null==t?void 0:t.ts)<=this._lastFlushSignalTimestamp||(this._lastFlushSignalTimestamp=(null==t?void 0:t.ts)||0,"visible"===document.visibilityState&&this.takeFullSnapshot(!0))}catch(e){}},e.prototype._broadcastFlushSignal=function(){var e={recordId:this.recordId,ts:Date.now()};if(this._broadcastChannel)try{return void this._broadcastChannel.postMessage({type:"flush-signal",payload:e})}catch(e){}try{"undefined"!=typeof window&&window.localStorage&&window.localStorage.setItem("ConvivaSessionReplayFlush",JSON.stringify(e))}catch(e){}},e.prototype._handleStorageEvent=function(e){if(e&&"ConvivaSessionReplayFlush"===e.key&&e.newValue&&this.recording&&this.recordingReady){try{var t=JSON.parse(e.newValue);if((null==t?void 0:t.recordId)===this.recordId||(null==t?void 0:t.ts)<=this._lastFlushSignalTimestamp)return;this._lastFlushSignalTimestamp=(null==t?void 0:t.ts)||0}catch(e){return}"visible"===document.visibilityState&&this.takeFullSnapshot(!0)}},e.prototype.detectSlowNetwork=function(){if("connection"in navigator){var e=navigator.connection.effectiveType;if("slow-2g"===e||"2g"===e||"3g"===e||"slow-4g"===e)return!0}return!1},e}(),uf=null,df=!1,ff=!1,hf=new Set,pf=new Set,vf=0,gf=[],mf=s((function e(){i(this,e),c(this,"t",void 0),c(this,"o",0),c(this,"i",[])}),[{key:"u",value:function(e){var t;if(!e.hadRecentInput){var n=this.i[0],r=this.i.at(-1);this.o&&n&&r&&1e3>e.startTime-r.startTime&&5e3>e.startTime-n.startTime?(this.o+=e.value,this.i.push(e)):(this.o=e.value,this.i=[e]),null===(t=this.t)||void 0===t||t.call(this,e)}}}]),yf=function(){var e=performance.getEntriesByType("navigation")[0];if(e&&0<e.responseStart&&e.responseStart<performance.now())return e},wf=function(e){if("loading"===document.readyState)return"loading";var t=yf();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},bf=function(e){var t="";try{for(;9!==(null===(n=e)||void 0===n?void 0:n.nodeType);){var n,r=e;if(r.id)var i="#"+r.id;else{var o=r.nodeName;i=[1===r.nodeType?o.toLowerCase():o.toUpperCase().replace(/^#/,"")].concat(k(Array.from(r.classList).sort())).join(".")}var a=i;if(99<t.length+a.length)return t||a;if(t=t?a+">"+t:a,r.id)break;e=r.parentNode}}catch(e){}return t},kf=new WeakMap,_f=-1,Cf=function(e){addEventListener("pageshow",(function(t){t.persisted&&(_f=t.timeStamp,e(t))}),!0)},Sf=function(e,t,n,r){var i,o;return function(a){var s;0<=t.value&&(a||r)&&((o=t.value-(null!==(s=i)&&void 0!==s?s:0))||void 0===i)&&(i=t.value,t.delta=o,a=t.value,t.rating=a>n[1]?"poor":a>n[0]?"needs-improvement":"good",e(t))}},Ef=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Af=function(){var e,t=yf();return null!==(e=null==t?void 0:t.activationStart)&&void 0!==e?e:0},If=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,n=yf(),r="navigate";return 0<=_f?r="back-forward-cache":n&&(document.prerendering||0<Af()?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Tf=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(v({type:e,buffered:!0},n)),r}}catch(e){}},xf=function(e){var t=!1;return function(){t||(e(),t=!0)}},Rf=-1,Of=new Set,Mf=function(e){if("hidden"===document.visibilityState){if("visibilitychange"===e.type){var t,n=l(Of);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(e){n.e(e)}finally{n.f()}}isFinite(Rf)||(Rf="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",Mf,!0))}},Nf=function(){if(0>Rf){var e,t=Af(),n=document.prerendering||null===(e=globalThis.performance.getEntriesByType("visibility-state").filter((function(e){return"hidden"===e.name&&e.startTime>t}))[0])||void 0===e?void 0:e.startTime;Rf=null!=n?n:"hidden"!==document.visibilityState||document.prerendering?1/0:0,addEventListener("visibilitychange",Mf,!0),addEventListener("prerenderingchange",Mf,!0),Cf((function(){setTimeout((function(){Rf="hidden"!==document.visibilityState||document.prerendering?1/0:0}))}))}return{get firstHiddenTime(){return Rf},onHidden:function(e){Of.add(e)}}},Lf=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Df=[1800,3e3],Pf=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Lf((function(){var n,r=Nf(),i=If("FCP"),o=Tf("paint",(function(e){var t;e=l(e);try{for(e.s();!(t=e.n()).done;){var a=t.value;"first-contentful-paint"===a.name&&(o.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-Af(),0),i.entries.push(a),n(!0)))}}catch(t){e.e(t)}finally{e.f()}}));o&&(n=Sf(e,i,Df,t.reportAllChanges),Cf((function(r){i=If("FCP"),n=Sf(e,i,Df,t.reportAllChanges),Ef((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))},Uf=[.1,.25],Ff=function(e){return e.find((function(e){var t;return 1===(null===(t=e.node)||void 0===t?void 0:t.nodeType)}))||e[0]},zf=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=br(t=Object.assign({},t),mf),r=new WeakMap;n.t=function(e){var n,i,o,a;null!=e&&null!==(n=e.sources)&&void 0!==n&&n.length&&(n=null==(e=Ff(e.sources))?void 0:e.node)&&(n=null!==(i=null===(o=(a=t).generateTarget)||void 0===o?void 0:o.call(a,n))&&void 0!==i?i:bf(n),r.set(e,n))},function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=Nf();Pf(xf((function(){var r,i=If("CLS",0),o=br(t,mf),a=function(e){var t;e=l(e);try{for(e.s();!(t=e.n()).done;)o.u(t.value)}catch(t){e.e(t)}finally{e.f()}o.o>i.value&&(i.value=o.o,i.entries=o.i,r())},s=Tf("layout-shift",a);s&&(r=Sf(e,i,Uf,t.reportAllChanges),n.onHidden((function(){a(s.takeRecords()),r(!0)})),Cf((function(){o.o=0,i=If("CLS",0),r=Sf(e,i,Uf,t.reportAllChanges),Ef((function(){return r()}))})),setTimeout(r))})))}((function(t){t=function(e){var t={};if(e.entries.length){var n,i=e.entries.reduce((function(e,t){return e.value>t.value?e:t}));null!=i&&null!==(n=i.sources)&&void 0!==n&&n.length&&(n=Ff(i.sources))&&(t={largestShiftTarget:r.get(n),largestShiftTime:i.startTime,largestShiftValue:i.value,largestShiftSource:n,largestShiftEntry:i,loadState:wf(i.startTime)})}return Object.assign(e,{attribution:t})}(t),e(t)}),t)},Bf=0,jf=1/0,Gf=0,Hf=function(e){var t;e=l(e);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.interactionId&&(jf=Math.min(jf,n.interactionId),Gf=Math.max(Gf,n.interactionId),Bf=Gf?(Gf-jf)/7+1:0)}}catch(t){e.e(t)}finally{e.f()}},Vf=function(){var e;return Dd?Bf:null!==(e=performance.interactionCount)&&void 0!==e?e:0},Zf=0,qf=s((function e(){i(this,e),c(this,"l",[]),c(this,"h",new Map),c(this,"m",void 0),c(this,"p",void 0)}),[{key:"v",value:function(){Zf=Vf(),this.l.length=0,this.h.clear()}},{key:"M",value:function(){var e=Math.min(this.l.length-1,Math.floor((Vf()-Zf)/50));return this.l[e]}},{key:"u",value:function(e){var t;if(null!==(t=this.m)&&void 0!==t&&t.call(this,e),e.interactionId||"first-input"===e.entryType){var n=this.l.at(-1);if((t=this.h.get(e.interactionId))||10>this.l.length||e.duration>n.T){var r;if(t?e.duration>t.T?(t.entries=[e],t.T=e.duration):e.duration===t.T&&e.startTime===t.entries[0].startTime&&t.entries.push(e):(t={id:e.interactionId,entries:[e],T:e.duration},this.h.set(t.id,t),this.l.push(t)),this.l.sort((function(e,t){return t.T-e.T})),10<this.l.length){var i;e=l(e=this.l.splice(10));try{for(e.s();!(i=e.n()).done;)this.h.delete(i.value.id)}catch(t){e.e(t)}finally{e.f()}}null===(r=this.p)||void 0===r||r.call(this,t)}}}}]),Wf=function(e){var t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=xf(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),t((function(){e(),removeEventListener("visibilitychange",e,{capture:!0})})))},Yf=[200,500],Kf=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=br(t=Object.assign({},t),qf),r=[],i=[],o=0,a=new WeakMap,s=new WeakMap,c=!1,u=function(){var e=n.l.map((function(e){return a.get(e.entries[0])})),t=i.length-50;i=i.filter((function(n,r){return r>=t||e.includes(n)}));var s,u=new Set,f=l(i);try{for(f.s();!(s=f.n()).done;){var h,p=s.value,v=l(d(p.startTime,p.processingEnd));try{for(v.s();!(h=v.n()).done;)u.add(h.value)}catch(e){v.e(e)}finally{v.f()}}}catch(e){f.e(e)}finally{f.f()}var g=r.length-1-50;r=r.filter((function(e,t){return e.startTime>o&&t>g||u.has(e)})),c=!1};n.m=function(e){var t=e.startTime+e.duration;o=Math.max(o,e.processingEnd);for(var n=i.length-1;0<=n;n--){var r=i[n];if(8>=Math.abs(t-r.renderTime)){var s=r;s.startTime=Math.min(e.startTime,s.startTime),s.processingStart=Math.min(e.processingStart,s.processingStart),s.processingEnd=Math.max(e.processingEnd,s.processingEnd),s.entries.push(e);break}}s||(s={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:t,entries:[e]},i.push(s)),(e.interactionId||"first-input"===e.entryType)&&a.set(e,s),c||(Wf(u),c=!0)},n.p=function(e){if(!s.get(e)){var n,r,i,o=e.entries[0].target;if(o)o=null!==(n=null===(r=(i=t).generateTarget)||void 0===r?void 0:r.call(i,o))&&void 0!==n?n:bf(o),s.set(e,o)}};var d=function(e,t){var n,i=[],o=l(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(!(a.startTime+a.duration<e)){if(a.startTime>t)break;i.push(a)}}}catch(e){o.e(e)}finally{o.f()}return i},f=function(e){var t=e.entries[0],r=a.get(t),i=t.processingStart,o=Math.max(t.startTime+t.duration,i),c=Math.min(r.processingEnd,o);r=r.entries.sort((function(e,t){return e.processingStart-t.processingStart}));var u=d(t.startTime,c),f=n.h.get(t.interactionId);return function(e,t){if(null!==(t=e.longAnimationFrameEntries)&&void 0!==t&&t.length){t=e.interactionTime;var n,r,i,o=e.inputDelay,a=e.processingDuration,s=0,c=0,u=0,d=0,f=l(e.longAnimationFrameEntries);try{for(f.s();!(i=f.n()).done;){var h=i.value;c=c+h.startTime+h.duration-h.styleAndLayoutStart;var p,v=l(h.scripts);try{for(v.s();!(p=v.n()).done;){var g=p.value,m=g.startTime+g.duration;if(!(m<t)){var y=m-Math.max(t,g.startTime),w=g.duration?y/g.duration*g.forcedStyleAndLayoutDuration:0;s+=y-w,c+=w,y>d&&(r=g.startTime<t+o?"input-delay":g.startTime>=t+o+a?"presentation-delay":"processing-duration",n=g,d=y)}}}catch(e){v.e(e)}finally{v.f()}}}catch(e){f.e(e)}finally{f.f()}(i=(i=e.longAnimationFrameEntries.at(-1))?i.startTime+i.duration:0)>=t+o+a&&(u=e.nextPaintTime-i),n&&r&&(e.longestScript={entry:n,subpart:r,intersectingDuration:d}),e.totalScriptDuration=s,e.totalStyleAndLayoutDuration=c,e.totalPaintDuration=u,e.totalUnattributedDuration=e.nextPaintTime-t-s-c-u}}(t={interactionTarget:s.get(f),interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:o,processedEventEntries:r,longAnimationFrameEntries:u,inputDelay:i-t.startTime,processingDuration:c-i,presentationDelay:o-c,loadState:wf(t.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0}),Object.assign(e,{attribution:t})};Tf("long-animation-frame",(function(e){r=r.concat(e),c||(Wf(u),c=!0)})),function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype){var n=Nf();Lf((function(){var r;"interactionCount"in performance||Dd||(Dd=Tf("event",Hf,{type:"event",buffered:!0,durationThreshold:0}));var i=If("INP"),o=br(t,qf),a=function(e){Wf((function(){var t,n=l(e);try{for(n.s();!(t=n.n()).done;)o.u(t.value)}catch(e){n.e(e)}finally{n.f()}(n=o.M())&&n.T!==i.value&&(i.value=n.T,i.entries=n.entries,c())}))},s=Tf("event",a,{durationThreshold:null!==(r=t.durationThreshold)&&void 0!==r?r:40}),c=Sf(e,i,Yf,t.reportAllChanges);s&&(s.observe({type:"first-input",buffered:!0}),n.onHidden((function(){a(s.takeRecords()),c(!0)})),Cf((function(){o.v(),i=If("INP"),c=Sf(e,i,Yf,t.reportAllChanges)})))}))}}((function(t){t=f(t),e(t)}),t)},Jf=s((function e(){i(this,e),c(this,"m",void 0)}),[{key:"u",value:function(e){var t;null===(t=this.m)||void 0===t||t.call(this,e)}}]),Xf=[2500,4e3],Qf=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=br(t=Object.assign({},t),Jf),r=new WeakMap;n.m=function(e){var n,i,o,a=e.element;a&&(a=null!==(n=null===(i=(o=t).generateTarget)||void 0===i?void 0:i.call(o,a))&&void 0!==n?n:bf(a),r.set(e,a))},function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Lf((function(){var n=Nf(),r=If("LCP"),i=br(t,Jf),o=function(e){var o;t.reportAllChanges||(e=e.slice(-1)),e=l(e);try{for(e.s();!(o=e.n()).done;){var a=o.value;i.u(a),a.startTime<n.firstHiddenTime&&(r.value=Math.max(a.startTime-Af(),0),r.entries=[a],s())}}catch(t){e.e(t)}finally{e.f()}},a=Tf("largest-contentful-paint",o);if(a){for(var s=Sf(e,r,Xf,t.reportAllChanges),c=xf((function(){o(a.takeRecords()),a.disconnect(),s(!0)})),u=function(e){e.isTrusted&&(Wf(c),removeEventListener(e.type,u,{capture:!0}))},d=0,f=["keydown","click","visibilitychange"];d<f.length;d++)addEventListener(f[d],u,{capture:!0});Cf((function(n){r=If("LCP"),s=Sf(e,r,Xf,t.reportAllChanges),Ef((function(){r.value=performance.now()-n.timeStamp,s(!0)}))}))}}))}((function(t){t=function(e){var t={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){var n=yf();if(n){var i=n.activationStart||0,o=e.entries.at(-1),a=o.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===o.url}))[0];t=Math.max(0,n.responseStart-i);var s=Math.max(t,a?(a.requestStart||a.startTime)-i:0);i=Math.min(e.value,Math.max(s,a?a.responseEnd-i:0)),t={target:r.get(o),timeToFirstByte:t,resourceLoadDelay:s-t,resourceLoadDuration:i-s,elementRenderDelay:e.value-i,navigationEntry:n,lcpEntry:o},o.url&&(t.url=o.url),a&&(t.lcpResourceEntry=a)}}return Object.assign(e,{attribution:t})}(t),e(t)}),t)};!function(e){e[e.APP=0]="APP",e[e.REMOTE=1]="REMOTE",e[e.MERGE=2]="MERGE"}(Ud||(Ud={}));var $f={},eh=function(){this.outQueues=[],this.bufferFlushers=[],this.hasLoaded=!1,this.registeredOnLoadHandlers=[]},th=Object.freeze({__proto__:null,cleanup:function(e){Sr(e,(function(e){e.clearTimers()})),function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];$f.hasOwnProperty(n)?delete $f[n]:Yr.warn(n+" not configured")}}(e)},convivaAppTracker:function(e){void 0===e&&(e={});try{var t="undefined"!=typeof window?Ir():void 0;if(t)return Er("CAT","CAT",e.trackerVersionSuffix?"js-".concat("1.5.1"," ").concat(e.trackerVersionSuffix):"js-".concat("1.5.1"),t,e)}catch(e){console.warn("Conviva App Tracker:: Initialisation failed! "+e)}},getClientId:function(){var e="";return"undefined"!=typeof window&&null!==window&&void 0!==window&&window.localStorage&&(e=window.localStorage.getItem("Conviva.sdkConfig"),e="{}"===(e=JSON.parse(e||"{}"))||void 0===e?"":e.clId),e},setClientId:function(e){if(e&&"string"==typeof e)try{var t=e.split(".");if(4!==t.length)console.warn('Conviva App Tracker:: Invalid clientId format! It should be in the format of "x.x.x.x"');else if(!1===t.every((function(e){return/^\d+$/.test(e)})))console.warn("Conviva App Tracker:: Invalid clientId format! Every part of clientId should be numeric");else if("undefined"!=typeof window&&null!==window&&void 0!==window&&window.localStorage){var n=window.localStorage,r=n.getItem("Conviva.sdkConfig"),i=JSON.parse(r||"{}");"{}"===i||void 0===i?i={clId:e}:i.clId=e;var o=JSON.stringify(i);n.setItem("Conviva.sdkConfig",o)}else console.warn("Conviva App Tracker:: window or local storage is not available")}catch(e){console.warn(e)}else console.warn("Conviva App Tracker:: Unable to set clinetId string!")},setConversationId:function(e,t){Sr(t,(function(t){t.setConversationId(e)}))},setCustomTags:function(e,t){Sr(t,(function(t){try{t.setCustomTags(e)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}}))},setCustomUrl:function(e,t){Sr(t,(function(t){t.setCustomUrl(e)}))},setDocumentTitle:function(e,t){Sr(t,(function(t){t.setDocumentTitle(e)}))},setReferrerUrl:function(e,t){Sr(t,(function(t){t.setReferrerUrl(e)}))},setUserId:function(e,t){Sr(t,(function(t){t.setUserId(e)}))},trackButtonClick:function(e,t){Sr(t,(function(t){try{t.trackButtonClick(e)}catch(e){console.warn("Conviva App Tracker:: Unable to track button click event! "+e)}}))},trackCustomEvent:function(e,t){Sr(t,(function(t){try{t.trackCustomEvent(e)}catch(e){console.warn("Conviva App Tracker:: Unable to track custom event! "+e)}}))},trackError:function(e,t){Sr(t,(function(t){try{t.trackErrorEvent(e)}catch(e){console.warn("Conviva App Tracker:: Unable to track error!")}}))},trackLinkClick:function(e,t){Sr(t,(function(t){try{t.trackLinkClick(e)}catch(e){console.warn("Conviva App Tracker:: Unable to track link click event! "+e)}}))},trackNetworkRequest:function(e,t){var n,r,i,o,a,s,l,c,u,d,f,h,p,v,g,m,y,w,b={method:null!==(n=e.requestDetails.method)&&void 0!==n?n:void 0,url:null!==(r=e.requestDetails.url)&&void 0!==r?r:void 0,headers:null!==(i=e.requestDetails.headers)&&void 0!==i?i:void 0,body:null!==(o=e.requestDetails.body)&&void 0!==o?o:void 0,requestTimestamp:null!==(a=e.requestDetails.requestTimestamp)&&void 0!==a?a:void 0,requestTime:null!==(s=e.requestDetails.requestTime)&&void 0!==s?s:void 0,size:null!==(l=e.requestDetails.size)&&void 0!==l?l:void 0,traceparent:null!==(c=e.requestDetails.traceparent)&&void 0!==c?c:void 0,baggage:null!==(u=e.requestDetails.baggage)&&void 0!==u?u:void 0},k={status:null!==(d=e.responseDetails.status)&&void 0!==d?d:void 0,statusText:null!==(f=e.responseDetails.statusText)&&void 0!==f?f:void 0,url:null!==(h=e.responseDetails.url)&&void 0!==h?h:void 0,headers:null!==(p=e.responseDetails.headers)&&void 0!==p?p:void 0,body:null!==(v=e.responseDetails.body)&&void 0!==v?v:null,event:null!==(g=e.responseDetails.event)&&void 0!==g?g:void 0,size:null!==(m=e.responseDetails.size)&&void 0!==m?m:void 0,responseTimestamp:null!==(y=e.responseDetails.responseTimestamp)&&void 0!==y?y:void 0,responseTime:null!==(w=e.responseDetails.responseTime)&&void 0!==w?w:void 0};b.url?Sr(t,(function(e){var t;try{var n=null===(t=e.core)||void 0===t?void 0:t.getConfig().networkRequestTrackingConfiguration;e.getSamplingMode()!==Ku.SAMPLING_MODES.NONE&&n.enabled&&e.determineShouldTrack(n.collect,n.block,n.blocklist,n.safelist,k,b)&&(n.eventCollectionMode!==Ku.NETWORK_REQUEST_EVENT_COLLECTION_MODE.MANUAL&&n.eventCollectionMode!==Ku.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH||e.trackNetworkRequest({requestDetails:b,responseDetails:k}))}catch(e){console.warn("Conviva App Tracker:: Unable to track network request! "+e)}})):console.warn("Conviva App Tracker:: Unable to track network request! Missing required fields.")},trackPageView:function(e,t){Sr(t,(function(t){t.trackPageView(e)}))},unsetCustomTags:function(e,t){Sr(t,(function(t){try{t.unsetCustomTags(e)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}}))},version:"1.5.1"}),nh=window.GlobalConvivaNamespace.shift(),rh=window[nh];rh.q=function(e,t){function n(e){var t=e.split(":");return[e=t[0],t=1<t.length?t[1].split(";"):void 0]}function r(e,t){if(v[e])try{return v[e].apply(null,t)}catch(t){Yr.error(e+" failed",t)}else Yr.warn(e+" is not an available function")}function i(e){v=Tr(Tr({},v),e)}function o(e){try{if("object"==typeof e[0]&&null!==e[0]){var t=e[0],n=function(e){return null==e||e.contexts,[]}(t),r=Er("CAT","CAT",t.trackerVersionSuffix?"js-".concat(p," ").concat(t.trackerVersionSuffix):"js-".concat(p),u,Tr(Tr({},t),{plugins:n.map((function(e){return e[0]}))}));r?(d.includes(r.id)||d.push(r.id),n.forEach((function(e){i(e[1])}))):Yr.warn("CAT already exists")}else Yr.error("convivaAppTracker failed",Error("Invalid parameters"))}catch(e){console.warn("convivaAppTracker failed "+e)}}function a(e,t){function n(e){Object.prototype.hasOwnProperty.call(f,e)&&(l.clearTimeout(f[e].timeout),delete f[e],0===Object.keys(f).length&&h.forEach((function(e){var t=e[1];void 0!==v[e[0]]&&v[e[0]].length>t.length&&Array.isArray(t[0])&&(t=[{},t[0]]),r(e[0],t)})))}var o;if("string"==typeof e[0]&&z(e[1])&&(void 0===e[2]||Array.isArray(e[2]))){var a=e[0],s=e[1],u=e[2];if(null===(o=e[3])||void 0===o||o){var d=l.setTimeout((function(){n(a)}),5e3);f[a]={timeout:d}}(d=c.createElement("script")).setAttribute("src",a),d.setAttribute("async","1"),rn(d,"error",(function(){n(a),Yr.warn("Failed to load plugin ".concat(s[0]," from ").concat(a))}),!0),rn(d,"load",(function(){var e=s[1],r=l[s[0]];if(r&&"object"==typeof r){var o=r[e];e=A(r,["symbol"==typeof e?e:e+""]),v.addPlugin.apply(null,[{plugin:o.apply(null,u)},t]),i(e)}n(a)}),!0),c.head.appendChild(d)}else{if("object"==typeof e[0]&&"string"==typeof e[1]&&(void 0===e[2]||Array.isArray(e[2]))){var p=e[0],g=e[1];if(o=e[2],p)return e=p[g],p=A(p,["symbol"==typeof g?g:g+""]),null===(d=v.addPlugin)||void 0===d||d.apply(null,[{plugin:e.apply(null,o)},t]),void i(p)}Yr.warn("Failed to add Plugin: ".concat(e[1]))}}function s(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(i=0;i<t.length;i+=1){var s=t[i],l=Array.prototype.shift.call(s),c=!(!l||"function"!=typeof l);if(c)try{c={};for(var u=0,p=Ar(d,$f);u<p.length;u++){var g=p[u];c[g.id.replace("".concat(e,"_"),"")]=g}l.apply(c,s)}catch(e){Yr.error("Tracker callback failed",e)}finally{continue}if(l=(c=n(l))[0],c=c[1],"convivaAppTracker"===l)o(s);else if(c=c?c.map((function(t){return"".concat(e,"_").concat(t)})):d,"addPlugin"===l)a(s,c);else if(u=void 0,u=0<s.length?[s[0],c]:void 0!==v[l]&&2===v[l].length?[{},c]:[c],0<Object.keys(f).length)h.push([l,u]);else if(s=r(l,u),"getClientId"===l)return s}}for(var l=window,c=document,u=Ir(),d=[],f={},h=[],p="1.5.1",v=A(th,["version"]),g=0;g<t.length;g++)s(t[g]);return{push:s}}(nh,rh.q)}();
//# sourceMappingURL=conviva-eco-js-script-sensor.js.map
