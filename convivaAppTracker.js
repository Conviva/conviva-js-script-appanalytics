/*!
 * Web analytics for Conviva v1.5.0 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

"use strict";!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(o,i){function a(e){t(l,o,i,a,s,"next",e)}function s(e){t(l,o,i,a,s,"throw",e)}var l=e.apply(n,r);a(void 0)}))}}function r(e,t,n){if(t=d(t),!(t=h()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))||"object"!=typeof t&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}else e=t;return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){if(h())return Reflect.construct.apply(null,arguments);var r=[null];return r.push.apply(r,t),r=new(e.bind.apply(e,r)),n&&y(r,n.prototype),r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=E(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function c(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r;for(r=e;!{}.hasOwnProperty.call(r,t)&&null!==(r=d(r)););if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(3>arguments.length?e:n):r.value},u.apply(null,arguments)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(null==e)return{};var n;if(null==e)var r={};else{var o={};for(n in e)({}).hasOwnProperty.call(e,n)&&!t.includes(n)&&(o[n]=e[n]);r=o}if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function m(){function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,o){return t=Object.create((t&&t.prototype instanceof r?t:r).prototype),o=new f(o||[]),b(t,"_invoke",{value:l(e,n,o)}),t}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function o(){}function i(){}function a(t){["next","throw","return"].forEach((function(n){e(t,n,(function(e){return this._invoke(n,e)}))}))}function s(e,t){function r(o,i,a,s){if("throw"!==(o=n(e[o],e,i)).type){var l=o.arg;return(o=l.value)&&"object"==typeof o&&y.call(o,"__await")?t.resolve(o.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(o).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(o.arg)}var o;b(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}})}function l(e,t,r){var o=E;return function(i,a){if(o===_)throw Error("Generator is already running");if(o===T){if("throw"===i)throw a;return{value:p,done:!0}}for(r.method=i,r.arg=a;;){if((i=r.delegate)&&(i=c(i,r))){if(i===A)continue;return i}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===E)throw o=T,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);if(o=_,"normal"===(i=n(e,t,r)).type){if(o=r.done?T:I,i.arg===A)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(o=T,r.method="throw",r.arg=i.arg)}}}function c(e,t){var r=t.method,o=e.iterator[r];return o===p?(t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=p,c(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),A):"throw"===(r=n(o,e.iterator,t.arg)).type?(t.method="throw",t.arg=r.arg,t.delegate=null,A):(r=r.arg)?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=p),t.delegate=null,A):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function u(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(u,this),this.reset(!0)}function h(e){if(e||""===e){var t=e[k];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1;return(t=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=p,t.done=!0,t}).next=t}}throw new TypeError(typeof e+" is not iterable")}m=function(){return v};var p,v={},g=Object.prototype,y=g.hasOwnProperty,b=Object.defineProperty||function(e,t,n){e[t]=n.value},w="function"==typeof Symbol?Symbol:{},k=w.iterator||"@@iterator",C=w.asyncIterator||"@@asyncIterator",S=w.toStringTag||"@@toStringTag";try{e({},"")}catch(t){e=function(e,t,n){return e[t]=n}}v.wrap=t;var E="suspendedStart",I="suspendedYield",_="executing",T="completed",A={};e(w={},k,(function(){return this}));var x=Object.getPrototypeOf;(x=x&&x(x(h([]))))&&x!==g&&y.call(x,k)&&(w=x);var R=i.prototype=r.prototype=Object.create(w);return o.prototype=i,b(R,"constructor",{value:i,configurable:!0}),b(i,"constructor",{value:o,configurable:!0}),o.displayName=e(i,S,"GeneratorFunction"),v.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,e(t,S,"GeneratorFunction")),t.prototype=Object.create(R),t},v.awrap=function(e){return{__await:e}},a(s.prototype),e(s.prototype,C,(function(){return this})),v.AsyncIterator=s,v.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new s(t(e,n,r,o),i);return v.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(R),e(R,S,"Generator"),e(R,k,(function(){return this})),e(R,"toString",(function(){return"[object Generator]"})),v.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},v.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=p)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=p),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=y.call(o,"catchLoc"),s=y.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}return o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null),(n=o?o.completion:{}).type=e,n.arg=t,o?(this.method="next",this.next=o.finallyLoc,A):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){if("throw"===(e=n.completion).type){var r=e.arg;d(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=p),A}},v}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){var n=Array.isArray(e)?e:void 0;if(!n)e:{var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r){n=void 0;break e}l=!1}else for(;!(l=(o=i.call(r)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){c=!0;var u=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a)){n=void 0;break e}}finally{if(c)throw u}}n=s}else n=void 0}if(!(e=n||E(e,t)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function w(e,t,n,r){var o=u(d(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function k(t){var n=Array.isArray(t)?e(t):void 0;if(n||(n="undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"]?Array.from(t):void 0),!(t=n||E(t)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return t}function C(e){e:if("object"==typeof e&&e){var t=e[Symbol.toPrimitive];if(void 0!==t){if("object"!=typeof(e=t.call(e,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}e=String(e)}return"symbol"==typeof e?e:e+""}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function I(e){var t="function"==typeof Map?new Map:void 0;return I=function(e){function n(){return i(e,arguments,d(this).constructor)}if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},I(e)}function _(e,t){var n,r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)0>t.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function T(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function A(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3]))s.label=n[1];else if(6===n[0]&&s.label<i[1])s.label=i[1],i=n;else{if(!(i&&s.label<i[2])){i[2]&&s.ops.pop(),s.trys.pop();continue}s.label=i[2],s.ops.push(n)}}n=t.call(e,s)}catch(e){n=[6,e],o=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function x(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function R(){var e,t={},n=[],r=[],o=[],i=function(e,n){null!=n&&""!==n&&(t[e]=n)};return{add:i,addDict:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&i(t,e[t])},addJson:function(e,t,o){o&&M(o)&&(e={keyIfEncoded:e,keyIfNotEncoded:t,json:o},r.push(e),n.push(e))},addContextEntity:function(e){o.push(e)},getPayload:function(){return t},getJson:function(){return n},withJsonProcessor:function(t){e=t},build:function(){return null==e||e(this,r,o),t}}}function O(e){return function(t,n,r){for(var o=function(n,r,o){if(n=JSON.stringify(n),e){if(o=t.add,n){var i=0,a=0,s=[];if(n){n=unescape(encodeURIComponent(n));do{var l=n.charCodeAt(i++),c=n.charCodeAt(i++),u=n.charCodeAt(i++),d=l<<16|c<<8|u;l=d>>18&63,c=d>>12&63,u=d>>6&63,d&=63,s[a++]=Wr.charAt(l)+Wr.charAt(c)+Wr.charAt(u)+Wr.charAt(d)}while(i<n.length);i=s.join(""),n=((n=n.length%3)?i.slice(0,n-3):i)+"===".slice(n||3)}n=n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}o.call(t,r,n)}else t.add(o,n)},i=function(n,r){if(!n){var o=t.getPayload();if(e?o.cx:o.co){var i=(n=JSON).parse;if(e){if(o=o.cx){switch(4-o.length%4){case 2:o+="==";break;case 3:o+="="}o=function(e){var t,n=0,r=0,o="",i=[];if(!e)return e;e+="";do{var a=Wr.indexOf(e.charAt(n++)),s=Wr.indexOf(e.charAt(n++));o=Wr.indexOf(e.charAt(n++));var l=Wr.indexOf(e.charAt(n++)),c=a<<18|s<<12|o<<6|l;a=c>>16&255,s=c>>8&255,c&=255,i[r++]=64===o?String.fromCharCode(a):64===l?String.fromCharCode(a,s):String.fromCharCode(a,s,c)}while(n<e.length);return o=i.join(""),t=o.replace(/\0+$/,""),decodeURIComponent(t.split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(o=o.replace(/-/g,"+").replace(/_/g,"/"))}}else o=o.co;n=i.call(n,o)}else n=void 0}return n?n.dt=n.dt.concat(r.dt):n=r,n},a=void 0,s=0;s<n.length;s++){var l=n[s];"cx"===l.keyIfEncoded?a=i(a,l.json):o(l.json,l.keyIfEncoded,l.keyIfNotEncoded)}n.length=0,r.length&&(a=i(a,n={sc:"sp/ctx/1-0-0",dt:x([],r,!0)}),r.length=0),a&&o(a,"cx","co")}}function M(e){if(!N(e))return!1;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function N(e){return null!=e&&(e.constructor==={}.constructor||e.constructor===[].constructor)}function L(){var e=[],t=[];return{getGlobalPrimitives:function(){return e},getConditionalProviders:function(){return t},addGlobalContexts:function(n){for(var r=[],o=[],i=0;i<n.length;i++){var a=n[i];q(a)?r.push(a):V(a)&&o.push(a)}e=e.concat(o),t=t.concat(r)},clearGlobalContexts:function(){t=[],e=[]},removeGlobalContexts:function(n){for(var r=function(n){q(n)?t=t.filter((function(e){return JSON.stringify(e)!==JSON.stringify(n)})):V(n)&&(e=e.filter((function(e){return JSON.stringify(e)!==JSON.stringify(n)})))},o=0;o<n.length;o++)r(n[o])},getApplicableContexts:function(n){e:{for(var r=0,o=n.getJson();r<o.length;r++){var i=o[r];if("ue_px"===i.keyIfEncoded&&"object"===S(i.json.data)&&"string"==typeof(i=i.json.data.schema)){r=i;break e}}r=""}i="string"==typeof(o=n.getPayload().e)?o:"",o=[];var a=J(e,n,i,r);return o.push.apply(o,a),n=function(e,t,n,r){var o;return e=K(e).map((function(e){e:{if(W(e)){var o=e[0],i=!1;try{i=o({event:t.getPayload(),eventType:n,eventSchema:r})}catch(e){i=!1}if(!0===i){e=J(e[1],t,n,r);break e}}else if(H(e)&&function(e,t){var n=0,r=0,o=e.accept;return Array.isArray(o)?e.accept.some((function(e){return Z(e,t)}))&&r++:"string"==typeof o&&Z(o,t)&&r++,o=e.reject,Array.isArray(o)?e.reject.some((function(e){return Z(e,t)}))&&n++:"string"==typeof o&&Z(o,t)&&n++,0<r&&0===n}(e[0],r)){e=J(e[1],t,n,r);break e}e=[]}if(e&&0!==e.length)return e})),(o=[]).concat.apply(o,e.filter((function(e){return null!=e&&e.filter(Boolean)})))}(t,n,i,r),o.push.apply(o,n),o}}}function D(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return null!==(t=null==e?void 0:e.map((function(e){if("function"!=typeof e)return e;try{return e.apply(void 0,n)}catch(e){}})).filter(Boolean))&&void 0!==t?t:[]}function P(e){return!!((e=e.split("."))&&1<e.length)&&function(e){if("*"===e[0]||"*"===e[1])return!1;if(0<e.slice(2).length){var t=!1,n=0;for(e=e.slice(2);n<e.length;n++)if("*"===e[n])t=!0;else if(t)return!1;return!0}return 2==e.length}(e)}function U(e){if(null!==(e=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(e))&&P(e[1]))return e.slice(1,6)}function F(e){if(e=U(e)){var t=e[0];return 5===e.length&&P(t)}return!1}function B(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))}function G(e){return B(e)?e.every((function(e){return F(e)})):"string"==typeof e&&F(e)}function j(e){return!!(M(e)&&"sc"in e&&"dt"in e)&&("string"==typeof e.sc&&"object"===S(e.dt))}function z(e){return"function"==typeof e&&1>=e.length}function V(e){return z(e)||j(e)}function W(e){return!(!Array.isArray(e)||2!==e.length)&&(Array.isArray(e[1])?z(e[0])&&e[1].every(V):z(e[0])&&V(e[1]))}function H(e){return!(!Array.isArray(e)||2!==e.length)&&(!!function(e){var t=0;if(null!=e&&"object"===S(e)&&!Array.isArray(e)){if(Object.prototype.hasOwnProperty.call(e,"accept")){if(!G(e.accept))return!1;t+=1}if(Object.prototype.hasOwnProperty.call(e,"reject")){if(!G(e.reject))return!1;t+=1}return 0<t&&2>=t}return!1}(e[0])&&(Array.isArray(e[1])?e[1].every(V):V(e[1])))}function q(e){return W(e)||H(e)}function Z(e,t){if(!F(e))return!1;if(e=U(e),t=null!==(t=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(t))?t.slice(1,6):void 0,e&&t){if(!function(e,t){if(t=t.split("."),e=e.split("."),t&&e){if(t.length!==e.length)return!1;for(var n=0;n<e.length;n++)if(!Y(t[n],e[n]))return!1;return!0}return!1}(e[0],t[0]))return!1;for(var n=1;5>n;n++)if(!Y(e[n],t[n]))return!1;return!0}return!1}function Y(e,t){return e&&t&&"*"===e||e===t}function K(e){return Array.isArray(e)?e:[e]}function J(e,t,n,r){var o;return e=K(e).map((function(e){e:if(j(e))e=[e];else{if(z(e)){t:{var o=void 0;try{if(o=e({event:t.getPayload(),eventType:n,eventSchema:r}),Array.isArray(o)&&o.every(j)||j(o)){var i=o;break t}i=void 0;break t}catch(e){}i=void 0}if(j(i)){e=[i];break e}if(Array.isArray(i)){e=i;break e}}e=void 0}if(e&&0!==e.length)return e})),(o=[]).concat.apply(o,e.filter((function(e){return null!=e&&e.filter(Boolean)})))}function X(e){void 0===e&&(e={});var t,n,r,o,i,a,s,l,c=e.base64,u=e.corePlugins,d=null!=u?u:[];t=null==c||c,n=d,r=e.callback,o=function(e){return{addPluginContexts:function(t){var n=t?x([],t,!0):[];return e.forEach((function(e){try{e.contexts&&n.push.apply(n,e.contexts())}catch(e){qr.error("Error adding plugin contexts",e)}})),n}}}(n),i=L(),a=t,s={},l=null;var f=_r(_r({},c={track:function(e,t,l){e.withJsonProcessor(O(a)),e.add("eid",Vr.v4()),e.addDict(s),l=function(e){return null==e?{type:"dtm",value:(new Date).getTime()}:"number"==typeof e?{type:"dtm",value:e}:"ttm"===e.type?{type:"ttm",value:e.value}:{type:"dtm",value:e.value||(new Date).getTime()}}(l),e.add(l.type,l.value.toString()),t=function(e,t){e=i.getApplicableContexts(e);var n=[];return t&&t.length&&n.push.apply(n,t),e&&e.length&&n.push.apply(n,e),n}(e,o.addPluginContexts(t)),void 0!==(t=t&&t.length?{sc:"sp/ctx/1-0-0",dt:t}:void 0)&&e.addJson("cx","co",t),n.forEach((function(t){try{t.beforeTrack&&t.beforeTrack(e)}catch(e){qr.error("Plugin beforeTrack",e)}})),"function"==typeof r&&r(e);var c=e.build();return n.forEach((function(e){try{e.afterTrack&&e.afterTrack(c)}catch(e){qr.error("Plugin afterTrack",e)}})),c},addPayloadPair:function(e,t){s[e]=t},configuration:e,getConfig:function(){return e},setConfig:function(t){t&&(void 0!==t.base64&&(a=e.base64=t.base64),void 0!==t.lifecycleAutotracking&&(e.lifecycleAutotracking=t.lifecycleAutotracking),void 0!==t.cacheRefreshInterval&&(e.cacheRefreshInterval=t.cacheRefreshInterval),void 0!==t.exceptionAutotracking&&(e.exceptionAutotracking=t.exceptionAutotracking),void 0!==t.enablePeriodicHeartbeat&&(e.enablePeriodicHeartbeat=t.enablePeriodicHeartbeat),void 0!==t.periodicHeartbeatInterval&&(e.periodicHeartbeatInterval=t.periodicHeartbeatInterval),void 0!==t.enc&&(e.enc=t.enc),void 0!==t.mend&&(e.mend=t.mend),void 0!==t.maxLocalStorageQueueSize&&(e.maxLocalStorageQueueSize=t.maxLocalStorageQueueSize),void 0!==t.maxGetBytes&&(e.maxGetBytes=t.maxGetBytes),void 0!==t.bufferSize&&(e.bufferSize=t.bufferSize),void 0!==t.customEventTrackingConfiguration&&(e.customEventTrackingConfiguration=t.customEventTrackingConfiguration),void 0!==t.networkRequestTrackingConfiguration&&(e.networkRequestTrackingConfiguration=t.networkRequestTrackingConfiguration),void 0!==t.traceparentconfig&&(e.traceparentconfig=t.traceparentconfig),void 0!==t.baggageConfiguration&&(e.baggageConfiguration=t.baggageConfiguration),void 0!==t.metaTagsTrackingConfiguration&&(e.metaTagsTrackingConfiguration=t.metaTagsTrackingConfiguration),void 0!==t.evtStreamTrackingConfiguration&&(e.evtStreamTrackingConfiguration=t.evtStreamTrackingConfiguration),void 0!==t.performanceContextConfig&&(e.performanceContextConfig=t.performanceContextConfig),void 0!==t.configurationVersion&&(e.configurationVersion=t.configurationVersion),void 0!==t.catRcLastUpdatedTs&&(e.catRcLastUpdatedTs=t.catRcLastUpdatedTs),void 0!==t.endpoint&&(e.endpoint=t.endpoint),void 0!==t.controlIngestConfig&&(e.controlIngestConfig=t.controlIngestConfig),void 0!==t.applicationContext&&(e.applicationContext=t.applicationContext),void 0!==t.emitterConfiguration&&(e.emitterConfiguration=t.emitterConfiguration),void 0!==t.di&&(e.di=t.di),void 0!==t.clickcc&&(e.clickcc=t.clickcc),void 0!==t.collectionRateLimit&&(e.collectionRateLimit=t.collectionRateLimit),e.pageUrlTrackingConfig=void 0!==t.pageUrlTrackingConfig?t.pageUrlTrackingConfig:null,e.sessionReplayConfiguration=void 0!==t.sessionReplayConfiguration?t.sessionReplayConfiguration:null,e.valueProbes=void 0!==t.valueProbes?t.valueProbes:null,e.webVitals=void 0!==t.webVitals?t.webVitals:null)},getBase64Encoding:function(){return a},setBase64Encoding:function(e){a=e},addPayloadDict:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])},resetPayloadPairs:function(e){s=N(e)?e:{}},setTrackerVersion:function(e){s.tv=e},setTrackerNamespace:function(e){s.tna=e},setAppId:function(e){s.aid=e},setPlatform:function(e){s.p=e},setUserId:function(e){s.uid=e},setConversationId:function(e){l=e},getConversationId:function(){return l},setScreenResolution:function(e,t){s.res=e+"x"+t},setViewport:function(e,t){s.vp=e+"x"+t},setColorDepth:function(e){s.cd=e},setTimezone:function(e){s.tz=e},setLang:function(e){s.lang=e},setIpAddress:function(e){s.ip=e},setUseragent:function(e){s.ua=e},addGlobalContexts:function(e){i.addGlobalContexts(e)},clearGlobalContexts:function(){i.clearGlobalContexts()},removeGlobalContexts:function(e){i.removeGlobalContexts(e)}}),{addPlugin:function(e){var t,n;e=e.plugin,d.push(e),null===(t=e.logger)||void 0===t||t.call(e,qr),null===(n=e.activateCorePlugin)||void 0===n||n.call(e,f)}});return null==d||d.forEach((function(e){var t,n;null===(t=e.logger)||void 0===t||t.call(e,qr),null===(n=e.activateCorePlugin)||void 0===n||n.call(e,f)})),f}function Q(e){var t=e.event;return e={sc:"sp/ue/1-0-0",dt:{sc:e=t.sc,dt:t.dt}},(t=R()).add("e","ue"),t.addJson("ue_px","ue_pr",e),t}function $(e){return Q({event:{sc:"cv/re/1-0-1",dt:ee({name:e.name,data:e.data})}})}function ee(e,t){void 0===t&&(t={});var n,r={};for(n in e)(t[n]||null!==e[n]&&void 0!==e[n])&&(r[n]=e[n]);return r}function te(e){for(var t=e.length;0<=--t;)e[t]=0}function ne(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function re(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function oe(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function ie(){this.strm=null,this.status=0,this.pending_buf=null,this.wrap=this.pending=this.pending_out=this.pending_buf_size=0,this.gzhead=null,this.gzindex=0,this.method=Jo,this.last_flush=-1,this.w_mask=this.w_bits=this.w_size=0,this.window=null,this.window_size=0,this.head=this.prev=null,this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Qo(this.dyn_ltree),Qo(this.dyn_dtree),Qo(this.bl_tree),this.bl_desc=this.d_desc=this.l_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Qo(this.heap),this.heap_max=this.heap_len=0,this.depth=new Uint16Array(573),Qo(this.depth),this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.sym_end=this.sym_next=this.lit_bufsize=this.sym_buf=0}function ae(e){(e=this.options=gi.assign({level:xi,method:Oi,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ri},e||{})).raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&16>e.windowBits&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ki,this.strm.avail_out=0;var t=vi.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Ti)throw Error(Ro[t]);if(e.header&&vi.deflateSetHeader(this.strm,e.header),e.dictionary){if(e="string"==typeof e.dictionary?wi.string2buf(e.dictionary):"[object ArrayBuffer]"===Ci.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(t=vi.deflateSetDictionary(this.strm,e))!==Ti)throw Error(Ro[t]);this._dict_set=!0}}function se(e,t){if((t=new ae(t)).push(e,!0),t.err)throw t.msg||Ro[t.err];return t.result}function le(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.total=this.check=this.dmax=this.flags=0,this.head=null,this.wnext=this.whave=this.wsize=this.wbits=0,this.window=null,this.extra=this.offset=this.length=this.bits=this.hold=0,this.distcode=this.lencode=null,this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.distdyn=this.lendyn=null,this.was=this.back=this.sane=0}function ce(e){var t=this.options=gi.assign({chunkSize:65536,windowBits:15,to:""},e||{});if(t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&16>t.windowBits)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ki,this.strm.avail_out=0,(e=oa.inflateInit2(this.strm,t.windowBits))!==ca)throw Error(Ro[e]);if(this.header=new ia,oa.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=wi.string2buf(t.dictionary):"[object ArrayBuffer]"===aa.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=oa.inflateSetDictionary(this.strm,t.dictionary))!==ca))throw Error(Ro[e])}function ue(e,t){if((t=new ce(t)).push(e),t.err)throw t.msg||Ro[t.err];return t.result}function de(e){if(Oa[e])return Oa[e];var t=globalThis[e],n=t.prototype,r=e in xa?xa[e]:void 0;r=!(!r||!r.every((function(e){var t,r;return!(null==(r=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)||!r.toString().includes("[native code]"))})));var o=e in Ra?Ra[e]:void 0;if(o=!(!o||!o.every((function(e){var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))}))),r&&o&&!globalThis.Zone)return Oa[e]=t.prototype;try{var i=document.createElement("iframe");document.body.appendChild(i);var a=i.contentWindow;if(!a)return t.prototype;var s=a[e].prototype;return document.body.removeChild(i),s?Oa[e]=s:n}catch(e){return n}}function fe(e,t,n){var r,o="".concat(e,".").concat(String(n));return Ma[o]?Ma[o].call(t):(e=de(e),(e=null==(r=Object.getOwnPropertyDescriptor(e,n))?void 0:r.get)?(Ma[o]=e,e.call(t)):t[n])}function he(e,t,n){var r="".concat(e,".").concat(String(n));return Na[r]?Na[r].bind(t):"function"!=typeof(e=de(e)[n])?t[n]:(Na[r]=e,e.bind(t))}function pe(e){var t=e&&"host"in e&&"mode"in e&&La.host(e)||null;return!(!t||!("shadowRoot"in t)||La.shadowRoot(t)!==e)}function ve(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function ge(e){try{var t=e.rules||e.cssRules;if(!t)return null;var n=e.href;return!n&&e.ownerNode&&e.ownerNode.ownerDocument&&(n=e.ownerNode.ownerDocument.location.href),function(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}(Array.from(t,(function(e){return me(e,n)})).join(""))}catch(e){return null}}function me(e,t){if("styleSheet"in e){try{var n;if(!(n=ge(e.styleSheet))){var r=e.cssText;if(3>r.split('"').length)n=r;else{var o=["@import","url(".concat(JSON.stringify(e.href),")")];""===e.layerName?o.push("layer"):e.layerName&&o.push("layer(".concat(e.layerName,")")),e.supportsText&&o.push("supports(".concat(e.supportsText,")")),e.media.length&&o.push(e.media.mediaText),n=o.join(" ")+";"}}var i=n}catch(t){i=e.cssText}return e.styleSheet.href?ke(i,e.styleSheet.href):i}return i=e.cssText,"selectorText"in e&&e.selectorText.includes(":")&&(i=i.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2")),t?ke(i,t):i}function ye(e){var t=e.element,n=e.maskInputOptions,r=e.tagName,o=e.type,i=e.maskInputFn;return e=e.value||"",o=o&&o.toLowerCase(),(n[r.toLowerCase()]||o&&n[o])&&(e=i?i(e,t):"*".repeat(e.length)),e}function be(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?t.toLowerCase():null}function we(e,t){var n;try{var r=new URL(e,null!=t?t:window.location.href)}catch(e){return null}return null!==(n=null==(e=r.pathname.match(/\.([0-9a-z]+)(?:$)/i))?void 0:e[1])&&void 0!==n?n:null}function ke(e,t){return(e||"").replace(Pa,(function(e,n,r,o,i,a){if(n=n||o||"",!(r=r||i||a))return e;if(Ua.test(r)||Fa.test(r)||Ba.test(r))return"url(".concat(n).concat(r).concat(n,")");if("/"===r[0]){var s="url(".concat(n),c=s.concat;return e=(e=-1<t.indexOf("//")?t.split("/").slice(0,3).join("/"):t.split("/")[0]).split("?")[0],c.call(s,e+r).concat(n,")")}e=t.split("/"),r=r.split("/"),e.pop(),r=l(r);try{for(r.s();!(s=r.n()).done;)"."!==(c=s.value)&&(".."===c?e.pop():e.push(c))}catch(e){r.e(e)}finally{r.f()}return"url(".concat(n).concat(e.join("/")).concat(n,")")}))}function Ce(e){return e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"")}function Se(){return Ga++}function Ee(e,t){return t&&""!==t.trim()?Ie(e,t):t}function Ie(e,t){var n=Wa.get(e);if(n||(n=e.createElement("a"),Wa.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function _e(e,t,n,r){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]||"background"===n&&("table"===t||"td"===t||"th"===t)?Ee(e,r):"srcset"===n?function(e,t){function n(e){return(e=e.exec(t.substring(r)))?(e=e[0],r+=e.length,e):""}if(""===t.trim())return t;for(var r=0,o=[];n(Va),!(r>=t.length);){var i=n(za);if(","===i.slice(-1))i=Ee(e,i.substring(0,i.length-1)),o.push(i);else{var a="";i=Ee(e,i);for(var s=!1;;){var l=t.charAt(r);if(""===l){o.push((i+a).trim());break}if(s)")"===l&&(s=!1);else{if(","===l){r+=1,o.push((i+a).trim());break}"("===l&&(s=!0)}a+=l,r+=1}}}return o.join(", ")}(e,r):"style"===n?ke(r,Ie(e)):"object"===t&&"data"===n?Ee(e,r):r:r}function Te(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Ae(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&Ae(La.parentNode(e),t,n);for(var r=e.classList.length;r--;)if(t.test(e.classList[r]))return!0;return!!n&&Ae(La.parentNode(e),t,n)}function xe(e,t,n,r){if(e.nodeType===e.ELEMENT_NODE){if(!La.childNodes(e).length)return!1}else{if(null===La.parentElement(e))return!1;e=La.parentElement(e)}try{if("string"==typeof t){if(r){if(e.closest(".".concat(t)))return!0}else if(e.classList.contains(t))return!0}else if(Ae(e,t,r))return!0;if(n)if(r){if(e.closest(n))return!0}else if(e.matches(n))return!0}catch(e){}return!1}function Re(e,t){var n=t.doc,r=t.blockClass,o=t.blockSelector,i=t.needsMask,a=t.inlineStylesheet,s=t.maskInputOptions,l=void 0===s?{}:s;s=t.maskTextFn;var c=t.maskInputFn,u=t.dataURLOptions,d=void 0===u?{}:u,f=t.inlineImages,h=t.recordCanvas,p=t.keepIframeSrcFn,v=void 0!==(u=t.newlyAddedElement)&&u;switch(u=void 0!==(u=t.cssCaptured)&&u,(t=t.mirror).hasNode(n)?t=1===(t=t.getId(n))?void 0:t:t=void 0,e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Aa.Document,childNodes:[],compatMode:e.compatMode}:{type:Aa.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Aa.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:t};case e.ELEMENT_NODE:return function(e,t){var n=t.doc,r=t.inlineStylesheet,o=t.maskInputOptions,i=void 0===o?{}:o,a=t.maskInputFn,s=void 0===(o=t.dataURLOptions)?{}:o,l=t.inlineImages,c=t.recordCanvas;o=t.keepIframeSrcFn;var u,d=t.newlyAddedElement,f=void 0!==d&&d;d=t.rootId,t=function(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;)if(t.test(e.classList[r]))return!0;if(n)return e.matches(n)}catch(e){}return!1}(e,t.blockClass,t.blockSelector);for(var h=function(e){return e instanceof HTMLFormElement?"form":(e=e.tagName.toLowerCase(),ja.test(e)?"div":e)}(e),p={},v=e.attributes.length,g=0;g<v;g++){var m=e.attributes[g];Te(h,m.name,m.value)||(p[m.name]=_e(n,h,m.name.toLowerCase(),m.value))}"link"===h&&r&&(r=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),v=null,r&&(v=ge(r)),v&&(delete p.rel,delete p.href,p._cssText=v)),"style"===h&&e.sheet&&(r=ge(e.sheet))&&(1<e.childNodes.length&&(r=function(e,t){var n=[];if(1<(t=Array.from(t.childNodes)).length&&e&&"string"==typeof e)for(var r=Ce(e),o=1;o<t.length;o++)if(t[o].textContent&&"string"==typeof t[o].textContent)for(var i=Ce(t[o].textContent),a=3;a<i.length;a++){var s=i.substring(0,a);if(2===r.split(s).length){for(a=i=r.indexOf(s);a<e.length;a++)if(Ce(e.substring(0,a)).length===i){n.push(e.substring(0,a)),e=e.substring(a);break}break}}return n.push(e),n}(r,e).join("/* rr_split */")),p._cssText=r),("input"===h||"textarea"===h||"select"===h)&&(r=e.value,v=e.checked,"radio"!==p.type&&"checkbox"!==p.type&&"submit"!==p.type&&"button"!==p.type&&r?p.value=ye({element:e,type:be(e),tagName:h,value:r,maskInputOptions:i,maskInputFn:a}):v&&(p.checked=v));if("option"===h&&(e.selected&&!i.select?p.selected=!0:delete p.selected),"dialog"===h&&e.open&&(p.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal"),"canvas"===h&&c&&("2d"===e.__context?function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var o=t.getImageData;if(new Uint32Array(("__rrweb_original__"in o?o.__rrweb_original__:o).call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0}(e)||(p.rr_dataURL=e.toDataURL(s.type,s.quality)):"__context"in e||(i=e.toDataURL(s.type,s.quality),(a=n.createElement("canvas")).width=e.width,a.height=e.height,a=a.toDataURL(s.type,s.quality),i!==a&&(p.rr_dataURL=i))),"img"===h&&l){ga||(ga=n.createElement("canvas"),ma=ga.getContext("2d"));var y=e.currentSrc||e.getAttribute("src")||"<unknown-src>",b=e.crossOrigin,w=function(){e.removeEventListener("load",w);try{ga.width=e.naturalWidth,ga.height=e.naturalHeight,ma.drawImage(e,0,0),p.rr_dataURL=ga.toDataURL(s.type,s.quality)}catch(t){if("anonymous"!==e.crossOrigin)return e.crossOrigin="anonymous",void(e.complete&&0!==e.naturalWidth?w():e.addEventListener("load",w));console.warn("Cannot inline img src=".concat(y,"! Error: ").concat(t))}"anonymous"===e.crossOrigin&&(b?p.crossOrigin=b:e.removeAttribute("crossorigin"))};e.complete&&0!==e.naturalWidth?w():e.addEventListener("load",w)}"audio"!==h&&"video"!==h||((n=p).rr_mediaState=e.paused?"paused":"played",n.rr_mediaCurrentTime=e.currentTime,n.rr_mediaPlaybackRate=e.playbackRate,n.rr_mediaMuted=e.muted,n.rr_mediaLoop=e.loop,n.rr_mediaVolume=e.volume);f||(e.scrollLeft&&(p.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(p.rr_scrollTop=e.scrollTop)),t&&(n=e.getBoundingClientRect(),l=n.height,p={class:p.class,rr_width:"".concat(n.width,"px"),rr_height:"".concat(l,"px")}),"iframe"!==h||o(p.src)||(e.contentDocument||(p.rr_src=p.src),delete p.src);try{customElements.get(h)&&(u=!0)}catch(e){}return{type:Aa.Element,tagName:h,attributes:p,childNodes:[],isSVG:!("svg"!==e.tagName&&!e.ownerSVGElement)||void 0,needBlock:t,rootId:d,isCustom:u}}(e,{doc:n,blockClass:r,blockSelector:o,inlineStylesheet:a,maskInputOptions:l,maskInputFn:c,dataURLOptions:d,inlineImages:f,recordCanvas:h,keepIframeSrcFn:p,newlyAddedElement:v,rootId:t});case e.TEXT_NODE:return r=t,l=(o=La.parentNode(e))&&o.tagName,o="",a="STYLE"===l||void 0,(l="SCRIPT"===l||void 0)?o="SCRIPT_PLACEHOLDER":u||(o=La.textContent(e),a&&o&&(o=ke(o,Ie(n)))),!a&&!l&&o&&i&&(o=s?s(o,La.parentElement(e)):o.replace(/[\S]/g,"*")),{type:Aa.Text,textContent:o||"",rootId:r};case e.CDATA_SECTION_NODE:return{type:Aa.CDATA,textContent:"",rootId:t};case e.COMMENT_NODE:return{type:Aa.Comment,textContent:La.textContent(e)||"",rootId:t};default:return!1}}function Oe(e){return null==e?"":e.toLowerCase()}function Me(e,t){var n=t.doc,r=t.mirror,o=t.blockClass,i=t.blockSelector,a=t.maskTextClass,s=t.maskTextSelector,l=t.skipChild;l=void 0!==l&&l;var c=t.inlineStylesheet,u=void 0===c||c,d=void 0===(c=t.maskInputOptions)?{}:c,f=t.maskTextFn,h=t.maskInputFn,p=t.slimDOMOptions,v=void 0===(c=t.dataURLOptions)?{}:c,g=void 0!==(c=t.inlineImages)&&c,m=void 0!==(c=t.recordCanvas)&&c,y=t.onSerialize,b=t.onIframeLoad,w=void 0===(c=t.iframeLoadTimeout)?5e3:c,k=t.onStylesheetLoad,C=void 0===(c=t.stylesheetLoadTimeout)?5e3:c,S=void 0===(c=t.keepIframeSrcFn)?function(){return!1}:c;c=void 0!==(c=t.newlyAddedElement)&&c;var E=t.cssCaptured;E=void 0!==E&&E;var I=t.needsMask,_=void 0===(t=t.preserveWhiteSpace)||t;if(I||(I=xe(e,a,s,void 0===I)),!(t=Re(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:I,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:h,dataURLOptions:v,inlineImages:g,recordCanvas:m,keepIframeSrcFn:S,newlyAddedElement:c,cssCaptured:E})))return console.warn(e,"not serialized"),null;if(c=r.hasNode(e)?r.getId(e):function(e,t){return!!(t.comment&&e.type===Aa.Comment||e.type===Aa.Element&&(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===we(e.attributes.href))||t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Oe(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Oe(e.attributes.name)||"icon"===Oe(e.attributes.rel)||"apple-touch-icon"===Oe(e.attributes.rel)||"shortcut icon"===Oe(e.attributes.rel)))||"meta"===e.tagName&&(t.headMetaDescKeywords&&Oe(e.attributes.name).match(/^description|keywords$/)||t.headMetaSocial&&(Oe(e.attributes.property).match(/^(og|twitter|fb):/)||Oe(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Oe(e.attributes.name))||t.headMetaRobots&&("robots"===Oe(e.attributes.name)||"googlebot"===Oe(e.attributes.name)||"bingbot"===Oe(e.attributes.name))||t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"]||t.headMetaAuthorship&&("author"===Oe(e.attributes.name)||"generator"===Oe(e.attributes.name)||"framework"===Oe(e.attributes.name)||"publisher"===Oe(e.attributes.name)||"progid"===Oe(e.attributes.name)||Oe(e.attributes.property).match(/^article:/)||Oe(e.attributes.property).match(/^product:/))||t.headMetaVerification&&("google-site-verification"===Oe(e.attributes.name)||"yandex-verification"===Oe(e.attributes.name)||"csrf-token"===Oe(e.attributes.name)||"p:domain_verify"===Oe(e.attributes.name)||"verify-v1"===Oe(e.attributes.name)||"verification"===Oe(e.attributes.name)||"shopify-checkout-api-token"===Oe(e.attributes.name)))))}(t,p)||!_&&t.type===Aa.Text&&!t.textContent.replace(/^\s+|\s+$/gm,"").length?-2:Ga++,t=Object.assign(t,{id:c}),r.add(e,t),-2===c)return null;if(y&&y(e),c=!l,t.type===Aa.Element&&(c=c&&!t.needBlock,delete t.needBlock,(E=La.shadowRoot(e))&&ve(E)&&(t.isShadowHost=!0)),(t.type===Aa.Document||t.type===Aa.Element)&&c){if(p.headWhitespace&&t.type===Aa.Element&&"head"===t.tagName&&(_=!1),l={doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:l,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:h,slimDOMOptions:p,dataURLOptions:v,inlineImages:g,recordCanvas:m,preserveWhiteSpace:_,onSerialize:y,onIframeLoad:b,iframeLoadTimeout:w,onStylesheetLoad:k,stylesheetLoadTimeout:C,keepIframeSrcFn:S,cssCaptured:!1},t.type!==Aa.Element||"textarea"!==t.tagName||void 0===t.attributes.value)for(t.type===Aa.Element&&void 0!==t.attributes._cssText&&"string"==typeof t.attributes._cssText&&(l.cssCaptured=!0),c=0,E=Array.from(La.childNodes(e));c<E.length;c++){var T=Me(E[c],l);T&&t.childNodes.push(T)}if(c=null,e.nodeType===e.ELEMENT_NODE&&(c=La.shadowRoot(e)))for(E=0,T=Array.from(La.childNodes(c));E<T.length;E++){var A=Me(T[E],l);A&&(ve(c)&&(A.isShadow=!0),t.childNodes.push(A))}}return(l=La.parentNode(e))&&pe(l)&&ve(l)&&(t.isShadow=!0),t.type===Aa.Element&&"iframe"===t.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o=!1;try{var i=r.document.readyState}catch(e){return}if("complete"!==i){var a=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(a),o=!0,t()}))}else{if("about:blank"!==r.location.href||"about:blank"===e.src||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}}(e,(function(){var t=e.contentDocument;t&&b&&(t=Me(t,{doc:t,mirror:r,blockClass:o,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:h,slimDOMOptions:p,dataURLOptions:v,inlineImages:g,recordCanvas:m,preserveWhiteSpace:_,onSerialize:y,onIframeLoad:b,iframeLoadTimeout:w,onStylesheetLoad:k,stylesheetLoadTimeout:C,keepIframeSrcFn:S}))&&b(e,t)}),w),t.type===Aa.Element&&"link"===t.tagName&&"string"==typeof t.attributes.rel&&("stylesheet"===t.attributes.rel||"preload"===t.attributes.rel&&"string"==typeof t.attributes.href&&"css"===we(t.attributes.href))&&function(e,t,n){var r=!1;try{var o=e.sheet}catch(e){return}if(!o){var i=setTimeout((function(){r||(t(),r=!0)}),n);e.addEventListener("load",(function(){clearTimeout(i),r=!0,t()}))}}(e,(function(){if(k){var t=Me(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:h,slimDOMOptions:p,dataURLOptions:v,inlineImages:g,recordCanvas:m,preserveWhiteSpace:_,onSerialize:y,onIframeLoad:b,iframeLoadTimeout:w,onStylesheetLoad:k,stylesheetLoadTimeout:C,keepIframeSrcFn:S});t&&k(e,t)}}),C),t}function Ne(e,t){var n=(t=t||{}).mirror;n=void 0===n?new Da:n;var r=t.blockClass,o=t.blockSelector,i=t.maskTextClass,a=t.maskTextSelector,s=t.inlineStylesheet,l=t.inlineImages,c=t.recordCanvas,u=t.maskAllInputs;u=void 0!==u&&u;var d=t.slimDOM;d=void 0!==d&&d;var f=t.keepIframeSrcFn;return Me(e,{doc:e,mirror:n,blockClass:void 0===r?"rr-block":r,blockSelector:void 0===o?null:o,maskTextClass:void 0===i?"rr-mask":i,maskTextSelector:void 0===a?null:a,skipChild:!1,inlineStylesheet:void 0===s||s,maskInputOptions:!0===u?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===u?{password:!0}:u,maskTextFn:t.maskTextFn,maskInputFn:t.maskInputFn,slimDOMOptions:!0===d||"all"===d?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===d,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===d?{}:d,dataURLOptions:t.dataURLOptions,inlineImages:void 0!==l&&l,recordCanvas:void 0!==c&&c,preserveWhiteSpace:t.preserveWhiteSpace,onSerialize:t.onSerialize,onIframeLoad:t.onIframeLoad,iframeLoadTimeout:t.iframeLoadTimeout,onStylesheetLoad:t.onStylesheetLoad,stylesheetLoadTimeout:t.stylesheetLoadTimeout,keepIframeSrcFn:void 0===f?function(){return!1}:f,newlyAddedElement:!1})}function Le(e,t){new ts(t).stringify(e)}function De(e,t){var n,r=new e.constructor;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"proxyCache"!==n){var o=e[n],i=S(o);"parent"===n&&"object"===i?t&&(r[n]=t):"source"===n?r[n]=o:Array.isArray(o)?r[n]=o.map((function(e){return De(e,r)})):("object"===i&&null!==o&&(o=De(o)),r[n]=o)}return r}function Pe(e){return e.map((function(e){return e.nodes&&(e.nodes=Pe(e.nodes)),delete e.source,e}))}function Ue(e){if(e[Us]=!1,e.proxyOf.nodes){var t;e=l(e.proxyOf.nodes);try{for(e.s();!(t=e.n()).done;)Ue(t.value)}catch(t){e.e(t)}finally{e.f()}}}function Fe(e,t){e=new rl(e,t),e=new nl(e);try{e.parse()}catch(e){throw e}return e.root}function Be(e){return"object"===S(e)&&"function"==typeof e.then}function Ge(e){var t=!1,n=al[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,0,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,0,n+"Exit"]:[n,n+"Exit"]}function je(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:Ge(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function ze(e){return e[il]=!1,e.nodes&&e.nodes.forEach((function(e){return ze(e)})),e}function Ve(e,t){if(Array.isArray(e))return e.map((function(e){return Ve(e)}));var n=e.inputs,r=g(e,ba);if(n){var o;t=[],n=l(n);try{for(n.s();!(o=n.n()).done;){var i=v(v({},o.value),{},{__proto__:ml.prototype});i.map&&(i.map=v(v({},i.map),{},{__proto__:pl.prototype})),t.push(i)}}catch(e){n.e(e)}finally{n.f()}}if(r.nodes&&(r.nodes=e.nodes.map((function(e){return Ve(e,t)}))),r.source&&(o=(i=r.source).inputId,i=g(i,wa),r.source=i,null!=o&&(r.source.input=t[o])),"root"===r.type)return new yl(r);if("decl"===r.type)return new hl(r);if("rule"===r.type)return new bl(r);if("comment"===r.type)return new vl(r);if("atrule"===r.type)return new gl(r);throw Error("Unknown node type: "+e.type)}function We(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new wl(t)}function He(e,t){new Ll(t).stringify(e)}function qe(e,t){var n,r=new e.constructor;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"proxyCache"!==n){var o=e[n],i=S(o);"parent"===n&&"object"===i?t&&(r[n]=t):"source"===n?r[n]=o:Array.isArray(o)?r[n]=o.map((function(e){return qe(e,r)})):("object"===i&&null!==o&&(o=qe(o)),r[n]=o)}return r}function Ze(e){return e.map((function(e){return e.nodes&&(e.nodes=Ze(e.nodes)),delete e.source,e}))}function Ye(e){if(e[gc]=!1,e.proxyOf.nodes){var t;e=l(e.proxyOf.nodes);try{for(e.s();!(t=e.n()).done;)Ye(t.value)}catch(t){e.e(t)}finally{e.f()}}}function Ke(e,t){e=new Pc(e,t),e=new Dc(e);try{e.parse()}catch(e){throw e}return e.root}function Je(e){return"object"===S(e)&&"function"==typeof e.then}function Xe(e){var t=!1,n=Fc[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,0,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,0,n+"Exit"]:[n,n+"Exit"]}function Qe(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:Xe(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function $e(e){return e[Uc]=!1,e.nodes&&e.nodes.forEach((function(e){return $e(e)})),e}function et(e,t){if(Array.isArray(e))return e.map((function(e){return et(e)}));var n=e.inputs,r=g(e,ka);if(n){var o;t=[],n=l(n);try{for(n.s();!(o=n.n()).done;){var i=v(v({},o.value),{},{__proto__:Kc.prototype});i.map&&(i.map=v(v({},i.map),{},{__proto__:qc.prototype})),t.push(i)}}catch(e){n.e(e)}finally{n.f()}}if(r.nodes&&(r.nodes=e.nodes.map((function(e){return et(e,t)}))),r.source&&(o=(i=r.source).inputId,i=g(i,Ca),r.source=i,null!=o&&(r.source.input=t[o])),"root"===r.type)return new Jc(r);if("decl"===r.type)return new Hc(r);if("rule"===r.type)return new Xc(r);if("comment"===r.type)return new Zc(r);if("atrule"===r.type)return new Yc(r);throw Error("Unknown node type: "+e.type)}function tt(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new Qc(t)}function nt(e){if(ru[e])return ru[e];var t=globalThis[e],n=t.prototype,r=e in tu?tu[e]:void 0;r=!(!r||!r.every((function(e){var t,r;return!(null==(r=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)||!r.toString().includes("[native code]"))})));var o=e in nu?nu[e]:void 0;if(o=!(!o||!o.every((function(e){var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))}))),r&&o&&!globalThis.Zone)return ru[e]=t.prototype;try{var i=document.createElement("iframe");document.body.appendChild(i);var a=i.contentWindow;if(!a)return t.prototype;var s=a[e].prototype;return document.body.removeChild(i),s?ru[e]=s:n}catch(e){return n}}function rt(e,t,n){var r,o="".concat(e,".").concat(String(n));return ou[o]?ou[o].call(t):(e=nt(e),(e=null==(r=Object.getOwnPropertyDescriptor(e,n))?void 0:r.get)?(ou[o]=e,e.call(t)):t[n])}function ot(e,t,n){var r="".concat(e,".").concat(String(n));return iu[r]?iu[r].bind(t):"function"!=typeof(e=nt(e)[n])?t[n]:(iu[r]=e,e.bind(t))}function it(){return nt("MutationObserver").constructor}function at(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}function st(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=null,o=0;return function(){for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];i=Date.now(),o||!1!==n.leading||(o=i);var l=this;0>=(s=t-(i-o))||s>t?(r&&(clearTimeout(r),r=null),o=i,e.apply(l,a)):r||!1===n.trailing||(r=setTimeout((function(){o=!1===n.leading?0:Date.now(),r=null,e.apply(l,a)}),s))}}function lt(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:window,i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),i&&i.set&&i.set.call(this,e)}}),function(){return lt(e,t,i||{},!0)}}function ct(e,t,n){try{if(!(t in e))return function(){};var r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,function(){e[t]=r}}catch(e){return function(){}}}function ut(e){var t,n,r,o,i=e.document;return{left:i.scrollingElement?i.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:i.documentElement.scrollLeft||(null==i?void 0:i.body)&&(null==(t=au.parentElement(i.body))?void 0:t.scrollLeft)||(null==(n=null==i?void 0:i.body)?void 0:n.scrollLeft)||0,top:i.scrollingElement?i.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==i?void 0:i.documentElement.scrollTop)||(null==i?void 0:i.body)&&(null==(r=au.parentElement(i.body))?void 0:r.scrollTop)||(null==(o=null==i?void 0:i.body)?void 0:o.scrollTop)||0}}function dt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ft(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ht(e){return e?e.nodeType===e.ELEMENT_NODE?e:au.parentElement(e):null}function pt(e,t,n,r){if(!e)return!1;if(!(e=ht(e)))return!1;try{if("string"==typeof t){if(e.classList.contains(t)||r&&null!==e.closest("."+t))return!0}else if(Ae(e,t,r))return!0}catch(e){}return!(!n||!(e.matches(n)||r&&null!==e.closest(n)))}function vt(e,t,n){return!("TITLE"!==e.tagName||!n.headTitleMutations)||-2===t.getId(e)}function gt(e,t){if(pe(e))return!1;var n=t.getId(e);return!t.has(n)||(!(n=au.parentNode(e))||n.nodeType!==e.DOCUMENT_NODE)&&(!n||gt(n,t))}function mt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function yt(e,t){return!("LINK"!==e.nodeName||e.nodeType!==e.ELEMENT_NODE||!e.getAttribute||"stylesheet"!==e.getAttribute("rel")||!t.getMeta(e))}function bt(e){return!!e&&(e instanceof eu&&"shadowRoot"in e?!!e.shadowRoot:!!au.shadowRoot(e))}function wt(e){var t,n=null;return"getRootNode"in e&&(null==(t=au.getRootNode(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&au.host(au.getRootNode(e))&&(n=au.host(au.getRootNode(e))),n}function kt(e){var t=e.ownerDocument;if(!t)return!1;if(!(t=au.contains(t,e)))if(t=e.ownerDocument){for(var n;n=wt(e);)e=n;t=au.contains(t,e)}else t=!1;return t}function Ct(e,t){e.delete(t),au.childNodes(t).forEach((function(t){return Ct(e,t)}))}function St(e,t,n){return 0!==e.size&&(e=!!(t=au.parentNode(t))&&e.has(t))}function Et(e,t){return 0!==e.size&&It(e,t)}function It(e,t){return!!(t=au.parentNode(t))&&(!!e.has(t)||It(e,t))}function _t(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Tt(e,t){var n=new wu;return Cu.push(n),n.init(e),(e=new(it())(ku(n.processMutations.bind(n)))).observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),e}function At(e){var t=e.mousemoveCb,n=e.sampling,r=e.doc,o=e.mirror;if(!1===n.mousemove)return function(){};e="number"==typeof n.mousemove?n.mousemove:50,n="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500;var i,a=[],s=st(ku((function(e){var n=Date.now()-i;t(a.map((function(e){return e.timeOffset-=n,e})),e),a=[],i=null})),n),l=[at("mousemove",n=ku(st(ku((function(e){var t=_t(e),n=e.changedTouches?e.changedTouches[0]:e,r=n.clientX;n=n.clientY,i||(i=lu()),a.push({x:r,y:n,id:o.getId(t),timeOffset:lu()-i}),s("undefined"!=typeof DragEvent&&e instanceof DragEvent?fu.Drag:e instanceof MouseEvent?fu.MouseMove:fu.TouchMove)})),e,{trailing:!1})),r),at("touchmove",n,r),at("drag",n,r)];return ku((function(){l.forEach((function(e){return e()}))}))}function xt(e){var t=e.mouseInteractionCb,n=e.doc,r=e.mirror,o=e.blockClass,i=e.blockSelector;if(!1===(e=e.sampling).mouseInteraction)return function(){};var a=!0===e.mouseInteraction||void 0===e.mouseInteraction?{}:e.mouseInteraction,s=[],l=null;return Object.keys(hu).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]})).forEach((function(e){var a=e.toLowerCase(),c=function(e){return function(n){var a=_t(n);if(!pt(a,o,i,!0)){var s=null,c=e;if("pointerType"in n){switch(n.pointerType){case"mouse":s=pu.Mouse;break;case"touch":s=pu.Touch;break;case"pen":s=pu.Pen}s===pu.Touch&&(hu[e]===hu.MouseDown?c="TouchStart":hu[e]===hu.MouseUp&&(c="TouchEnd"))}else n.changedTouches&&(s=pu.Touch);if(null!==s?(l=s,(c.startsWith("Touch")&&s===pu.Touch||c.startsWith("Mouse")&&s===pu.Mouse)&&(s=null)):hu[e]===hu.Click&&(s=l,l=null),n=n.changedTouches?n.changedTouches[0]:n){a=r.getId(a);var u=n.clientX;n=n.clientY,ku(t)(v({type:hu[c],id:a,x:u,y:n},null!==s&&{pointerType:s}))}}}}(e);if(window.PointerEvent)switch(hu[e]){case hu.MouseDown:case hu.MouseUp:a=a.replace("mouse","pointer");break;case hu.TouchStart:case hu.TouchEnd:return}s.push(at(a,c,n))})),ku((function(){s.forEach((function(e){return e()}))}))}function Rt(e){var t=e.scrollCb,n=e.doc,r=e.mirror,o=e.blockClass,i=e.blockSelector;return e=e.sampling,at("scroll",e=ku(st(ku((function(e){var a=_t(e);a&&!pt(a,o,i,!0)&&(e=r.getId(a),a===n&&n.defaultView?(a=ut(n.defaultView),t({id:e,x:a.left,y:a.top})):t({id:e,x:a.scrollLeft,y:a.scrollTop}))})),e.scroll||100)),n)}function Ot(e,t){var n=e.viewportResizeCb;e=t.win;var r=-1,o=-1;return at("resize",t=ku(st(ku((function(){var e=dt(),t=ft();r===e&&o===t||(n({width:Number(t),height:Number(e)}),r=e,o=t)})),200)),e)}function Mt(e){function t(e){var t=_t(e),r=e.isTrusted,i=t&&t.tagName;if(t&&"OPTION"===i&&(t=au.parentElement(t)),!(!t||!i||0>Su.indexOf(i)||pt(t,a,s,!0)||t.classList.contains(l)||c&&t.matches(c))){var h=t.value,p=!1;"radio"===(e=be(t)||"")||"checkbox"===e?p=t.checked:(u[i.toLowerCase()]||u[e])&&(h=ye({element:t,maskInputOptions:u,tagName:i,type:e,value:h,maskInputFn:d})),n(t,f?{text:h,isChecked:p,userTriggered:r}:{text:h,isChecked:p}),r=t.name,"radio"===e&&r&&p&&o.querySelectorAll('input[type="radio"][name="'.concat(r,'"]')).forEach((function(e){if(e!==t){var r=e.value;n(e,f?{text:r,isChecked:!p,userTriggered:!1}:{text:r,isChecked:!p})}}))}}function n(e,t){var n=Eu.get(e);n&&n.text===t.text&&n.isChecked===t.isChecked||(Eu.set(e,t),e=i.getId(e),ku(r)(v(v({},t),{},{id:e})))}var r=e.inputCb,o=e.doc,i=e.mirror,a=e.blockClass,s=e.blockSelector,l=e.ignoreClass,c=e.ignoreSelector,u=e.maskInputOptions,d=e.maskInputFn,f=e.userTriggeredOnInput,h=("last"===e.sampling.input?["change"]:["input","change"]).map((function(e){return at(e,ku(t),o)})),p=o.defaultView;if(!p)return function(){h.forEach((function(e){return e()}))};e=p.Object.getOwnPropertyDescriptor(p.HTMLInputElement.prototype,"value");var g=[[p.HTMLInputElement.prototype,"value"],[p.HTMLInputElement.prototype,"checked"],[p.HTMLSelectElement.prototype,"value"],[p.HTMLTextAreaElement.prototype,"value"],[p.HTMLSelectElement.prototype,"selectedIndex"],[p.HTMLOptionElement.prototype,"selected"]];return e&&e.set&&h.push.apply(h,k(g.map((function(e){return lt(e[0],e[1],{set:function(){ku(t)({target:this,isTrusted:!1})}},!1,p)})))),ku((function(){h.forEach((function(e){return e()}))}))}function Nt(e){var t=[];return Wt("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Wt("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Wt("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Wt("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule?(e=Array.from(e.parentRule.cssRules).indexOf(e),t.unshift(e)):e.parentStyleSheet&&(e=Array.from(e.parentStyleSheet.cssRules).indexOf(e),t.unshift(e)),t}function Lt(e,t,n){var r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Dt(e,t){var n=e.styleSheetRuleCb,r=e.mirror,o=e.stylesheetManager,i=t.win;if(!i.CSSStyleSheet||!i.CSSStyleSheet.prototype)return function(){};var a=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:ku((function(e,t,i){var a=b(i,2),s=a[0];a=a[1];var l=Lt(t,r,o.styleMirror),c=l.id;return l=l.styleId,(c&&-1!==c||l&&-1!==l)&&n({id:c,styleId:l,adds:[{rule:s,index:a}]}),e.apply(t,i)}))}),i.CSSStyleSheet.prototype.addRule=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.cssRules.length,r="".concat(e," { ").concat(t," }");return i.CSSStyleSheet.prototype.insertRule.apply(this,[r,n])};var s=i.CSSStyleSheet.prototype.deleteRule;if(i.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:ku((function(e,t,i){var a=b(i,1)[0],s=Lt(t,r,o.styleMirror),l=s.id;return s=s.styleId,(l&&-1!==l||s&&-1!==s)&&n({id:l,styleId:s,removes:[{index:a}]}),e.apply(t,i)}))}),i.CSSStyleSheet.prototype.removeRule=function(e){return i.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},i.CSSStyleSheet.prototype.replace){var l=i.CSSStyleSheet.prototype.replace;i.CSSStyleSheet.prototype.replace=new Proxy(l,{apply:ku((function(e,t,i){var a=b(i,1)[0],s=Lt(t,r,o.styleMirror),l=s.id;return s=s.styleId,(l&&-1!==l||s&&-1!==s)&&n({id:l,styleId:s,replace:a}),e.apply(t,i)}))})}if(i.CSSStyleSheet.prototype.replaceSync){var c=i.CSSStyleSheet.prototype.replaceSync;i.CSSStyleSheet.prototype.replaceSync=new Proxy(c,{apply:ku((function(e,t,i){var a=b(i,1)[0],s=Lt(t,r,o.styleMirror),l=s.id;return s=s.styleId,(l&&-1!==l||s&&-1!==s)&&n({id:l,styleId:s,replaceSync:a}),e.apply(t,i)}))})}var u={};Ht("CSSGroupingRule")?u.CSSGroupingRule=i.CSSGroupingRule:(Ht("CSSMediaRule")&&(u.CSSMediaRule=i.CSSMediaRule),Ht("CSSConditionRule")&&(u.CSSConditionRule=i.CSSConditionRule),Ht("CSSSupportsRule")&&(u.CSSSupportsRule=i.CSSSupportsRule));var d={};return Object.entries(u).forEach((function(e){var t=b(e,2);e=t[0],t=t[1],d[e]={insertRule:t.prototype.insertRule,deleteRule:t.prototype.deleteRule},t.prototype.insertRule=new Proxy(d[e].insertRule,{apply:ku((function(e,t,i){var a=b(i,2),s=a[0];a=a[1];var l=Lt(t.parentStyleSheet,r,o.styleMirror),c=l.id;return l=l.styleId,(c&&-1!==c||l&&-1!==l)&&n({id:c,styleId:l,adds:[{rule:s,index:[].concat(k(Nt(t)),[a||0])}]}),e.apply(t,i)}))}),t.prototype.deleteRule=new Proxy(d[e].deleteRule,{apply:ku((function(e,t,i){var a=b(i,1)[0],s=Lt(t.parentStyleSheet,r,o.styleMirror),l=s.id;return s=s.styleId,(l&&-1!==l||s&&-1!==s)&&n({id:l,styleId:s,removes:[{index:[].concat(k(Nt(t)),[a])}]}),e.apply(t,i)}))})})),ku((function(){i.CSSStyleSheet.prototype.insertRule=a,i.CSSStyleSheet.prototype.deleteRule=s,l&&(i.CSSStyleSheet.prototype.replace=l),c&&(i.CSSStyleSheet.prototype.replaceSync=c),Object.entries(u).forEach((function(e){var t=b(e,2);e=t[0],(t=t[1]).prototype.insertRule=d[e].insertRule,t.prototype.deleteRule=d[e].deleteRule}))}))}function Pt(e,t){var n,r,o,i,a=e.mirror,s=e.stylesheetManager;i="#document"===t.nodeName?a.getId(t):a.getId(au.host(t));var l=null!=(e="#document"===t.nodeName?null==(n=t.defaultView)?void 0:n.Document:null==(o=null==(r=t.ownerDocument)?void 0:r.defaultView)?void 0:o.ShadowRoot)&&e.prototype?Object.getOwnPropertyDescriptor(null==e?void 0:e.prototype,"adoptedStyleSheets"):void 0;return null!==i&&-1!==i&&e&&l?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:function(){var e;return null==(e=l.get)?void 0:e.call(this)},set:function(e){var t,n=null==(t=l.set)?void 0:t.call(this,e);if(null!==i&&-1!==i)try{s.adoptStyleSheets(e,i)}catch(e){}return n}}),ku((function(){Object.defineProperty(t,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})}))):function(){}}function Ut(e,t){var n=e.styleDeclarationCb,r=e.mirror,o=e.ignoreCSSAttributes,i=e.stylesheetManager,a=t.win,s=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:ku((function(e,t,a){var l,c=b(a,3),u=c[0],d=c[1];if(c=c[2],o.has(u))return s.apply(t,[u,d,c]);var f=Lt(null==(l=t.parentRule)?void 0:l.parentStyleSheet,r,i.styleMirror);return l=f.id,f=f.styleId,(l&&-1!==l||f&&-1!==f)&&n({id:l,styleId:f,set:{property:u,value:d,priority:c},index:Nt(t.parentRule)}),e.apply(t,a)}))});var l=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:ku((function(e,t,a){var s,c=b(a,1)[0];if(o.has(c))return l.apply(t,[c]);var u=Lt(null==(s=t.parentRule)?void 0:s.parentStyleSheet,r,i.styleMirror);return s=u.id,u=u.styleId,(s&&-1!==s||u&&-1!==u)&&n({id:s,styleId:u,remove:{property:c},index:Nt(t.parentRule)}),e.apply(t,a)}))}),ku((function(){a.CSSStyleDeclaration.prototype.setProperty=s,a.CSSStyleDeclaration.prototype.removeProperty=l}))}function Ft(e){var t=e.mediaInteractionCb,n=e.blockClass,r=e.blockSelector,o=e.mirror,i=e.sampling;e=e.doc;var a=ku((function(e){return st(ku((function(i){if((i=_t(i))&&!pt(i,n,r,!0)){var a=i.currentTime,s=i.volume,l=i.muted,c=i.playbackRate,u=i.loop;t({type:e,id:o.getId(i),currentTime:a,volume:s,muted:l,playbackRate:c,loop:u})}})),i.media||500)})),s=[at("play",a(gu.Play),e),at("pause",a(gu.Pause),e),at("seeked",a(gu.Seeked),e),at("volumechange",a(gu.VolumeChange),e),at("ratechange",a(gu.RateChange),e)];return ku((function(){s.forEach((function(e){return e()}))}))}function Bt(e){var t=e.fontCb,n=(e=e.doc).defaultView;if(!n)return function(){};var r=[],o=new WeakMap,i=n.FontFace;return n.FontFace=function(e,t,n){var r=new i(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r},e=ct(e.fonts,"add",(function(e){return function(n){return setTimeout(ku((function(){var e=o.get(n);e&&(t(e),o.delete(n))})),0),e.apply(this,[n])}})),r.push((function(){n.FontFace=i})),r.push(e),ku((function(){r.forEach((function(e){return e()}))}))}function Gt(e){var t=e.doc,n=e.mirror,r=e.blockClass,o=e.blockSelector,i=e.selectionCb,a=!0;return(e=ku((function(){var e=t.getSelection();if(e&&(!a||null==e||!e.isCollapsed)){a=e.isCollapsed||!1;for(var s=[],l=e.rangeCount||0,c=0;c<l;c++){var u=e.getRangeAt(c),d=u.startContainer,f=u.startOffset,h=u.endContainer;u=u.endOffset,pt(d,r,o,!0)||pt(h,r,o,!0)||s.push({start:n.getId(d),startOffset:f,end:n.getId(h),endOffset:u})}i({ranges:s})}})))(),at("selectionchange",e)}function jt(e){var t=e.customElementCb;return(e=e.doc.defaultView)&&e.customElements?ct(e.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){console.warn("Custom element callback failed for ".concat(n))}return e.apply(this,[n,r,o])}})):function(){}}function zt(e,t){var n=e.mutationCb,r=e.mousemoveCb,o=e.mouseInteractionCb,i=e.scrollCb,a=e.viewportResizeCb,s=e.inputCb,l=e.mediaInteractionCb,c=e.styleSheetRuleCb,u=e.styleDeclarationCb,d=e.canvasMutationCb,f=e.fontCb,h=e.selectionCb,p=e.customElementCb;e.mutationCb=function(){t.mutation&&t.mutation.apply(t,arguments),n.apply(void 0,arguments)},e.mousemoveCb=function(){t.mousemove&&t.mousemove.apply(t,arguments),r.apply(void 0,arguments)},e.mouseInteractionCb=function(){t.mouseInteraction&&t.mouseInteraction.apply(t,arguments),o.apply(void 0,arguments)},e.scrollCb=function(){t.scroll&&t.scroll.apply(t,arguments),i.apply(void 0,arguments)},e.viewportResizeCb=function(){t.viewportResize&&t.viewportResize.apply(t,arguments),a.apply(void 0,arguments)},e.inputCb=function(){t.input&&t.input.apply(t,arguments),s.apply(void 0,arguments)},e.mediaInteractionCb=function(){t.mediaInteaction&&t.mediaInteaction.apply(t,arguments),l.apply(void 0,arguments)},e.styleSheetRuleCb=function(){t.styleSheetRule&&t.styleSheetRule.apply(t,arguments),c.apply(void 0,arguments)},e.styleDeclarationCb=function(){t.styleDeclaration&&t.styleDeclaration.apply(t,arguments),u.apply(void 0,arguments)},e.canvasMutationCb=function(){t.canvasMutation&&t.canvasMutation.apply(t,arguments),d.apply(void 0,arguments)},e.fontCb=function(){t.font&&t.font.apply(t,arguments),f.apply(void 0,arguments)},e.selectionCb=function(){t.selection&&t.selection.apply(t,arguments),h.apply(void 0,arguments)},e.customElementCb=function(){t.customElement&&t.customElement.apply(t,arguments),p.apply(void 0,arguments)}}function Vt(e){var t,n=e.doc.defaultView;if(!n)return function(){};zt(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),e.recordDOM&&(t=Tt(e,e.doc));var r=At(e),o=xt(e),i=Rt(e),a=Ot(e,{win:n}),s=Mt(e),c=Ft(e),u=function(){},d=function(){},f=function(){},h=function(){};e.recordDOM&&(u=Dt(e,{win:n}),d=Pt(e,e.doc),f=Ut(e,{win:n}),e.collectFonts&&(h=Bt(e)));var p,v=Gt(e),g=jt(e),m=[],y=l(e.plugins);try{for(y.s();!(p=y.n()).done;){var b=p.value;m.push(b.observer(b.callback,n,b.options))}}catch(e){y.e(e)}finally{y.f()}return ku((function(){Cu.forEach((function(e){return e.reset()})),null==t||t.disconnect(),r(),o(),i(),a(),s(),c(),u(),d(),f(),h(),v(),g(),m.forEach((function(e){return e()}))}))}function Wt(e){return void 0!==window[e]}function Ht(e){return!!(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}function qt(e,t,n){if(e instanceof Array)return e.map((function(e){return qt(e,t,n)}));if(null!==e){if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var r=e.constructor.name;return{rr_type:r,base64:e=Nu(e)}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[qt(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement)return{rr_type:e.constructor.name,src:e.src};if(e instanceof HTMLCanvasElement)return{rr_type:"HTMLImageElement",src:e.toDataURL()};if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[qt(e.data,t,n),e.width,e.height]};if(Uu(e,t)||"object"===S(e))return{rr_type:r=e.constructor.name,index:e=Du(e,t,n)}}return e}function Zt(e,t,n,r){var o=[];try{var i=ct(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(o){for(var i=arguments.length,a=Array(1<i?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return pt(this,t,n,!0)||(i="experimental-webgl"===o?"webgl":o,"__context"in this||(this.__context=i),r&&["webgl","webgl2"].includes(i)&&(a[0]&&"object"===S(a[0])?(i=a[0]).preserveDrawingBuffer||(i.preserveDrawingBuffer=!0):a.splice(0,1,{preserveDrawingBuffer:!0}))),e.apply(this,[o].concat(a))}}));o.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){o.forEach((function(e){return e()}))}}function Yt(e,t,n,r,o,i){var a,s=[],c=Object.getOwnPropertyNames(e);c=l(c);try{var u=function(){var l=a.value;if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))return 0;try{if("function"!=typeof e[l])return 0;var c=ct(e,l,(function(e){return function(){for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return a=e.apply(this,s),Du(a,i,this),"tagName"in this.canvas&&!pt(this.canvas,r,o,!0)&&(s=Pu(s,i,this),n(this.canvas,{type:t,property:l,args:s})),a}}));s.push(c)}catch(r){c=lt(e,l,{set:function(e){n(this.canvas,{type:t,property:l,args:[e],setter:!0})}}),s.push(c)}};for(c.s();!(a=c.n()).done;)u()}catch(e){c.e(e)}finally{c.f()}return s}function Kt(e){try{var t=Fu&&(window.URL||window.webkitURL).createObjectURL(Fu);if(!t)throw"";var n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",(function(){(window.URL||window.webkitURL).revokeObjectURL(t)})),n}catch(t){return new Worker("data:text/javascript;base64,KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}function Jt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.emit,n=e.checkoutEveryNms,r=e.checkoutEveryNth,o=e.blockClass,i=void 0===o?"rr-block":o,a=void 0===(o=e.blockSelector)?null:o,s=void 0===(o=e.ignoreClass)?"rr-ignore":o,c=void 0===(o=e.ignoreSelector)?null:o,u=void 0===(o=e.maskTextClass)?"rr-mask":o,d=void 0===(o=e.maskTextSelector)?null:o,f=void 0===(o=e.inlineStylesheet)||o;o=e.maskAllInputs;var h=e.maskInputOptions,p=e.slimDOMOptions,g=e.maskInputFn,m=e.maskTextFn,y=e.hooks,b=e.packFn,w=e.sampling,k=void 0===w?{}:w,C=void 0===(w=e.dataURLOptions)?{}:w;w=e.mousemoveWait;var S=e.recordDOM,E=void 0===S||S,I=void 0!==(S=e.recordCanvas)&&S;S=void 0!==(S=e.recordCrossOriginIframes)&&S;var _=e.recordAfter,T=void 0===_?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":_,A=void 0!==(_=e.userTriggeredOnInput)&&_,x=void 0!==(_=e.collectFonts)&&_,R=void 0!==(_=e.inlineImages)&&_,O=e.plugins,M=void 0===(_=e.keepIframeSrcFn)?function(){return!1}:_,N=void 0===(_=e.ignoreCSSAttributes)?new Set([]):_;cu=e.errorHandler;var L=!S||window.parent===window,D=!1;if(!L)try{window.parent.document&&(D=!1)}catch(e){D=!0}if(L&&!t)throw Error("emit function is required");if(!L&&!D)return function(){};void 0!==w&&void 0===k.mousemove&&(k.mousemove=w),qu.reset();var P=!0===o?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==h?h:{password:!0},U=!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===p,headMetaDescKeywords:"all"===p,headTitleMutations:"all"===p}:p||{};mt();var F,B=0,G=function(e){var t,n=l(O||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.eventProcessor&&(e=r.eventProcessor(e))}}catch(e){n.e(e)}finally{n.f()}return b&&!D&&(e=b(e)),e};Ru=function(e,o){var i;e.timestamp=lu(),null!=(i=Cu[0])&&i.isFrozen()&&e.type!==du.FullSnapshot&&(e.type!==du.IncrementalSnapshot||e.data.source!==fu.Mutation)&&Cu.forEach((function(e){return e.unfreeze()})),L?null==t||t(G(e),o):D&&(o={type:"rrweb",event:G(e),origin:window.location.origin,isCheckout:o},window.parent.postMessage(o,"*")),e.type===du.FullSnapshot?(F=e,B=0):e.type!==du.IncrementalSnapshot||e.data.source===fu.Mutation&&e.data.isAttachIframe||(B++,e=n&&e.timestamp-F.timestamp>n,(r&&B>=r||e)&&Ou(!0))};var j,z=function(e){Ru({type:du.IncrementalSnapshot,data:v({source:fu.Mutation},e)})},V=function(e){return Ru({type:du.IncrementalSnapshot,data:v({source:fu.Scroll},e)})},W=function(e){return Ru({type:du.IncrementalSnapshot,data:v({source:fu.CanvasMutation},e)})},H=new Gu({mutationCb:z,adoptedStyleSheetCb:function(e){return Ru({type:du.IncrementalSnapshot,data:v({source:fu.AdoptedStyleSheet},e)})}}),q=new _u({mirror:qu,mutationCb:z,stylesheetManager:H,recordCrossOriginIframes:S,wrappedEmit:Ru});e=l(O||[]);try{for(e.s();!(j=e.n()).done;){var Z=j.value;Z.getMirror&&Z.getMirror({nodeMirror:qu,crossOriginIframeMirror:q.crossOriginIframeMirror,crossOriginIframeStyleMirror:q.crossOriginIframeStyleMirror})}}catch(t){e.e(t)}finally{e.f()}var Y=new ju;Mu=new Bu({recordCanvas:I,mutationCb:W,win:window,blockClass:i,blockSelector:a,mirror:qu,sampling:k.canvas,dataURLOptions:C});var K=new Tu({mutationCb:z,scrollCb:V,bypassOptions:{blockClass:i,blockSelector:a,maskTextClass:u,maskTextSelector:d,inlineStylesheet:f,maskInputOptions:P,dataURLOptions:C,maskTextFn:m,maskInputFn:g,recordCanvas:I,inlineImages:R,sampling:k,slimDOMOptions:U,iframeManager:q,stylesheetManager:H,canvasManager:Mu,keepIframeSrcFn:M,processedNodeManager:Y},mirror:qu});Ou=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(E){Ru({type:du.Meta,data:{href:window.location.href,width:ft(),height:dt()}},e),H.reset(),K.init(),Cu.forEach((function(e){return e.lock()}));var t=Ne(document,{mirror:qu,blockClass:i,blockSelector:a,maskTextClass:u,maskTextSelector:d,inlineStylesheet:f,maskAllInputs:P,maskTextFn:m,maskInputFn:g,slimDOM:U,dataURLOptions:C,recordCanvas:I,inlineImages:R,onSerialize:function(e){"IFRAME"===e.nodeName&&qu.getMeta(e)&&q.addIframe(e),yt(e,qu)&&H.trackLinkElement(e),bt(e)&&K.addShadowRoot(au.shadowRoot(e),document)},onIframeLoad:function(e,t){q.attachIframe(e,t),K.observeAttachShadow(e)},onStylesheetLoad:function(e,t){H.attachLinkElement(e,t)},keepIframeSrcFn:M});if(!t)return console.warn("Failed to snapshot the document");Ru({type:du.FullSnapshot,data:{node:t,initialOffset:ut(window)}},e),Cu.forEach((function(e){return e.unlock()})),document.adoptedStyleSheets&&0<document.adoptedStyleSheets.length&&H.adoptStyleSheets(document.adoptedStyleSheets,qu.getId(document))}};try{var J=[],X=function(e){var t;return ku(Vt)({mutationCb:z,mousemoveCb:function(e,t){return Ru({type:du.IncrementalSnapshot,data:{source:t,positions:e}})},mouseInteractionCb:function(e){return Ru({type:du.IncrementalSnapshot,data:v({source:fu.MouseInteraction},e)})},scrollCb:V,viewportResizeCb:function(e){return Ru({type:du.IncrementalSnapshot,data:v({source:fu.ViewportResize},e)})},inputCb:function(e){return Ru({type:du.IncrementalSnapshot,data:v({source:fu.Input},e)})},mediaInteractionCb:function(e){return Ru({type:du.IncrementalSnapshot,data:v({source:fu.MediaInteraction},e)})},styleSheetRuleCb:function(e){return Ru({type:du.IncrementalSnapshot,data:v({source:fu.StyleSheetRule},e)})},styleDeclarationCb:function(e){return Ru({type:du.IncrementalSnapshot,data:v({source:fu.StyleDeclaration},e)})},canvasMutationCb:W,fontCb:function(e){return Ru({type:du.IncrementalSnapshot,data:v({source:fu.Font},e)})},selectionCb:function(e){Ru({type:du.IncrementalSnapshot,data:v({source:fu.Selection},e)})},customElementCb:function(e){Ru({type:du.IncrementalSnapshot,data:v({source:fu.CustomElement},e)})},blockClass:i,ignoreClass:s,ignoreSelector:c,maskTextClass:u,maskTextSelector:d,maskInputOptions:P,inlineStylesheet:f,sampling:k,recordDOM:E,recordCanvas:I,inlineImages:R,userTriggeredOnInput:A,collectFonts:x,doc:e,maskInputFn:g,maskTextFn:m,keepIframeSrcFn:M,blockSelector:a,slimDOMOptions:U,dataURLOptions:C,mirror:qu,iframeManager:q,stylesheetManager:H,shadowDomManager:K,processedNodeManager:Y,canvasManager:Mu,ignoreCSSAttributes:N,plugins:(null==(t=null==O?void 0:O.filter((function(e){return e.observer})))?void 0:t.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return Ru({type:du.Plugin,data:{plugin:e.name,payload:t}})}}})))||[]},y)};q.addLoadListener((function(e){try{J.push(X(e.contentDocument))}catch(e){console.warn(e)}}));var Q=function(){Ou(),J.push(X(document)),zu=!0};return"interactive"===document.readyState||"complete"===document.readyState?Q():(J.push(at("DOMContentLoaded",(function(){Ru({type:du.DomContentLoaded,data:{}}),"DOMContentLoaded"===T&&Q()}))),J.push(at("load",(function(){Ru({type:du.Load,data:{}}),"load"===T&&Q()}),window))),function(){J.forEach((function(e){return e()})),Y.destroy(),zu=!1,cu=void 0}}catch(e){console.warn(e)}}function Xt(e){return!(!e||"string"!=typeof e.valueOf())}function Qt(e){return Number.isInteger&&Number.isInteger(e)||"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function $t(e){if(!Xt(e)){e=e.text||"";var t=document.getElementsByTagName("title");t&&null!=t[0]&&(e=t[0].text)}return e}function en(e){var t=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(e);return t?t[1]:e}function tn(e){var t=e.length;return"."===e.charAt(--t)&&(e=e.slice(0,t)),"*."===e.slice(0,2)&&(e=e.slice(1)),e}function nn(e){var t=window,n=on("referrer",t.location.href)||on("referer",t.location.href);if(n)return n;if(e)return e;try{if(t.top)return t.top.document.referrer;if(t.parent)return t.parent.document.referrer}catch(e){}return document.referrer}function rn(e,t,n,r){return void 0!==e&&(e.addEventListener?(e.addEventListener(t,n,r),!0):e.attachEvent?e.attachEvent("on"+t,n):void(e["on"+t]=n))}function on(e,t){return(e=new RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(t))?decodeURIComponent(e[1].replace(/\+/g," ")):null}function an(e,t,n){void 0===n&&(n=63072e3);try{var r=window.localStorage,o=Date.now()+1e3*n;return r.setItem("".concat(e,".expires"),o.toString()),r.setItem(e,t),!0}catch(e){return!1}}function sn(e){try{var t=window.localStorage;return t.removeItem(e),t.removeItem(e+".expires"),!0}catch(e){return!1}}function ln(e,t,n,r){return cn(e,"",-1,"/",t,n,r)}function cn(e,t,n,r,o,i,a){return 1<arguments.length?document.cookie=e+"="+encodeURIComponent(null!=t?t:"")+(n?"; Expires="+new Date(+new Date+1e3*n).toUTCString():"")+(r?"; Path="+r:"")+(o?"; Domain="+o:"")+(i?"; SameSite="+i:"")+(a?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}function un(e){try{var t=null===window||void 0===window?void 0:window.localStorage;return!!t&&(t.removeItem(e),!0)}catch(e){return!1}}function dn(){"undefined"!=typeof window&&void 0!==window.localStorage&&localStorage.removeItem(Zu.SAMPLING_STORAGE_RANDOM_NUMBER_KEY)}function fn(e,t){return void 0!==e.act&&void 0!==e.act[t]&&void 0!==(e=e.act[t])?e:Zu.DEFAULT_SAMPLING_ACTION[t]}function hn(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}function pn(e,t,n,r,o){var i=[Ju.request_body,Ju.response_body,Ju.request_headers,Ju.response_headers,Ju.request_query],a={};if("number"==typeof o&&($u=1024*o),t&&0<t.length)for(o=0;o<t.length;o++){var s=t[o],l=s.conditions;s=_(s,["conditions"]);try{if(gn(e,l)){l=0;for(var c=Object.entries(e);l<c.length;l++){var u=c[l],d=u[0],f=u[1];i.includes(d)||(a[d]=f)}l=0;for(var h=Object.entries(s);l<h.length;l++){var p=h[l];d=p[0],f=p[1];try{if(f&&0<s[d].length){var v=!1;if(d!==Ju.response_headers&&d!==Ju.request_headers||(v=!0),d===Ju.request_body){var g=void 0,m=void 0,y=void 0,b=void 0,w=void 0,k=void 0,C=void 0,E=n,I=e;void 0===E&&(E={});var T=ed(null===(C=null==E?void 0:E.requestDetails)||void 0===C?void 0:C.headers);if(void 0!==T&&(T.toLowerCase().includes("text/plain")||T.toLowerCase().includes("json")||T.toLowerCase().includes("text/javascript")||T.toLowerCase().includes("application/javascript")||T.toLowerCase().includes("text/html"))||void 0===T)try{if("string"==typeof(null===(k=null==E?void 0:E.requestDetails)||void 0===k?void 0:k.body)&&(null===(w=null==E?void 0:E.requestDetails)||void 0===w?void 0:w.body.length)<=$u)try{I[Ju.request_body]=JSON.parse(null===(b=null==E?void 0:E.requestDetails)||void 0===b?void 0:b.body)}catch(e){}else"object"===S(null===(y=null==E?void 0:E.requestDetails)||void 0===y?void 0:y.body)&&JSON.stringify(null===(m=null==E?void 0:E.requestDetails)||void 0===m?void 0:m.body).length<=$u&&(I[Ju.request_body]=null===(g=null==E?void 0:E.requestDetails)||void 0===g?void 0:g.body)}catch(e){}}if(d===Ju.response_body){var A,x=I=E=C=k=w=b=y=m=g=void 0,R=void 0,O=void 0,M=n,N=e;void 0===M&&(M={});e:{var L=null===(O=null==M?void 0:M.responseDetails)||void 0===O?void 0:O.headers;try{O=void 0,null!=L&&(O=L["content-length"]||L["Content-Length"]||L["Content-length"]);var D=null==O||isNaN(O)?O:Number(O);break e}catch(e){}D=void 0}var P=ed(null===(A=null==M?void 0:M.responseDetails)||void 0===A?void 0:A.headers);if(void 0!==P&&(P.toLowerCase().includes("text/plain")||P.toLowerCase().includes("json")||P.toLowerCase().includes("text/javascript")||P.toLowerCase().includes("application/javascript")||P.toLowerCase().includes("text/html")))if(void 0!==D&&D<=$u)if("string"==typeof(null===(R=null==M?void 0:M.responseDetails)||void 0===R?void 0:R.body))try{N[Ju.response_body]=JSON.parse(null===(x=null==M?void 0:M.responseDetails)||void 0===x?void 0:x.body)}catch(e){}else"object"===S(null===(I=null==M?void 0:M.responseDetails)||void 0===I?void 0:I.body)&&(N[Ju.response_body]=null===(E=null==M?void 0:M.responseDetails)||void 0===E?void 0:E.body);else if(void 0===D)try{if("string"==typeof(null===(C=null==M?void 0:M.responseDetails)||void 0===C?void 0:C.body)&&(null===(w=null===(k=null==M?void 0:M.responseDetails)||void 0===k?void 0:k.body)||void 0===w?void 0:w.length)<=$u)try{N[Ju.response_body]=JSON.parse(null===(b=null==M?void 0:M.responseDetails)||void 0===b?void 0:b.body)}catch(e){}else"object"===S(null===(y=null==M?void 0:M.responseDetails)||void 0===y?void 0:y.body)&&JSON.stringify(null===(m=null==M?void 0:M.responseDetails)||void 0===m?void 0:m.body).length<=$u&&(N[Ju.response_body]=null===(g=null==M?void 0:M.responseDetails)||void 0===g?void 0:g.body)}catch(e){}}d===Ju.request_query&&yn(e,r);var U=mn(e[d],s[d],v);0!==Object.keys(U).length&&(a[d]=U)}}catch(e){a[d]=void 0}}return a}}catch(e){console.warn("Conviva App Tracker: Error in collecting attributes nwreqConfig ".concat(e))}}for(a=_r({},e),e=0;e<i.length;e++)t=i[e],null!=a&&a.hasOwnProperty(t)&&delete a[t];return a}function vn(e,t,n){try{if("string"==typeof n&&"string"==typeof e&&"*"===n.trim())return!0;switch(t){case"==":case"equal":return e===n;case"!=":return e!==n;case">":return e>n;case"<":return e<n;case">=":return e>=n;case"<=":return e<=n;case"contains":return""!==n&&"string"==typeof e&&"string"==typeof n&&-1!==e.toLowerCase().indexOf(n.toLowerCase());default:return!1}}catch(e){return console.warn("Conviva App Tracker: Error in Compare values nwreq ".concat(e)),!1}}function gn(e,t){try{for(var n=0;n<t.length;n++){var r=t[n],o=!1;if(0<Object.keys(r).length)for(var i=0,a=Object.entries(r);i<a.length;i++){var s=a[i],l=s[1],c=e[s[0]];if(0<l.length){for(var u=0,d=0,f=l;d<f.length;d++){var h=f[d],p="contains",v=h;if("object"===S(h)&&h.length?(p=h[1],v=h[0]):"boolean"!=typeof h&&null!==h||(p="equal",v=h),vn(c,p,v)){o=!0;break}if(o=!1,u+1===l.length)break;u++}if(!1===o)break}}if(o)return!0}}catch(e){console.warn("Conviva App Tracker: Error in Applying nwreqConfig ".concat(e))}return!1}function mn(e,t,n){var r={};try{for(var o=0;o<t.length;o++){var i=t[o],a=e,s=r;n&&(i=i.toLowerCase(),a=a&&Object.entries(a).reduce((function(e,t){var n=t[1];return e[t[0].toLowerCase()]=n,e}),{}));for(var l=i.split("."),c=0;c<l.length;c++){var u=l[c];if(null==a||!a.hasOwnProperty(u))break;c===l.length-1?s[u]=a[u]:(s[u]=s[u]||{},a=a[u],s=s[u])}}}catch(e){console.warn("Conviva App Tracker: Error in filtering schema object nwreq ".concat(e))}return r}function yn(e,t){try{var n=(null==e?void 0:e.targetUrl)||(null==e?void 0:e.url);if(n&&"string"==typeof n&&n.includes("?")){var r=void 0;try{var o=n.indexOf("?");if(-1===o)return;var i=n.indexOf("#",o),a=-1!==i?n.substring(o+1,i):n.substring(o+1);if(!a||a.length>(t||10240))return;r="undefined"!=typeof URLSearchParams?new URLSearchParams(a):null}catch(e){return void console.warn("Conviva App Tracker: Error creating URLSearchParams: ".concat(e))}var s={};if(r instanceof URLSearchParams)r.forEach((function(e,t){s[t]=e}));else{t=0;for(var l=n.substring(n.indexOf("?")+1).split("&");t<l.length;t++){var c=l[t];if(c){var u=c.indexOf("="),d=0<u?decodeURIComponent(c.substring(0,u)):decodeURIComponent(c);if(d){var f=0<u&&u<c.length-1?decodeURIComponent(c.substring(u+1)):"";s[d]=f}}}}0<Object.keys(s).length&&(e[Ju.request_query]=s)}}catch(e){console.warn("Conviva App Tracker: Error parsing request query parameters: ".concat(e))}}function bn(e,t,n,r,o,i){for(var a={},s=0;s<t.length;s++){var l=t[s],c=l.req,u=l.opt,d=l.smb;l=l.rqq;try{var f=r([{req:c,opt:u}],[],e,n);if(null!=f&&f.result){if(d&&Array.isArray(d)){var h=wn(e,d,!1,i);0<Object.keys(h).length&&Object.assign(a,h)}return l&&Array.isArray(l)&&(yn(e,o),h=wn(e[Ju.request_query],l,!1,i),0<Object.keys(h).length)&&(void 0!==a[Ju.request_query]&&null!==a[Ju.request_query]||(a[Ju.request_query]={}),Object.assign(a[Ju.request_query],h)),a}}catch(e){console.warn("Conviva App Tracker: Error in collecting conditional SSE attributes ".concat(e))}}return a}function wn(e,t,n,r){if(void 0===r&&(r=!1),r)return function(e,t,n){var r={};try{for(var o=new Map,i=new Set,a=0;a<t.length;a++){var s=t[a];n&&(s=s.toLowerCase());var l=s.split(".");if(1===l.length)i.add(l[0]);else if(2!==l.length||isNaN(Number(l[1]))){if(1<l.length&&!isNaN(Number(l[1]))){u=l[0],d=Number(l[1]);var c=l.slice(2);f="".concat(u,".").concat(d),o.has(f)||o.set(f,[]),o.get(f).push(c.join("."))}}else{var u=l[0],d=Number(l[1]),f="".concat(u,".").concat(d);o.has(f)||o.set(f,[]),o.get(f).push("")}}t=0;for(var h=Array.from(i);t<h.length;t++){var p=h[t],v=e;n&&(v=v&&Object.entries(v).reduce((function(e,t){var n=t[1];return e[t[0].toLowerCase()]=n,e}),{})),null!=v&&v.hasOwnProperty(p)&&(r[p]=v[p])}i=0;for(var g=Array.from(o.entries());i<g.length;i++){var m=g[i];f=m[0];var y=m[1],b=f.split(".");if(u=b[0],d=Number(b[1]),v=e,o=r,n&&(v=v&&Object.entries(v).reduce((function(e,t){var n=t[1];return e[t[0].toLowerCase()]=n,e}),{})),null!=v&&v.hasOwnProperty(u)&&(v=v[u],Array.isArray(o[u])||(o[u]=[]),o=o[u],Array.isArray(v)&&void 0!==v[d])){for(v=v[d];o.length<=d;)o.push(null);var w=o[d]||{};for(h=0,p=y;h<p.length;h++){var k=p[h];if(""===k)w=v;else for(c=k.split("."),t=v,a=w,s=0;s<c.length;s++){var C=c[s];if(null==t||!t.hasOwnProperty(C))break;if(s===c.length-1){var E=t[C];if("string"==typeof E)try{E=JSON.parse(E)}catch(e){}a[C]=E}else{if(isNaN(Number(c[s+1]))){if(a[C]&&"object"===S(a[C])||(a[C]={}),"string"==typeof(t=t[C])&&s<c.length-1)try{t=JSON.parse(t)}catch(e){}}else if(a[C]&&"object"===S(a[C])||(a[C]={}),"string"==typeof(t=t[C])&&s<c.length-1)try{t=JSON.parse(t)}catch(e){}a=a[C]}}}o[d]=w}}}catch(e){console.warn("Conviva App Tracker: Error in filtering SSE ArrayBuffer object ".concat(e))}return r}(e,t,n);r={};try{for(var o=0;o<t.length;o++){var i=t[o],a=e,s=r;n&&(i=i.toLowerCase(),a=a&&Object.entries(a).reduce((function(e,t){var n=t[1];return e[t[0].toLowerCase()]=n,e}),{}));for(var l=i.split("."),c=0;c<l.length;c++){var u=l[c];if(null==a||!a.hasOwnProperty(u))break;if(c===l.length-1)s[u]=a[u];else{if(s[u]=s[u]||{},"string"==typeof(a=a[u])&&c<l.length-1)try{a=JSON.parse(a)}catch(e){}s=s[u]}}}}catch(e){console.warn("Conviva App Tracker: Error in filtering SSE object ".concat(e))}return r}function kn(e,t){return t?t.split(".").reduce((function(e,t){if(null!=e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return t=/^\d+$/.test(t)?Number(t):t,null==e?void 0:e[t]}}),e):e}function Cn(e,t,n){return"translate.googleusercontent.com"===e?(""===n&&(n=t),e=en(t=null!=(e=(e=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(t))&&1<(null==e?void 0:e.length)?on("u",e[1]):null)?e:"")):"cc.bingj.com"!==e&&"webcache.googleusercontent.com"!==e||(e=en(t=document.links[0].href)),[e,t,n]}function Sn(e,t){return void 0===t&&(t=1),"0"===e[0]?(e[7]=e[6],e[5]=e[4],e[3]++):e[3]=t,t=Vr.v4(),e[6]=t,e[8]="",e[9]=void 0,t}function En(e){e[4]=Math.round((new Date).getTime()/1e3)}function In(e){return{activateLCPObserver:function(){try{PerformanceObserver&&new PerformanceObserver((function(e){try{e.getEntries().forEach((function(e){var t;if("largest-contentful-paint"===e.entryType){var n=null===performance||void 0===performance?void 0:performance.getEntriesByType("navigation"),r=void 0;n&&0<(null==n?void 0:n.length)&&(r=null===(t=n[0])||void 0===t?void 0:t.activationStart),td=_r(_r({},e.toJSON()),{performanceNavigationActivationStart:null!=r?r:0})}}))}catch(e){console.warn("convivaAppTracker error in conviva lcp observer "+e)}})).observe({type:"largest-contentful-paint",buffered:!0})}catch(e){console.warn("convivaAppTracker conviva_lcp failed "+e)}},contexts:function(){try{switch(e){case Zu.PERFORMANCE_CONTEXT.DISABLED:return[];case Zu.PERFORMANCE_CONTEXT.PERFORMANCE_NAVIGATION_TIMING:return function(){var e,t,n;try{var r=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{};if(r.getEntriesByType){var o=r.getEntriesByType("navigation")[0],i=null!==(e=null==r?void 0:r.timeOrigin)&&void 0!==e?e:0;if(!o)return[];var a={st:Math.floor(i+o.startTime),dls:Math.floor(i+o.domainLookupStart),dle:Math.floor(i+o.domainLookupEnd),rss:Math.floor(i+o.responseStart),rse:Math.floor(i+o.responseEnd),le:Math.floor(i+o.loadEventEnd),dur:Math.floor(o.loadEventEnd-o.activationStart),as:Math.floor(i+o.activationStart)};return null!=td&&td.startTime&&(a.lcp={rt:Math.floor(i+td.startTime),url:128<(null===(t=null==td?void 0:td.url)||void 0===t?void 0:t.length)?null===(n=null==td?void 0:td.url)||void 0===n?void 0:n.substring(0,128):td.url,sz:td.size}),[{sc:"cv/pc/1-0-1",dt:a}]}return[]}catch(e){return console.warn("ConvivaAppTracker: issue will getting performance Navigation timing context"),[]}}();default:var t=window,n=t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance,r=n.timing;return x(x([],n?[{sc:"w3/pt/1-0-0",dt:{navigationStart:r.navigationStart,domainLookupStart:r.domainLookupStart,domainLookupEnd:r.domainLookupEnd,responseStart:r.responseStart,responseEnd:r.responseEnd,loadEventEnd:r.loadEventEnd}}]:[],!0),function(){var e,t,n;try{if(void 0!==(null==td?void 0:td.startTime)&&"number"==typeof(null==td?void 0:td.startTime))return[{sc:"cv/lcp/1-0-0",dt:{lcp:Math.round(td.startTime)-(null!==(e=td.performanceNavigationActivationStart)&&void 0!==e?e:0),url:128<(null===(t=null==td?void 0:td.url)||void 0===t?void 0:t.length)?null===(n=null==td?void 0:td.url)||void 0===n?void 0:n.substring(0,128):td.url}}]}catch(e){}return[]}(),!0)}}catch(e){return console.warn("convivaAppTracker problem in perfromance context "+e),[]}}}}function _n(e,t,n,r,o,i){var a;try{var s=null,l=null!==(a=i.url)&&void 0!==a?a:"";if(!l)return!0;if(cd.some((function(e){return l.includes(e)})))return!1;var c=new URL(l),u=c.protocol.replace(":","");if(a=function(e,t){var n;return(e=An(e,{scheme:u,host:c.hostname,path:decodeURIComponent(c.pathname)},ad.NETWORK_REQUEST)).matched?e.opt?xn(e.opt,{responseStatusCode:null!==(n=null==o?void 0:o.status)&&void 0!==n?n:0,duration:Date.now()-i.requestTimestamp},ad.NETWORK_REQUEST)===t:t:null},e&&null===s&&(s=a(e,!0)),t&&null===s&&(s=a(t,!1)),null===s){var d=(null==n?void 0:n.includes("*"))||(null==n?void 0:n.some((function(e){return!(!e||""===e)&&l.includes(e)}))),f=null==r?void 0:r.some((function(e){return!(!e||""===e)&&l.includes(e)}));s=!d||f}return!0===s}catch(e){return!0}}function Tn(e,t,n,r){try{var o=null;if(!(r=null!=r?r:""))return{result:!0};var i=new URL(r),a=i.protocol.replace(":","");return r=function(e,t){var r;if((e=An(e,_r({scheme:a,host:i.hostname,path:decodeURIComponent(i.pathname)},n),ad.SSE_EVENT)).matched){if(e.opt){var o=xn(e.opt,n,ad.SSE_EVENT);return!0!==(null===(r=null==e?void 0:e.item)||void 0===r?void 0:r.count)||o?{result:o===t,matchedConfig:e.item,shouldSend:!0}:{result:e.matched===t,matchedConfig:e.item,shouldSend:!1}}return{result:t,matchedConfig:e.item,shouldSend:!1}}return null},e&&null===o&&(o=r(e,!0)),t&&null===o&&(o=r(t,!1)),(!e||Array.isArray(e)&&0===e.length)&&null===o&&(o={result:!0}),o}catch(e){return{result:!0}}}function An(e,t,n){try{for(var r=0;r<e.length;r++){var o=e[r],i=o.opt;if(xn(o.req,t,n))return{matched:!0,opt:i||null,item:o}}return{matched:!1,opt:null}}catch(e){return{matched:!1,opt:null}}}function xn(e,t,n){try{if(!e)return!1;if("and"===e.type){for(var r=0,o=e.cond;r<o.length;r++){var i=o[r];if(!xn(i,t,n))return!1}return!0}if("or"===e.type){for(o=0,r=e.cond;o<r.length;o++)if(xn(i=r[o],t,n))return!0;return!1}return n===ad.NETWORK_REQUEST?function(e,t){var n=e.key,r=e.op;if(e=e.val,!n||!r)return!1;switch(n){case"sch":return!!t.scheme&&Rn(t.scheme,r,e);case"host":return!!t.host&&Rn(t.host,r,e);case"path":return!!t.path&&Rn(t.path,r,e);case"dur":return!!t.duration&&On(t.duration,r,e);case"rsc":return void 0!==t.responseStatusCode&&0<=t.responseStatusCode&&On(t.responseStatusCode,r,e);default:return!1}}(e,t):n===ad.CUSTOM_EVENT?function(e,t){var n=e.key,r=e.op;if(e=e.val,!n||!r)return!1;if(void 0!==t[n]){if(Xt(t[n]))return Rn(t[n],r,e);if("boolean"==typeof t[n])switch(t=t[n],r){case"!=":return t!==e;case"==":return t===e;default:return!1}if(Number.isInteger(t[n]))return On(t[n],r,e)}return!1}(e,t):n===ad.SSE_EVENT&&function(e,t){var n=e.key,r=e.op;if(e=e.val,!n||!r)return!1;switch(n){case"sch":return!!t.scheme&&Rn(t.scheme,r,e);case"host":return!!t.host&&Rn(t.host,r,e);case"path":return!!t.path&&Rn(t.path,r,e);default:if(null!=(t=kn(t,n))){if("string"==typeof t)return Rn(t,r,e);if("boolean"==typeof t)switch(r){case"!=":return t!==e;case"==":return t===e;default:return!1}if("number"==typeof t&&Number.isInteger(t))return On(t,r,e)}return!1}}(e,t)}catch(e){return!1}}function Rn(e,t,n){return"=="===t&&Array.isArray(n)?!!(t=n).includes("*")||t.some((function(t){return!(!t||""===t)&&e===t})):"contains"===t&&Array.isArray(n)?!!(t=n).includes("*")||t.some((function(t){return!(!t||""===t)&&e.includes(t)})):"sw"===t&&Array.isArray(n)?!!(t=n).includes("*")||t.some((function(t){return!(!t||""===t)&&e.startsWith(t)})):!("ew"!==t||!Array.isArray(n))&&(!!(t=n).includes("*")||t.some((function(t){return!(!t||""===t)&&e.endsWith(t)})))}function On(e,t,n){if("in"===t.toLowerCase()&&Array.isArray(n))return n.includes(e);if("range"===t.toLowerCase()&&"object"===S(n)){t=n.min;var r=n.max,o=n.minExclusive;return n=n.maxExclusive,void 0!==t&&void 0!==r?e>=t&&e<=r:void 0!==o&&void 0!==n&&(e>o&&e<n)}if(Qt(n))switch(t){case"!=":return e!==n;case">":return e>n;case">=":return e>=n;case"<":return e<n;case"<=":return e<=n;case"==":return e===n}return!1}function Mn(e,t,n){var r=null;e:{for(var o=0;o<e.length;o++){var i=e[o],a=i.opt;if(xn(i.req,t,n)){if(!a){e=!0,a=null;break e}if(xn(a,t,n)){e=!0;break e}}}e=!1,a=null}return e&&(r=!a||!!xn(a,t,n)),r}function Nn(e,t,n){var r,o;try{if(e&&t){var i,a=null==e?void 0:e.getConfig();e:{var s,l,c,u={message:""};try{var d=n.message,f=n.error,h=n.className,p=n.extraData;if(d)u.message=d;else if("string"==typeof f){if(!(0<f.trim().length)){qr.warn("Conviva Eco Sensor:: Mandatory field message is missing");var v=null;break e}u.message=f}else"object"===S(f)&&("string"==typeof f.message&&0<f.message.trim().length&&(u.message=hn(f.message,Zu.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_MESSAGE_LENGTH)),"string"==typeof f.name&&0<f.name.trim().length&&(u.exceptionName=hn(f.name,Zu.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_EXCEPTION_NAME_LENGTH)),"string"==typeof f.stack&&0<f.stack.trim().length&&(u.stackTrace=hn(f.stack,Zu.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_STACK_LENGTH)));if(0===u.message.trim().length){qr.warn("Conviva Eco Sensor:: Mandatory field message is missing"),v=null;break e}"string"==typeof h&&0<h.trim().length&&(u.className=hn(h,Zu.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_CLASSNAME_LENGTH)),null!=p&&(u.extraData=p);var g=null==e?void 0:e.getConfig();if(null!=g&&g.configurationVersion&&(u.remoteConfigVersion=g.configurationVersion),null!=n&&n.configAppliedTime&&(u.configAppliedTime=null==n?void 0:n.configAppliedTime),null!=g&&g.cacheRefreshInterval&&(u.cacheRefreshInterval=g.cacheRefreshInterval),null!=n&&n.configAppliedSrc&&(u.configAppliedSrc=null==n?void 0:n.configAppliedSrc),localStorage){var m=localStorage.getItem(Zu.SAMPLING_STORAGE_RANDOM_NUMBER_KEY);null!=m&&(u.samplingRandomNumber=parseFloat(m))}"number"==typeof(null===(l=null===(s=null==g?void 0:g.controlIngestConfig)||void 0===s?void 0:s.sel)||void 0===l?void 0:l.pct)?(u.samplingPercentage=g.controlIngestConfig.sel.pct,u.samplingDecision=Zu.SAMPLING_STATUS.DERIVED,null!=S(null===(c=null==g?void 0:g.controlIngestConfig)||void 0===c?void 0:c.act)&&(u.extraData=_r(_r({},u.extraData),{samplingActionConfig:g.controlIngestConfig.act}))):u.samplingDecision=Zu.SAMPLING_STATUS.DEFAULT,"function"==typeof t&&"string"==typeof t()&&(u.samplingStatus=t()==Zu.SAMPLING_MODES.RCFG)}catch(e){qr.warn("Error occurred while generating diagnostic object",e),v=null;break e}v=u}if(!(i=!v)){var y;try{var b=null==e?void 0:e.getConfig(),w=(null===(y=null==b?void 0:b.di)||void 0===y?void 0:y.lim)||10,k=Date.now();6e4<=k-gd&&(vd=0,gd=k);var C=!(++vd>w)}catch(e){qr.warn("Conviva Eco Sensor:: Error occured while checking diagnostic event is allowed",e),C=!1}i=!C}if(!i&&"boolean"==typeof(null===(r=null==a?void 0:a.di)||void 0===r?void 0:r.en)&&!0===(null===(o=null==a?void 0:a.di)||void 0===o?void 0:o.en))if(null==e);else{var E=e.track,I=Q({event:{sc:"iglu:com.conviva/di/jsonschema/1-0-4",dt:ee({msg:v.message,cn:v.className,st:v.stackTrace,en:v.exceptionName,ed:v.extraData,rcv:v.remoteConfigVersion,cat:v.configAppliedTime,cri:v.cacheRefreshInterval,csrc:v.configAppliedSrc,srn:v.samplingRandomNumber,spr:v.samplingPercentage,ss:v.samplingStatus,sd:v.samplingDecision})}});E.call(e,I)}}}catch(e){qr.warn("Conviva Eco Sensor:: Error occurred while sending reportDiagnosticError",e)}}function Ln(){var e,t,n=null===(e=null==hd?void 0:hd.core)||void 0===e?void 0:e.getConfig();_d=(null==(_d=(null===(t=null==n?void 0:n.clickcc)||void 0===t?void 0:t.cssSelectorList)||_d)?void 0:_d.replace(/\s+/g,""))||""}function Dn(e,t){if(!(e instanceof HTMLElement||e instanceof SVGElement))return null;var n=null==e?void 0:e.closest(Sd);if(n)return n;if(n=null==e?void 0:e.closest(_d))return function(e,t){var n;if(0===(e=e.querySelectorAll(Sd)).length)return null;if(1===e.length&&0<e[0].offsetWidth&&0<e[0].offsetHeight)return e[0];var r=t.clientX;if(t=t.clientY,e.length<=("IntersectionObserver"in window&&"fetch"in window&&"Promise"in window?Zu.MAX_NATIVE_SCAN:Zu.MAX_NATIVE_SCAN_LEGACY))for(var o=0;o<e.length;o++){var i=null===(n=e[o])||void 0===n?void 0:n.getBoundingClientRect();if(i&&r>=i.left&&r<=i.right&&t>=i.top&&t<i.bottom)return e[o]}return null}(n,t)||n;t=e,n=0;var r=Zu.CLICK_MAX_DEPTH;e:{if(t.style){if(t.style.visibility&&""!==t.style.visibility&&"hidden"==t.style.visibility||t.style.pointerEvents&&""!==t.style.pointerEvents&&"none"==t.style.pointerEvents){var o=!1;break e}if(t.style.cursor&&""!==t.style.cursor&&"pointer"==t.style.cursor){o=!0;break e}}o="hidden"!==(o=getComputedStyle(t)).visibility&&"none"!==o.pointerEvents&&"pointer"===o.cursor}if(o){for(;t&&t!==document.documentElement&&(t instanceof HTMLElement||t instanceof SVGElement)&&n<r;){if("function"==typeof t.onclick)return t;t=t.parentElement,n++}return e.closest(Ed)||e}return null}function Pn(e){try{if(!e||e.nodeType!==Node.ELEMENT_NODE)return null;if(e.id&&"string"==typeof e.id&&""!==e.id.trim()&&1===document.querySelectorAll("#".concat(function(e){return"undefined"!=typeof CSS&&CSS.escape?CSS.escape(e):e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")}(e.id))).length)return'//*[@id="'.concat(e.id,'"]');var t=[],n=e;for(e=function(){var e=n.tagName.toLowerCase(),r=n.parentElement;if(r){var o=Array.from(r.children).filter((function(t){return t.tagName.toLowerCase()===e}));1<o.length&&(o=o.indexOf(n)+1,e+="[".concat(o,"]")),t.unshift(e),n=r}else{if(!((r=n.getRootNode())instanceof ShadowRoot))return t.unshift(e),"break";t.unshift(e),t.unshift(">>"),n=r.host}};n&&n.nodeType===Node.ELEMENT_NODE&&"break"!==e(););return"/"+t.join("/")}catch(e){return qr.warn("Conviva Browser Tracker caused Exception in calculateXPath method of user click tracking module",e),null}}function Un(e){try{var t=Date.now(),n=Zu.CLICK_DEBOUNCING_DELAY;if(null===kd||t-kd>=n){var r,o,i,a,s,l,c;try{var u,d;if(null!==(u=e.target)&&void 0!==u&&u.shadowRoot)var f=null===(d=e.composedPath)||void 0===d?void 0:d.call(e);var h=function(e,t){var n,r;try{if(!hd||!hd.core||!e)return null;var o=hd.core.getConfig();if(!0!==(null===(n=null==o?void 0:o.clickcc)||void 0===n?void 0:n.en))return null;var i=null===(r=null==o?void 0:o.clickcc)||void 0===r?void 0:r.uiMode;return i===pd.RAW?e:i===pd.BOTH?Dn(e,t)||e:Dn(e,t)}catch(e){return qr.warn("Conviva App Tracker caused Exception in getTrackedElement method of user click tracking module",e),null}}(f&&f[0]||e.target,e);if(h&&(h instanceof HTMLElement||h instanceof HTMLInputElement)){e={};var p=Zu.CLICK_KEY_MAX_LENGTH;null!=h&&h.id&&(e.id=hn(h.id,p)),null!=h&&h.className&&(e.class=hn(h.className,p)),null!=h&&h.tagName&&(e.elementName=hn(h.tagName.toLowerCase(),p)),null!==(r=null==h?void 0:h.innerText)&&void 0!==r&&r.trim()&&(e.text=hn(h.innerText.trim(),p)),null!=h&&h.getAttribute("name")&&(e.name=hn(h.getAttribute("name")||"",p)),null!=h&&h.getAttribute("type")&&(e.elementType=hn((null===(o=h.getAttribute("type"))||void 0===o?void 0:o.toLowerCase())||"",p)),null!=h&&h.placeholder&&(e.placeholder=hn(h.placeholder,p)),null!=h&&h.getAttribute("type")&&"password"!==(null==h?void 0:h.getAttribute("type"))&&h.value&&(e.value=hn(h.value,p));var v=null===(i=null==hd?void 0:hd.core)||void 0===i?void 0:i.getConfig(),g=null===(a=null==v?void 0:v.clickcc)||void 0===a?void 0:a.collectattr;if(g)for(r=0;r<g.length;r++){var m=g[r],y=null==h?void 0:h.getAttribute(m);y&&(e[m]=hn(y,p))}try{if("A"===h.tagName.toUpperCase()||"AREA"===h.tagName.toUpperCase()){if(null!=h.href){var b=h.hostname||en(h.href),w=b.toLowerCase(),k=h.href.replace(b,w);/^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):/i.test(k)||(e.targetUrl=hn(decodeURIComponent(k),p))}h.target&&(e.target=hn(h.target,p))}}catch(e){qr.warn("Conviva App Tracker caused Exception in handleClick href setting",e)}var C=null===(s=h.querySelector("use"))||void 0===s?void 0:s.getAttribute("xlink:href");C&&(e["xlink:href"]=hn(C,p));var S=Pn(h);S&&(e.xpath=hn(S,p));var E=null!==(l=null==v?void 0:v.clickcc)&&void 0!==l?l:{},I=ad.CUSTOM_EVENT,_=E.collect,T=E.block;if(s=null,_&&(s=Mn(_,e,I)),T&&null===s){var A=Mn(T,e,I);"boolean"==typeof A&&(s=!A)}var x=null===s||s;"boolean"==typeof x&&!1===x||null===(c=null==hd?void 0:hd.core)||void 0===c||c.track($({name:"conviva_click",data:JSON.stringify(e)}))}}catch(e){qr.warn("Conviva App Tracker caused Exception in handleClick method of user click tracking module",e)}0<Cd&&Nn(hd.core,hd.getSamplingMode,{className:"clickTracking - droppedEvent",message:"total click events dropped to Avoid tracking spam from rapid clicks",extraData:{clickEventDropped:Cd}}),Cd=0}else Cd++;kd=t}catch(e){console.warn("Conviva App Tracker caused Exception in immediateClickHandler method of user click tracking module",e)}}function Fn(){try{bd||"undefined"==typeof document||(document.body?(wd=Un,rn(document.body,"click",wd,{signal:Xu,capture:!0,passive:!0}),bd=!0):document.addEventListener("DOMContentLoaded",(function(){null!==document&&void 0!==document&&document.body&&(wd=Un,rn(document.body,"click",wd,{signal:Xu,capture:!0,passive:!0}),bd=!0)})),Ln(),null!==window&&void 0!==window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",(function(){Ln()}),{signal:Xu}))}catch(e){qr.warn("Conviva App Tracker caused Exception in enableUserClickTracking method of user click tracking module",e)}}function Bn(){try{bd&&"undefined"!=typeof document&&document.body&&(wd&&(document.body.removeEventListener("click",wd),wd=null),bd=!1)}catch(e){qr.warn("Conviva App Tracker caused Exception in disableUserClickTracking method of user click tracking module",e)}}function Gn(e,t,n,r){return!(null==n||!n.enabled||null==n||!n.attributeExtraction)&&(!!(e=function(e,t,n){var r,o,i,a,s,l,c;if(e&&0<e.length){var u={targetUrl:null===(r=null==t?void 0:t.requestDetails)||void 0===r?void 0:r.url};for(r=0;r<e.length;r++){var d=e[r],f=d.conditions;d=_(d,["conditions"]);try{if(gn(u,f)){f=0;for(var h=Object.entries(d);f<h.length;f++){var p=h[f],v=p[0],g=p[1];try{if(g&&0<d[v].length){if(v===Ju.response_headers&&(u[v]=null===(o=null==t?void 0:t.responseDetails)||void 0===o?void 0:o.headers,Array.isArray(g)))for(var m=0,y=g;m<y.length;m++){var b=y[m],w=kn(u[v],b);if(null!=w)return w}if(v===Ju.request_headers&&(u[v]=null===(i=null==t?void 0:t.requestDetails)||void 0===i?void 0:i.headers,Array.isArray(g)))for(m=0,y=g;m<y.length;m++)if(b=y[m],null!=(w=kn(u[v],b)))return w;if(v===Ju.request_body){var k=ed(null===(a=null==t?void 0:t.requestDetails)||void 0===a?void 0:a.headers);if((void 0!==k&&(k.toLowerCase().includes("text/plain")||k.toLowerCase().includes("json")||k.toLowerCase().includes("text/javascript")||k.toLowerCase().includes("application/javascript")||k.toLowerCase().includes("text/html"))||void 0===k)&&(u[v]=null===(s=null==t?void 0:t.requestDetails)||void 0===s?void 0:s.body,Array.isArray(g)))for(m=0,y=g;m<y.length;m++)if(b=y[m],null!=(w=kn(u[v],b)))return w}if(v===Ju.response_body){var C=ed(null===(l=null==t?void 0:t.responseDetails)||void 0===l?void 0:l.headers);if(void 0!==C&&(C.toLowerCase().includes("text/plain")||C.toLowerCase().includes("json")||C.toLowerCase().includes("text/javascript")||C.toLowerCase().includes("application/javascript")||C.toLowerCase().includes("text/html"))&&(u[v]=null===(c=null==t?void 0:t.responseDetails)||void 0===c?void 0:c.body,Array.isArray(g)))for(m=0,y=g;m<y.length;m++)if(b=y[m],null!=(w=kn(u[v],b)))return w}if(v===Ju.request_query&&(yn(u,n),Array.isArray(g)))for(m=0,y=g;m<y.length;m++)if(b=y[m],null!=(w=kn(u[v],b)))return w}}catch(e){console.warn("Conviva App Tracker: Error in extracting attributes nwreqConfig ".concat(e))}}}}catch(e){console.warn("Conviva App Tracker: Error in collecting attributes nwreqConfig ".concat(e))}}}}(n.attributeExtraction,{requestDetails:e,responseDetails:t}))&&(r.setConversationId("string"==typeof e?e:JSON.stringify(e)),!0))}function jn(e,t,n,r,o,i,a){var s,l,c;return void 0===i&&(i={}),T(this,void 0,void 0,(function(){var u,d,f,h,p,v,g,m,y,b,w,k,C,S,E,I,_;return A(this,(function(T){switch(T.label){case 0:u=null!==(s=i.idleMs)&&void 0!==s?s:3e4,d=null!==(l=i.maxEvents)&&void 0!==l?l:1e4,f=null!==(c=i.bufferMaxBytes)&&void 0!==c?c:1e6,h=e.getReader(),p=new TextDecoder("utf-8"),v="",g=0,m=void 0,(y=function(){void 0!==m&&(clearTimeout(m),m=void 0),m=setTimeout((function(){console.warn("Conviva App Tracker:: stream idle >",u,"ms  cancelling",t),h.cancel()}),u)})(),T.label=1;case 1:T.trys.push([1,5,6,7]),T.label=2;case 2:return[4,h.read()];case 3:if(b=T.sent(),w=b.value,b.done)return[3,4];if(y(),v+=p.decode(w,{stream:!0}),(new TextEncoder).encode(v).length>f)return console.warn("Conviva App Tracker:: SSE buffer exceeded",f,"bytes, cancelling stream",t),h.cancel(),[3,4];for(k=void 0;-1!==(k=v.search(n));)if(C=v.slice(0,k).replace(/\s+$/,""),E=(S=v.match(n))?S[0].length:0,v=v.slice(k+E),(I=r(C))&&(o(I),++g>=d)){console.warn("Conviva App Tracker:: event budget reached  cancelling",t),h.cancel();break}return[3,2];case 4:return[3,7];case 5:if(!((_=T.sent())instanceof DOMException&&"AbortError"===_.name))throw _;return[3,7];case 6:return clearTimeout(m),h.releaseLock(),a&&a(),[7];case 7:return[2]}}))}))}function zn(e){var t={data:""},n=0;for(e=e.split(/\n+/);n<e.length;n++){var r=e[n];if(r&&!r.startsWith(":")){var o=r.indexOf(":"),i=(-1===o?r:r.slice(0,o)).trim();switch(r=-1===o?"":r.slice(o+1).replace(/^\s+/,""),i){case"data":t.data+=(t.data?"\n":"")+r;break;case"event":t.event=r;break;case"id":t.id=r}}}return t.data?t:null}function Vn(e){return{data:e}}function Wn(e,t,n){var r={};for(n&&(n=new URL(n).searchParams,e||(e={}),n.forEach((function(t,n){e[n]=t}))),n=0,t=t.cond;n<t.length;n++){var o=t[n],i=kn(e,o.key);if("string"==typeof i)for(var a=0,s=o.val;a<s.length;a++){var l=s[a],c=!1;switch(o.op){case"contains":default:c=i.toLowerCase().includes(l.toLowerCase());break;case"==":case"equals":c=i===l;break;case"startsWith":c=i.startsWith(l);break;case"endsWith":c=i.endsWith(l)}c&&(r[o.type]||(r[o.type]={}),r[o.type][l]=c)}}return r}function Hn(e){for(var t=[e],n=0,r=["\r\n","\n","\0"];n<r.length;n++){var o=r[n];if(e.includes(o)){t=e.split(o).filter((function(e){return 0<e.trim().length}));break}}return t}function qn(e,t,n,r,o,i,a,s,l,c,u,d,f,h,p,v,g,m,y){function b(e){var t=Object.keys(e).map((function(t){return[t,e[t]]})).reduce((function(e,t){return e[t[0]]=t[1].toString(),e}),{});return{evt:t,bytes:w(JSON.stringify(t))}}function w(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);127>=r?t+=1:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,n++):t=65535>r?t+3:t+4}return t}function k(e,t){t=I(t,!0,!1),e=_(T([e.evt]));try{p().toLowerCase()!==nd.NONE&&(e=ya.gzip(e,{level:6}),t.setRequestHeader("Content-Encoding",nd.GZIP))}catch(e){}y()!==Zu.SAMPLING_MODES.NONE&&t.send(e)}function C(e){try{if("undefined"!=typeof window&&void 0!==window.__CONVIVA_VISUAL_ACTIVATION_EXTENSION__&&"function"==typeof window.__CONVIVA_VISUAL_ACTIVATION_EXTENSION__.postMessage){var t=_(T(e));t&&0<t.length&&window.__CONVIVA_VISUAL_ACTIVATION_EXTENSION__.postMessage(t)}}catch(e){qr.warn("Error occured while sending message to Visual Labelling Extension",e)}}function E(e){for(void 0===e&&(e=!1);N.length&&"string"!=typeof N[0]&&"object"!==S(N[0]);)N.shift();if(1>N.length)M=!1;else{if(!Xt(x))throw"No collector configured";if(M=!0,window.clearTimeout(L),L=-1,U){var t=function(e){for(var t=0,n=0;t<e.length&&!((n+=e[t].bytes)>=g());)t+=1;return t},r=void 0,o=void 0;if("object"===S(N[0])){var i=I(r=x,!0,e);o=t(N)}else r=A(N[0]),i=I(r,!1,e),o=1;var a=setTimeout((function(){i.abort(),M=!1}),c);if(i.onreadystatechange=function(){4===i.readyState&&(clearTimeout(a),200<=i.status&&300>i.status?E():(qr.error("Status ".concat(i.status,", will not retry.")),M=!1))},"object"!==S(N[0]))i.send();else if(0<(t=N.slice(0,o)).length){if(e=!1,t=t.map((function(e){return e.evt})),P){var s=new Blob([_(T(t))],{type:"application/json"});try{e=navigator.sendBeacon(r,s)}catch(t){e=!1}}if(!0===e)E();else{r=_(T(t));try{p().toLowerCase()!==nd.NONE&&(r=ya.gzip(r,{level:6}),i.setRequestHeader("Content-Encoding",nd.GZIP))}catch(e){}try{y()!==Zu.SAMPLING_MODES.NONE&&i.send(r)}catch(e){}}}!function(e){for(var t=0;t<e;t++)N.shift();n&&an(G,JSON.stringify(N.slice(-1*l())))}(o)}else if(u||"object"===S(N[0]))M=!1;else{o=new Image(1,1);var d=!0;o.onload=function(){d&&(d=!1,N.shift(),n&&an(G,JSON.stringify(N.slice(-1*l()))),E())},o.onerror=function(){d&&(M=d=!1)},o.src=A(N[0]),setTimeout((function(){d&&M&&(d=!1,E())}),c)}}}function I(e,t,n){var r=new XMLHttpRequest;for(var o in t?(r.open("POST",e,!n),r.setRequestHeader("Content-Type","application/json; charset=UTF-8")):r.open("GET",e,!n),r.withCredentials=f,u&&r.setRequestHeader("SP-Anonymous","*"),d)Object.prototype.hasOwnProperty.call(d,o)&&r.setRequestHeader(o,d[o]);return r}function _(e){return JSON.stringify({sc:"sp/pd/1-0-4",dt:e})}function T(e){for(var t=(new Date).getTime().toString(),n=0;n<e.length;n++)e[n].stm=t;return e}function A(e){return s?x+e.replace("?","?stm="+(new Date).getTime()+"&"):x+e}null!==window&&void 0!==window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",(function(){E()}),{signal:Xu});var x,R,O,M=!1,N=[],L=-1,D=!0===(r="string"==typeof r?r.toLowerCase():r)||"beacon"===r||"true"===r,P=!(!(D&&window.navigator&&window.navigator.sendBeacon)||(R=window.navigator.userAgent,(O=(O=R).match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//))&&O.length&&parseInt(O[0])<=13||function(e,t,n){return!(!(n=n.match("(Macintosh;.*Mac OS X (\\d+)_(\\d+)[_\\d]*.*) AppleWebKit/"))||!n.length)&&(parseInt(n[2])<=e||parseInt(n[2])===e&&parseInt(n[3])<=t)}(10,15,R)&&function(e){var t;return(t=/^(?!.*Chrome)(?!.*Chromium)(?!.*Edg)(?!.*OPR)(?=.*Safari)/.test(e))&&(t=!/(Chrome|Chromium|Edg|OPR)/.test(e)),t}(R)))&&D,U=!(!window.XMLHttpRequest||!("withCredentials"in new XMLHttpRequest)),F="get"!==r&&U&&("post"===r||D),B=F?o:"/i";r="convivaOutQueue_".concat(e,"_").concat(F?"post2":"get");var G="convivaOutQueue_".concat(e,"_").concat(F?"post2":"get");if(un(r),un("".concat(r,".expires")),D&&(d={}),i=n&&function(){try{var e=!!window.localStorage}catch(t){e=!0}if(!e)return!1;try{var t=window.localStorage;return t.setItem("modernizr","modernizr"),t.removeItem("modernizr"),!0}catch(e){return!1}}()&&F&&i||1,n)try{var j=window.localStorage.getItem(G);N=j?JSON.parse(j):[]}catch(R){}return Array.isArray(N)||(N=[]),t.outQueues.push(N),U&&1<i&&t.bufferFlushers.push((function(e){M||E(e)})),{enqueueRequest:function(e,t,r){if(y()!=Zu.SAMPLING_MODES.NONE){if(x=t+B,F){if(C([(e=b(e)).evt]),t=g(),e.bytes>=t)return M||E(),qr.warn("Event ("+e.bytes+"B) too big, max is "+t),void k(e,x);N.push(e)}else{var s,c="?",u={co:!0,cx:!0},d=!0;for(s in e)e.hasOwnProperty(s)&&!u.hasOwnProperty(s)&&(d?d=!1:c+="&",c+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));for(var f in u)e.hasOwnProperty(f)&&u.hasOwnProperty(f)&&(c+="&"+f+"="+encodeURIComponent(e[f]));if(0<(u=a())&&(d=w(d=A(c)))>=u)return qr.warn("Event ("+d+"B) too big, max is "+u),void(U&&(e=b(e),C([e.evt]),k(e,t+o)));N.push(c)}t=!1,n&&(t=an(G,JSON.stringify(N.slice(-1*l())))),!M&&-1===L&&t&&(L=window.setTimeout(E,m()+Math.floor(Math.random()*h))),!M&&(!t||!v()||F&&(F?N.reduce((function(e,t){return e+t.bytes}),0):N.reduce((function(e,t){return e+t.length}),0))>g()||N.length>i||r)&&E()}},executeQueue:function(){M||E()},setUseLocalStorage:function(e){n=e},setAnonymousTracking:function(e){u=e},setCollectorUrl:function(e){x=e+B},setBufferSize:function(e){i=e},setCustomHeaders:function(e){d=e}}}function Zn(e){try{null!=Rd&&Rd.isAllowedToSendEvent()&&Kn({message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error})}catch(e){console.warn("Conviva App Tracker caused Exception in captureError method of error tracking module",e)}}function Yn(e){try{null!=Rd&&Rd.isAllowedToSendEvent()&&Kn({message:e.reason})}catch(e){console.warn("Conviva App Tracker caused Exception in captureRejection method of error tracking module",e)}}function Kn(e){var t,n,r=e.message,o=e.filename,i=e.lineno,a=e.colno,s=e.error,l=e.context;if(e=e.timestamp,s=s&&s.stack?s.stack:void 0,!(void 0===r||null===r&&void 0===s||null===s&&void 0===i||null===i&&void 0===a||null===a&&void 0===o||null===o)){var c=null===(t=null==xd?void 0:xd.core)||void 0===t?void 0:t.getConfig();null!=c&&c.exceptionAutotracking&&(null===(n=null==xd?void 0:xd.core)||void 0===n||n.track(Q({event:{sc:"sp/ae/1-0-1",dt:{programmingLanguage:"JAVASCRIPT",message:r?Jd(r,2048):"JS Exception.",stackTrace:s?Jd(s,8192):"",lineNumber:i,lineColumn:a,fileName:o}}}),l,e))}}function Jn(e){return e=new URL(e,location.href),"".concat(e.origin).concat(e.pathname).concat(e.search).concat(e.hash)}function Xn(e){var t=(e=e.split("#"))[1];return{originPathSearch:e[0],hash:null!=t?t:""}}function Qn(e,t){return new Promise((function(n){var r=function(){var o=performance.now();if(o-e>=Qd.maxMeasurementMs)n(o);else{var i=performance.now()-((null==$d?void 0:$d.lastLongTaskTs)||0)>=t,a=0===((null==tf?void 0:tf.getInflightRequests())||0);i&&a?n(o):requestAnimationFrame(r)}};setTimeout((function(){return requestAnimationFrame(r)}),50)}))}function $n(e){var t=history[e];history[e]=function(n,r,o){return n=t.call(this,n,r,o),er(e,null!=o?o:location.href),n}}function er(e,t){if($d){if(t=Jn(t),!Qd.includeHashChanges){var n=Xn($d.lastUrlKey),r=Xn(t);if(n.originPathSearch===r.originPathSearch&&n.hash!==r.hash)return}t===$d.lastUrlKey&&"replaceState"!==e||($d.lastUrlKey=t,$d.currentMeasurement&&($d.currentMeasurement=null),function(e,t){T(this,void 0,void 0,(function(){var n,r,o,i,a;return A(this,(function(s){switch(s.label){case 0:return $d&&ef?(n=++$d.navSeq,r=performance.now(),$d.currentMeasurement={id:n,startTime:r,urlKey:t,trigger:e},[4,Qn(r,Qd.idleWindowMs)]):[2];case 1:if(o=s.sent(),!$d.currentMeasurement||$d.currentMeasurement.id!==n)return[2];i=Math.round((o-r)/1e3*100)/100,a={load_time:i,page_url:t,trigger:e,navigation_id:n,start_time:Math.round(r/1e3*100)/100,end_time:Math.round(o/1e3*100)/100};try{ef.trackCustomEvent({name:"conviva_soft_navigation",data:a})}catch(e){}return $d.currentMeasurement=null,[2]}}))}))}(e,t))}}function tr(e){var t,n,r;try{var o=null===(t=null==e?void 0:e.core)||void 0===t?void 0:t.getConfig();if(function(e){var t,n,r,o,i;null!=e&&e.softNavigationTrackingConfiguration&&(e=e.softNavigationTrackingConfiguration,Qd=_r(_r({},Xd),{idleWindowMs:null!==(t=e.idleWindowMs)&&void 0!==t?t:Xd.idleWindowMs,maxMeasurementMs:null!==(n=e.maxMeasurementMs)&&void 0!==n?n:Xd.maxMeasurementMs,includeHashChanges:null!==(r=e.includeHashChanges)&&void 0!==r?r:Xd.includeHashChanges,domainAllowlist:null!==(o=e.domainAllowlist)&&void 0!==o?o:Xd.domainAllowlist,domainBlocklist:null!==(i=e.domainBlocklist)&&void 0!==i?i:Xd.domainBlocklist,requireLcp:Xd.requireLcp,lcpTimeoutMs:Xd.lcpTimeoutMs}))}(o),(null!==(r=null===(n=null==o?void 0:o.softNavigationTrackingConfiguration)||void 0===n?void 0:n.enabled)&&void 0!==r?r:rd.softNavigationTrackingConfiguration.enabled)&&(null==e?void 0:e.getSamplingMode())!==Zu.SAMPLING_MODES.NONE){var i=location.hostname;Qd.domainAllowlist.length&&!Qd.domainAllowlist.some((function(e){return i.endsWith(e)}))||Qd.domainBlocklist.some((function(e){return i.endsWith(e)}))||($d={lastLongTaskTs:0,lastLcpTs:0,currentMeasurement:null,navSeq:0,patched:!1,lastUrlKey:Jn(location.href)},ef=e,tf=Zd.getInstance(e.trackNetworkRequest,e.trackerConfiguration,e.getSamplingMode),function(){if($d&&!$d.patched){$d.patched=!0;try{new PerformanceObserver((function(e){var t=0;for(e=e.getEntries();t<e.length;t++)$d.lastLongTaskTs=performance.now()})).observe({entryTypes:["longtask"]})}catch(e){}try{var e=new PerformanceObserver((function(e){var t=0;for(e=e.getEntries();t<e.length;t++)$d.lastLcpTs=e[t].startTime}));e.observe({type:"largest-contentful-paint",buffered:!0}),null===window||void 0===window||window.addEventListener("pagehide",(function(){try{e.disconnect()}catch(e){}}))}catch(e){}}}(),$n("pushState"),$n("replaceState"),addEventListener("popstate",(function(){return er("popstate",location.href)}),{signal:Xu}),addEventListener("hashchange",(function(){return er("hashchange",location.href)}),{signal:Xu}),document.addEventListener("DOMContentLoaded",(function(){$d&&($d.lastUrlKey=Jn(location.href))}),{signal:Xu}))}}catch(e){}}function nr(){var e=localStorage.getItem("Conviva.sdkConfig"),t={};if(e)try{t=JSON.parse(e)}catch(e){}return t}function rr(){var e=null;try{if(window.localStorage){var t=localStorage.getItem(Zu.REMOTE_CONFIG_STORAGE_KEY);t&&(e=JSON.parse(t).sessionReplayConfiguration)}}catch(e){}return e}function or(e,t){if(e===t||Number.isNaN(e)&&Number.isNaN(t))return!0;if("object"!==S(e)||null===e||"object"!==S(t)||null===t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((function(n){return r.includes(n)&&or(e[n],t[n])}))}function ir(e,t){Od=e,Md=t,(rf="true"===(null===localStorage||void 0===localStorage?void 0:localStorage.getItem(Zu.SESSION_RECORDING_STARTED)))&&(e=rr(),(of=new sf(Od,Md,e)).initiateRecording()),null!==window&&void 0!==window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",(function(){try{if(Od.getSamplingMode()===Zu.SAMPLING_MODES.RCFG){var e=rr();if(null===af||!or(af,e)){if(af=e,e){var t=!1,n=!1;try{if(t=e.enabled)try{var r=nr(),o=e.sampling.pct;n=0!==o&&(100===o||nf.shouldInclude(o,r.clId))}catch(e){}}catch(e){}var i=t&&n}else i=!1;e&&i?(of&&ar(!1),rf||(rf=!0,null===localStorage||void 0===localStorage||localStorage.setItem(Zu.SESSION_RECORDING_STARTED,"true"),(of=new sf(Od,Md,e)).initiateRecording())):rf&&(null===localStorage||void 0===localStorage||localStorage.setItem(Zu.SESSION_RECORDING_STARTED,"false"),ar(!0))}}}catch(e){}}),{signal:Xu})}function ar(e){null==of||of.stopRecording(e),rf=!1,of=null}function sr(){if(!lf)return!1;var e=lf.core.getConfig();return!0===(null==(e=null==e?void 0:e.valueProbes)?void 0:e.enabled)}function lr(e){return new Promise((function(t){return setTimeout(t,e)}))}function cr(e){return e=new URL(e,location.href),"".concat(e.origin).concat(e.pathname).concat(e.search).concat(e.hash)}function ur(e){var t=e.emit||"once_per_view";return"always"===t||("once_per_session"===t?!df.has(e.id):"once_per_view"===t&&!ff.has(e.id))}function dr(e,t){if(!t)return!0;var n=t.key,r=t.op;t=t.val;var o=("class"===n?e.className||"":"id"===n?e.id||"":e.getAttribute(n)||"").toLowerCase();return e=Array.isArray(t)?t.map((function(e){return String(e).toLowerCase()})):[String(t).toLowerCase()],"=="===r?e.includes(o):"contains"===r&&e.some((function(e){return o.includes(e)}))}function fr(e){return T(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:if(!sr())return[2];if(10<=hf)return pf.push(e),[2];hf++,t.label=1;case 1:return t.trys.push([1,,3,4]),[4,hr(e)];case 2:return t.sent(),[3,4];case 3:return hf--,0<pf.length&&fr(pf.shift()),[7];case 4:return[2]}}))}))}function hr(e){var t,n,r;return T(this,void 0,void 0,(function(){var o,i,a,s,l,c,u,d,f,h,p,v,g,m,y,b;return A(this,(function(w){switch(w.label){case 0:if(!sr()||!ur(e))return[2];o=Date.now(),i=[0,50,200],a=null!==(n=null===(t=e.strategy)||void 0===t?void 0:t.maxTotalMs)&&void 0!==n?n:1e3,s=null!==(r=e.strategy)&&void 0!==r&&r.retries&&0<e.strategy.retries.length?e.strategy.retries:i;for(var k=e.id,C=0,S=0;S<k.length;S++)C=(C<<5)-C+k.charCodeAt(S),C&=C;l=Math.abs(C)%100,c=0,u=[],h=f=d=0,w.label=1;case 1:return h<s.length?(p=s[h],0<(v=0===h?0:Math.max(0,p+2*(l%20/20-.5)*Math.min(.1*p,5)))?[4,lr(v)]:[3,3]):[3,5];case 2:w.sent(),w.label=3;case 3:if(Date.now()-o>=a)return[3,5];c++,k=e.conditions,C=[],S=0;for(var E=e.selectors;S<E.length;S++){var I=E[S];try{var _=document.querySelectorAll(I);for(I=0;I<_.length;I++){var T=_[I];dr(T,k)&&C.push(T)}if(0<C.length)break}catch(e){}}0<(g=C).length&&0===u.length&&(u=g,d=Date.now()-o,f=c),w.label=4;case 4:return h++,[3,1];case 5:if(0<u.length){for(m=e.emit||"once_per_view",y=0,b=u;y<b.length;y++){var A=b[y];if(w=e,_=d,T=f,lf)try{if(lf.getSamplingMode()!==Zu.SAMPLING_MODES.NONE){var x=void 0,R=void 0,O=A,M=w,N={};if(C=Zu.CLICK_KEY_MAX_LENGTH,O.id&&(N.id=hn(O.id,C)),O.className&&(N.class=hn(O.className,C)),O.tagName&&(N.elementName=hn(O.tagName.toLowerCase(),C)),null!==(R=O.innerText)&&void 0!==R&&R.trim()&&(N.text=hn(O.innerText.trim(),C)),O.getAttribute("name")&&(N.name=hn(O.getAttribute("name")||"",C)),O.getAttribute("type")&&(N.elementType=hn((null===(x=O.getAttribute("type"))||void 0===x?void 0:x.toLowerCase())||"",C)),null!=O&&O.placeholder&&(N.placeholder=hn(O.placeholder,C)),"password"!==O.getAttribute("type")&&O.value&&(N.value=hn(O.value,C)),M.collectAttributes&&0<M.collectAttributes.length)for(x=0,S=M.collectAttributes;x<S.length;x++)E=S[x],(I=O.getAttribute(E))&&(N[E]=hn(I,C));k=N;e:{var L=w.selectors;for(O=0;O<L.length;O++){var D=L[O];try{if(A.matches(D)){var P=D;break e}}catch(e){}}P=null}var U={probeId:w.id,selectorMatched:P||w.selectors[0]||"",timestamp:Date.now(),attemptCount:T,discoveryTime:_,method:1===T?"immediate":"retry"},F=_r(_r({},k),U);lf.core.track($({name:"conviva_dom_value_probe",data:JSON.stringify(F)}))}}catch(e){qr.warn("Conviva App Tracker: Error emitting probe event",e)}}k=e.id,"once_per_session"===(C=m||"once_per_view")?df.add(k):"once_per_view"===C&&ff.add(k)}return[2]}}))}))}function pr(e){if(sr()&&lf&&0!==e.length){var t=0;for(e=e.filter((function(e){return ur(e)}));t<e.length;t++)fr(e[t])}}function vr(){var e;if(sr()&&lf){var t=lf.core.getConfig(),n=null==t?void 0:t.valueProbes;null!=n&&n.enabled&&null!==(e=null==n?void 0:n.probes)&&void 0!==e&&e.length&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){sr()&&requestAnimationFrame((function(){return pr(n.probes)}))})):sr()&&requestAnimationFrame((function(){return pr(n.probes)})))}}function gr(e,t){var n;sr()&&lf&&((t=cr(t))===cr(location.href)&&"replaceState"!==e||(ff.clear(),null!=(e=null==(e=lf.core.getConfig())?void 0:e.valueProbes)&&e.enabled&&null!==(n=null==e?void 0:e.probes)&&void 0!==n&&n.length&&(0<(n=e.probes.filter((function(e){return"once_per_view"===(e.emit||"once_per_view")}))).length&&pr(n))))}function mr(e){try{lf=e,(null==e?void 0:e.getSamplingMode())!==Zu.SAMPLING_MODES.NONE&&sr()&&(function(){if(sr()&&!cf&&lf){var e=history.pushState,t=history.replaceState;history.pushState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.apply(this,t),sr()&&gr("pushState",location.href)},history.replaceState=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.apply(this,e),sr()&&gr("replaceState",location.href)},rn(window,"popstate",(function(){sr()&&gr("popstate",location.href)}),{signal:Xu}),cf=!0}}(),"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",(function(){uf?sr()?(df.clear(),ff.clear(),vr()):(df.clear(),ff.clear()):uf=!0}),{signal:Xu}),vr())}catch(e){qr.warn("Conviva App Tracker: Error enabling DOM value probe",e)}}function yr(e,t){return bf.get(e)||bf.set(e,new t),bf.get(e)}function br(e){var t,n;try{var r=Ld.core.getConfig();if(!0===(null===(t=null==r?void 0:r.webVitals)||void 0===t?void 0:t.enabled)){var o="conviva_webvitals_".concat(e.name.toLowerCase()),i={value:e.value,rating:e.rating,delta:e.delta,id:e.id,navigationType:e.navigationType,attribution:wr(e,(null===(n=null==r?void 0:r.webVitals)||void 0===n?void 0:n.collectattr)||[])};Ld.core.track($({name:o,data:JSON.stringify(i)}))}}catch(e){console.warn("Error sending Web Vitals event",e)}}function wr(e,t){var n=e.attribution;if(n){var r={};return(e={LCP:"target",INP:"interactionTarget",CLS:"largestShiftTarget"}[e.name])&&null!=n[e]&&(r[e]=n[e]),t.forEach((function(e){if(e){var t=e.split("."),o=n;for(e=0;e<t.length;e++){var i=t[e];if(!o||"object"!==S(o)||!(i in o))return;o=o[i]}var a=r;t.forEach((function(e,n){n===t.length-1?a[e]=o:("object"===S(a[e])&&null!==a[e]||(a[e]={}),a=a[e])}))}})),Object.keys(r).length?r:void 0}}function kr(e,t,n,r,o){void 0===o&&(o={});var i=[];e=function(e,t,n,r,o){function s(){(Ue=Cn(window.location.hostname,window.location.href,nn()))[1]!==Be&&(Ge=nn(Be)),Fe=tn(Ue[0]),Be=Ue[1]}function l(e){try{var t=(new Date).getTime(),n=e.currentTarget;if(null!=n&&n.href){e="_cnv="+Re+"."+t;var r=n.href.split("#"),o=r[0].split("?"),i=o.shift(),a=o.join("?");if(a){o=!0;var s=a.split("&");for(t=0;t<s.length;t++)if("_cnv="===s[t].substr(0,5)){o=!1,s[t]=e,a=s.join("&");break}o&&(a=e+"&"+a)}else a=e;r[0]=i+"?"+a;var l=r.join("#");n.href=l}}catch(e){console.warn("Conviva App Tracker:: Error in linkDecorationHandler of decorateLinks ".concat(e))}}function c(e){if("undefined"!=typeof document&&document.links&&0<document.links.length)for(var t=0;t<document.links.length;t++){var n=document.links[t];!n.spDecorationEnabled&&e(n)&&(rn(n,"click",l,!0),rn(n,"mousedown",l,!0),n.spDecorationEnabled=!0)}}function u(e){if(be){var t=/#.*/;e=e.replace(t,"")}return we&&(t=/[{}]/g,e=e.replace(t,"")),e}function d(e){return(e=/^([a-z]+):/.exec(e))?e[1]:null}function f(e){if(e=Xe+e+"."+xe,"localStorage"==ct){try{var t=window.localStorage,n=t.getItem(e+".expires");if(null===n||+n>Date.now())var r=t.getItem(e);else t.removeItem(e),t.removeItem(e+".expires"),r=void 0}catch(e){r=void 0}return r}if("cookie"==ct||"cookieAndLocalStorage"==ct)return cn(e)}function h(){s(),xe=Xr((Qe||Fe)+($e||"/")).slice(0,4)}function p(){Ee=(new Date).getTime()}function v(){var e=g(),t=e[0];t<Ie?Ie=t:t>_e&&(_e=t),(e=e[1])<Te?Te=e:e>Ae&&(Ae=e),p()}function g(){var e="undefined"!=typeof document?null===document||void 0===document?void 0:document.documentElement:void 0;return e?[e.scrollLeft||window.pageXOffset,e.scrollTop||window.pageYOffset]:[0,0]}function m(){var e=g(),t=e[0];_e=Ie=t,Ae=Te=e=e[1]}function y(){w(Xe+"ses."+xe,"*",it)}function b(e){var t=Xe+"id."+xe;e.shift(),w(t,e=e.join("."),ot)}function w(e,t,n){lt&&!at||("localStorage"==ct?an(e,t,n):("cookie"==ct||"cookieAndLocalStorage"==ct)&&cn(e,t,n,$e,Qe,et,tt))}function k(e){var t=Xe+"id."+xe,n=Xe+"ses."+xe;sn(t),sn(n),ln(t,Qe,et,tt),ln(n,Qe,et,tt),null!=e&&e.preserveSession||(Oe=Vr.v4(),ft=1),null!=e&&e.preserveUser||(Re=Vr.v4(),Me=null)}function C(e){e&&e.stateStorageStrategy&&(o.stateStorageStrategy=e.stateStorageStrategy,ct=he(o)),lt=!!o.anonymousTracking,at=pe(o),st=ve(o),ht.setUseLocalStorage("localStorage"==ct||"cookieAndLocalStorage"==ct),ht.setAnonymousTracking(st)}function E(){var e;try{var t=null;if(null!==(e=null==o?void 0:o.configs)&&void 0!==e&&e.enableClIdInCookies){e:{e="Conviva_sdkConfig";try{var n=cn(e);if(n&&0<n.length){try{if("string"==typeof n&&0!==n.length&&/%[0-9A-Fa-f]{2}/.test(n))var r=decodeURIComponent(n),i=!/%[0-9A-Fa-f]{2}/.test(r);else i=!1}catch(e){i=!1}if(!i){var a=n;break e}ln(e,M(),"None",!0)}a=window.localStorage.getItem(e)}catch(e){qr.warn("getConvivaCookie",e),a=null}}a&&(t=a)}else try{ln("Conviva_sdkConfig",M(),"None",!0)}catch(e){}t||(t=window.localStorage.getItem("Conviva.sdkConfig"));var s=JSON.parse(t||"{}");"{}"===s||void 0===s?Ce=N():(Ce=s.clId||N(),2147483648<=ut?ut=-1:ut++);try{Se=Math.floor(2147483647*Math.random())}catch(e){console.warn(e),Se=-1}var l=_r(_r({},s),{clId:Ce,iid:Se});e:{var c;try{t=null;try{t=JSON.stringify(l)}catch(e){break e}if(window.localStorage.setItem("Conviva.sdkConfig",t),null!==(c=null==o?void 0:o.configs)&&void 0!==c&&c.enableClIdInCookies){l=t;try{var u=M();cn("Conviva_sdkConfig",l,void 0,"/",u,"None",!0)}catch(e){qr.warn("setConvivaCookie",e)}}}catch(e){}}}catch(e){qr.warn("getEventIndexByClid",e)}lt&&!at||(u="none"!=ct&&!!f("ses"),(l=I())[1]?c=l[1]:(c=lt?"":Vr.v4(),l[1]=c),Re=c,Oe=u?l[6]:Sn(l),ft=l[3],"none"!=ct&&(y(),En(l),b(l)))}function I(){return"none"==ct?["1","",0,0,0,void 0,"","","",void 0]:function(e,t,n,r){var o=Math.round((new Date).getTime()/1e3);e?(e=e.split(".")).unshift("0"):e=["1",t,o,r,o,"",n],e[6]&&"undefined"!==e[6]||(e[6]=Vr.v4()),e[7]&&"undefined"!==e[7]||(e[7]=""),e[8]&&"undefined"!==e[8]||(e[8]=""),e[9]&&"undefined"!==e[9]||(e[9]=""),e[10]&&"undefined"!==e[10]||(e[10]=-1);var i=function(e,t){return e=parseInt(e),isNaN(e)?t:e};return t=function(e){return e?i(e,void 0):void 0},[e[0],e[1],i(e[2],o),i(e[3],r),i(e[4],o),t(e[5]),e[6],e[7],e[8],t(e[9])]}(f("id")||void 0,Re,Oe,ft)}function T(e,t){var n,r,i,a,s=!0,l=Pe.getConfig();return void 0!==l.mend?s=l.mend:void 0!==(null===(r=null===(n=null==o?void 0:o.configs)||void 0===n?void 0:n.network)||void 0===r?void 0:r.mergeEndpoint)&&(s=null===(a=null===(i=null==o?void 0:o.configs)||void 0===i?void 0:i.network)||void 0===a?void 0:a.mergeEndpoint),0===e.indexOf("http")?(t&&s&&(e=e.replace(/^(https?:\/\/)(.*)$/,"$1"+t+".$2")),e):t&&s?("https:"===document.location.protocol?"https":"http")+"://"+t+"."+e:("https:"===document.location.protocol?"https":"http")+"://"+e}function A(){pt&&null!=r.pageViewId||(r.pageViewId=Vr.v4())}function O(){return null==r.pageViewId&&(r.pageViewId=Vr.v4()),r.pageViewId}function M(){var e=window.location.hostname,t=e.split(".");return 2<=t.length?"."+t.slice(-2).join("."):e}function N(){try{return P({"First Launch":"Yes"}),Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(e){console.warn(e)}}function L(e){try{return"object"===S(JSON.parse(e))}catch(e){return!1}}function P(e){try{var t=Object.keys(e);L(JSON.stringify(e))?t.forEach((function(t){if(""!==t.trim()){var n=e[t];n&&""!==n&&(n="object"===S(n)?JSON.stringify(n):""+n,Object.defineProperty(Ze,t,{value:n,writable:!0,enumerable:!0,configurable:!0}))}})):console.warn("Conviva AppTracker:: Invalid JSON Format")}catch(e){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",e)}}function U(e){try{e.forEach((function(e){delete Ze[e]}))}catch(e){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}function F(){var e,t,n,r,i,s,l,c,u,d,f,h,p,v,g,m,y,b,w,k,C,S,E,I,_,T,A,R,O,M,N,L;try{var D=null===(e=null==a?void 0:a.core)||void 0===e?void 0:e.getConfig();e=void 0,Ye={};var P=Dd.MERGE;switch(void 0!==(null===(n=null===(t=null==o?void 0:o.configs)||void 0===t?void 0:t.metaTagsTracking)||void 0===n?void 0:n.preference)?P=null===(i=null===(r=null==o?void 0:o.configs)||void 0===r?void 0:r.metaTagsTracking)||void 0===i?void 0:i.preference:!0===(null===(l=null===(s=null==o?void 0:o.configs)||void 0===s?void 0:s.metaTagsTracking)||void 0===l?void 0:l.force)?P=Dd.APP:void 0!==(null===(c=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===c?void 0:c.pref)&&(P=null===(u=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===u?void 0:u.pref),P){case Dd.APP:if(!1===(null===(f=null===(d=null==o?void 0:o.configs)||void 0===d?void 0:d.metaTagsTracking)||void 0===f?void 0:f.enabled))return;0<(null===(v=null===(p=null===(h=null==o?void 0:o.configs)||void 0===h?void 0:h.metaTagsTracking)||void 0===p?void 0:p.tags)||void 0===v?void 0:v.length)&&(e=x([],null===(m=null===(g=null==o?void 0:o.configs)||void 0===g?void 0:g.metaTagsTracking)||void 0===m?void 0:m.tags,!0));break;case Dd.REMOTE:if(!1===(null===(y=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===y?void 0:y.enabled))return;void 0!==(null==D?void 0:D.metaTagsTrackingConfiguration)&&0<(null===(w=null===(b=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===b?void 0:b.tags)||void 0===w?void 0:w.length)&&(e=x([],null===(k=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===k?void 0:k.tags,!0));break;default:if(void 0===(null==D?void 0:D.metaTagsTrackingConfiguration)&&!1===(null===(S=null===(C=null==o?void 0:o.configs)||void 0===C?void 0:C.metaTagsTracking)||void 0===S?void 0:S.enabled)||void 0===(null===(E=null==o?void 0:o.configs)||void 0===E?void 0:E.metaTagsTracking)&&!1===(null===(I=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===I?void 0:I.enabled))return;var U=null===(T=null===(_=null==o?void 0:o.configs)||void 0===_?void 0:_.metaTagsTracking)||void 0===T?void 0:T.tags,F=null===(A=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===A?void 0:A.tags;!1===(null===(O=null===(R=null==o?void 0:o.configs)||void 0===R?void 0:R.metaTagsTracking)||void 0===O?void 0:O.enabled)&&(U=[]),!1===(null===(M=null==D?void 0:D.metaTagsTrackingConfiguration)||void 0===M?void 0:M.enabled)&&(F=[]),e=x([],function(e,t){return x(x([],e,!0),t,!0).reduce((function(e,t){var n=e.find((function(e){return e.key===t.key}));return n?t.condition&&(n.condition=x(x([],n.condition||[],!0),t.condition,!0)):e.push(_r({},t)),e}),[])}(U||[],F||[]),!0)}if(void 0!==e&&0<(null==e?void 0:e.length)){t={};var B=null===document||void 0===document?void 0:document.head,G=null==B?void 0:B.getElementsByTagName("meta");if(void 0!==G&&0<(null==G?void 0:G.length))for(B=0;B<G.length;B++){var j=G[B];for(n=0;n<e.length;n++){var z=j.getAttribute(e[n].key),V=j.getAttribute(e[n].value);r=void 0,null!==(N=e[n])&&void 0!==N&&N.condition&&(r=null===(L=e[n])||void 0===L?void 0:L.condition),z&&(r&&r.includes(z)?t[z]=V:r&&0!==r.length||(t[z]=V))}}a.setMetaCustomTags(t)}}catch(e){console.warn("Conviva App Tracker:: setPageMetaTagsAsCustomTags",e)}}function B(e,t,n){var r=function(t,n){var r;s();var i=null===(r=null==a?void 0:a.core)||void 0===r?void 0:r.getConfig();i.enablePeriodicHeartbeat?(null!=i.periodicHeartbeatInterval&&((r=1e3*i.periodicHeartbeatInterval)!=e.configHeartBeatTimer&&(e.configHeartBeatTimer=r,window.clearInterval(e.activityInterval),e.activityInterval=window.setInterval(o,r))),t({context:n,pageViewId:O(),minXOffset:Ie,minYOffset:Te,maxXOffset:_e,maxYOffset:Ae})):window.clearInterval(e.activityInterval),m()};window.setTimeout((function(){r(e.callback,(t||[]).concat(n?n():[]))}),2e3);var o=function(){var o=new Date;(!1===(null===document||void 0===document?void 0:document.hidden)||"visible"==(null===document||void 0===document?void 0:document.visibilityState)||null!==document&&void 0!==document&&document.pictureInPictureElement||Ee+e.configHeartBeatTimer>o.getTime()||!0===mt)&&r(e.callback,(t||[]).concat(n?n():[]))};e.activityInterval=window.setInterval(o,e.configHeartBeatTimer)}function G(e){var t=e.minimumVisitLength,n=e.heartbeatDelay;if(e=e.callback,Qt(t)&&Qt(n))return{configMinimumVisitLength:1e3*t,configHeartBeatTimer:1e3*n,callback:e};qr.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function j(e){var t=e.context,n=e.minXOffset,r=e.minYOffset,o=e.maxXOffset,i=e.maxYOffset;if((e=document.title)!==Ke&&(Ke=e,ye=void 0),Le()!==Zu.SAMPLING_MODES.NONE){z();var a=(e=Pe).track,s=u(me||Be),l=$t(ye||Ke),c=u(ge||Ge);n=Math.round(n),o=Math.round(o),r=Math.round(r),i=Math.round(i);var d=R();d.add("e","pp"),d.add("url",s),d.add("page",l),d.add("refr",c),n&&!isNaN(Number(n))&&d.add("pp_mix",n.toString()),o&&!isNaN(Number(o))&&d.add("pp_max",o.toString()),r&&!isNaN(Number(r))&&d.add("pp_miy",r.toString()),i&&!isNaN(Number(i))&&d.add("pp_may",i.toString()),a.call(e,d,t)}}function z(){var e,t,n=null===(t=null==a?void 0:a.core)||void 0===t?void 0:t.getConfig().pageUrlTrackingConfig;if(t=Ze[Zu.PAGE_URL_QUERY_PARAMS],n){var r={targetUrl:u(me||Be),rqq:{}};r=pn(r,null==n?void 0:n.collectattr,null,null==n?void 0:n.maxQueryLength),(!t&&r.rqq||t!==JSON.stringify(r.rqq))&&(U([Zu.PAGE_URL_QUERY_PARAMS]),function(e){try{var t=Object.keys(e);L(JSON.stringify(e))?t.forEach((function(t){if(""!==t.trim()){var n=e[t];n&&""!==n&&("object"!==S(n)&&(n=""+n),Object.defineProperty(Ze,t,{value:n,writable:!0,enumerable:!0,configurable:!0}))}})):console.warn("Conviva AppTracker:: Invalid JSON Format")}catch(e){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",e)}}(((e={})[Zu.PAGE_URL_QUERY_PARAMS]=r.rqq,e)))}else t&&U([Zu.PAGE_URL_QUERY_PARAMS])}var V,W,H,q,Z,Y,K,J,te,ne,re,oe,ie,ae,se,le;if(window&&window.localStorage){var ce=window.localStorage,ue={sensorVersion:n,ck:null!==(V=o.convivaCustomerKey)&&void 0!==V?V:""};ue=JSON.stringify(ue),ue="function"==typeof btoa?btoa(ue):function(e){e=unescape(encodeURIComponent(e));for(var t="",n=0;n<e.length;){var r=e.charCodeAt(n++),o=e.charCodeAt(n++),i=e.charCodeAt(n++),a=r>>2;r=(3&r)<<4|o>>4,o=isNaN(o)?64:(15&o)<<2|i>>6,i=isNaN(i)?64:63&i,t+=Wr.charAt(a)+Wr.charAt(r)+Wr.charAt(o)+Wr.charAt(i)}return t}(ue),ce.setItem(Zu.VISUAL_LABELLING_CONFIG,ue)}var de=Yu;de&&Xu||("function"==typeof AbortController&&(Yu=new AbortController),Xu=null==Yu?void 0:Yu.signal),t||(t="CAT");var fe=zd(n,t,o).convivaRemoteTrackerConfig;null===(W=In(fe.performanceContextConfig))||void 0===W||W.activateLCPObserver(),o.eventMethod=null!==(H=o.eventMethod)&&void 0!==H?H:"post";var he=function(e){var t;return null!==(t=e.stateStorageStrategy)&&void 0!==t?t:"cookieAndLocalStorage"},pe=function(e){var t,n;return"boolean"!=typeof e.anonymousTracking&&(null!==(n=!0===(null===(t=e.anonymousTracking)||void 0===t?void 0:t.withSessionTracking))&&void 0!==n&&n)},ve=function(e){var t,n;return"boolean"!=typeof e.anonymousTracking&&(null!==(n=!0===(null===(t=e.anonymousTracking)||void 0===t?void 0:t.withServerAnonymisation))&&void 0!==n&&n)};i.push({beforeTrack:function(e){var t=f("ses"),n=I();Ne=!!ke&&!!cn(ke),rt||Ne?k():("0"===n[0]?(Oe=t||"none"==ct?n[6]:Sn(n),ft=n[3]):(new Date).getTime()-dt>1e3*it&&(ft++,Oe=Sn(n,ft)),En(n),e.add("uid",lt?null:Me),s(),e.add("refr",u(ge||Ge)),document&&(Ke=document.title,t=$t(ye||Ke),e.add("page",t)),e.add("url",u(me||Be)),"none"!=ct&&(b(n),y()),dt=(new Date).getTime())}}),i.push({contexts:function(){return[{sc:"cv/clid/1-0-2",dt:{clid:Ce,iid:Se.toString(),ck:He,eventIndex:ut++}}]}}),i.push({contexts:function(){return[{sc:"cv/ct/1-0-0",dt:{data:_r(_r({},Ze),Ye)}}]}}),i.push({contexts:function(){var e,t=null===(e=null==a?void 0:a.core)||void 0===e?void 0:e.getConfig();return!0===(null==t?void 0:t.applicationContext)?[{sc:"spm/app/1-0-0",dt:{build:qe,version:qe}}]:[]}}),i.push({contexts:function(){var e={sch:"sdk.js.eco.1"};e.cat=Ku.DeviceCategory.WEB;try{var t=null==o?void 0:o.deviceMetadata;if(t){var n=t.DeviceBrand,r=t.DeviceCategory,i=t.DeviceManufacturer,a=t.DeviceModel,s=t.DeviceType,l=t.DeviceVersion,c=t.OperatingSystemName,u=t.OperatingSystemVersion,d=t.FrameworkName,f=t.FrameworkVersion;"string"==typeof r&&Object.values(Ku.DeviceCategory).includes(r)?e.cat=r:e.cat="INVALID"+(r?": ".concat(r):""),"string"==typeof n&&""!=n&&(e.dvb=n),"string"==typeof i&&""!=i&&(e.dvma=i),"string"==typeof a&&""!=a&&(e.dvm=a),s&&Object.values(Ku.DeviceType).includes(s)&&(e.dvt=s),"string"==typeof l&&""!=l&&(e.dvv=l),"string"==typeof c&&""!=c&&(e.os=c),"string"==typeof u&&""!=u&&(e.osv=u),"string"==typeof d&&""!=d&&(e.fw=d),"string"==typeof f&&""!=f&&(e.fwv=f)}}catch(e){qr.warn("error in setting platform metadata context",e)}return null!=e&&0<Object.keys(e).length?[{sc:"iglu:com.conviva/pm/jsonschema/1-0-2",dt:e}]:[]}});try{(null!==(q=null==o?void 0:o.plugins)&&void 0!==q?q:[]).forEach((function(e){e.contexts||i.push(e)}))}catch(e){console.warn("ConvivaAppTracker : issue while processing customer passed pligins",e)}var ge,me,ye,be,we,ke,Ce,Se,Ee,Ie,_e,Te,Ae,xe,Re,Oe,Me,Ne,Le=function(){var e;try{var t=null===(e=null==a?void 0:a.core)||void 0===e?void 0:e.getConfig();return t?void 0===t.catRcLastUpdatedTs||0===t.catRcLastUpdatedTs?Zu.SAMPLING_MODES.RCFG:t.controlIngestConfig?function(e){try{if(void 0===e.sel)return dn(),Zu.SAMPLING_MODES.RCFG;var t=e.sel.pct;if("number"==typeof t&&100>t&&0<t&&0==t%1){if("undefined"!=typeof window&&void 0!==window.localStorage){var n=localStorage.getItem(Zu.SAMPLING_STORAGE_RANDOM_NUMBER_KEY);if(null!=n)return parseFloat(n)<=t?fn(e,Zu.SAMPLING_ACTION.SAMPLED):fn(e,Zu.SAMPLING_ACTION.NON_SAMPLED);var r=100*Math.random();return localStorage.setItem(Zu.SAMPLING_STORAGE_RANDOM_NUMBER_KEY,r.toString()),fn(e,r<t?Zu.SAMPLING_ACTION.SAMPLED:Zu.SAMPLING_ACTION.NON_SAMPLED)}return Zu.SAMPLING_MODES.NONE}return"number"==typeof t&&0===t?(dn(),Zu.SAMPLING_MODES.NONE):(dn(),Zu.SAMPLING_MODES.RCFG)}catch(e){}return Zu.SAMPLING_MODES.RCFG}(null==t?void 0:t.controlIngestConfig):Zu.SAMPLING_MODES.RCFG:Zu.SAMPLING_MODES.RCFG}catch(e){return qr.error("Error while getting sampling mode"),Zu.SAMPLING_MODES.RCFG}},De=function(e){if("object"===S(e)&&null!==e)return e;if("string"==typeof e)try{var t=JSON.parse(e);return t&&"object"===S(t)&&0===Object.keys(t).length?void 0:t}catch(e){}},Pe=id=X({base64:null==fe?void 0:fe.base64,corePlugins:i,callback:function(e){rt||Ne||ht.enqueueRequest(e.build(),ze,function(e){var t,n,r,o=null!==(r=null===(n=null===(t=Pe.getConfig().emitterConfiguration)||void 0===t?void 0:t.batching)||void 0===n?void 0:n.urgentEvents)&&void 0!==r?r:[],i=t="",a="",s="";return"string"==typeof(n=e.getPayload()).e&&(s=n.e),("ue"===s||"pv"===s||"pp"===s)&&(void 0!==(e=e.getJson().find((function(e){return"ue_pr"===e.keyIfNotEncoded||"ue_px"===e.keyIfEncoded})))&&("object"===S((e=e.json).dt)&&null!==e.dt&&("string"==typeof(e=e.dt).sc&&(t=e.sc),"object"===S(e.dt)&&"string"==typeof e.dt.name&&(i=e.dt.name)),a=t.split("/")[1]||""),o.some((function(e){return""!==(e=e.toLowerCase())&&(e===s.toLowerCase()||e===a.toLowerCase()||e===i.toLowerCase())})))}(e))},exceptionAutotracking:fe.exceptionAutotracking,enablePeriodicHeartbeat:fe.enablePeriodicHeartbeat,periodicHeartbeatInterval:fe.periodicHeartbeatInterval,enc:fe.enc,mend:fe.mend,maxLocalStorageQueueSize:fe.maxLocalStorageQueueSize,maxGetBytes:fe.maxGetBytes,bufferSize:fe.bufferSize,customEventTrackingConfiguration:fe.customEventTrackingConfiguration,softNavigationTrackingConfiguration:fe.softNavigationTrackingConfiguration,networkRequestTrackingConfiguration:fe.networkRequestTrackingConfiguration,metaTagsTrackingConfiguration:fe.metaTagsTrackingConfiguration,traceparentconfig:fe.traceparentconfig,baggageConfiguration:fe.baggageConfiguration,performanceContextConfig:fe.performanceContextConfig,lifecycleAutotracking:fe.lifecycleAutotracking,configurationVersion:fe.configurationVersion,catRcLastUpdatedTs:fe.catRcLastUpdatedTs,cacheRefreshInterval:fe.cacheRefreshInterval,endpoint:fe.endpoint,controlIngestConfig:fe.controlIngestConfig,applicationContext:fe.applicationContext,emitterConfiguration:fe.emitterConfiguration,di:fe.di,clickcc:fe.clickcc,collectionRateLimit:fe.collectionRateLimit,pageUrlTrackingConfig:fe.pageUrlTrackingConfig,sessionReplayConfiguration:fe.sessionReplayConfiguration,evtStreamTrackingConfiguration:fe.evtStreamTrackingConfiguration,valueProbes:fe.valueProbes,webVitals:fe.webVitals}),Ue=Cn(window.location.hostname,window.location.href,nn()),Fe=tn(Ue[0]),Be=Ue[1],Ge=Ue[2],je=null!==(Z=o.platform)&&void 0!==Z?Z:"web",ze=T(fe.endpoint,o.convivaCustomerKey),Ve=null!==(Y=o.postPath)&&void 0!==Y?Y:"/ctp",We=null!==(K=o.appId)&&void 0!==K?K:"",He=null!==(J=o.convivaCustomerKey)&&void 0!==J?J:"",qe=null!==(te=o.appVersion)&&void 0!==te?te:"",Ze={},Ye={},Ke="undefined"!=typeof document?document.title:void 0,Je=null===(ne=o.resetActivityTrackingOnPageView)||void 0===ne||ne,Xe=null!==(re=o.cookieName)&&void 0!==re?re:"_cnv_",Qe=null!==(oe=o.cookieDomain)&&void 0!==oe?oe:void 0,$e="/",et=null!==(ie=o.cookieSameSite)&&void 0!==ie?ie:"None",tt=null===(ae=o.cookieSecure)||void 0===ae||ae,nt=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,rt=void 0!==o.respectDoNotTrack&&(o.respectDoNotTrack&&("yes"===nt||"1"===nt)),ot=null!==(se=o.cookieLifetime)&&void 0!==se?se:63072e3,it=null!==(le=o.sessionCookieTimeout)&&void 0!==le?le:1800,at=pe(o),st=ve(o),lt=!!o.anonymousTracking,ct=he(o),ut=-1,dt=(new Date).getTime(),ft=1,ht=Yd(e,r,ct,o,Ve,st,5e3,Le),pt=!1,vt=!1,gt={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5e3,configHeartBeatTimer:1e3*fe.periodicHeartbeatInterval,callback:j}}},mt=!1;o.hasOwnProperty("discoverRootDomain")&&o.discoverRootDomain&&(Qe=function(e,t){for(var n=window.location.hostname,r="_cnv_root_domain_test_"+(new Date).getTime(),o="_test_value_"+(new Date).getTime(),i=n.split("."),a=i.length-1;0<=a;){var s=i.slice(a,i.length).join(".");if(cn(r,o,0,"/",s,e,t),cn(r)===o){for(ln(r,s,e,t),n=document.cookie.split("; "),r=[],o=0;o<n.length;o++)"_cnv_root_domain_test_"===n[o].substring(0,22)&&r.push(n[o]);for(n=r,r=0;r<n.length;r++)ln(n[r],s,e,t);return s}--a}return n}(et,tt)),Pe.setTrackerVersion(n),Pe.setAppId(We),Pe.setPlatform(je),h(),E(),ht.setCustomHeaders({"x-client-id":""+Ce}),o.crossDomainLinker&&c(o.crossDomainLinker);var yt={getDomainSessionIndex:function(){return ft},getPageViewId:function(){return O()},newSession:function(){var e=I();"0"===e[0]?(Oe="none"!=ct?Sn(e):e[6],ft=e[3],y()):(ft++,Oe=Sn(e,ft)),En(e),"none"!=ct&&(b(e),y()),dt=(new Date).getTime()},getCookieName:function(e){return Xe+e+"."+xe},getUserId:function(){return Me},getDomainUserId:function(){var e=I();return e&&1<e.length?e[1]:null},getDomainUserInfo:function(){return I()},setReferrerUrl:function(e){ge=e},setCustomUrl:function(e){s();var t,n=Be;d(e)?me=e:"/"===e.slice(0,1)?me=d(n)+"://"+en(n)+e:(0<=(t=(n=u(n)).indexOf("?"))&&(n=n.slice(0,t)),(t=n.lastIndexOf("/"))!==n.length-1&&(n=n.slice(0,t+1)),me=n+e)},setDocumentTitle:function(e){Ke=document.title,ye=e},discardHashTag:function(e){be=e},discardBrace:function(e){we=e},setCookiePath:function(e){$e=e,h()},setVisitorCookieTimeout:function(e){ot=e},crossDomainLinker:function(e){c(e)},enableActivityTracking:function(e){gt.configurations.pagePing||(gt.enabled=!0,gt.configurations.pagePing=G(_r(_r({},e),{callback:j})))},enableActivityTrackingCallback:function(e){gt.configurations.callback||(gt.enabled=!0,gt.configurations.callback=G(e))},updatePageActivity:function(){p()},setOptOutCookie:function(e){ke=e},setUserId:function(e){Me=e},setConversationId:function(e){Pe.setConversationId(e)},setUserIdFromLocation:function(e){s(),Me=on(e,Be)},setUserIdFromReferrer:function(e){s(),Me=on(e,Ge)},setUserIdFromCookie:function(e){Me=cn(e)},setCollectorUrl:function(e,t){ze=T(e,t),ht.setCollectorUrl(ze)},setBufferSize:function(e){ht.setBufferSize(e)},flushBuffer:function(e){void 0===e&&(e={}),ht.executeQueue(),e.newBufferSize&&ht.setBufferSize(e.newBufferSize)},trackPageView:function(e){var t;void 0===e&&(e={}),F();var n=null===(t=null==a?void 0:a.core)||void 0===t?void 0:t.getConfig();try{e=_r(_r({},e),{context:In(null==n?void 0:n.performanceContextConfig).contexts()})}catch(e){console.warn("Conviva App Tracker:: error adding performacetiming context to page view",e)}var r=e.title;if(t=e.context,n=e.timestamp,e=e.contextCallback,s(),vt&&A(),vt=!0,Ke=document.title,r=$t((ye=r)||Ke),Le()!==Zu.SAMPLING_MODES.NONE){z();var o=Pe,i=o.track,l=u(me||Be),c=u(ge||Ge),d=R();d.add("e","pv"),d.add("url",l),d.add("page",r),d.add("refr",c),i.call(o,d,(t||[]).concat(e?e():[]),n)}},trackPagePing:function(e){void 0===e&&(e={}),function(e){var t=e.context;e=e.contextCallback;var n=new Date,r=!1;if(gt.enabled&&!gt.installed){r=gt.installed=!0;var o={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0},set:function(){}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),o.hasSupport=e}}};o.update();var i="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(o,"hasSupport")?rn(document,i,p,{passive:!0}):rn(document,i,p),m(),i=function(e,t){return void 0===t&&(t=p),function(e){return rn(document,e,t)}},"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(i(document)),["resize","focus","blur"].forEach(i(window)),i(window,v)("scroll")}if(gt.enabled&&(Je||r))for(n in Ee=n.getTime(),n=void 0,gt.configurations)(r=gt.configurations[n])&&(window.clearInterval(r.activityInterval),B(r,t,e))}(e)},trackVideoEvent:function(e){var t,n,r;void 0===e&&(e={});try{var o=this.core.getConfig(),i=!1;if(null!==(n=null===(t=null==o?void 0:o.customEventTrackingConfiguration)||void 0===t?void 0:t.enabled)&&void 0!==n?n:rd.customEventTrackingConfiguration.enabled)if(""==e.name||null==e.name)console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");else{e.ced=De(e.ced),e.old=De(e.old),e.new=De(e.new),e.tags=De(e.tags),e.cen&&Zu.V2A_CUSTOM_EVENTS.includes(e.name)&&(e.name=e.cen,i=!0);var a=null===(r=null==o?void 0:o.customEventTrackingConfiguration)||void 0===r?void 0:r.blocklist;if(!(null!=a&&a.includes("*")||null!=a&&a.some((function(t){return 0<(null==t?void 0:t.length)&&e.name.toLowerCase().includes(t.toLowerCase())}))))if(!0===i){var s=e.name,l=_(e,["isTrusted","name","cen","new","old"]);this.core.track($({name:s,data:JSON.stringify(l)}),e.context,e.timestamp)}else this.core.track(function(e){return Q({event:{sc:"cv/ve/1-0-6",dt:ee({name:e.name,sid:e.sid,iid:e.iid,clid:e.clid,st:e.st,sst:e.sst,an:e.an,cl:e.cl,lv:e.lv,pn:e.pn,vid:e.vid,fw:e.fw,fwv:e.fwv,mn:e.mn,mv:e.mv,url:e.url,tags:e.tags,cen:e.cen,ced:e.ced,oldsc:e.oldsc,newsc:e.newsc,err:e.err,br:e.br,ft:e.ft,avgbr:e.avgbr})}})}({name:e.name,sid:e.sid,iid:e.iid,clid:e.clid,st:e.st,sst:e.sst,an:e.an,cl:e.cl,lv:e.lv,pn:e.pn,vid:e.vid,fw:e.fw,fwv:e.fwv,mn:e.mn,mv:e.mv,url:e.url,tags:e.tags,cen:e.cen,ced:e.ced,oldsc:e.old,newsc:e.new,err:e.err,br:e.br,ft:e.ft,avgbr:e.avgbr}),e.context,e.timestamp)}}catch(e){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",e)}},trackCustomEvent:function(e){var t,n,r,o,i;void 0===e&&(e={});try{if(Le()!==Zu.SAMPLING_MODES.NONE){var s=null===(t=null==a?void 0:a.core)||void 0===t?void 0:t.getConfig();if(null!==(r=null===(n=null==s?void 0:s.customEventTrackingConfiguration)||void 0===n?void 0:n.enabled)&&void 0!==r?r:rd.customEventTrackingConfiguration.enabled)if(!e.name||"string"==typeof e.name&&""==e.name.trim())console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");else{var l=e.data;try{"string"!=typeof e.data&&(l=JSON.stringify(e.data))}catch(e){}var c=null===(o=null==s?void 0:s.customEventTrackingConfiguration)||void 0===o?void 0:o.blocklist;null!=c&&c.includes("*")||null!=c&&c.some((function(t){return 0<(null==t?void 0:t.length)&&e.name.toLowerCase().includes(t.toLowerCase())}))||null===(i=null==a?void 0:a.core)||void 0===i||i.track($({name:e.name,data:l}),e.context,e.timestamp)}}}catch(e){console.warn("Conviva App Tracker:: Unable to track custom event! "+e)}},trackSSEEvent:function(e){var t;void 0===e&&(e={});try{Le()!==Zu.SAMPLING_MODES.NONE&&(null===(t=null==a?void 0:a.core)||void 0===t||t.track($(e),e.context,e.timestamp))}catch(e){}},trackNetworkRequest:function(e){var t,n,r,o,i,s,l,c,u,d,f,h;void 0===e&&(e={});try{var p=null===(r=null==a?void 0:a.core)||void 0===r?void 0:r.getConfig().networkRequestTrackingConfiguration,v=e.responseDetails.responseTime-e.requestDetails.requestTime;try{v=parseFloat(v.toFixed(3))}catch(e){console.warn("Conviva App Tracker:: exception while converting duration to 3 decimal",e)}try{var g=pn(((t={targetUrl:null===(o=null==e?void 0:e.requestDetails)||void 0===o?void 0:o.url,method:null===(i=null==e?void 0:e.requestDetails)||void 0===i?void 0:i.method,responseStatusCode:null!==(s=null==e?void 0:e.responseDetails)&&void 0!==s&&s.status?e.responseDetails.status:0,responseStatusText:null!==(l=null==e?void 0:e.responseDetails)&&void 0!==l&&l.statusText?e.responseDetails.statusText:"ok"})[Ju.request_headers]=null===(c=null==e?void 0:e.requestDetails)||void 0===c?void 0:c.headers,t[Ju.response_headers]=null===(u=null==e?void 0:e.responseDetails)||void 0===u?void 0:u.headers,t.duration=v,t),null==p?void 0:p.collectattr,e,null==p?void 0:p.maxQueryLength,null==p?void 0:p.rbl);if(null!==(d=null==e?void 0:e.requestDetails)&&void 0!==d&&d[Zu.TRACEPARENT_HEADER_KEY]){var m=((n={})[Zu.TRACEPARENT_HEADER_KEY]=null===(f=null==e?void 0:e.requestDetails)||void 0===f?void 0:f[Zu.TRACEPARENT_HEADER_KEY],n);g[Ju.request_headers]=g[Ju.request_headers]?_r(_r({},g[Ju.request_headers]),m):m}if(null===(h=null==a?void 0:a.core)||void 0===h);else{var y=h.track,b=Q({event:{sc:"cv/nr/1-0-5",dt:ee({targetUrl:g.targetUrl,method:g.method,queryParameters:g.queryParameters,responseStatusCode:g.responseStatusCode,responseStatusText:g.responseStatusText,rqh:g.rqh,rsh:g.rsh,rqb:g.rqb,rsb:g.rsb,rqq:g.rqq,requestSize:g.requestSize,responseSize:g.responseSize,duration:g.duration,contentType:g.contentType,requestTimestamp:g.requestTimestamp,responseTimestamp:g.responseTimestamp})}});y.call(h,b,e.context,e.timestamp)}}catch(e){console.warn("Conviva App Tracker:: Network request could not be tracked due to an exception!!",e)}}catch(e){console.warn("Conviva App Tracker:: Network request could not be tracked due to an exception!!",e)}},trackButtonClick:function(e){var t,n,r;try{var o=null===(t=null==hd?void 0:hd.core)||void 0===t?void 0:t.getConfig();!0===(null===(n=null==o?void 0:o.clickcc)||void 0===n?void 0:n.en)&&(e.elementType="button",null===(r=null==hd?void 0:hd.core)||void 0===r||r.track($({name:"conviva_click",data:JSON.stringify(e)}),D(void 0,void 0)))}catch(e){qr.warn("Conviva App Tracker caused Exception in sendButtonClick method of user click tracking module",e)}},trackLinkClick:function(e){var t,n,r;try{var o=null===(t=null==hd?void 0:hd.core)||void 0===t?void 0:t.getConfig();!0===(null===(n=null==o?void 0:o.clickcc)||void 0===n?void 0:n.en)&&(e.elementType="link",null===(r=null==hd?void 0:hd.core)||void 0===r||r.track($({name:"conviva_click",data:JSON.stringify(e)}),D(void 0,void 0)))}catch(e){qr.warn("Conviva App Tracker caused Exception in sendLinkClick method of user click tracking module",e)}},trackErrorEvent:function(e){Kn(e)},setCustomTags:function(e){void 0===e&&(e={}),P(e)},setMetaCustomTags:function(e){void 0===e&&(e={}),function(e){try{var t=Object.keys(e);L(JSON.stringify(e))?t.forEach((function(t){""!==t&&Object.defineProperty(Ye,t,{value:""+e[t],writable:!0,enumerable:!0,configurable:!0})})):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(e){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",e)}}(e)},unsetCustomTags:function(e){void 0===e&&(e=[]),U(e)},preservePageViewId:function(){pt=!0},disableAnonymousTracking:function(e){o.anonymousTracking=!1,C(e),E(),ht.executeQueue()},enableAnonymousTracking:function(e){var t;o.anonymousTracking=null===(t=e&&(null==e?void 0:e.options))||void 0===t||t,C(e),at||A()},clearUserData:k,setKeepAliveInBG:function(e){void 0===e&&(e=!1),mt=e},clearTimers:function(){id=null,bt.cleanupNetworkRequestHandler();try{xd=a,removeEventListener("error",Zn,!0),removeEventListener("unhandledrejection",Yn,!0)}catch(e){console.warn("Conviva App Tracker caused Exception in disableErrorTracking method of error tracking module",e)}if(Bn(),null==de||de.abort(),Xu=Yu=void 0,Bd&&window.clearInterval(Bd),gt.enabled){var e=void 0;for(e in gt.configurations){var t=gt.configurations[e];t&&window.clearInterval(t.activityInterval)}}a&&(a.core=null),this.tracker=null},getSamplingMode:Le,getPageViewSent:function(){return vt},setPageMetaTagsAsCustomTags:function(){F()},determineShouldTrack:function(e,t,n,r,o,i){return _n(e,t,n,r,o,i)}};Ad=yt;var bt=Zd.getInstance(yt,o,Le);return bt.initiateNetworkRequestTracking(),_r(_r({},yt),{id:e,namespace:t,core:Pe,sharedState:r})}(e,t,n,r,o);var a=_r(_r({},e),{addPlugin:function(e){var t,n,r;null===(t=null==a?void 0:a.core)||void 0===t||t.addPlugin(e),null===(r=(n=e.plugin).activateBrowserPlugin)||void 0===r||r.call(n,a)}});i.forEach((function(e){var t;null===(t=e.activateBrowserPlugin)||void 0===t||t.call(e,a)})),function(e,t){var n;if(void 0===t&&(t=!0),!1!==t){var r=null===(n=null==e?void 0:e.core)||void 0===n?void 0:n.getConfig();null==e||e.trackPagePing({context:In(null==r?void 0:r.performanceContextConfig).contexts()});try{var o=function(){null==e||e.trackCustomEvent({name:"conviva_window_loaded",data:"{}",context:In(null==r?void 0:r.performanceContextConfig).contexts()}),null==e||e.setPageMetaTagsAsCustomTags()},i=0,a=0;"complete"===document.readyState?setTimeout((function(){try{o()}catch(e){console.warn("ConvivaAppTracker : issue while detecting readyState complete",e)}}),0):null===window||void 0===window||window.addEventListener("load",(function(){setTimeout((function(){try{o()}catch(e){console.warn("ConvivaAppTracker : issue while registering window loaded event",e)}}),0)}),{signal:Xu}),null===document||void 0===document||document.addEventListener("visibilitychange",(function(){var t,n;try{if((null==e?void 0:e.getSamplingMode())!==Zu.SAMPLING_MODES.NONE)if("hidden"===document.visibilityState)setTimeout((function(){var t,n;try{var r=null===(t=null==e?void 0:e.core)||void 0===t?void 0:t.getConfig();if(a++,null!=r&&r.lifecycleAutotracking)if(null===(n=null==e?void 0:e.core)||void 0===n);else{var o=n.track,i=Q({event:{sc:"sp/abg/1-0-0",dt:ee({backgroundIndex:a})}});o.call(n,i)}"hidden"!==document.visibilityState||null!=e&&e.getPageViewSent()||null==e||e.trackCustomEvent({name:"conviva_app_backgrnd_before_page_view",data:"{}"})}catch(e){console.warn("ConvivaAppTracker : issue while tracking visibility change",e)}}),0);else{var r=null===(t=null==e?void 0:e.core)||void 0===t?void 0:t.getConfig();i++,null!=r&&r.lifecycleAutotracking&&(null===(n=null==e?void 0:e.core)||void 0===n||n.track(Q({event:{sc:"sp/afg/1-0-0",dt:ee({foregroundIndex:i})}})))}}catch(e){console.warn("convivaAppTracker visibilitychange failed "+e)}}),{signal:Xu}),"undefined"!=typeof document&&document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",(function(t){t&&e&&(null==e?void 0:e.getSamplingMode())!==Zu.SAMPLING_MODES.NONE&&(null==e||e.trackVideoEvent(t))}),{signal:Xu})}catch(e){console.warn("convivaAppTracker error in page load metrics"+e)}}}(a,null==o?void 0:o.enableCommonEvents),tr(a);try{xd=a,function(){var e,t,n,r,o,i,a;try{var s=null===(e=null==xd?void 0:xd.core)||void 0===e?void 0:e.getConfig(),l=null===(n=null===(t=null==s?void 0:s.collectionRateLimit)||void 0===t?void 0:t.exceptionAutotracking)||void 0===n?void 0:n.maxEvents,c=null===(o=null===(r=null==s?void 0:s.collectionRateLimit)||void 0===r?void 0:r.exceptionAutotracking)||void 0===o?void 0:o.disconnectDuration,u=null===(a=null===(i=null==s?void 0:s.collectionRateLimit)||void 0===i?void 0:i.exceptionAutotracking)||void 0===a?void 0:a.timeWindow;Rd=new Kd(l,c,u,null==xd?void 0:xd.core,null==xd?void 0:xd.getSamplingMode)}catch(e){console.warn("Conviva App Tracker caused Exception in initialiseRateLimiter method of error tracking module",e)}}(),null!==window&&void 0!==window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",(function(){var e,t,n,r,o,i,a,s=null===(e=null==xd?void 0:xd.core)||void 0===e?void 0:e.getConfig();e=null===(n=null===(t=null==s?void 0:s.collectionRateLimit)||void 0===t?void 0:t.exceptionAutotracking)||void 0===n?void 0:n.maxEvents,t=null===(o=null===(r=null==s?void 0:s.collectionRateLimit)||void 0===r?void 0:r.exceptionAutotracking)||void 0===o?void 0:o.disconnectDuration,r=null===(a=null===(i=null==s?void 0:s.collectionRateLimit)||void 0===i?void 0:i.exceptionAutotracking)||void 0===a?void 0:a.timeWindow,null==Rd||Rd.updateErrortRateLimitConfig(e,t,r)}),{signal:Xu}),rn(window,"error",Zn,!0),rn(window,"unhandledrejection",Yn,!0)}catch(e){console.warn("Conviva App Tracker caused Exception in enableErrorTracking method of error tracking module",e)}hd=a,mr(a);try{Ld=a,Jf(br),Zf(br),Uf(br)}catch(e){console.warn("Conviva App Tracker caused Exception in enabling Web Vitals tracking",e)}return ir(a,o),a}function Cr(e,t){try{Er(null!=e?e:Object.keys(Xf),Xf).forEach(t)}catch(e){qr.error("Function failed",e)}}function Sr(e,t,n,r,o){return Xf.hasOwnProperty(e)?null:(Xf[e]=kr(e,t,n,r,o),Xf[e])}function Er(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];t.hasOwnProperty(o)?n.push(t[o]):qr.warn(o+" not configured")}return n}function Ir(){function e(){var e;if(!t.hasLoaded)for(t.hasLoaded=!0,e=0;e<t.registeredOnLoadHandlers.length;e++)t.registeredOnLoadHandlers[e]();return!0}var t=new Qf,n=document,r=window;return rn(r,"beforeunload",(function(){try{t.bufferFlushers.forEach((function(e){e(!1)}))}catch(e){console.warn("Conviva App Tracker:: Error in flushBuffers of constructor ".concat(e))}}),!1),"loading"===document.readyState?(n.addEventListener?n.addEventListener("DOMContentLoaded",(function t(){n.removeEventListener("DOMContentLoaded",t,!1),e()})):n.attachEvent&&n.attachEvent("onreadystatechange",(function t(){"complete"===n.readyState&&(n.detachEvent("onreadystatechange",t),e())})),rn(r,"load",e,!1)):e(),t}var _r=function(){return _r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_r.apply(this,arguments)},Tr={},Ar="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Ar){var xr=new Uint8Array(16);Tr=function(){return Ar(xr),xr}}else{var Rr=Array(16);Tr=function(){for(var e,t=0;16>t;t++)0==(3&t)&&(e=4294967296*Math.random()),Rr[t]=e>>>((3&t)<<3)&255;return Rr}}for(var Or=[],Mr=0;256>Mr;++Mr)Or[Mr]=(Mr+256).toString(16).substr(1);var Nr,Lr,Dr=function(e,t){return t=t||0,[Or[e[t++]],Or[e[t++]],Or[e[t++]],Or[e[t++]],"-",Or[e[t++]],Or[e[t++]],"-",Or[e[t++]],Or[e[t++]],"-",Or[e[t++]],Or[e[t++]],"-",Or[e[t++]],Or[e[t++]],Or[e[t++]],Or[e[t++]],Or[e[t++]],Or[e[t++]]].join("")},Pr=Tr,Ur=0,Fr=0,Br=Tr,Gr=function(e,t,n){if(n=t&&n||0,"string"==typeof e&&(t="binary"===e?Array(16):null,e=null),(e=(e=e||{}).random||(e.rng||Br)())[6]=15&e[6]|64,e[8]=63&e[8]|128,t)for(var r=0;16>r;++r)t[n+r]=e[r];return t||Dr(e)};Gr.v1=function(e,t,n){n=t&&n||0;var r=t||[],o=(e=e||{}).node||Nr,i=void 0!==e.clockseq?e.clockseq:Lr;if(null==o||null==i){var a=Pr();null==o&&(o=Nr=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==i&&(i=Lr=16383&(a[6]<<8|a[7]))}a=void 0!==e.msecs?e.msecs:(new Date).getTime();var s=void 0!==e.nsecs?e.nsecs:Fr+1,l=a-Ur+(s-Fr)/1e4;if(0>l&&void 0===e.clockseq&&(i=i+1&16383),(0>l||a>Ur)&&void 0===e.nsecs&&(s=0),1e4<=s)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(Ur=a,Fr=s,Lr=i,e=(1e4*(268435455&(a+=122192928e5))+s)%4294967296,r[n++]=e>>>24&255,r[n++]=e>>>16&255,r[n++]=e>>>8&255,r[n++]=255&e,e=a/4294967296*1e4&268435455,r[n++]=e>>>8&255,r[n++]=255&e,r[n++]=e>>>24&15|16,r[n++]=e>>>16&255,r[n++]=i>>>8|128,r[n++]=255&i,i=0;6>i;++i)r[n+i]=o[i];return t||Dr(r)};var jr,zr,Vr=Gr.v4=Gr,Wr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";(zr=jr||(jr={}))[zr.none=0]="none",zr[zr.error=1]="error",zr[zr.warn=2]="warn",zr[zr.debug=3]="debug",zr[zr.info=4]="info";var Hr,qr=function(e){return void 0===e&&(e=jr.warn),{setLogLevel:function(t){e=jr[t]?t:jr.warn},warn:function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];e>=jr.warn&&"undefined"!=typeof console&&(o="Conviva: "+t,n?console.warn.apply(console,x([o+"\n",n],r,!1)):console.warn.apply(console,x([o],r,!1)))},error:function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];e>=jr.error&&"undefined"!=typeof console&&(o="Conviva: "+t+"\n",n?console.error.apply(console,x([o+"\n",n],r,!1)):console.error.apply(console,x([o],r,!1)))},debug:function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e>=jr.debug&&"undefined"!=typeof console&&console.debug.apply(console,x(["Conviva: "+t],n,!1))},info:function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e>=jr.info&&"undefined"!=typeof console&&console.info.apply(console,x(["Conviva: "+t],n,!1))}}}();!function(e){e.response_body="rsb",e.request_body="rqb",e.response_headers="rsh",e.request_headers="rqh",e.request_query="rqq"}(Hr||(Hr={}));var Zr={},Yr={};!function(){var e={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(t){if(t.constructor==Number)return 16711935&e.rotl(t,8)|4278255360&e.rotl(t,24);for(var n=0;n<t.length;n++)t[n]=e.endian(t[n]);return t},randomBytes:function(e){for(var t=[];0<e;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],o=0;4>o;o++)8*n+6*o<=8*e.length?t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&t.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(n))>>>6-2*r);return t}};Yr=e}();var Kr={utf8:{stringToBytes:function(e){return Kr.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(Kr.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}},Jr=Kr;!function(){var e=Yr,t=Jr.utf8,n=Jr.bin,r=function(r,o){var i=e.wordsToBytes,a=r;a.constructor==String?a=t.stringToBytes(a):"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||(a=a.toString()),r=e.bytesToWords(a);var s=8*a.length;a=[];var l=1732584193,c=-271733879,u=-1732584194,d=271733878,f=-1009589776;for(r[s>>5]|=128<<24-s%32,r[15+(s+64>>>9<<4)]=s,s=0;s<r.length;s+=16){for(var h=l,p=c,v=u,g=d,m=f,y=0;80>y;y++){if(16>y)a[y]=r[s+y];else{var b=a[y-3]^a[y-8]^a[y-14]^a[y-16];a[y]=b<<1|b>>>31}b=(l<<5|l>>>27)+f+(a[y]>>>0)+(20>y?1518500249+(c&u|~c&d):40>y?1859775393+(c^u^d):60>y?(c&u|c&d|u&d)-1894007588:(c^u^d)-899497514),f=d,d=u,u=c<<30|c>>>2,c=l,l=b}l+=h,c+=p,u+=v,d+=g,f+=m}return i=i.call(e,[l,c,u,d,f]),o&&o.asBytes?i:o&&o.asString?n.bytesToString(i):e.bytesToHex(i)};r._blocksize=16,r._digestsize=20,Zr=r}();var Xr=Zr,Qr=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),$r=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),eo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),to=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),no=Array(576);te(no);var ro=Array(60);te(ro);var oo=Array(512);te(oo);var io=Array(256);te(io);var ao=Array(29);te(ao);var so=Array(30);te(so);var lo,co,uo,fo=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ho=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,fo(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},po=function(e,t,n){ho(e,n[2*t],n[2*t+1])},vo=function(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(0<--t);return n>>>1},go=function(e,t,n){var r,o=Array(16),i=0;for(r=1;15>=r;r++)i=i+n[r-1]<<1,o[r]=i;for(n=0;n<=t;n++)0!==(i=e[2*n+1])&&(e[2*n]=vo(o[i]++,i))},mo=function(e){var t;for(t=0;286>t;t++)e.dyn_ltree[2*t]=0;for(t=0;30>t;t++)e.dyn_dtree[2*t]=0;for(t=0;19>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},yo=function(e){8<e.bi_valid?fo(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},bo=function(e,t,n,r){var o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]},wo=function(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&bo(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!bo(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r},ko=function(e,t,n){var r=0;if(0!==e.sym_next)do{var o=255&e.pending_buf[e.sym_buf+r++];o+=(255&e.pending_buf[e.sym_buf+r++])<<8;var i=e.pending_buf[e.sym_buf+r++];if(0===o)po(e,i,t);else{var a=io[i];po(e,a+256+1,t);var s=Qr[a];0!==s&&(i-=ao[a],ho(e,i,s)),a=256>--o?oo[o]:oo[256+(o>>>7)],po(e,a,n),0!==(s=$r[a])&&(o-=so[a],ho(e,o,s))}}while(r<e.sym_next);po(e,256,t)},Co=function(e,t){var n,r=t.dyn_tree,o=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems,s=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<a;n++)0!==r[2*n]?(e.heap[++e.heap_len]=s=n,e.depth[n]=0):r[2*n+1]=0;for(;2>e.heap_len;){var l=e.heap[++e.heap_len]=2>s?++s:0;r[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=o[2*l+1])}for(t.max_code=s,n=e.heap_len>>1;1<=n;n--)wo(e,r,n);l=a;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],wo(e,r,1),o=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=o,r[2*l]=r[2*n]+r[2*o],e.depth[l]=(e.depth[n]>=e.depth[o]?e.depth[n]:e.depth[o])+1,r[2*n+1]=r[2*o+1]=l,e.heap[1]=l++,wo(e,r,1)}while(2<=e.heap_len);e.heap[--e.heap_max]=e.heap[1],n=t.dyn_tree,l=t.max_code,o=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.extra_bits;var c,u=t.stat_desc.extra_base,d=t.stat_desc.max_length,f=0;for(c=0;15>=c;c++)e.bl_count[c]=0;for(n[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;573>t;t++){var h=e.heap[t];if((c=n[2*n[2*h+1]+1]+1)>d&&(c=d,f++),n[2*h+1]=c,!(h>l)){e.bl_count[c]++;var p=0;h>=u&&(p=a[h-u]);var v=n[2*h];e.opt_len+=v*(c+p),i&&(e.static_len+=v*(o[2*h+1]+p))}}if(0!==f){do{for(c=d-1;0===e.bl_count[c];)c--;e.bl_count[c]--,e.bl_count[c+1]+=2,e.bl_count[d]--,f-=2}while(0<f);for(c=d;0!==c;c--)for(h=e.bl_count[c];0!==h;)(o=e.heap[--t])>l||(n[2*o+1]!==c&&(e.opt_len+=(c-n[2*o+1])*n[2*o],n[2*o+1]=c),h--)}go(r,s,e.bl_count)},So=function(e,t,n){var r,o=-1,i=t[1],a=0,s=7,l=4;for(0===i&&(s=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++){var c=i;i=t[2*(r+1)+1],++a<s&&c===i||(a<l?e.bl_tree[2*c]+=a:0!==c?(c!==o&&e.bl_tree[2*c]++,e.bl_tree[32]++):10>=a?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=c,0===i?(s=138,l=3):c===i?(s=6,l=3):(s=7,l=4))}},Eo=function(e,t,n){var r,o=-1,i=t[1],a=0,s=7,l=4;for(0===i&&(s=138,l=3),r=0;r<=n;r++){var c=i;if(i=t[2*(r+1)+1],!(++a<s&&c===i)){if(a<l)do{po(e,c,e.bl_tree)}while(0!=--a);else 0!==c?(c!==o&&(po(e,c,e.bl_tree),a--),po(e,16,e.bl_tree),ho(e,a-3,2)):10>=a?(po(e,17,e.bl_tree),ho(e,a-3,3)):(po(e,18,e.bl_tree),ho(e,a-11,7));a=0,o=c,0===i?(s=138,l=3):c===i?(s=6,l=3):(s=7,l=4)}}},Io=!1,_o=function(e,t,n,r){ho(e,r?1:0,3),yo(e),fo(e,n),fo(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},To=function(e,t,n,r){var o,i=65535&e|0;for(e=e>>>16&65535|0;0!==n;){n-=o=2e3<n?2e3:n;do{e=e+(i=i+t[r++]|0)|0}while(--o);i%=65521,e%=65521}return i|e<<16|0},Ao=new Uint32Array(function(){for(var e,t=[],n=0;256>n;n++){e=n;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}()),xo=function(e,t,n,r){for(n=r+n,e^=-1;r<n;r++)e=e>>>8^Ao[255&(e^t[r])];return-1^e},Ro={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Oo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Mo=function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(io[n]+256+1)]++,e.dyn_dtree[2*(256>t?oo[t]:oo[256+(t>>>7)])]++),e.sym_next===e.sym_end},No=Oo.Z_NO_FLUSH,Lo=Oo.Z_PARTIAL_FLUSH,Do=Oo.Z_FULL_FLUSH,Po=Oo.Z_FINISH,Uo=Oo.Z_BLOCK,Fo=Oo.Z_OK,Bo=Oo.Z_STREAM_END,Go=Oo.Z_STREAM_ERROR,jo=Oo.Z_DATA_ERROR,zo=Oo.Z_BUF_ERROR,Vo=Oo.Z_DEFAULT_COMPRESSION,Wo=Oo.Z_FILTERED,Ho=Oo.Z_HUFFMAN_ONLY,qo=Oo.Z_RLE,Zo=Oo.Z_FIXED,Yo=Oo.Z_DEFAULT_STRATEGY,Ko=Oo.Z_UNKNOWN,Jo=Oo.Z_DEFLATED,Xo=function(e,t){return e.msg=Ro[t],t},Qo=function(e){for(var t=e.length;0<=--t;)e[t]=0},$o=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},ei=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},ti=function(e,t){var n=0<=e.block_start?e.block_start:-1,r=e.strstart-e.block_start,o=0;if(0<e.level){for(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;31>=t;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;256>t;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),Co(e,e.l_desc),Co(e,e.d_desc),So(e,e.dyn_ltree,e.l_desc.max_code),So(e,e.dyn_dtree,e.d_desc.max_code),Co(e,e.bl_desc),o=18;3<=o&&0===e.bl_tree[2*to[o]+1];o--);e.opt_len+=3*(o+1)+14;var i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3;a<=i&&(i=a)}else i=a=r+5;if(r+4<=i&&-1!==n)_o(e,n,r,t);else if(4===e.strategy||a===i)ho(e,2+(t?1:0),3),ko(e,no,ro);else{for(ho(e,4+(t?1:0),3),n=e.l_desc.max_code+1,r=e.d_desc.max_code+1,o+=1,ho(e,n-257,5),ho(e,r-1,5),ho(e,o-4,4),i=0;i<o;i++)ho(e,e.bl_tree[2*to[i]+1],3);Eo(e,e.dyn_ltree,n-1),Eo(e,e.dyn_dtree,r-1),ko(e,e.dyn_ltree,e.dyn_dtree)}mo(e),t&&yo(e),e.block_start=e.strstart,ei(e.strm)},ni=function(e,t){e.pending_buf[e.pending++]=t},ri=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},oi=function(e,t,n,r){var o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),n),1===e.state.wrap?e.adler=To(e.adler,t,o,n):2===e.state.wrap&&(e.adler=xo(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)},ii=function(e,t){var n=e.max_chain_length,r=e.strstart,o=e.prev_length,i=e.nice_match,a=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,s=e.window,l=e.w_mask,c=e.prev,u=e.strstart+258,d=s[r+o-1],f=s[r+o];e.prev_length>=e.good_match&&(n>>=2),i>e.lookahead&&(i=e.lookahead);do{var h=t;if(s[h+o]===f&&s[h+o-1]===d&&s[h]===s[r]&&s[++h]===s[r+1]){for(r+=2,h++;s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&s[++r]===s[++h]&&r<u;);if(h=258-(u-r),r=u-258,h>o){if(e.match_start=t,o=h,h>=i)break;d=s[r+o-1],f=s[r+o]}}}while((t=c[t&l])>a&&0!=--n);return o<=e.lookahead?o:e.lookahead},ai=function(e){var t=e.w_size;do{var n=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-262)){e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart);var r,o=e,i=o.w_size,a=r=o.hash_size;do{var s=o.head[--a];o.head[a]=s>=i?s-i:0}while(--r);a=r=i;do{s=o.prev[--a],o.prev[a]=s>=i?s-i:0}while(--r);n+=t}if(0===e.strm.avail_in)break;if(n=oi(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=n,3<=e.lookahead+e.insert)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=$o(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=$o(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(3>e.lookahead+e.insert)););}while(262>e.lookahead&&0!==e.strm.avail_in)},si=function(e,t){var n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r=0,o=e.strm.avail_in;do{var i=65535,a=e.bi_valid+42>>3;if(e.strm.avail_out<a)break;a=e.strm.avail_out-a;var s=e.strstart-e.block_start;if(i>s+e.strm.avail_in&&(i=s+e.strm.avail_in),i>a&&(i=a),i<n&&(0===i&&t!==Po||t===No||i!==s+e.strm.avail_in))break;r=t===Po&&i===s+e.strm.avail_in?1:0,_o(e,0,0,r),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,ei(e.strm),s&&(s>i&&(s=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,i-=s),i&&(oi(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===r);return(o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),2>e.matches&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),r?4:t!==No&&t!==Po&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),2>e.matches&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(oi(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,n=(a=65535<e.pending_buf_size-a?65535:e.pending_buf_size-a)>e.w_size?e.w_size:a,((s=e.strstart-e.block_start)>=n||(s||t===Po)&&t!==No&&0===e.strm.avail_in&&s<=a)&&(i=s>a?a:s,r=t===Po&&0===e.strm.avail_in&&i===s?1:0,_o(e,e.block_start,i,r),e.block_start+=i,ei(e.strm)),r?3:1)},li=function(e,t){for(var n;;){if(262>e.lookahead){if(ai(e),262>e.lookahead&&t===No)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=$o(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=ii(e,n)),3<=e.match_length)if(n=Mo(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){e.match_length--;do{e.strstart++,e.ins_h=$o(e,e.ins_h,e.window[e.strstart+3-1]),e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=$o(e,e.ins_h,e.window[e.strstart+1]);else n=Mo(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(ti(e,!1),0===e.strm.avail_out))return 1}return e.insert=2>e.strstart?e.strstart:2,t===Po?(ti(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ti(e,!1),0===e.strm.avail_out)?1:2},ci=function(e,t){for(var n,r;;){if(262>e.lookahead){if(ai(e),262>e.lookahead&&t===No)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=$o(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=ii(e,n),5>=e.match_length&&(e.strategy===Wo||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),3<=e.prev_length&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,n=Mo(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=$o(e,e.ins_h,e.window[e.strstart+3-1]),e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(ti(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=Mo(e,0,e.window[e.strstart-1]))&&ti(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(Mo(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=2>e.strstart?e.strstart:2,t===Po?(ti(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ti(e,!1),0===e.strm.avail_out)?1:2},ui=[new oe(0,0,0,0,si),new oe(4,4,8,4,li),new oe(4,5,16,8,li),new oe(4,6,32,32,li),new oe(4,4,16,16,ci),new oe(8,16,32,32,ci),new oe(8,16,128,128,ci),new oe(8,32,128,256,ci),new oe(32,128,258,1024,ci),new oe(32,258,258,4096,ci)],di=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},fi=function(e){if(di(e))return Xo(e,Go);e.total_in=e.total_out=0,e.data_type=Ko;var t=e.state;if(t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,!Io){var n,r,o;for(e=Array(16),o=r=0;28>o;o++)for(ao[o]=r,n=0;n<1<<Qr[o];n++)io[r++]=o;for(io[r-1]=o,o=r=0;16>o;o++)for(so[o]=r,n=0;n<1<<$r[o];n++)oo[r++]=o;for(r>>=7;30>o;o++)for(so[o]=r<<7,n=0;n<1<<$r[o]-7;n++)oo[256+r++]=o;for(n=0;15>=n;n++)e[n]=0;for(n=0;143>=n;)no[2*n+1]=8,n++,e[8]++;for(;255>=n;)no[2*n+1]=9,n++,e[9]++;for(;279>=n;)no[2*n+1]=7,n++,e[7]++;for(;287>=n;)no[2*n+1]=8,n++,e[8]++;for(go(no,287,e),n=0;30>n;n++)ro[2*n+1]=5,ro[2*n]=vo(n,5);lo=new ne(no,Qr,257,286,15),co=new ne(ro,$r,0,30,15),uo=new ne([],eo,0,19,7),Io=!0}return t.l_desc=new re(t.dyn_ltree,lo),t.d_desc=new re(t.dyn_dtree,co),t.bl_desc=new re(t.bl_tree,uo),t.bi_buf=0,t.bi_valid=0,mo(t),Fo},hi=function(e){var t=fi(e);return t===Fo&&((e=e.state).window_size=2*e.w_size,Qo(e.head),e.max_lazy_match=ui[e.level].max_lazy,e.good_match=ui[e.level].good_length,e.nice_match=ui[e.level].nice_length,e.max_chain_length=ui[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t},pi=function(e,t,n,r,o,i){if(!e)return Go;var a=1;if(t===Vo&&(t=6),0>r?(a=0,r=-r):15<r&&(a=2,r-=16),1>o||9<o||n!==Jo||8>r||15<r||0>t||9<t||0>i||i>Zo||8===r&&1!==a)return Xo(e,Go);8===r&&(r=9);var s=new ie;return e.state=s,s.strm=e,s.status=42,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=o+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<o+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=i,s.method=n,hi(e)},vi={deflateInit:function(e,t){return pi(e,t,Jo,15,8,Yo)},deflateInit2:pi,deflateReset:hi,deflateResetKeep:fi,deflateSetHeader:function(e,t){return di(e)||2!==e.state.wrap?Go:(e.state.gzhead=t,Fo)},deflate:function(e,t){if(di(e)||t>Uo||0>t)return e?Xo(e,Go):Go;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==Po)return Xo(e,0===e.avail_out?zo:Go);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(ei(e),0===e.avail_out)return n.last_flush=-1,Fo}else if(0===e.avail_in&&2*t-(4<t?9:0)<=2*r-(4<r?9:0)&&t!==Po)return Xo(e,zo);if(666===n.status&&0!==e.avail_in)return Xo(e,zo);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status&&(r=Jo+(n.w_bits-8<<4)<<8,r|=(n.strategy>=Ho||2>n.level?0:6>n.level?1:6===n.level?2:3)<<6,0!==n.strstart&&(r|=32),ri(n,r+(31-r%31)),0!==n.strstart&&(ri(n,e.adler>>>16),ri(n,65535&e.adler)),e.adler=1,n.status=113,ei(e),0!==n.pending))return n.last_flush=-1,Fo;if(57===n.status)if(e.adler=0,ni(n,31),ni(n,139),ni(n,8),n.gzhead)ni(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ni(n,255&n.gzhead.time),ni(n,n.gzhead.time>>8&255),ni(n,n.gzhead.time>>16&255),ni(n,n.gzhead.time>>24&255),ni(n,9===n.level?2:n.strategy>=Ho||2>n.level?4:0),ni(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(ni(n,255&n.gzhead.extra.length),ni(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=xo(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(ni(n,0),ni(n,0),ni(n,0),ni(n,0),ni(n,0),ni(n,9===n.level?2:n.strategy>=Ho||2>n.level?4:0),ni(n,3),n.status=113,ei(e),0!==n.pending)return n.last_flush=-1,Fo;if(69===n.status){if(n.gzhead.extra){r=n.pending;for(var o=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+o>n.pending_buf_size;){var i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>r&&(e.adler=xo(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex+=i,ei(e),0!==n.pending)return n.last_flush=-1,Fo;r=0,o-=i}i=new Uint8Array(n.gzhead.extra),n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>r&&(e.adler=xo(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=xo(e.adler,n.pending_buf,n.pending-r,r)),ei(e),0!==n.pending)return n.last_flush=-1,Fo;r=0}o=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,ni(n,o)}while(0!==o);n.gzhead.hcrc&&n.pending>r&&(e.adler=xo(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=xo(e.adler,n.pending_buf,n.pending-r,r)),ei(e),0!==n.pending)return n.last_flush=-1,Fo;r=0}o=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,ni(n,o)}while(0!==o);n.gzhead.hcrc&&n.pending>r&&(e.adler=xo(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ei(e),0!==n.pending))return n.last_flush=-1,Fo;ni(n,255&e.adler),ni(n,e.adler>>8&255),e.adler=0}if(n.status=113,ei(e),0!==n.pending)return n.last_flush=-1,Fo}if(0!==e.avail_in||0!==n.lookahead||t!==No&&666!==n.status){if(r=0===n.level?si(n,t):n.strategy===Ho?function(e,t){for(var n;;){if(0===e.lookahead&&(ai(e),0===e.lookahead)){if(t===No)return 1;break}if(e.match_length=0,n=Mo(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ti(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Po?(ti(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ti(e,!1),0===e.strm.avail_out)?1:2}(n,t):n.strategy===qo?function(e,t){for(var n,r,o,i=e.window;;){if(258>=e.lookahead){if(ai(e),258>=e.lookahead&&t===No)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(n=i[r=e.strstart-1])===i[++r]&&n===i[++r]&&n===i[++r]){for(o=e.strstart+258;n===i[++r]&&n===i[++r]&&n===i[++r]&&n===i[++r]&&n===i[++r]&&n===i[++r]&&n===i[++r]&&n===i[++r]&&r<o;);e.match_length=258-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(n=Mo(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Mo(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ti(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Po?(ti(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ti(e,!1),0===e.strm.avail_out)?1:2}(n,t):ui[n.level].func(n,t),3!==r&&4!==r||(n.status=666),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Fo;if(2===r&&(t===Lo?(ho(n,2,3),po(n,256,no),16===n.bi_valid?(fo(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):8<=n.bi_valid&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)):t!==Uo&&(_o(n,0,0,!1),t===Do&&(Qo(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ei(e),0===e.avail_out))return n.last_flush=-1,Fo}return t!==Po?Fo:0>=n.wrap?Bo:(2===n.wrap?(ni(n,255&e.adler),ni(n,e.adler>>8&255),ni(n,e.adler>>16&255),ni(n,e.adler>>24&255),ni(n,255&e.total_in),ni(n,e.total_in>>8&255),ni(n,e.total_in>>16&255),ni(n,e.total_in>>24&255)):(ri(n,e.adler>>>16),ri(n,65535&e.adler)),ei(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?Fo:Bo)},deflateEnd:function(e){if(di(e))return Go;var t=e.state.status;return e.state=null,113===t?Xo(e,jo):Fo},deflateSetDictionary:function(e,t){var n=t.length;if(di(e))return Go;var r=e.state,o=r.wrap;if(2===o||1===o&&42!==r.status||r.lookahead)return Go;if(1===o&&(e.adler=To(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===o&&(Qo(r.head),r.strstart=0,r.block_start=0,r.insert=0);var i=new Uint8Array(r.w_size);i.set(t.subarray(n-r.w_size,n),0),t=i,n=r.w_size}i=e.avail_in;var a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,ai(r);3<=r.lookahead;){t=r.strstart,n=r.lookahead-2;do{r.ins_h=$o(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--n);r.strstart=t,r.lookahead=2,ai(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=s,e.avail_in=i,r.wrap=o,Fo},deflateInfo:"pako deflate (from Nodeca project)"},gi={assign:function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==S(n))throw new TypeError(n+"must be non-object");for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},flattenChunks:function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;t=new Uint8Array(t),r=n=0;for(var o=e.length;n<o;n++){var i=e[n];t.set(i,r),r+=i.length}return t}},mi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(zr){mi=!1}for(var yi=new Uint8Array(256),bi=0;256>bi;bi++)yi[bi]=252<=bi?6:248<=bi?5:240<=bi?4:224<=bi?3:192<=bi?2:1;yi[254]=yi[254]=1;var wi={string2buf:function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,r=e.length,o=0;for(t=0;t<r;t++){var i=e.charCodeAt(t);if(55296==(64512&i)&&t+1<r){var a=e.charCodeAt(t+1);56320==(64512&a)&&(i=65536+(i-55296<<10)+(a-56320),t++)}o+=128>i?1:2048>i?2:65536>i?3:4}var s=new Uint8Array(o);for(t=n=0;n<o;t++)55296==(64512&(i=e.charCodeAt(t)))&&t+1<r&&(56320==(64512&(a=e.charCodeAt(t+1)))&&(i=65536+(i-55296<<10)+(a-56320),t++)),128>i?s[n++]=i:(2048>i?s[n++]=192|i>>>6:(65536>i?s[n++]=224|i>>>12:(s[n++]=240|i>>>18,s[n++]=128|i>>>12&63),s[n++]=128|i>>>6&63),s[n++]=128|63&i);return s},buf2string:function(e,t){var n,r,o=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));for(t=Array(2*o),n=r=0;n<o;){var i=e[n++];if(128>i)t[r++]=i;else{var a=yi[i];if(4<a)t[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&n<o;)i=i<<6|63&e[n++],a--;1<a?t[r++]=65533:65536>i?t[r++]=i:(i-=65536,t[r++]=55296|i>>10&1023,t[r++]=56320|1023&i)}}}if(65534>(e=r)&&t.subarray&&mi)t=String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));else{for(o="",n=0;n<e;n++)o+=String.fromCharCode(t[n]);t=o}return t},utf8border:function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;0<=n&&128==(192&e[n]);)n--;return 0>n||0===n?t:n+yi[e[n]]>t?n:t}},ki=function(){this.input=null,this.total_in=this.avail_in=this.next_in=0,this.output=null,this.total_out=this.avail_out=this.next_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ci=Object.prototype.toString,Si=Oo.Z_NO_FLUSH,Ei=Oo.Z_SYNC_FLUSH,Ii=Oo.Z_FULL_FLUSH,_i=Oo.Z_FINISH,Ti=Oo.Z_OK,Ai=Oo.Z_STREAM_END,xi=Oo.Z_DEFAULT_COMPRESSION,Ri=Oo.Z_DEFAULT_STRATEGY,Oi=Oo.Z_DEFLATED;ae.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;for(t=t===~~t?t:!0===t?_i:Si,"string"==typeof e?n.input=wi.string2buf(e):"[object ArrayBuffer]"===Ci.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(t===Ei||t===Ii)&&6>=n.avail_out)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if((e=vi.deflate(n,t))===Ai)return 0<n.next_out&&this.onData(n.output.subarray(0,n.next_out)),e=vi.deflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===Ti;if(0===n.avail_out)this.onData(n.output);else if(0<t&&0<n.next_out)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}return!0},ae.prototype.onData=function(e){this.chunks.push(e)},ae.prototype.onEnd=function(e){e===Ti&&(this.result=gi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Mi,Ni,Li=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Di=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Pi=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ui=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Fi=function(e,t,n,r,o,i,a,s){var l,c,u,d,f,h,p,v=s.bits,g=new Uint16Array(16),m=new Uint16Array(16);for(l=0;15>=l;l++)g[l]=0;for(c=0;c<r;c++)g[t[n+c]]++;var y=v;for(u=15;1<=u&&0===g[u];u--);if(y>u&&(y=u),0===u)return o[i++]=20971520,o[i++]=20971520,s.bits=1,0;for(v=1;v<u&&0===g[v];v++);for(y<v&&(y=v),l=d=1;15>=l;l++)if(d<<=1,0>(d-=g[l]))return-1;if(0<d&&(0===e||1!==u))return-1;for(m[1]=0,l=1;15>l;l++)m[l+1]=m[l]+g[l];for(c=0;c<r;c++)0!==t[n+c]&&(a[m[t[n+c]]++]=c);if(0===e)var b=p=a,w=20;else 1===e?(b=Li,p=Di,w=257):(b=Pi,p=Ui,w=0);c=f=0,l=v;var k=i;r=y,m=0;var C=-1,S=1<<y,E=S-1;if(1===e&&852<S||2===e&&592<S)return 1;for(;;){var I=l-m;if(a[c]+1<w)var _=0,T=a[c];else a[c]>=w?(_=p[a[c]-w],T=b[a[c]-w]):(_=96,T=0);d=1<<l-m,v=h=1<<r;do{o[k+(f>>m)+(h-=d)]=I<<24|_<<16|T|0}while(0!==h);for(d=1<<l-1;f&d;)d>>=1;if(0!==d?(f&=d-1,f+=d):f=0,c++,0==--g[l]){if(l===u)break;l=t[n+a[c]]}if(l>y&&(f&E)!==C){for(0===m&&(m=y),k+=v,d=1<<(r=l-m);r+m<u&&!(0>=(d-=g[r+m]));)r++,d<<=1;if(S+=1<<r,1===e&&852<S||2===e&&592<S)return 1;o[C=f&E]=y<<24|r<<16|k-i|0}}return 0!==f&&(o[k+f]=l-m<<24|4194304),s.bits=y,0},Bi=Oo.Z_FINISH,Gi=Oo.Z_BLOCK,ji=Oo.Z_TREES,zi=Oo.Z_OK,Vi=Oo.Z_STREAM_END,Wi=Oo.Z_NEED_DICT,Hi=Oo.Z_STREAM_ERROR,qi=Oo.Z_DATA_ERROR,Zi=Oo.Z_MEM_ERROR,Yi=Oo.Z_BUF_ERROR,Ki=Oo.Z_DEFLATED,Ji=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)},Xi=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||16180>t.mode||16211<t.mode?1:0},Qi=function(e){if(Xi(e))return Hi;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,zi},$i=function(e){if(Xi(e))return Hi;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Qi(e)},ea=function(e,t){if(Xi(e))return Hi;var n=e.state;if(0>t){var r=0;t=-t}else r=5+(t>>4),48>t&&(t&=15);return t&&(8>t||15<t)?Hi:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,$i(e))},ta=function(e,t){if(!e)return Hi;var n=new le;return e.state=n,n.strm=e,n.window=null,n.mode=16180,(t=ea(e,t))!==zi&&(e.state=null),t},na=!0,ra=function(e,t,n,r){var o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):((e=o.wsize-o.wnext)>r&&(e=r),o.window.set(t.subarray(n-r,n-r+e),o.wnext),(r-=e)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=e,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=e))),0},oa={inflateReset:$i,inflateReset2:ea,inflateResetKeep:Qi,inflateInit:function(e){return ta(e,15)},inflateInit2:ta,inflate:function(e,t){var n=new Uint8Array(4),r=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Xi(e)||!e.output||!e.input&&0!==e.avail_in)return Hi;var o=e.state;16191===o.mode&&(o.mode=16192);var i=e.next_out,a=e.output,s=e.avail_out,l=e.next_in,c=e.input,u=e.avail_in,d=o.hold,f=o.bits,h=u,p=s,v=zi;e:for(;;)switch(o.mode){case 16180:if(0===o.wrap){o.mode=16192;break}for(;16>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(2&o.wrap&&35615===d){0===o.wbits&&(o.wbits=15),o.check=0,n[0]=255&d,n[1]=d>>>8&255,o.check=xo(o.check,n,2,0),f=d=0,o.mode=16181;break}if(o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",o.mode=16209;break}if((15&d)!==Ki){e.msg="unknown compression method",o.mode=16209;break}f-=4;var g=8+(15&(d>>>=4));if(0===o.wbits&&(o.wbits=g),15<g||g>o.wbits){e.msg="invalid window size",o.mode=16209;break}o.dmax=1<<o.wbits,o.flags=0,e.adler=o.check=1,o.mode=512&d?16189:16191,f=d=0;break;case 16181:for(;16>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(o.flags=d,(255&o.flags)!==Ki){e.msg="unknown compression method",o.mode=16209;break}if(57344&o.flags){e.msg="unknown header flags set",o.mode=16209;break}o.head&&(o.head.text=d>>8&1),512&o.flags&&4&o.wrap&&(n[0]=255&d,n[1]=d>>>8&255,o.check=xo(o.check,n,2,0)),f=d=0,o.mode=16182;case 16182:for(;32>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}o.head&&(o.head.time=d),512&o.flags&&4&o.wrap&&(n[0]=255&d,n[1]=d>>>8&255,n[2]=d>>>16&255,n[3]=d>>>24&255,o.check=xo(o.check,n,4,0)),f=d=0,o.mode=16183;case 16183:for(;16>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}o.head&&(o.head.xflags=255&d,o.head.os=d>>8),512&o.flags&&4&o.wrap&&(n[0]=255&d,n[1]=d>>>8&255,o.check=xo(o.check,n,2,0)),f=d=0,o.mode=16184;case 16184:if(1024&o.flags){for(;16>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}o.length=d,o.head&&(o.head.extra_len=d),512&o.flags&&4&o.wrap&&(n[0]=255&d,n[1]=d>>>8&255,o.check=xo(o.check,n,2,0)),f=d=0}else o.head&&(o.head.extra=null);o.mode=16185;case 16185:if(1024&o.flags){var m=o.length;if(m>u&&(m=u),m&&(o.head&&(g=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Uint8Array(o.head.extra_len)),o.head.extra.set(c.subarray(l,l+m),g)),512&o.flags&&4&o.wrap&&(o.check=xo(o.check,c,m,l)),u-=m,l+=m,o.length-=m),o.length)break e}o.length=0,o.mode=16186;case 16186:if(2048&o.flags){if(0===u)break e;m=0;do{g=c[l+m++],o.head&&g&&65536>o.length&&(o.head.name+=String.fromCharCode(g))}while(g&&m<u);if(512&o.flags&&4&o.wrap&&(o.check=xo(o.check,c,m,l)),u-=m,l+=m,g)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=16187;case 16187:if(4096&o.flags){if(0===u)break e;m=0;do{g=c[l+m++],o.head&&g&&65536>o.length&&(o.head.comment+=String.fromCharCode(g))}while(g&&m<u);if(512&o.flags&&4&o.wrap&&(o.check=xo(o.check,c,m,l)),u-=m,l+=m,g)break e}else o.head&&(o.head.comment=null);o.mode=16188;case 16188:if(512&o.flags){for(;16>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(4&o.wrap&&d!==(65535&o.check)){e.msg="header crc mismatch",o.mode=16209;break}f=d=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),e.adler=o.check=0,o.mode=16191;break;case 16189:for(;32>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}e.adler=o.check=Ji(d),f=d=0,o.mode=16190;case 16190:if(0===o.havedict)return e.next_out=i,e.avail_out=s,e.next_in=l,e.avail_in=u,o.hold=d,o.bits=f,Wi;e.adler=o.check=1,o.mode=16191;case 16191:if(t===Gi||t===ji)break e;case 16192:if(o.last){d>>>=7&f,f-=7&f,o.mode=16206;break}for(;3>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}switch(o.last=1&d,--f,3&(d>>>=1)){case 0:o.mode=16193;break;case 1:if(m=o,na){for(Mi=new Int32Array(512),Ni=new Int32Array(32),g=0;144>g;)m.lens[g++]=8;for(;256>g;)m.lens[g++]=9;for(;280>g;)m.lens[g++]=7;for(;288>g;)m.lens[g++]=8;for(Fi(1,m.lens,0,288,Mi,0,m.work,{bits:9}),g=0;32>g;)m.lens[g++]=5;Fi(2,m.lens,0,32,Ni,0,m.work,{bits:5}),na=!1}if(m.lencode=Mi,m.lenbits=9,m.distcode=Ni,m.distbits=5,o.mode=16199,t===ji){d>>>=2,f-=2;break e}break;case 2:o.mode=16196;break;case 3:e.msg="invalid block type",o.mode=16209}d>>>=2,f-=2;break;case 16193:for(d>>>=7&f,f-=7&f;32>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",o.mode=16209;break}if(o.length=65535&d,f=d=0,o.mode=16194,t===ji)break e;case 16194:o.mode=16195;case 16195:if(m=o.length){if(m>u&&(m=u),m>s&&(m=s),0===m)break e;a.set(c.subarray(l,l+m),i),u-=m,l+=m,s-=m,i+=m,o.length-=m;break}o.mode=16191;break;case 16196:for(;14>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(o.nlen=257+(31&d),d>>>=5,f-=5,o.ndist=1+(31&d),d>>>=5,f-=5,o.ncode=4+(15&d),d>>>=4,f-=4,286<o.nlen||30<o.ndist){e.msg="too many length or distance symbols",o.mode=16209;break}o.have=0,o.mode=16197;case 16197:for(;o.have<o.ncode;){for(;3>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}o.lens[r[o.have++]]=7&d,d>>>=3,f-=3}for(;19>o.have;)o.lens[r[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,m={bits:o.lenbits},v=Fi(0,o.lens,0,19,o.lencode,0,o.work,m),o.lenbits=m.bits,v){e.msg="invalid code lengths set",o.mode=16209;break}o.have=0,o.mode=16198;case 16198:for(;o.have<o.nlen+o.ndist;){for(;;){var y=o.lencode[d&(1<<o.lenbits)-1];if(m=y>>>24,y&=65535,m<=f)break;if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(16>y)d>>>=m,f-=m,o.lens[o.have++]=y;else{if(16===y){for(g=m+2;f<g;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(d>>>=m,f-=m,0===o.have){e.msg="invalid bit length repeat",o.mode=16209;break}g=o.lens[o.have-1],m=3+(3&d),d>>>=2,f-=2}else if(17===y){for(g=m+3;f<g;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}f-=m,g=0,m=3+(7&(d>>>=m)),d>>>=3,f-=3}else{for(g=m+7;f<g;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}f-=m,g=0,m=11+(127&(d>>>=m)),d>>>=7,f-=7}if(o.have+m>o.nlen+o.ndist){e.msg="invalid bit length repeat",o.mode=16209;break}for(;m--;)o.lens[o.have++]=g}}if(16209===o.mode)break;if(0===o.lens[256]){e.msg="invalid code -- missing end-of-block",o.mode=16209;break}if(o.lenbits=9,m={bits:o.lenbits},v=Fi(1,o.lens,0,o.nlen,o.lencode,0,o.work,m),o.lenbits=m.bits,v){e.msg="invalid literal/lengths set",o.mode=16209;break}if(o.distbits=6,o.distcode=o.distdyn,m={bits:o.distbits},v=Fi(2,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,m),o.distbits=m.bits,v){e.msg="invalid distances set",o.mode=16209;break}if(o.mode=16199,t===ji)break e;case 16199:o.mode=16200;case 16200:if(6<=u&&258<=s){e.next_out=i,e.avail_out=s,e.next_in=l,e.avail_in=u,o.hold=d,o.bits=f;var b=e,w=b.state,k=b.next_in;a=b.input;var C=k+(b.avail_in-5),S=b.next_out;c=b.output;var E=S-(p-b.avail_out),I=S+(b.avail_out-257),_=w.dmax;y=w.wsize;var T=w.whave,A=w.wnext,x=w.window;g=w.hold,m=w.bits,f=w.lencode,d=w.distcode,s=(1<<w.lenbits)-1,u=(1<<w.distbits)-1;t:do{15>m&&(g+=a[k++]<<m,m+=8,g+=a[k++]<<m,m+=8);var R=f[g&s];n:for(;;){if(g>>>=i=R>>>24,m-=i,0===(i=R>>>16&255))c[S++]=65535&R;else{if(!(16&i)){if(0==(64&i)){R=f[(65535&R)+(g&(1<<i)-1)];continue n}32&i?w.mode=16191:(b.msg="invalid literal/length code",w.mode=16209);break t}l=65535&R,(i&=15)&&(m<i&&(g+=a[k++]<<m,m+=8),l+=g&(1<<i)-1,g>>>=i,m-=i),15>m&&(g+=a[k++]<<m,m+=8,g+=a[k++]<<m,m+=8),R=d[g&u];r:for(;;){if(g>>>=i=R>>>24,m-=i,!(16&(i=R>>>16&255))){if(0==(64&i)){R=d[(65535&R)+(g&(1<<i)-1)];continue r}b.msg="invalid distance code",w.mode=16209;break t}var O=65535&R;if(m<(i&=15)&&(g+=a[k++]<<m,(m+=8)<i&&(g+=a[k++]<<m,m+=8)),(O+=g&(1<<i)-1)>_){b.msg="invalid distance too far back",w.mode=16209;break t}if(g>>>=i,m-=i,O>(i=S-E)){if((i=O-i)>T&&w.sane){b.msg="invalid distance too far back",w.mode=16209;break t}var M=0;if(R=x,0===A){if(M+=y-i,i<l){l-=i;do{c[S++]=x[M++]}while(--i);M=S-O,R=c}}else if(A<i){if(M+=y+A-i,(i-=A)<l){l-=i;do{c[S++]=x[M++]}while(--i);if(M=0,A<l){l-=i=A;do{c[S++]=x[M++]}while(--i);M=S-O,R=c}}}else if(M+=A-i,i<l){l-=i;do{c[S++]=x[M++]}while(--i);M=S-O,R=c}for(;2<l;)c[S++]=R[M++],c[S++]=R[M++],c[S++]=R[M++],l-=3;l&&(c[S++]=R[M++],1<l&&(c[S++]=R[M++]))}else{M=S-O;do{c[S++]=c[M++],c[S++]=c[M++],c[S++]=c[M++],l-=3}while(2<l);l&&(c[S++]=c[M++],1<l&&(c[S++]=c[M++]))}break}}break}}while(k<C&&S<I);k-=l=m>>3,m-=l<<3,b.next_in=k,b.next_out=S,b.avail_in=k<C?C-k+5:5-(k-C),b.avail_out=S<I?I-S+257:257-(S-I),w.hold=g&(1<<m)-1,w.bits=m,i=e.next_out,a=e.output,s=e.avail_out,l=e.next_in,c=e.input,u=e.avail_in,d=o.hold,f=o.bits,16191===o.mode&&(o.back=-1);break}for(o.back=0;m=(y=o.lencode[d&(1<<o.lenbits)-1])>>>24,g=y>>>16&255,y&=65535,!(m<=f);){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(g&&0==(240&g)){for(x=m,A=g,T=y;m=(y=o.lencode[T+((d&(1<<x+A)-1)>>x)])>>>24,g=y>>>16&255,y&=65535,!(x+m<=f);){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}d>>>=x,f-=x,o.back+=x}if(d>>>=m,f-=m,o.back+=m,o.length=y,0===g){o.mode=16205;break}if(32&g){o.back=-1,o.mode=16191;break}if(64&g){e.msg="invalid literal/length code",o.mode=16209;break}o.extra=15&g,o.mode=16201;case 16201:if(o.extra){for(g=o.extra;f<g;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}o.length+=d&(1<<o.extra)-1,d>>>=o.extra,f-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=16202;case 16202:for(;m=(y=o.distcode[d&(1<<o.distbits)-1])>>>24,g=y>>>16&255,y&=65535,!(m<=f);){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(0==(240&g)){for(x=m,A=g,T=y;m=(y=o.distcode[T+((d&(1<<x+A)-1)>>x)])>>>24,g=y>>>16&255,y&=65535,!(x+m<=f);){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}d>>>=x,f-=x,o.back+=x}if(d>>>=m,f-=m,o.back+=m,64&g){e.msg="invalid distance code",o.mode=16209;break}o.offset=y,o.extra=15&g,o.mode=16203;case 16203:if(o.extra){for(g=o.extra;f<g;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}o.offset+=d&(1<<o.extra)-1,d>>>=o.extra,f-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){e.msg="invalid distance too far back",o.mode=16209;break}o.mode=16204;case 16204:if(0===s)break e;if(m=p-s,o.offset>m){if((m=o.offset-m)>o.whave&&o.sane){e.msg="invalid distance too far back",o.mode=16209;break}m>o.wnext?(m-=o.wnext,g=o.wsize-m):g=o.wnext-m,m>o.length&&(m=o.length),x=o.window}else x=a,g=i-o.offset,m=o.length;m>s&&(m=s),s-=m,o.length-=m;do{a[i++]=x[g++]}while(--m);0===o.length&&(o.mode=16200);break;case 16205:if(0===s)break e;a[i++]=o.length,s--,o.mode=16200;break;case 16206:if(o.wrap){for(;32>f;){if(0===u)break e;u--,d|=c[l++]<<f,f+=8}if(p-=s,e.total_out+=p,o.total+=p,4&o.wrap&&p&&(e.adler=o.check=o.flags?xo(o.check,a,p,i-p):To(o.check,a,p,i-p)),p=s,4&o.wrap&&(o.flags?d:Ji(d))!==o.check){e.msg="incorrect data check",o.mode=16209;break}f=d=0}o.mode=16207;case 16207:if(o.wrap&&o.flags){for(;32>f;){if(0===u)break e;u--,d+=c[l++]<<f,f+=8}if(4&o.wrap&&d!==(4294967295&o.total)){e.msg="incorrect length check",o.mode=16209;break}f=d=0}o.mode=16208;case 16208:v=Vi;break e;case 16209:v=qi;break e;case 16210:return Zi;default:return Hi}return e.next_out=i,e.avail_out=s,e.next_in=l,e.avail_in=u,o.hold=d,o.bits=f,(o.wsize||p!==e.avail_out&&16209>o.mode&&(16206>o.mode||t!==Bi))&&ra(e,e.output,e.next_out,p-e.avail_out),h-=e.avail_in,p-=e.avail_out,e.total_in+=h,e.total_out+=p,o.total+=p,4&o.wrap&&p&&(e.adler=o.check=o.flags?xo(o.check,a,p,e.next_out-p):To(o.check,a,p,e.next_out-p)),e.data_type=o.bits+(o.last?64:0)+(16191===o.mode?128:0)+(16199===o.mode||16194===o.mode?256:0),(0===h&&0===p||t===Bi)&&v===zi&&(v=Yi),v},inflateEnd:function(e){if(Xi(e))return Hi;var t=e.state;return t.window&&(t.window=null),e.state=null,zi},inflateGetHeader:function(e,t){return Xi(e)||0==(2&(e=e.state).wrap)?Hi:(e.head=t,t.done=!1,zi)},inflateSetDictionary:function(e,t){var n=t.length;if(Xi(e))return Hi;var r=e.state;if(0!==r.wrap&&16190!==r.mode)return Hi;if(16190===r.mode&&To(1,t,n,0)!==r.check)return qi;return ra(e,t,n,n)?(r.mode=16210,Zi):(r.havedict=1,zi)},inflateInfo:"pako inflate (from Nodeca project)"},ia=function(){this.os=this.xflags=this.time=this.text=0,this.extra=null,this.extra_len=0,this.comment=this.name="",this.hcrc=0,this.done=!1},aa=Object.prototype.toString,sa=Oo.Z_NO_FLUSH,la=Oo.Z_FINISH,ca=Oo.Z_OK,ua=Oo.Z_STREAM_END,da=Oo.Z_NEED_DICT,fa=Oo.Z_STREAM_ERROR,ha=Oo.Z_DATA_ERROR,pa=Oo.Z_MEM_ERROR;ce.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;var i=t===~~t?t:!0===t?la:sa;for("[object ArrayBuffer]"===aa.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(t=oa.inflate(n,i))===da&&o&&((t=oa.inflateSetDictionary(n,o))===ca?t=oa.inflate(n,i):t===ha&&(t=da));0<n.avail_in&&t===ua&&0<n.state.wrap&&0!==e[n.next_in];)oa.inflateReset(n),t=oa.inflate(n,i);switch(t){case fa:case ha:case da:case pa:return this.onEnd(t),this.ended=!0,!1}var a=n.avail_out;if(n.next_out&&(0===n.avail_out||t===ua))if("string"===this.options.to){var s=wi.utf8border(n.output,n.next_out),l=n.next_out-s,c=wi.buf2string(n.output,s);n.next_out=l,n.avail_out=r-l,l&&n.output.set(n.output.subarray(s,s+l),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(t!==ca||0!==a){if(t===ua){t=oa.inflateEnd(this.strm),this.onEnd(t),this.ended=!0;break}if(0===n.avail_in)break}}return!0},ce.prototype.onData=function(e){this.chunks.push(e)},ce.prototype.onEnd=function(e){e===ca&&(this.result="string"===this.options.to?this.chunks.join(""):gi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var va,ga,ma,ya={Deflate:ae,deflate:se,deflateRaw:function(e,t){return(t=t||{}).raw=!0,se(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,se(e,t)},Inflate:ce,inflate:ue,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ue(e,t)},ungzip:ue,constants:Oo},ba=["inputs"],wa=["inputId"],ka=["inputs"],Ca=["inputId"],Sa=["type"],Ea=Object.defineProperty,Ia=function(e,t,n){return(t="symbol"!==S(t)?t+"":t)in e?Ea(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},_a=Object.defineProperty,Ta=function(e,t,n){return(t="symbol"!==S(t)?t+"":t)in e?_a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Aa=function(e){return e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e}(Aa||{}),xa={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Ra={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Oa={},Ma={},Na={},La={childNodes:function(e){return fe("Node",e,"childNodes")},parentNode:function(e){return fe("Node",e,"parentNode")},parentElement:function(e){return fe("Node",e,"parentElement")},textContent:function(e){return fe("Node",e,"textContent")},contains:function(e,t){return he("Node",e,"contains")(t)},getRootNode:function(e){return he("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?fe("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?fe("Element",e,"shadowRoot"):null},querySelector:function(e,t){return fe("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return fe("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return de("MutationObserver").constructor}},Da=s((function e(){o(this,e),Ta(this,"idNodeMap",new Map),Ta(this,"nodeMetaMap",new WeakMap)}),[{key:"getId",value:function(e){var t;return e&&null!=(e=null==(t=this.getMeta(e))?void 0:t.id)?e:-1}},{key:"getNode",value:function(e){return this.idNodeMap.get(e)||null}},{key:"getIds",value:function(){return Array.from(this.idNodeMap.keys())}},{key:"getMeta",value:function(e){return this.nodeMetaMap.get(e)||null}},{key:"removeNodeFromMap",value:function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))}},{key:"has",value:function(e){return this.idNodeMap.has(e)}},{key:"hasNode",value:function(e){return this.nodeMetaMap.has(e)}},{key:"add",value:function(e,t){this.idNodeMap.set(t.id,e),this.nodeMetaMap.set(e,t)}},{key:"replace",value:function(e,t){var n=this.getNode(e);n&&(n=this.nodeMetaMap.get(n))&&this.nodeMetaMap.set(t,n),this.idNodeMap.set(e,t)}},{key:"reset",value:function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}]),Pa=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Ua=/^(?:[a-z+]+:)?\/\//i,Fa=/^www\..*/i,Ba=/^(data:)([^,]*),(.*)/i,Ga=1,ja=/[^a-z0-9-_:]/,za=/^[^ \t\n\r\u000c]+/,Va=/^[, \t\n\r\u000c]+/,Wa=new WeakMap,Ha={},qa=String,Za=function(){return{isColorSupported:!1,reset:qa,bold:qa,dim:qa,italic:qa,underline:qa,inverse:qa,hidden:qa,strikethrough:qa,black:qa,red:qa,green:qa,yellow:qa,blue:qa,magenta:qa,cyan:qa,white:qa,gray:qa,bgBlack:qa,bgRed:qa,bgGreen:qa,bgYellow:qa,bgBlue:qa,bgMagenta:qa,bgCyan:qa,bgWhite:qa}};(Ha=Za()).createColors=Za;var Ya=Ha,Ka=function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),Ja=function(e){function t(e,n,i,a,s,l){o(this,t);var c=r(this,t,[e]);return c.name="CssSyntaxError",c.reason=e,s&&(c.file=s),a&&(c.source=a),l&&(c.plugin=l),void 0!==n&&void 0!==i&&("number"==typeof n?(c.line=n,c.column=i):(c.line=n.line,c.column=n.column,c.endLine=i.line,c.endColumn=i.column)),c.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(c,t),c}return f(t,e),s(t,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var t=this;if(!this.source)return"";var n=this.source;null==e&&(e=Ya.isColorSupported),Ka&&e&&(n=Ka(n)),n=n.split(/\r?\n/);var r=Math.max(this.line-3,0),o=Math.min(this.line+2,n.length),i=String(o).length;if(e)var a=(e=Ya.createColors(!0)).bold,s=e.gray,l=e.red,c=function(e){return a(l(e))},u=function(e){return s(e)};else c=u=function(e){return e};return n.slice(r,o).map((function(e,n){var o=r+1+n;return n=" "+(" "+o).slice(-i)+" | ",o===t.line?(o=u(n.replace(/\d/g," "))+e.slice(0,t.column-1).replace(/[^\t]/g," "),c(">")+u(n)+e+"\n "+o+c("^")):" "+u(n)+e})).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(I(Error));Ja.default=Ja;var Xa=Symbol("isClean"),Qa=Symbol("my"),$a={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1},es=s((function e(t){o(this,e),this.builder=t}),[{key:"atrule",value:function(e,t){var n="@"+e.name,r=e.params?this.rawValue(e,"params"):"";void 0!==e.raws.afterName?n+=e.raws.afterName:r&&(n+=" "),e.nodes?this.block(e,n+r):this.builder(n+r+((e.raws.between||"")+(t?";":"")),e)}},{key:"beforeAfter",value:function(e,t){t="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var n=e.parent,r=0;n&&"root"!==n.type;)r+=1,n=n.parent;if(t.includes("\n")&&(e=this.raw(e,null,"indent")).length)for(n=0;n<r;n++)t+=e;return t}},{key:"block",value:function(e,t){var n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),t=this.raw(e,"after")):t=this.raw(e,"after","emptyBody"),t&&this.builder(t),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var t=e.nodes.length-1;0<t&&"comment"===e.nodes[t].type;)--t;for(var n=this.raw(e,"semicolon"),r=0;r<e.nodes.length;r++){var o=e.nodes[r],i=this.raw(o,"before");i&&this.builder(i),this.stringify(o,t!==r||n)}}},{key:"comment",value:function(e){var t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}},{key:"decl",value:function(e,t){var n=this.raw(e,"between","colon");n=e.prop+n+this.rawValue(e,"value"),e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,t,n){if(n||(n=t),t){var r=e.raws[t];if(void 0!==r)return r}var o=e.parent;if("before"===n&&(!o||"root"===o.type&&o.first===e||o&&"document"===o.type))return"";if(!o)return $a[n];if((o=e.root()).rawCache||(o.rawCache={}),void 0!==o.rawCache[n])return o.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);var i="raw"+function(e){return e[0].toUpperCase()+e.slice(1)}(n);return this[i]?r=this[i](o,e):o.walk((function(e){if(void 0!==(r=e.raws[t]))return!1})),void 0===r&&(r=$a[n]),o.rawCache[n]=r}},{key:"rawBeforeClose",value:function(e){var t;return e.walk((function(e){if(e.nodes&&0<e.nodes.length&&void 0!==e.raws.after)return(t=e.raws.after).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawBeforeComment",value:function(e,t){var n;return e.walkComments((function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeDecl",value:function(e,t){var n;return e.walkDecls((function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeOpen",value:function(e){var t;return e.walk((function(e){if("decl"!==e.type&&void 0!==(t=e.raws.between))return!1})),t}},{key:"rawBeforeRule",value:function(e){var t;return e.walk((function(n){if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return(t=n.raws.before).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawColon",value:function(e){var t;return e.walkDecls((function(e){if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}},{key:"rawEmptyBody",value:function(e){var t;return e.walk((function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(t=e.raws.after))return!1})),t}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk((function(n){var r=n.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==n.raws.before)return n=n.raws.before.split("\n"),t=(t=n[n.length-1]).replace(/\S/g,""),!1})),t);var t}},{key:"rawSemicolon",value:function(e){var t;return e.walk((function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(t=e.raws.semicolon))return!1})),t}},{key:"rawValue",value:function(e,t){var n=e[t];return(e=e.raws[t])&&e.value===n?e.raw:n}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,t){if(!this[e.type])throw Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}]),ts=es.default=es;Le.default=Le;var ns=s((function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var n in o(this,e),this.raws={},this[Xa]=!1,this[Qa]=!0,t)if("nodes"===n){this.nodes=[];var r,i=l(t[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;"function"==typeof a.clone?this.append(a.clone()):this.append(a)}}catch(e){i.e(e)}finally{i.f()}}else this[n]=t[n]}),[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(t.input.from,":").concat(t.start.line,":").concat(t.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(e in t)this[e]=t[e];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=De(this);for(e in t)n[e]=t[e];return n}},{key:"cloneAfter",value:function(){var e=this.clone(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return this.parent.insertAfter(this,e),e}},{key:"cloneBefore",value:function(){var e=this.clone(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return this.parent.insertBefore(this,e),e}},{key:"error",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var n=this.rangeBy(t),r=n.end;return n=n.start,this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new Ja(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:"root"===t?function(){return e.root().toProxy()}:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[Xa]){this[Xa]=!1;for(var e=this;e=e.parent;)e[Xa]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,t){var n=this.source.start;return e.index?n=this.positionInside(e.index,t):e.word&&-1!==(e=(t=this.toString()).indexOf(e.word))&&(n=this.positionInside(e,t)),n}},{key:"positionInside",value:function(e,t){t=t||this.toString();for(var n=this.source.start.column,r=this.source.start.line,o=0;o<e;o++)"\n"===t[o]?(n=1,r+=1):n+=1;return{column:n,line:r}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var t={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){var r=this.toString(),o=r.indexOf(e.word);-1!==o&&(t=this.positionInside(o,r),n=this.positionInside(o+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<t.line||n.line===t.line&&n.column<=t.column)&&(n={column:t.column+1,line:t.line}),{end:n,start:t}}},{key:"raw",value:function(e,t){return(new es).raw(this,e,t)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,t=!1,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];for(n=0;n<r.length;n++)(o=r[n])===this?t=!0:t?(this.parent.insertAfter(e,o),e=o):this.parent.insertBefore(e,o);t||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,t){e={};var n=null==t;t=t||new Map;var r,o=0;for(r in this)if(Object.prototype.hasOwnProperty.call(this,r)&&"parent"!==r&&"proxyCache"!==r){var i=this[r];if(Array.isArray(i))e[r]=i.map((function(e){return"object"===S(e)&&e.toJSON?e.toJSON(null,t):e}));else if("object"===S(i)&&i.toJSON)e[r]=i.toJSON(null,t);else if("source"===r){var a=t.get(i.input);null==a&&(a=o,t.set(i.input,o),o++),e[r]={end:i.end,inputId:a,start:i.start}}else e[r]=i}return n&&(e.inputs=k(t.keys()).map((function(e){return e.toJSON()}))),e}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Le;e.stringify&&(e=e.stringify);var t="";return e(this,(function(e){t+=e})),t}},{key:"warn",value:function(e,t,n){var r,o={node:this};for(r in n)o[r]=n[r];return e.warn(t,o)}},{key:"proxyOf",get:function(){return this}}]);ns.default=ns;var rs=function(e){function t(e){return o(this,t),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=v(v({},e),{},{value:String(e.value)})),(e=r(this,t,[e])).type="decl",e}return f(t,e),s(t,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(ns);rs.default=rs;var os=Ka.SourceMapConsumer,is=Ka.SourceMapGenerator,as=Ka.existsSync,ss=Ka.readFileSync,ls=Ka.dirname,cs=Ka.join,us=s((function e(t,n){o(this,e),!1!==n.map&&(this.loadAnnotation(t),this.inline=this.startWith(this.annotation,"data:"),t=this.loadMap(n.from,n.map?n.map.prev:void 0),!this.mapFile&&n.from&&(this.mapFile=n.from),this.mapFile&&(this.root=ls(this.mapFile)),t&&(this.text=t))}),[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new os(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return e=e.substr(RegExp.lastMatch.length),e=Buffer?Buffer.from(e,"base64").toString():window.atob(e);throw e=e.match(/data:application\/json;([^,]+),/)[1],Error("Unsupported source map encoding "+e)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===S(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(t){t=e.lastIndexOf(t.pop());var n=e.indexOf("*/",t);-1<t&&-1<n&&(this.annotation=this.getAnnotationURL(e.substring(t,n)))}}},{key:"loadFile",value:function(e){if(this.root=ls(e),as(e))return this.mapFile=e,ss(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof os)return is.fromSourceMap(t).toString();if(t instanceof is)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw Error("Unsupported previous source map format: "+t.toString())}if(e=t(e)){if(!(t=this.loadFile(e)))throw Error("Unable to load previous source map: "+e.toString());return t}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation)return t=this.annotation,e&&(t=cs(ls(e),t)),this.loadFile(t)}}},{key:"startWith",value:function(e,t){return!!e&&e.substr(0,t.length)===t}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&0<this.consumer().sourcesContent.length)}}]);us.default=us;var ds=Ka.SourceMapConsumer,fs=Ka.SourceMapGenerator,hs=Ka.fileURLToPath,ps=Ka.pathToFileURL,vs=Ka.isAbsolute,gs=Ka.resolve,ms=function(){for(var e="",t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:21;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},ys=Symbol("fromOffsetCache"),bs=!(!ds||!fs),ws=!(!gs||!vs),ks=s((function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),null==t||"object"===S(t)&&!t.toString)throw Error("PostCSS received ".concat(t," instead of CSS string"));this.css=t.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,n.from&&(!ws||/^\w+:\/\//.test(n.from)||vs(n.from)?this.file=n.from:this.file=gs(n.from)),ws&&bs&&(n=new us(this.css,n)).text&&(this.map=n,n=n.consumer().file,!this.file&&n&&(this.file=this.mapResolve(n))),this.file||(this.id="<input css "+ms(6)+">"),this.map&&(this.map.file=this.from)}),[{key:"error",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(t&&"object"===S(t)){var o=t,i=n;"number"==typeof o.offset?(t=(o=this.fromOffset(o.offset)).line,n=o.col):(t=o.line,n=o.column),"number"==typeof i.offset?(o=(i=this.fromOffset(i.offset)).line,i=i.col):(o=i.line,i=i.column)}else if(!n){var a=this.fromOffset(t);t=a.line,n=a.col}return(r=(a=this.origin(t,n,o,i))?new Ja(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):new Ja(e,void 0===o?t:{column:n,line:t},void 0===o?n:{column:i,line:o},this.css,this.file,r.plugin)).input={column:n,endColumn:i,endLine:o,line:t,source:this.css},this.file&&(ps&&(r.input.url=ps(this.file).toString()),r.input.file=this.file),r}},{key:"fromOffset",value:function(e){if(this[ys])var t=this[ys];else{var n=this.css.split("\n");t=Array(n.length);for(var r=0,o=0,i=n.length;o<i;o++)t[o]=r,r+=n[o].length+1;this[ys]=t}if(n=0,e>=t[t.length-1])n=t.length-1;else for(r=t.length-2;n<r;)if(e<t[o=n+(r-n>>1)])r=o-1;else{if(!(e>=t[o+1])){n=o;break}n=o+1}return{col:e-t[n]+1,line:n+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:gs(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,t,n,r){if(!this.map)return!1;var o,i=this.map.consumer();if(!(e=i.originalPositionFor({column:t,line:e})).source)return!1;if("number"==typeof n&&(o=i.originalPositionFor({column:r,line:n})),n=vs(e.source)?ps(e.source):new URL(e.source,this.map.consumer().sourceRoot||ps(this.map.mapFile)),o={column:e.column,endColumn:o&&o.column,endLine:o&&o.line,line:e.line,url:n.toString()},"file:"===n.protocol){if(!hs)throw Error("file: protocol is not available in this PostCSS build");o.file=hs(n)}return(i=i.sourceContentFor(e.source))&&(o.source=i),o}},{key:"toJSON",value:function(){for(var e={},t=0,n=["hasBOM","css","file","id"];t<n.length;t++){var r=n[t];null!=this[r]&&(e[r]=this[r])}return this.map&&(e.map=v({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}]);ks.default=ks,Ka&&Ka.registerInput&&Ka.registerInput(ks);var Cs=Ka.SourceMapConsumer,Ss=Ka.SourceMapGenerator,Es=Ka.dirname,Is=Ka.relative,_s=Ka.resolve,Ts=Ka.sep,As=Ka.pathToFileURL,xs=!(!Cs||!Ss),Rs=!!(Es&&_s&&Is&&Ts),Os=s((function e(t,n,r,i){o(this,e),this.stringify=t,this.mapOpts=r.map||{},this.root=n,this.opts=r,this.originalCSS=this.css=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}),[{key:"addAnnotation",value:function(){var e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map",t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,t=l(this.previous());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.toUrl(this.path(n.file)),o=n.root||Es(n.file),i=void 0;!1===this.mapOpts.sourcesContent?(i=new Cs(n.text)).sourcesContent&&(i.sourcesContent=null):i=n.consumer(),this.map.applySourceMap(i,r,this.toUrl(this.path(o)))}}catch(e){t.e(e)}finally{t.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,t=this.root.nodes.length-1;0<=t;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),Rs&&xs&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,(function(t){e+=t})),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Ss.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Ss({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&0<this.previous().length&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new Ss({file:this.outputFile(),ignoreInvalidMapping:!0});var t,n,r=1,o=1,i={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(function(a,s,l){e.css+=a,s&&"end"!==l&&(i.generated.line=r,i.generated.column=o-1,s.source&&s.source.start?(i.source=e.sourcePath(s),i.original.line=s.source.start.line,i.original.column=s.source.start.column-1):(i.source="<no source>",i.original.line=1,i.original.column=0),e.map.addMapping(i)),(t=a.match(/\n/g))?(r+=t.length,n=a.lastIndexOf("\n"),o=a.length-n):o+=a.length,s&&"start"!==l&&(a=s.parent||{raws:{}},"decl"!==s.type&&("atrule"!==s.type||s.nodes)||s!==a.last||a.raws.semicolon)&&(s.source&&s.source.end?(i.source=e.sourcePath(s),i.original.line=s.source.end.line,i.original.column=s.source.end.column-1,i.generated.line=r,i.generated.column=o-2):(i.source="<no source>",i.original.line=1,i.original.column=0,i.generated.line=r,i.generated.column=o-1),e.map.addMapping(i))}))}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((function(e){return e.annotation})))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((function(e){return e.inline})))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:0<this.previous().length}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((function(e){return e.withContent()}))}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute||60===e.charCodeAt(0)||/^\w+:\/\//.test(e))return e;var t=this.memoizedPaths.get(e);return t||(t=this.opts.to?Es(this.opts.to):".","string"==typeof this.mapOpts.annotation&&(t=Es(_s(t,this.mapOpts.annotation))),t=Is(t,e),this.memoizedPaths.set(e,t),t)}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((function(t){t.source&&t.source.input.map&&(t=t.source.input.map,e.previousMaps.includes(t)||e.previousMaps.push(t))}));else{var t=new ks(this.originalCSS,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,t={};if(this.root)this.root.walk((function(n){if(n.source){var r=n.source.input.from;r&&!t[r]&&(t[r]=!0,r=e.usesFileUrls?e.toFileUrl(r):e.toUrl(e.path(r)),e.map.setSourceContent(r,n.source.input.css))}}));else if(this.css){var n=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(n,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var t=this.memoizedFileURLs.get(e);if(t)return t;if(As)return t=As(e).toString(),this.memoizedFileURLs.set(e,t),t;throw Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var t=this.memoizedURLs.get(e);return t||("\\"===Ts&&(e=e.replace(/\\/g,"/")),t=encodeURI(e).replace(/[#?]/g,encodeURIComponent),this.memoizedURLs.set(e,t),t)}}]),Ms=function(e){function t(e){return o(this,t),(e=r(this,t,[e])).type="comment",e}return f(t,e),s(t)}(ns);Ms.default=Ms;var Ns,Ls,Ds,Ps,Us=Xa,Fs=function(e){function t(){return o(this,t),r(this,t,arguments)}return f(t,e),s(t,[{key:"append",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(e=0;e<t.length;e++){var r;n=l(n=this.normalize(t[e],this.last));try{for(n.s();!(r=n.n()).done;)this.proxyOf.nodes.push(r.value)}catch(e){n.e(e)}finally{n.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(w(t,"cleanRaws",this,3)([e]),this.nodes){var n,r=l(this.nodes);try{for(r.s();!(n=r.n()).done;)n.value.cleanRaws(e)}catch(e){r.e(e)}finally{r.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var t,n=this.getIterator();this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],!1!==(t=e(this.proxyOf.nodes[t],t)));)this.indexes[n]+=1;return delete this.indexes[n],t}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={});var e=this.lastEach+=1;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return e[t].apply(e,k(r.map((function(e){return"function"==typeof e?function(t,n){return e(t.toProxy(),n)}:e}))))}:"every"===t||"some"===t?function(n){return e[t]((function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n.apply(void 0,[e.toProxy()].concat(r))}))}:"root"===t?function(){return e.root().toProxy()}:"nodes"===t?e.nodes.map((function(e){return e.toProxy()})):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,t){var n,r=this.index(e);t=this.normalize(t,this.proxyOf.nodes[r]).reverse(),r=this.index(e),e=l(t);try{for(e.s();!(n=e.n()).done;)this.proxyOf.nodes.splice(r+1,0,n.value)}catch(t){e.e(t)}finally{e.f()}for(var o in this.indexes)r<(n=this.indexes[o])&&(this.indexes[o]=n+t.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,t){var n,r=this.index(e);t=this.normalize(t,this.proxyOf.nodes[r],0===r&&"prepend").reverse(),r=this.index(e),e=l(t);try{for(e.s();!(n=e.n()).done;)this.proxyOf.nodes.splice(r,0,n.value)}catch(t){e.e(t)}finally{e.f()}for(var o in this.indexes)r<=(n=this.indexes[o])&&(this.indexes[o]=n+t.length);return this.markDirty(),this}},{key:"normalize",value:function(e,n){var r=this;if("string"==typeof e)e=Pe(Ns(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var o,i=l(e=e.slice(0));try{for(i.s();!(o=i.n()).done;){var a=o.value;a.parent&&a.parent.removeChild(a,"ignore")}}catch(e){i.e(e)}finally{i.f()}}else if("root"===e.type&&"document"!==this.type){o=l(e=e.nodes.slice(0));try{for(o.s();!(i=o.n()).done;){var s=i.value;s.parent&&s.parent.removeChild(s,"ignore")}}catch(e){o.e(e)}finally{o.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new rs(e)]}else if(e.selector)e=[new Ls(e)];else if(e.name)e=[new Ds(e)];else{if(!e.text)throw Error("Unknown node type in node creation");e=[new Ms(e)]}return e.map((function(e){return e[Qa]||t.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[Us]&&Ue(e),void 0===e.raws.before&&n&&void 0!==n.raws.before&&(e.raws.before=n.raws.before.replace(/\S/g,"")),e.parent=r.proxyOf,e}))}},{key:"prepend",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;e=l(t=t.reverse());try{for(e.s();!(r=e.n()).done;){var o,i=this.normalize(r.value,this.first,"prepend").reverse(),a=l(i);try{for(a.s();!(o=a.n()).done;)this.proxyOf.nodes.unshift(o.value)}catch(e){a.e(e)}finally{a.f()}for(var s in this.indexes)this.indexes[s]+=i.length}}catch(t){e.e(t)}finally{e.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,t=l(this.proxyOf.nodes);try{for(t.s();!(e=t.n()).done;)e.value.parent=void 0}catch(e){t.e(e)}finally{t.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var t;for(t in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes){var n=this.indexes[t];n>=e&&(this.indexes[t]=n-1)}return this.markDirty(),this}},{key:"replaceValues",value:function(e,t,n){return n||(n=t,t={}),this.walkDecls((function(r){t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,n))})),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each((function(t,n){try{var r=e(t,n)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r}))}},{key:"walkAtRules",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("atrule"===n.type&&e.test(n.name))return t(n,r)})):this.walk((function(n,r){if("atrule"===n.type&&n.name===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("atrule"===e.type)return t(e,n)})))}},{key:"walkComments",value:function(e){return this.walk((function(t,n){if("comment"===t.type)return e(t,n)}))}},{key:"walkDecls",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("decl"===n.type&&e.test(n.prop))return t(n,r)})):this.walk((function(n,r){if("decl"===n.type&&n.prop===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("decl"===e.type)return t(e,n)})))}},{key:"walkRules",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("rule"===n.type&&e.test(n.selector))return t(n,r)})):this.walk((function(n,r){if("rule"===n.type&&n.selector===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("rule"===e.type)return t(e,n)})))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(ns);Fs.registerParse=function(e){Ns=e},Fs.registerRule=function(e){Ls=e},Fs.registerAtRule=function(e){Ds=e},Fs.registerRoot=function(e){Ps=e},Fs.default=Fs,Fs.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,Ds.prototype):"rule"===e.type?Object.setPrototypeOf(e,Ls.prototype):"decl"===e.type?Object.setPrototypeOf(e,rs.prototype):"comment"===e.type?Object.setPrototypeOf(e,Ms.prototype):"root"===e.type&&Object.setPrototypeOf(e,Ps.prototype),e[Qa]=!0,e.nodes&&e.nodes.forEach((function(e){Fs.rebuild(e)}))};var Bs,Gs,js=function(e){function t(e){return o(this,t),(e=r(this,t,[v({type:"document"},e)])).nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"toResult",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Bs(new Gs,this,e).stringify()}}])}(Fs);js.registerLazyResult=function(e){Bs=e},js.registerProcessor=function(e){Gs=e},js.default=js;var zs=s((function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),this.type="warning",this.text=t,n.node&&n.node.source){var r=n.node.rangeBy(n);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(var i in n)this[i]=n[i]}),[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}]);zs.default=zs;var Vs=s((function e(t,n,r){o(this,e),this.processor=t,this.messages=[],this.root=n,this.opts=r,this.map=this.css=void 0}),[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!t.plugin&&this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin),t=new zs(e,t),this.messages.push(t),t}},{key:"warnings",value:function(){return this.messages.filter((function(e){return"warning"===e.type}))}},{key:"content",get:function(){return this.css}}]);Vs.default=Vs;var Ws=/[\t\n\f\r "#'()/;[\\\]{}]/g,Hs=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,qs=/.[\r\n"'(/\\]/,Zs=/[\da-f]/i,Ys=function(e){function t(e){return o(this,t),(e=r(this,t,[e])).type="atrule",e}return f(t,e),s(t,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return w(t,"append",this,3)(n)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return w(t,"prepend",this,3)(n)}}])}(Fs);Ys.default=Ys,Fs.registerAtRule(Ys);var Ks,Js,Xs=function(e){function t(e){return o(this,t),(e=r(this,t,[e])).type="root",e.nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"normalize",value:function(e,n,r){if(e=w(t,"normalize",this,3)([e]),n)if("prepend"===r)1<this.nodes.length?n.raws.before=this.nodes[1].raws.before:delete n.raws.before;else if(this.first!==n){var o;r=l(e);try{for(r.s();!(o=r.n()).done;)o.value.raws.before=n.raws.before}catch(e){r.e(e)}finally{r.f()}}return e}},{key:"removeChild",value:function(e,n){var r=this.index(e);return!n&&0===r&&1<this.nodes.length&&(this.nodes[1].raws.before=this.nodes[r].raws.before),w(t,"removeChild",this,3)([e])}},{key:"toResult",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Ks(new Js,this,e).stringify()}}])}(Fs);Xs.registerLazyResult=function(e){Ks=e},Xs.registerProcessor=function(e){Js=e},Xs.default=Xs,Fs.registerRoot(Xs);var Qs={comma:function(e){return Qs.split(e,[","],!0)},space:function(e){return Qs.split(e,[" ","\n","\t"])},split:function(e,t,n){var r,o=[],i="",a=!1,s=0,c=!1,u="",d=!1;e=l(e);try{for(e.s();!(r=e.n()).done;){var f=r.value;d?d=!1:"\\"===f?d=!0:c?f===u&&(c=!1):'"'===f||"'"===f?(c=!0,u=f):"("===f?s+=1:")"===f?0<s&&--s:0===s&&t.includes(f)&&(a=!0),a?(""!==i&&o.push(i.trim()),i="",a=!1):i+=f}}catch(t){e.e(t)}finally{e.f()}return(n||""!==i)&&o.push(i.trim()),o}},$s=Qs;Qs.default=Qs;var el=function(e){function t(e){return o(this,t),(e=r(this,t,[e])).type="rule",e.nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"selectors",get:function(){return $s.comma(this.selector)},set:function(e){var t=this.selector?this.selector.match(/,\s*/):null;t=t?t[0]:","+this.raw("between","beforeOpen"),this.selector=e.join(t)}}])}(Fs);el.default=el,Fs.registerRule(el);var tl={empty:!0,space:!0},nl=s((function e(t){o(this,e),this.input=t,this.current=this.root=new Xs,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:t,start:{column:1,line:1,offset:0}}}),[{key:"atrule",value:function(e){var t=new Ys;t.name=e[1].slice(1),""===t.name&&this.unnamedAtrule(t,e),this.init(t,e[2]);var n,r=!1,o=!1,i=[];for(n=[];!this.tokenizer.endOfFile();){var a=(e=this.tokenizer.nextToken())[0];if("("===a||"["===a?n.push("("===a?")":"]"):"{"===a&&0<n.length?n.push("}"):a===n[n.length-1]&&n.pop(),0===n.length){if(";"===a){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}if("{"===a){o=!0;break}if("}"===a){if(0<i.length){for(a=i[n=i.length-1];a&&"space"===a[0];)a=i[--n];a&&(t.source.end=this.getPosition(a[3]||a[2]),t.source.end.offset++)}this.end(e);break}i.push(e)}else i.push(e);if(this.tokenizer.endOfFile()){r=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(i),i.length?(t.raws.afterName=this.spacesAndCommentsFromStart(i),this.raw(t,"params",i),r&&(e=i[i.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),o&&(t.nodes=[],this.current=t)}},{key:"checkMissedSemicolon",value:function(e){var t=this.colon(e);if(!1!==t){var n=0;for(--t;0<=t;t--){var r=e[t];if("space"!==r[0]&&2===(n+=1))break}throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}}},{key:"colon",value:function(e){var t,n=0;e=l(e.entries());try{for(e.s();!(t=e.n()).done;){var r=b(t.value,2),o=r[0],i=r[1],a=i[0];if("("===a&&(n+=1),")"===a&&--n,0===n&&":"===a){if(s){if("word"===s[0]&&"progid"===s[1])continue;return o}this.doubleColon(i)}var s=i}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"comment",value:function(e){var t=new Ms;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,e=e[1].slice(2,-2),/^\s*$/.test(e)?(t.text="",t.raws.left=e,t.raws.right=""):(e=e.match(/^(\s*)([^]*\S)(\s*)$/),t.text=e[2],t.raws.left=e[1],t.raws.right=e[3])}},{key:"createTokenizer",value:function(){this.tokenizer=function(e){function t(t){throw e.error("Unclosed "+t,v)}var n,r,o,i,a,s,l,c,u,d,f=e.css.valueOf(),h=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).ignoreErrors,p=f.length,v=0,g=[],m=[];return{back:function(e){m.push(e)},endOfFile:function(){return 0===m.length&&v>=p},nextToken:function(e){if(m.length)return m.pop();if(!(v>=p)){switch(e=!!e&&e.ignoreUnclosed,n=f.charCodeAt(v)){case 10:case 32:case 9:case 13:case 12:r=v;do{r+=1,n=f.charCodeAt(r)}while(32===n||10===n||9===n||13===n||12===n);d=["space",f.slice(v,r)],v=r-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:e=String.fromCharCode(n),d=[e,e,v];break;case 40:if(c=g.length?g.pop()[1]:"",u=f.charCodeAt(v+1),"url"===c&&39!==u&&34!==u&&32!==u&&10!==u&&9!==u&&12!==u&&13!==u){r=v;do{if(s=!1,-1===(r=f.indexOf(")",r+1))){if(h||e){r=v;break}t("bracket")}for(l=r;92===f.charCodeAt(l-1);)--l,s=!s}while(s);d=["brackets",f.slice(v,r+1),v,r],v=r}else r=f.indexOf(")",v+1),i=f.slice(v,r+1),-1===r||qs.test(i)?d=["(","(",v]:(d=["brackets",i,v,r],v=r);break;case 39:case 34:o=39===n?"'":'"',r=v;do{if(s=!1,-1===(r=f.indexOf(o,r+1))){if(h||e){r=v+1;break}t("string")}for(l=r;92===f.charCodeAt(l-1);)--l,s=!s}while(s);d=["string",f.slice(v,r+1),v,r],v=r;break;case 64:Ws.lastIndex=v+1,Ws.test(f),r=0===Ws.lastIndex?f.length-1:Ws.lastIndex-2,d=["at-word",f.slice(v,r+1),v,r],v=r;break;case 92:for(r=v,a=!0;92===f.charCodeAt(r+1);)r+=1,a=!a;if(n=f.charCodeAt(r+1),a&&47!==n&&32!==n&&10!==n&&9!==n&&13!==n&&12!==n&&(r+=1,Zs.test(f.charAt(r)))){for(;Zs.test(f.charAt(r+1));)r+=1;32===f.charCodeAt(r+1)&&(r+=1)}d=["word",f.slice(v,r+1),v,r],v=r;break;default:47===n&&42===f.charCodeAt(v+1)?(0===(r=f.indexOf("*/",v+2)+1)&&(h||e?r=f.length:t("comment")),d=["comment",f.slice(v,r+1),v,r]):(Hs.lastIndex=v+1,Hs.test(f),r=0===Hs.lastIndex?f.length-1:Hs.lastIndex-2,d=["word",f.slice(v,r+1),v,r],g.push(d)),v=r}return v++,d}},position:function(){return v}}}(this.input)}},{key:"decl",value:function(e,t){var n=new rs;this.init(n,e[0][2]);var r,o=e[e.length-1];for(";"===o[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(o[3]||o[2]||function(e){for(var t=e.length-1;0<=t;t--){var n=e[t];if(n=n[3]||n[2])return n}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length&&":"!==(o=e[0][0])&&"space"!==o&&"comment"!==o;)n.prop+=e.shift()[1];for(n.raws.between="";e.length;){if(":"===(r=e.shift())[0]){n.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),n.raws.between+=r[1]}for("_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1)),o=[];e.length&&("space"===(r=e[0][0])||"comment"===r);)o.push(e.shift());this.precheckMissedSemicolon(e);for(var i=e.length-1;0<=i;i--){if("!important"===(r=e[i])[1].toLowerCase()){n.important=!0,r=this.stringFrom(e,i)," !important"!==(r=this.spacesFromEnd(e)+r)&&(n.raws.important=r);break}if("important"===r[1].toLowerCase()){for(var a=e.slice(0),s="",l=i;0<l;l--){var c=a[l][0];if(0===s.trim().indexOf("!")&&"space"!==c)break;s=a.pop()[1]+s}0===s.trim().indexOf("!")&&(n.important=!0,n.raws.important=s,e=a)}if("space"!==r[0]&&"comment"!==r[0])break}e.some((function(e){return"space"!==e[0]&&"comment"!==e[0]}))&&(n.raws.between+=o.map((function(e){return e[1]})).join(""),o=[]),this.raw(n,"value",o.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var t=new el;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){this.spaces+=e[1],this.current.nodes&&(e=this.current.nodes[this.current.nodes.length-1])&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}},{key:"getPosition",value:function(e){var t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}},{key:"init",value:function(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var t=!1,n=!1,r=null,o=[],i=e[1].startsWith("--"),a=[],s=e;s;){if(e=s[0],a.push(s),"("===e||"["===e)r||(r=s),o.push("("===e?")":"]");else if(i&&n&&"{"===e)r||(r=s),o.push("}");else if(0===o.length){if(";"===e){if(n)return void this.decl(a,i);break}if("{"===e)return void this.rule(a);if("}"===e){this.tokenizer.back(a.pop()),t=!0;break}":"===e&&(n=!0)}else e===o[o.length-1]&&(o.pop(),0===o.length&&(r=null));s=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),0<o.length&&this.unclosedBracket(r),t&&n){if(!i)for(;a.length&&("space"===(s=a[a.length-1][0])||"comment"===s);)this.tokenizer.back(a.pop());this.decl(a,i)}else this.unknownWord(a)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,t,n,r){for(var o,i,a,s=n.length,l="",c=!0,u=0;u<s;u+=1)"space"!==(i=(o=n[u])[0])||u!==s-1||r?"comment"===i?(a=n[u-1]?n[u-1][0]:"empty",i=n[u+1]?n[u+1][0]:"empty",tl[a]||tl[i]||","===l.slice(-1)?c=!1:l+=o[1]):l+=o[1]:c=!1;c||(n=n.reduce((function(e,t){return e+t[1]}),""),e.raws[t]={raw:n,value:l}),e[t]=l}},{key:"rule",value:function(e){e.pop();var t=new el;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var t,n="";e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)n=e.pop()[1]+n;return n}},{key:"spacesAndCommentsFromStart",value:function(e){for(var t,n="";e.length&&("space"===(t=e[0][0])||"comment"===t);)n+=e.shift()[1];return n}},{key:"spacesFromEnd",value:function(e){for(var t="";e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t}},{key:"stringFrom",value:function(e,t){for(var n="",r=t;r<e.length;r++)n+=e[r][1];return e.splice(t,e.length-t),n}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}]),rl=ks;Fe.default=Fe,Fs.registerParse(Fe);var ol,il=Xa,al={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},sl={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},ll={Once:!0,postcssPlugin:!0,prepare:!0},cl={},ul=s((function e(t,n,r){var i=this;if(o(this,e),this.processed=this.stringified=!1,"object"!==S(n)||null===n||"root"!==n.type&&"document"!==n.type)if(n instanceof e||n instanceof Vs){var a=ze(n.root);n.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=n.map)}else{var s=Fe;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{a=s(n,r)}catch(e){this.processed=!0,this.error=e}a&&!a[Qa]&&Fs.rebuild(a)}else a=ze(n);this.result=new Vs(t,a,r),this.helpers=v(v({},cl),{},{postcss:cl,result:this.result}),this.plugins=this.processor.plugins.map((function(e){return"object"===S(e)&&e.prepare?v(v({},e),e.prepare(i.result)):e}))}),[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,t){var n=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin||(e.plugin=n.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var t,n=function(t,n,r){e.listeners[n]||(e.listeners[n]=[]),e.listeners[n].push([t,r])},r=l(this.plugins);try{for(r.s();!(t=r.n()).done;){var o=t.value;if("object"===S(o))for(var i in o){if(!sl[i]&&/^[A-Z]/.test(i))throw Error("Unknown event ".concat(i," in ").concat(o.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!ll[i])if("object"===S(o[i]))for(var a in o[i])n(o,"*"===a?i:i+"-"+a.toLowerCase(),o[i][a]);else"function"==typeof o[i]&&n(o,i,o[i])}}}catch(e){r.e(e)}finally{r.f()}this.hasListener=0<Object.keys(this.listeners).length}},{key:"runAsync",value:(ol=n(m().mark((function e(){var t,n,r,o,i,a,s,c,u,d,f=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.plugin=0;case 2:if(!(t<this.plugins.length)){e.next=17;break}if(n=this.plugins[t],!Be(r=this.runOnRoot(n))){e.next=14;break}return e.prev=6,e.next=9,r;case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),this.handleError(e.t0);case 14:t++,e.next=2;break;case 17:if(this.prepareVisitors(),!this.hasListener){e.next=56;break}o=this.result.root;case 20:if(o[il]){e.next=39;break}o[il]=!0,i=[je(o)];case 23:if(!(0<i.length)){e.next=37;break}if(!Be(a=this.visitTick(i))){e.next=35;break}return e.prev=26,e.next=29,a;case 29:e.next=35;break;case 31:throw e.prev=31,e.t1=e.catch(26),s=i[i.length-1].node,this.handleError(e.t1,s);case 35:e.next=23;break;case 37:e.next=20;break;case 39:if(!this.listeners.OnceExit){e.next=56;break}c=l(this.listeners.OnceExit),e.prev=41,d=m().mark((function e(){var t,n,r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b(u.value,2),n=t[0],r=t[1],f.result.lastPlugin=n,e.prev=2,"document"!==o.type){e.next=9;break}return i=o.nodes.map((function(e){return r(e,f.helpers)})),e.next=7,Promise.all(i);case 7:e.next=11;break;case 9:return e.next=11,r(o,f.helpers);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(2),f.handleError(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})),c.s();case 44:if((u=c.n()).done){e.next=48;break}return e.delegateYield(d(),"t2",46);case 46:e.next=44;break;case 48:e.next=53;break;case 50:e.prev=50,e.t3=e.catch(41),c.e(e.t3);case 53:return e.prev=53,c.f(),e.finish(53);case 56:return this.processed=!0,e.abrupt("return",this.stringify());case 58:case"end":return e.stop()}}),e,this,[[6,11],[26,31],[41,50,53,56]])}))),function(){return ol.apply(this,arguments)})},{key:"runOnRoot",value:function(e){var t=this;this.result.lastPlugin=e;try{if("object"===S(e)&&e.Once){if("document"===this.result.root.type){var n=this.result.root.nodes.map((function(n){return e.Once(n,t.helpers)}));return Be(n[0])?Promise.all(n):n}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,t=Le;return e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify),e=new Os(t,this.result.root,this.result.opts).generate(),this.result.css=e[0],this.result.map=e[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,t=l(this.plugins);try{for(t.s();!(e=t.n()).done;)if(Be(this.runOnRoot(e.value)))throw this.getAsyncError()}catch(e){t.e(e)}finally{t.f()}if(this.prepareVisitors(),this.hasListener){for(t=this.result.root;!t[il];)t[il]=!0,this.walkSync(t);if(this.listeners.OnceExit)if("document"===t.type){var n;t=l(t.nodes);try{for(t.s();!(n=t.n()).done;)this.visitSync(this.listeners.OnceExit,n.value)}catch(e){t.e(e)}finally{t.f()}}else this.visitSync(this.listeners.OnceExit,t)}return this.result}},{key:"then",value:function(e,t){return this.async().then(e,t)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,t){var n;e=l(e);try{for(e.s();!(n=e.n()).done;){var r=b(n.value,2),o=r[1];this.result.lastPlugin=r[0];var i=void 0;try{i=o(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(Be(i))throw this.getAsyncError()}}catch(t){e.e(t)}finally{e.f()}}},{key:"visitTick",value:function(e){var t=e[e.length-1],n=t.node,r=t.visitors;if("root"===n.type||"document"===n.type||n.parent){if(0<r.length&&t.visitorIndex<r.length){var o=b(r[t.visitorIndex],2);e=o[0],o=o[1],t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return o(n.toProxy(),this.helpers)}catch(e){throw this.handleError(e,n)}}if(0!==t.iterator){for(r=t.iterator;o=n.nodes[n.indexes[r]];)if(n.indexes[r]+=1,!o[il])return o[il]=!0,void e.push(je(o));t.iterator=0,delete n.indexes[r]}for(r=t.events;t.eventIndex<r.length;){if(o=r[t.eventIndex],t.eventIndex+=1,0===o)return void(n.nodes&&n.nodes.length&&(n[il]=!0,t.iterator=n.getIterator()));if(this.listeners[o])return void(t.visitors=this.listeners[o])}}e.pop()}},{key:"walkSync",value:function(e){var t=this;e[il]=!0;var n,r=Ge(e);r=l(r);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(0===o)e.nodes&&e.each((function(e){e[il]||t.walkSync(e)}));else{var i=this.listeners[o];if(i&&this.visitSync(i,e.toProxy()))break}}}catch(e){r.e(e)}finally{r.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);ul.registerPostcss=function(e){cl=e},ul.default=ul,Xs.registerLazyResult(ul),js.registerLazyResult(ul);var dl=s((function e(t,n,r){o(this,e),n=n.toString(),this.stringified=!1,this._processor=t,this._css=n,this._opts=r,this._map=void 0,this.result=new Vs(this._processor,void 0,this._opts),this.result.css=n;var i=this;Object.defineProperty(this.result,"root",{get:function(){return i.root}}),(t=new Os(Le,void 0,this._opts,n)).isMap()?(t=(n=b(t=t.generate(),2))[0],n=n[1],t&&(this.result.css=t),n&&(this.result.map=n)):(t.clearAnnotation(),this.result.css=t.css)}),[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,t){return this.async().then(e,t)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;try{var e=Fe(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}]);dl.default=dl;var fl=s((function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];o(this,e),this.version="8.4.38",this.plugins=this.normalize(t)}),[{key:"normalize",value:function(e){var t,n=[];e=l(e);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"===S(r)&&Array.isArray(r.plugins))n=n.concat(r.plugins);else if("object"===S(r)&&r.postcssPlugin)n.push(r);else if("function"==typeof r)n.push(r);else if("object"!==S(r)||!r.parse&&!r.stringify)throw Error(r+" is not a PostCSS plugin")}}catch(t){e.e(t)}finally{e.f()}return n}},{key:"process",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||t.parser||t.stringifier||t.syntax?new ul(this,e,t):new dl(this,e,t)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}]);fl.default=fl,Xs.registerProcessor(fl),js.registerProcessor(fl);var hl=rs,pl=us,vl=Ms,gl=Ys,ml=ks,yl=Xs,bl=el;Ve.default=Ve;var wl=fl;We.plugin=function(e,t){function n(){console&&console.warn&&!o&&(o=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));var n=t.apply(void 0,arguments);return n.postcssPlugin=e,n.postcssVersion=(new wl).version,n}var r,o=!1;return Object.defineProperty(n,"postcss",{get:function(){return r||(r=n()),r}}),n.process=function(e,t,r){return We([n(r)]).process(e,t)},n},We.stringify=Le,We.parse=Fe,We.fromJSON=Ve,We.list=$s,We.comment=function(e){return new Ms(e)},We.atRule=function(e){return new Ys(e)},We.decl=function(e){return new rs(e)},We.rule=function(e){return new el(e)},We.root=function(e){return new Xs(e)},We.document=function(e){return new js(e)},We.CssSyntaxError=Ja,We.Declaration=rs,We.Container=Fs,We.Processor=wl,We.Document=js,We.Comment=Ms,We.Warning=zs,We.AtRule=Ys,We.Result=Vs,We.Input=ks,We.Rule=el,We.Root=Xs,We.Node=ns,ul.registerPostcss(We),We.default=We;var kl=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(We);kl.stringify,kl.fromJSON,kl.plugin,kl.parse,kl.list,kl.document,kl.comment,kl.atRule,kl.rule,kl.decl,kl.root,kl.CssSyntaxError,kl.Declaration,kl.Container,kl.Processor,kl.Document,kl.Comment,kl.Warning,kl.AtRule,kl.Result,kl.Input,kl.Rule,kl.Root,kl.Node;var Cl=Object.defineProperty,Sl=function(e,t,n){return(t="symbol"!==S(t)?t+"":t)in e?Cl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},El={},Il=String,_l=function(){return{isColorSupported:!1,reset:Il,bold:Il,dim:Il,italic:Il,underline:Il,inverse:Il,hidden:Il,strikethrough:Il,black:Il,red:Il,green:Il,yellow:Il,blue:Il,magenta:Il,cyan:Il,white:Il,gray:Il,bgBlack:Il,bgRed:Il,bgGreen:Il,bgYellow:Il,bgBlue:Il,bgMagenta:Il,bgCyan:Il,bgWhite:Il}};(El=_l()).createColors=_l;var Tl=El,Al=function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),xl=function(e){function t(e,n,i,a,s,l){o(this,t);var c=r(this,t,[e]);return c.name="CssSyntaxError",c.reason=e,s&&(c.file=s),a&&(c.source=a),l&&(c.plugin=l),void 0!==n&&void 0!==i&&("number"==typeof n?(c.line=n,c.column=i):(c.line=n.line,c.column=n.column,c.endLine=i.line,c.endColumn=i.column)),c.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(c,t),c}return f(t,e),s(t,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var t=this;if(!this.source)return"";var n=this.source;null==e&&(e=Tl.isColorSupported),Al&&e&&(n=Al(n)),n=n.split(/\r?\n/);var r=Math.max(this.line-3,0),o=Math.min(this.line+2,n.length),i=String(o).length;if(e)var a=(e=Tl.createColors(!0)).bold,s=e.gray,l=e.red,c=function(e){return a(l(e))},u=function(e){return s(e)};else c=u=function(e){return e};return n.slice(r,o).map((function(e,n){var o=r+1+n;return n=" "+(" "+o).slice(-i)+" | ",o===t.line?(o=u(n.replace(/\d/g," "))+e.slice(0,t.column-1).replace(/[^\t]/g," "),c(">")+u(n)+e+"\n "+o+c("^")):" "+u(n)+e})).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(I(Error));xl.default=xl;var Rl=Symbol("isClean"),Ol=Symbol("my"),Ml={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1},Nl=s((function e(t){o(this,e),this.builder=t}),[{key:"atrule",value:function(e,t){var n="@"+e.name,r=e.params?this.rawValue(e,"params"):"";void 0!==e.raws.afterName?n+=e.raws.afterName:r&&(n+=" "),e.nodes?this.block(e,n+r):this.builder(n+r+((e.raws.between||"")+(t?";":"")),e)}},{key:"beforeAfter",value:function(e,t){t="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var n=e.parent,r=0;n&&"root"!==n.type;)r+=1,n=n.parent;if(t.includes("\n")&&(e=this.raw(e,null,"indent")).length)for(n=0;n<r;n++)t+=e;return t}},{key:"block",value:function(e,t){var n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),t=this.raw(e,"after")):t=this.raw(e,"after","emptyBody"),t&&this.builder(t),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var t=e.nodes.length-1;0<t&&"comment"===e.nodes[t].type;)--t;for(var n=this.raw(e,"semicolon"),r=0;r<e.nodes.length;r++){var o=e.nodes[r],i=this.raw(o,"before");i&&this.builder(i),this.stringify(o,t!==r||n)}}},{key:"comment",value:function(e){var t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}},{key:"decl",value:function(e,t){var n=this.raw(e,"between","colon");n=e.prop+n+this.rawValue(e,"value"),e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,t,n){if(n||(n=t),t){var r=e.raws[t];if(void 0!==r)return r}var o=e.parent;if("before"===n&&(!o||"root"===o.type&&o.first===e||o&&"document"===o.type))return"";if(!o)return Ml[n];if((o=e.root()).rawCache||(o.rawCache={}),void 0!==o.rawCache[n])return o.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);var i="raw"+function(e){return e[0].toUpperCase()+e.slice(1)}(n);return this[i]?r=this[i](o,e):o.walk((function(e){if(void 0!==(r=e.raws[t]))return!1})),void 0===r&&(r=Ml[n]),o.rawCache[n]=r}},{key:"rawBeforeClose",value:function(e){var t;return e.walk((function(e){if(e.nodes&&0<e.nodes.length&&void 0!==e.raws.after)return(t=e.raws.after).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawBeforeComment",value:function(e,t){var n;return e.walkComments((function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeDecl",value:function(e,t){var n;return e.walkDecls((function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeOpen",value:function(e){var t;return e.walk((function(e){if("decl"!==e.type&&void 0!==(t=e.raws.between))return!1})),t}},{key:"rawBeforeRule",value:function(e){var t;return e.walk((function(n){if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return(t=n.raws.before).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawColon",value:function(e){var t;return e.walkDecls((function(e){if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}},{key:"rawEmptyBody",value:function(e){var t;return e.walk((function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(t=e.raws.after))return!1})),t}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk((function(n){var r=n.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==n.raws.before)return n=n.raws.before.split("\n"),t=(t=n[n.length-1]).replace(/\S/g,""),!1})),t);var t}},{key:"rawSemicolon",value:function(e){var t;return e.walk((function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(t=e.raws.semicolon))return!1})),t}},{key:"rawValue",value:function(e,t){var n=e[t];return(e=e.raws[t])&&e.value===n?e.raw:n}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,t){if(!this[e.type])throw Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}]),Ll=Nl.default=Nl;He.default=He;var Dl=s((function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var n in o(this,e),this.raws={},this[Rl]=!1,this[Ol]=!0,t)if("nodes"===n){this.nodes=[];var r,i=l(t[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;"function"==typeof a.clone?this.append(a.clone()):this.append(a)}}catch(e){i.e(e)}finally{i.f()}}else this[n]=t[n]}),[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(t.input.from,":").concat(t.start.line,":").concat(t.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(e in t)this[e]=t[e];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=qe(this);for(e in t)n[e]=t[e];return n}},{key:"cloneAfter",value:function(){var e=this.clone(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return this.parent.insertAfter(this,e),e}},{key:"cloneBefore",value:function(){var e=this.clone(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return this.parent.insertBefore(this,e),e}},{key:"error",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var n=this.rangeBy(t),r=n.end;return n=n.start,this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new xl(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:"root"===t?function(){return e.root().toProxy()}:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[Rl]){this[Rl]=!1;for(var e=this;e=e.parent;)e[Rl]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,t){var n=this.source.start;return e.index?n=this.positionInside(e.index,t):e.word&&-1!==(e=(t=this.toString()).indexOf(e.word))&&(n=this.positionInside(e,t)),n}},{key:"positionInside",value:function(e,t){t=t||this.toString();for(var n=this.source.start.column,r=this.source.start.line,o=0;o<e;o++)"\n"===t[o]?(n=1,r+=1):n+=1;return{column:n,line:r}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var t={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){var r=this.toString(),o=r.indexOf(e.word);-1!==o&&(t=this.positionInside(o,r),n=this.positionInside(o+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<t.line||n.line===t.line&&n.column<=t.column)&&(n={column:t.column+1,line:t.line}),{end:n,start:t}}},{key:"raw",value:function(e,t){return(new Nl).raw(this,e,t)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,t=!1,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];for(n=0;n<r.length;n++)(o=r[n])===this?t=!0:t?(this.parent.insertAfter(e,o),e=o):this.parent.insertBefore(e,o);t||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,t){e={};var n=null==t;t=t||new Map;var r,o=0;for(r in this)if(Object.prototype.hasOwnProperty.call(this,r)&&"parent"!==r&&"proxyCache"!==r){var i=this[r];if(Array.isArray(i))e[r]=i.map((function(e){return"object"===S(e)&&e.toJSON?e.toJSON(null,t):e}));else if("object"===S(i)&&i.toJSON)e[r]=i.toJSON(null,t);else if("source"===r){var a=t.get(i.input);null==a&&(a=o,t.set(i.input,o),o++),e[r]={end:i.end,inputId:a,start:i.start}}else e[r]=i}return n&&(e.inputs=k(t.keys()).map((function(e){return e.toJSON()}))),e}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:He;e.stringify&&(e=e.stringify);var t="";return e(this,(function(e){t+=e})),t}},{key:"warn",value:function(e,t,n){var r,o={node:this};for(r in n)o[r]=n[r];return e.warn(t,o)}},{key:"proxyOf",get:function(){return this}}]);Dl.default=Dl;var Pl=function(e){function t(e){return o(this,t),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=v(v({},e),{},{value:String(e.value)})),(e=r(this,t,[e])).type="decl",e}return f(t,e),s(t,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(Dl);Pl.default=Pl;var Ul=Al.SourceMapConsumer,Fl=Al.SourceMapGenerator,Bl=Al.existsSync,Gl=Al.readFileSync,jl=Al.dirname,zl=Al.join,Vl=s((function e(t,n){o(this,e),!1!==n.map&&(this.loadAnnotation(t),this.inline=this.startWith(this.annotation,"data:"),t=this.loadMap(n.from,n.map?n.map.prev:void 0),!this.mapFile&&n.from&&(this.mapFile=n.from),this.mapFile&&(this.root=jl(this.mapFile)),t&&(this.text=t))}),[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new Ul(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return e=e.substr(RegExp.lastMatch.length),e=Buffer?Buffer.from(e,"base64").toString():window.atob(e);throw e=e.match(/data:application\/json;([^,]+),/)[1],Error("Unsupported source map encoding "+e)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===S(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(t){t=e.lastIndexOf(t.pop());var n=e.indexOf("*/",t);-1<t&&-1<n&&(this.annotation=this.getAnnotationURL(e.substring(t,n)))}}},{key:"loadFile",value:function(e){if(this.root=jl(e),Bl(e))return this.mapFile=e,Gl(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof Ul)return Fl.fromSourceMap(t).toString();if(t instanceof Fl)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw Error("Unsupported previous source map format: "+t.toString())}if(e=t(e)){if(!(t=this.loadFile(e)))throw Error("Unable to load previous source map: "+e.toString());return t}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation)return t=this.annotation,e&&(t=zl(jl(e),t)),this.loadFile(t)}}},{key:"startWith",value:function(e,t){return!!e&&e.substr(0,t.length)===t}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&0<this.consumer().sourcesContent.length)}}]);Vl.default=Vl;var Wl=Al.SourceMapConsumer,Hl=Al.SourceMapGenerator,ql=Al.fileURLToPath,Zl=Al.pathToFileURL,Yl=Al.isAbsolute,Kl=Al.resolve,Jl=function(){for(var e="",t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:21;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},Xl=Symbol("fromOffsetCache"),Ql=!(!Wl||!Hl),$l=!(!Kl||!Yl),ec=s((function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),null==t||"object"===S(t)&&!t.toString)throw Error("PostCSS received ".concat(t," instead of CSS string"));this.css=t.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,n.from&&(!$l||/^\w+:\/\//.test(n.from)||Yl(n.from)?this.file=n.from:this.file=Kl(n.from)),$l&&Ql&&(n=new Vl(this.css,n)).text&&(this.map=n,n=n.consumer().file,!this.file&&n&&(this.file=this.mapResolve(n))),this.file||(this.id="<input css "+Jl(6)+">"),this.map&&(this.map.file=this.from)}),[{key:"error",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(t&&"object"===S(t)){var o=t,i=n;"number"==typeof o.offset?(t=(o=this.fromOffset(o.offset)).line,n=o.col):(t=o.line,n=o.column),"number"==typeof i.offset?(o=(i=this.fromOffset(i.offset)).line,i=i.col):(o=i.line,i=i.column)}else if(!n){var a=this.fromOffset(t);t=a.line,n=a.col}return(r=(a=this.origin(t,n,o,i))?new xl(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):new xl(e,void 0===o?t:{column:n,line:t},void 0===o?n:{column:i,line:o},this.css,this.file,r.plugin)).input={column:n,endColumn:i,endLine:o,line:t,source:this.css},this.file&&(Zl&&(r.input.url=Zl(this.file).toString()),r.input.file=this.file),r}},{key:"fromOffset",value:function(e){if(this[Xl])var t=this[Xl];else{var n=this.css.split("\n");t=Array(n.length);for(var r=0,o=0,i=n.length;o<i;o++)t[o]=r,r+=n[o].length+1;this[Xl]=t}if(n=0,e>=t[t.length-1])n=t.length-1;else for(r=t.length-2;n<r;)if(e<t[o=n+(r-n>>1)])r=o-1;else{if(!(e>=t[o+1])){n=o;break}n=o+1}return{col:e-t[n]+1,line:n+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:Kl(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,t,n,r){if(!this.map)return!1;var o,i=this.map.consumer();if(!(e=i.originalPositionFor({column:t,line:e})).source)return!1;if("number"==typeof n&&(o=i.originalPositionFor({column:r,line:n})),n=Yl(e.source)?Zl(e.source):new URL(e.source,this.map.consumer().sourceRoot||Zl(this.map.mapFile)),o={column:e.column,endColumn:o&&o.column,endLine:o&&o.line,line:e.line,url:n.toString()},"file:"===n.protocol){if(!ql)throw Error("file: protocol is not available in this PostCSS build");o.file=ql(n)}return(i=i.sourceContentFor(e.source))&&(o.source=i),o}},{key:"toJSON",value:function(){for(var e={},t=0,n=["hasBOM","css","file","id"];t<n.length;t++){var r=n[t];null!=this[r]&&(e[r]=this[r])}return this.map&&(e.map=v({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}]);ec.default=ec,Al&&Al.registerInput&&Al.registerInput(ec);var tc=Al.SourceMapConsumer,nc=Al.SourceMapGenerator,rc=Al.dirname,oc=Al.relative,ic=Al.resolve,ac=Al.sep,sc=Al.pathToFileURL,lc=!(!tc||!nc),cc=!!(rc&&ic&&oc&&ac),uc=s((function e(t,n,r,i){o(this,e),this.stringify=t,this.mapOpts=r.map||{},this.root=n,this.opts=r,this.originalCSS=this.css=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}),[{key:"addAnnotation",value:function(){var e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map",t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,t=l(this.previous());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.toUrl(this.path(n.file)),o=n.root||rc(n.file),i=void 0;!1===this.mapOpts.sourcesContent?(i=new tc(n.text)).sourcesContent&&(i.sourcesContent=null):i=n.consumer(),this.map.applySourceMap(i,r,this.toUrl(this.path(o)))}}catch(e){t.e(e)}finally{t.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,t=this.root.nodes.length-1;0<=t;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),cc&&lc&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,(function(t){e+=t})),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=nc.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new nc({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&0<this.previous().length&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new nc({file:this.outputFile(),ignoreInvalidMapping:!0});var t,n,r=1,o=1,i={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(function(a,s,l){e.css+=a,s&&"end"!==l&&(i.generated.line=r,i.generated.column=o-1,s.source&&s.source.start?(i.source=e.sourcePath(s),i.original.line=s.source.start.line,i.original.column=s.source.start.column-1):(i.source="<no source>",i.original.line=1,i.original.column=0),e.map.addMapping(i)),(t=a.match(/\n/g))?(r+=t.length,n=a.lastIndexOf("\n"),o=a.length-n):o+=a.length,s&&"start"!==l&&(a=s.parent||{raws:{}},"decl"!==s.type&&("atrule"!==s.type||s.nodes)||s!==a.last||a.raws.semicolon)&&(s.source&&s.source.end?(i.source=e.sourcePath(s),i.original.line=s.source.end.line,i.original.column=s.source.end.column-1,i.generated.line=r,i.generated.column=o-2):(i.source="<no source>",i.original.line=1,i.original.column=0,i.generated.line=r,i.generated.column=o-1),e.map.addMapping(i))}))}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((function(e){return e.annotation})))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((function(e){return e.inline})))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:0<this.previous().length}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((function(e){return e.withContent()}))}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute||60===e.charCodeAt(0)||/^\w+:\/\//.test(e))return e;var t=this.memoizedPaths.get(e);return t||(t=this.opts.to?rc(this.opts.to):".","string"==typeof this.mapOpts.annotation&&(t=rc(ic(t,this.mapOpts.annotation))),t=oc(t,e),this.memoizedPaths.set(e,t),t)}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((function(t){t.source&&t.source.input.map&&(t=t.source.input.map,e.previousMaps.includes(t)||e.previousMaps.push(t))}));else{var t=new ec(this.originalCSS,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,t={};if(this.root)this.root.walk((function(n){if(n.source){var r=n.source.input.from;r&&!t[r]&&(t[r]=!0,r=e.usesFileUrls?e.toFileUrl(r):e.toUrl(e.path(r)),e.map.setSourceContent(r,n.source.input.css))}}));else if(this.css){var n=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(n,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var t=this.memoizedFileURLs.get(e);if(t)return t;if(sc)return t=sc(e).toString(),this.memoizedFileURLs.set(e,t),t;throw Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var t=this.memoizedURLs.get(e);return t||("\\"===ac&&(e=e.replace(/\\/g,"/")),t=encodeURI(e).replace(/[#?]/g,encodeURIComponent),this.memoizedURLs.set(e,t),t)}}]),dc=function(e){function t(e){return o(this,t),(e=r(this,t,[e])).type="comment",e}return f(t,e),s(t)}(Dl);dc.default=dc;var fc,hc,pc,vc,gc=Rl,mc=function(e){function t(){return o(this,t),r(this,t,arguments)}return f(t,e),s(t,[{key:"append",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(e=0;e<t.length;e++){var r;n=l(n=this.normalize(t[e],this.last));try{for(n.s();!(r=n.n()).done;)this.proxyOf.nodes.push(r.value)}catch(e){n.e(e)}finally{n.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(w(t,"cleanRaws",this,3)([e]),this.nodes){var n,r=l(this.nodes);try{for(r.s();!(n=r.n()).done;)n.value.cleanRaws(e)}catch(e){r.e(e)}finally{r.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var t,n=this.getIterator();this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],!1!==(t=e(this.proxyOf.nodes[t],t)));)this.indexes[n]+=1;return delete this.indexes[n],t}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={});var e=this.lastEach+=1;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return e[t].apply(e,k(r.map((function(e){return"function"==typeof e?function(t,n){return e(t.toProxy(),n)}:e}))))}:"every"===t||"some"===t?function(n){return e[t]((function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n.apply(void 0,[e.toProxy()].concat(r))}))}:"root"===t?function(){return e.root().toProxy()}:"nodes"===t?e.nodes.map((function(e){return e.toProxy()})):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,t){var n,r=this.index(e);t=this.normalize(t,this.proxyOf.nodes[r]).reverse(),r=this.index(e),e=l(t);try{for(e.s();!(n=e.n()).done;)this.proxyOf.nodes.splice(r+1,0,n.value)}catch(t){e.e(t)}finally{e.f()}for(var o in this.indexes)r<(n=this.indexes[o])&&(this.indexes[o]=n+t.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,t){var n,r=this.index(e);t=this.normalize(t,this.proxyOf.nodes[r],0===r&&"prepend").reverse(),r=this.index(e),e=l(t);try{for(e.s();!(n=e.n()).done;)this.proxyOf.nodes.splice(r,0,n.value)}catch(t){e.e(t)}finally{e.f()}for(var o in this.indexes)r<=(n=this.indexes[o])&&(this.indexes[o]=n+t.length);return this.markDirty(),this}},{key:"normalize",value:function(e,n){var r=this;if("string"==typeof e)e=Ze(fc(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var o,i=l(e=e.slice(0));try{for(i.s();!(o=i.n()).done;){var a=o.value;a.parent&&a.parent.removeChild(a,"ignore")}}catch(e){i.e(e)}finally{i.f()}}else if("root"===e.type&&"document"!==this.type){o=l(e=e.nodes.slice(0));try{for(o.s();!(i=o.n()).done;){var s=i.value;s.parent&&s.parent.removeChild(s,"ignore")}}catch(e){o.e(e)}finally{o.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new Pl(e)]}else if(e.selector)e=[new hc(e)];else if(e.name)e=[new pc(e)];else{if(!e.text)throw Error("Unknown node type in node creation");e=[new dc(e)]}return e.map((function(e){return e[Ol]||t.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[gc]&&Ye(e),void 0===e.raws.before&&n&&void 0!==n.raws.before&&(e.raws.before=n.raws.before.replace(/\S/g,"")),e.parent=r.proxyOf,e}))}},{key:"prepend",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;e=l(t=t.reverse());try{for(e.s();!(r=e.n()).done;){var o,i=this.normalize(r.value,this.first,"prepend").reverse(),a=l(i);try{for(a.s();!(o=a.n()).done;)this.proxyOf.nodes.unshift(o.value)}catch(e){a.e(e)}finally{a.f()}for(var s in this.indexes)this.indexes[s]+=i.length}}catch(t){e.e(t)}finally{e.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,t=l(this.proxyOf.nodes);try{for(t.s();!(e=t.n()).done;)e.value.parent=void 0}catch(e){t.e(e)}finally{t.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var t;for(t in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes){var n=this.indexes[t];n>=e&&(this.indexes[t]=n-1)}return this.markDirty(),this}},{key:"replaceValues",value:function(e,t,n){return n||(n=t,t={}),this.walkDecls((function(r){t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,n))})),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each((function(t,n){try{var r=e(t,n)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r}))}},{key:"walkAtRules",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("atrule"===n.type&&e.test(n.name))return t(n,r)})):this.walk((function(n,r){if("atrule"===n.type&&n.name===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("atrule"===e.type)return t(e,n)})))}},{key:"walkComments",value:function(e){return this.walk((function(t,n){if("comment"===t.type)return e(t,n)}))}},{key:"walkDecls",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("decl"===n.type&&e.test(n.prop))return t(n,r)})):this.walk((function(n,r){if("decl"===n.type&&n.prop===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("decl"===e.type)return t(e,n)})))}},{key:"walkRules",value:function(e,t){return t?e instanceof RegExp?this.walk((function(n,r){if("rule"===n.type&&e.test(n.selector))return t(n,r)})):this.walk((function(n,r){if("rule"===n.type&&n.selector===e)return t(n,r)})):(t=e,this.walk((function(e,n){if("rule"===e.type)return t(e,n)})))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(Dl);mc.registerParse=function(e){fc=e},mc.registerRule=function(e){hc=e},mc.registerAtRule=function(e){pc=e},mc.registerRoot=function(e){vc=e},mc.default=mc,mc.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,pc.prototype):"rule"===e.type?Object.setPrototypeOf(e,hc.prototype):"decl"===e.type?Object.setPrototypeOf(e,Pl.prototype):"comment"===e.type?Object.setPrototypeOf(e,dc.prototype):"root"===e.type&&Object.setPrototypeOf(e,vc.prototype),e[Ol]=!0,e.nodes&&e.nodes.forEach((function(e){mc.rebuild(e)}))};var yc,bc,wc=function(e){function t(e){return o(this,t),(e=r(this,t,[v({type:"document"},e)])).nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"toResult",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new yc(new bc,this,e).stringify()}}])}(mc);wc.registerLazyResult=function(e){yc=e},wc.registerProcessor=function(e){bc=e},wc.default=wc;var kc=s((function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),this.type="warning",this.text=t,n.node&&n.node.source){var r=n.node.rangeBy(n);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(var i in n)this[i]=n[i]}),[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}]);kc.default=kc;var Cc=s((function e(t,n,r){o(this,e),this.processor=t,this.messages=[],this.root=n,this.opts=r,this.map=this.css=void 0}),[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!t.plugin&&this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin),t=new kc(e,t),this.messages.push(t),t}},{key:"warnings",value:function(){return this.messages.filter((function(e){return"warning"===e.type}))}},{key:"content",get:function(){return this.css}}]);Cc.default=Cc;var Sc=/[\t\n\f\r "#'()/;[\\\]{}]/g,Ec=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Ic=/.[\r\n"'(/\\]/,_c=/[\da-f]/i,Tc=function(e){function t(e){return o(this,t),(e=r(this,t,[e])).type="atrule",e}return f(t,e),s(t,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return w(t,"append",this,3)(n)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return w(t,"prepend",this,3)(n)}}])}(mc);Tc.default=Tc,mc.registerAtRule(Tc);var Ac,xc,Rc=function(e){function t(e){return o(this,t),(e=r(this,t,[e])).type="root",e.nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"normalize",value:function(e,n,r){if(e=w(t,"normalize",this,3)([e]),n)if("prepend"===r)1<this.nodes.length?n.raws.before=this.nodes[1].raws.before:delete n.raws.before;else if(this.first!==n){var o;r=l(e);try{for(r.s();!(o=r.n()).done;)o.value.raws.before=n.raws.before}catch(e){r.e(e)}finally{r.f()}}return e}},{key:"removeChild",value:function(e,n){var r=this.index(e);return!n&&0===r&&1<this.nodes.length&&(this.nodes[1].raws.before=this.nodes[r].raws.before),w(t,"removeChild",this,3)([e])}},{key:"toResult",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Ac(new xc,this,e).stringify()}}])}(mc);Rc.registerLazyResult=function(e){Ac=e},Rc.registerProcessor=function(e){xc=e},Rc.default=Rc,mc.registerRoot(Rc);var Oc={comma:function(e){return Oc.split(e,[","],!0)},space:function(e){return Oc.split(e,[" ","\n","\t"])},split:function(e,t,n){var r,o=[],i="",a=!1,s=0,c=!1,u="",d=!1;e=l(e);try{for(e.s();!(r=e.n()).done;){var f=r.value;d?d=!1:"\\"===f?d=!0:c?f===u&&(c=!1):'"'===f||"'"===f?(c=!0,u=f):"("===f?s+=1:")"===f?0<s&&--s:0===s&&t.includes(f)&&(a=!0),a?(""!==i&&o.push(i.trim()),i="",a=!1):i+=f}}catch(t){e.e(t)}finally{e.f()}return(n||""!==i)&&o.push(i.trim()),o}},Mc=Oc;Oc.default=Oc;var Nc=function(e){function t(e){return o(this,t),(e=r(this,t,[e])).type="rule",e.nodes||(e.nodes=[]),e}return f(t,e),s(t,[{key:"selectors",get:function(){return Mc.comma(this.selector)},set:function(e){var t=this.selector?this.selector.match(/,\s*/):null;t=t?t[0]:","+this.raw("between","beforeOpen"),this.selector=e.join(t)}}])}(mc);Nc.default=Nc,mc.registerRule(Nc);var Lc={empty:!0,space:!0},Dc=s((function e(t){o(this,e),this.input=t,this.current=this.root=new Rc,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:t,start:{column:1,line:1,offset:0}}}),[{key:"atrule",value:function(e){var t=new Tc;t.name=e[1].slice(1),""===t.name&&this.unnamedAtrule(t,e),this.init(t,e[2]);var n,r=!1,o=!1,i=[];for(n=[];!this.tokenizer.endOfFile();){var a=(e=this.tokenizer.nextToken())[0];if("("===a||"["===a?n.push("("===a?")":"]"):"{"===a&&0<n.length?n.push("}"):a===n[n.length-1]&&n.pop(),0===n.length){if(";"===a){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}if("{"===a){o=!0;break}if("}"===a){if(0<i.length){for(a=i[n=i.length-1];a&&"space"===a[0];)a=i[--n];a&&(t.source.end=this.getPosition(a[3]||a[2]),t.source.end.offset++)}this.end(e);break}i.push(e)}else i.push(e);if(this.tokenizer.endOfFile()){r=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(i),i.length?(t.raws.afterName=this.spacesAndCommentsFromStart(i),this.raw(t,"params",i),r&&(e=i[i.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),o&&(t.nodes=[],this.current=t)}},{key:"checkMissedSemicolon",value:function(e){var t=this.colon(e);if(!1!==t){var n=0;for(--t;0<=t;t--){var r=e[t];if("space"!==r[0]&&2===(n+=1))break}throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}}},{key:"colon",value:function(e){var t,n=0;e=l(e.entries());try{for(e.s();!(t=e.n()).done;){var r=b(t.value,2),o=r[0],i=r[1],a=i[0];if("("===a&&(n+=1),")"===a&&--n,0===n&&":"===a){if(s){if("word"===s[0]&&"progid"===s[1])continue;return o}this.doubleColon(i)}var s=i}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"comment",value:function(e){var t=new dc;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,e=e[1].slice(2,-2),/^\s*$/.test(e)?(t.text="",t.raws.left=e,t.raws.right=""):(e=e.match(/^(\s*)([^]*\S)(\s*)$/),t.text=e[2],t.raws.left=e[1],t.raws.right=e[3])}},{key:"createTokenizer",value:function(){this.tokenizer=function(e){function t(t){throw e.error("Unclosed "+t,v)}var n,r,o,i,a,s,l,c,u,d,f=e.css.valueOf(),h=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).ignoreErrors,p=f.length,v=0,g=[],m=[];return{back:function(e){m.push(e)},endOfFile:function(){return 0===m.length&&v>=p},nextToken:function(e){if(m.length)return m.pop();if(!(v>=p)){switch(e=!!e&&e.ignoreUnclosed,n=f.charCodeAt(v)){case 10:case 32:case 9:case 13:case 12:r=v;do{r+=1,n=f.charCodeAt(r)}while(32===n||10===n||9===n||13===n||12===n);d=["space",f.slice(v,r)],v=r-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:e=String.fromCharCode(n),d=[e,e,v];break;case 40:if(c=g.length?g.pop()[1]:"",u=f.charCodeAt(v+1),"url"===c&&39!==u&&34!==u&&32!==u&&10!==u&&9!==u&&12!==u&&13!==u){r=v;do{if(s=!1,-1===(r=f.indexOf(")",r+1))){if(h||e){r=v;break}t("bracket")}for(l=r;92===f.charCodeAt(l-1);)--l,s=!s}while(s);d=["brackets",f.slice(v,r+1),v,r],v=r}else r=f.indexOf(")",v+1),i=f.slice(v,r+1),-1===r||Ic.test(i)?d=["(","(",v]:(d=["brackets",i,v,r],v=r);break;case 39:case 34:o=39===n?"'":'"',r=v;do{if(s=!1,-1===(r=f.indexOf(o,r+1))){if(h||e){r=v+1;break}t("string")}for(l=r;92===f.charCodeAt(l-1);)--l,s=!s}while(s);d=["string",f.slice(v,r+1),v,r],v=r;break;case 64:Sc.lastIndex=v+1,Sc.test(f),r=0===Sc.lastIndex?f.length-1:Sc.lastIndex-2,d=["at-word",f.slice(v,r+1),v,r],v=r;break;case 92:for(r=v,a=!0;92===f.charCodeAt(r+1);)r+=1,a=!a;if(n=f.charCodeAt(r+1),a&&47!==n&&32!==n&&10!==n&&9!==n&&13!==n&&12!==n&&(r+=1,_c.test(f.charAt(r)))){for(;_c.test(f.charAt(r+1));)r+=1;32===f.charCodeAt(r+1)&&(r+=1)}d=["word",f.slice(v,r+1),v,r],v=r;break;default:47===n&&42===f.charCodeAt(v+1)?(0===(r=f.indexOf("*/",v+2)+1)&&(h||e?r=f.length:t("comment")),d=["comment",f.slice(v,r+1),v,r]):(Ec.lastIndex=v+1,Ec.test(f),r=0===Ec.lastIndex?f.length-1:Ec.lastIndex-2,d=["word",f.slice(v,r+1),v,r],g.push(d)),v=r}return v++,d}},position:function(){return v}}}(this.input)}},{key:"decl",value:function(e,t){var n=new Pl;this.init(n,e[0][2]);var r,o=e[e.length-1];for(";"===o[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(o[3]||o[2]||function(e){for(var t=e.length-1;0<=t;t--){var n=e[t];if(n=n[3]||n[2])return n}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length&&":"!==(o=e[0][0])&&"space"!==o&&"comment"!==o;)n.prop+=e.shift()[1];for(n.raws.between="";e.length;){if(":"===(r=e.shift())[0]){n.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),n.raws.between+=r[1]}for("_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1)),o=[];e.length&&("space"===(r=e[0][0])||"comment"===r);)o.push(e.shift());this.precheckMissedSemicolon(e);for(var i=e.length-1;0<=i;i--){if("!important"===(r=e[i])[1].toLowerCase()){n.important=!0,r=this.stringFrom(e,i)," !important"!==(r=this.spacesFromEnd(e)+r)&&(n.raws.important=r);break}if("important"===r[1].toLowerCase()){for(var a=e.slice(0),s="",l=i;0<l;l--){var c=a[l][0];if(0===s.trim().indexOf("!")&&"space"!==c)break;s=a.pop()[1]+s}0===s.trim().indexOf("!")&&(n.important=!0,n.raws.important=s,e=a)}if("space"!==r[0]&&"comment"!==r[0])break}e.some((function(e){return"space"!==e[0]&&"comment"!==e[0]}))&&(n.raws.between+=o.map((function(e){return e[1]})).join(""),o=[]),this.raw(n,"value",o.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var t=new Nc;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){this.spaces+=e[1],this.current.nodes&&(e=this.current.nodes[this.current.nodes.length-1])&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}},{key:"getPosition",value:function(e){var t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}},{key:"init",value:function(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var t=!1,n=!1,r=null,o=[],i=e[1].startsWith("--"),a=[],s=e;s;){if(e=s[0],a.push(s),"("===e||"["===e)r||(r=s),o.push("("===e?")":"]");else if(i&&n&&"{"===e)r||(r=s),o.push("}");else if(0===o.length){if(";"===e){if(n)return void this.decl(a,i);break}if("{"===e)return void this.rule(a);if("}"===e){this.tokenizer.back(a.pop()),t=!0;break}":"===e&&(n=!0)}else e===o[o.length-1]&&(o.pop(),0===o.length&&(r=null));s=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),0<o.length&&this.unclosedBracket(r),t&&n){if(!i)for(;a.length&&("space"===(s=a[a.length-1][0])||"comment"===s);)this.tokenizer.back(a.pop());this.decl(a,i)}else this.unknownWord(a)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,t,n,r){for(var o,i,a,s=n.length,l="",c=!0,u=0;u<s;u+=1)"space"!==(i=(o=n[u])[0])||u!==s-1||r?"comment"===i?(a=n[u-1]?n[u-1][0]:"empty",i=n[u+1]?n[u+1][0]:"empty",Lc[a]||Lc[i]||","===l.slice(-1)?c=!1:l+=o[1]):l+=o[1]:c=!1;c||(n=n.reduce((function(e,t){return e+t[1]}),""),e.raws[t]={raw:n,value:l}),e[t]=l}},{key:"rule",value:function(e){e.pop();var t=new Nc;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var t,n="";e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)n=e.pop()[1]+n;return n}},{key:"spacesAndCommentsFromStart",value:function(e){for(var t,n="";e.length&&("space"===(t=e[0][0])||"comment"===t);)n+=e.shift()[1];return n}},{key:"spacesFromEnd",value:function(e){for(var t="";e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t}},{key:"stringFrom",value:function(e,t){for(var n="",r=t;r<e.length;r++)n+=e[r][1];return e.splice(t,e.length-t),n}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}]),Pc=ec;Ke.default=Ke,mc.registerParse(Ke);var Uc=Rl,Fc={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Bc={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Gc={Once:!0,postcssPlugin:!0,prepare:!0},jc={},zc=s((function e(t,n,r){var i=this;if(o(this,e),this.processed=this.stringified=!1,"object"!==S(n)||null===n||"root"!==n.type&&"document"!==n.type)if(n instanceof e||n instanceof Cc){var a=$e(n.root);n.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=n.map)}else{var s=Ke;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{a=s(n,r)}catch(e){this.processed=!0,this.error=e}a&&!a[Ol]&&mc.rebuild(a)}else a=$e(n);this.result=new Cc(t,a,r),this.helpers=v(v({},jc),{},{postcss:jc,result:this.result}),this.plugins=this.processor.plugins.map((function(e){return"object"===S(e)&&e.prepare?v(v({},e),e.prepare(i.result)):e}))}),[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,t){var n=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin||(e.plugin=n.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var t,n=function(t,n,r){e.listeners[n]||(e.listeners[n]=[]),e.listeners[n].push([t,r])},r=l(this.plugins);try{for(r.s();!(t=r.n()).done;){var o=t.value;if("object"===S(o))for(var i in o){if(!Bc[i]&&/^[A-Z]/.test(i))throw Error("Unknown event ".concat(i," in ").concat(o.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!Gc[i])if("object"===S(o[i]))for(var a in o[i])n(o,"*"===a?i:i+"-"+a.toLowerCase(),o[i][a]);else"function"==typeof o[i]&&n(o,i,o[i])}}}catch(e){r.e(e)}finally{r.f()}this.hasListener=0<Object.keys(this.listeners).length}},{key:"runAsync",value:function(){var e=n(m().mark((function e(){var t,n,r,o,i,a,s,c,u,d,f=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.plugin=0;case 2:if(!(t<this.plugins.length)){e.next=17;break}if(n=this.plugins[t],!Je(r=this.runOnRoot(n))){e.next=14;break}return e.prev=6,e.next=9,r;case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),this.handleError(e.t0);case 14:t++,e.next=2;break;case 17:if(this.prepareVisitors(),!this.hasListener){e.next=56;break}o=this.result.root;case 20:if(o[Uc]){e.next=39;break}o[Uc]=!0,i=[Qe(o)];case 23:if(!(0<i.length)){e.next=37;break}if(!Je(a=this.visitTick(i))){e.next=35;break}return e.prev=26,e.next=29,a;case 29:e.next=35;break;case 31:throw e.prev=31,e.t1=e.catch(26),s=i[i.length-1].node,this.handleError(e.t1,s);case 35:e.next=23;break;case 37:e.next=20;break;case 39:if(!this.listeners.OnceExit){e.next=56;break}c=l(this.listeners.OnceExit),e.prev=41,d=m().mark((function e(){var t,n,r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b(u.value,2),n=t[0],r=t[1],f.result.lastPlugin=n,e.prev=2,"document"!==o.type){e.next=9;break}return i=o.nodes.map((function(e){return r(e,f.helpers)})),e.next=7,Promise.all(i);case 7:e.next=11;break;case 9:return e.next=11,r(o,f.helpers);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(2),f.handleError(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})),c.s();case 44:if((u=c.n()).done){e.next=48;break}return e.delegateYield(d(),"t2",46);case 46:e.next=44;break;case 48:e.next=53;break;case 50:e.prev=50,e.t3=e.catch(41),c.e(e.t3);case 53:return e.prev=53,c.f(),e.finish(53);case 56:return this.processed=!0,e.abrupt("return",this.stringify());case 58:case"end":return e.stop()}}),e,this,[[6,11],[26,31],[41,50,53,56]])})));return function(){return e.apply(this,arguments)}}()},{key:"runOnRoot",value:function(e){var t=this;this.result.lastPlugin=e;try{if("object"===S(e)&&e.Once){if("document"===this.result.root.type){var n=this.result.root.nodes.map((function(n){return e.Once(n,t.helpers)}));return Je(n[0])?Promise.all(n):n}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,t=He;return e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify),e=new uc(t,this.result.root,this.result.opts).generate(),this.result.css=e[0],this.result.map=e[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,t=l(this.plugins);try{for(t.s();!(e=t.n()).done;)if(Je(this.runOnRoot(e.value)))throw this.getAsyncError()}catch(e){t.e(e)}finally{t.f()}if(this.prepareVisitors(),this.hasListener){for(t=this.result.root;!t[Uc];)t[Uc]=!0,this.walkSync(t);if(this.listeners.OnceExit)if("document"===t.type){var n;t=l(t.nodes);try{for(t.s();!(n=t.n()).done;)this.visitSync(this.listeners.OnceExit,n.value)}catch(e){t.e(e)}finally{t.f()}}else this.visitSync(this.listeners.OnceExit,t)}return this.result}},{key:"then",value:function(e,t){return this.async().then(e,t)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,t){var n;e=l(e);try{for(e.s();!(n=e.n()).done;){var r=b(n.value,2),o=r[1];this.result.lastPlugin=r[0];var i=void 0;try{i=o(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(Je(i))throw this.getAsyncError()}}catch(t){e.e(t)}finally{e.f()}}},{key:"visitTick",value:function(e){var t=e[e.length-1],n=t.node,r=t.visitors;if("root"===n.type||"document"===n.type||n.parent){if(0<r.length&&t.visitorIndex<r.length){var o=b(r[t.visitorIndex],2);e=o[0],o=o[1],t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return o(n.toProxy(),this.helpers)}catch(e){throw this.handleError(e,n)}}if(0!==t.iterator){for(r=t.iterator;o=n.nodes[n.indexes[r]];)if(n.indexes[r]+=1,!o[Uc])return o[Uc]=!0,void e.push(Qe(o));t.iterator=0,delete n.indexes[r]}for(r=t.events;t.eventIndex<r.length;){if(o=r[t.eventIndex],t.eventIndex+=1,0===o)return void(n.nodes&&n.nodes.length&&(n[Uc]=!0,t.iterator=n.getIterator()));if(this.listeners[o])return void(t.visitors=this.listeners[o])}}e.pop()}},{key:"walkSync",value:function(e){var t=this;e[Uc]=!0;var n,r=Xe(e);r=l(r);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(0===o)e.nodes&&e.each((function(e){e[Uc]||t.walkSync(e)}));else{var i=this.listeners[o];if(i&&this.visitSync(i,e.toProxy()))break}}}catch(e){r.e(e)}finally{r.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);zc.registerPostcss=function(e){jc=e},zc.default=zc,Rc.registerLazyResult(zc),wc.registerLazyResult(zc);var Vc=s((function e(t,n,r){o(this,e),n=n.toString(),this.stringified=!1,this._processor=t,this._css=n,this._opts=r,this._map=void 0,this.result=new Cc(this._processor,void 0,this._opts),this.result.css=n;var i=this;Object.defineProperty(this.result,"root",{get:function(){return i.root}}),(t=new uc(He,void 0,this._opts,n)).isMap()?(t=(n=b(t=t.generate(),2))[0],n=n[1],t&&(this.result.css=t),n&&(this.result.map=n)):(t.clearAnnotation(),this.result.css=t.css)}),[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,t){return this.async().then(e,t)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;try{var e=Ke(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}]);Vc.default=Vc;var Wc=s((function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];o(this,e),this.version="8.4.38",this.plugins=this.normalize(t)}),[{key:"normalize",value:function(e){var t,n=[];e=l(e);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"===S(r)&&Array.isArray(r.plugins))n=n.concat(r.plugins);else if("object"===S(r)&&r.postcssPlugin)n.push(r);else if("function"==typeof r)n.push(r);else if("object"!==S(r)||!r.parse&&!r.stringify)throw Error(r+" is not a PostCSS plugin")}}catch(t){e.e(t)}finally{e.f()}return n}},{key:"process",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||t.parser||t.stringifier||t.syntax?new zc(this,e,t):new Vc(this,e,t)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}]);Wc.default=Wc,Rc.registerProcessor(Wc),wc.registerProcessor(Wc);var Hc=Pl,qc=Vl,Zc=dc,Yc=Tc,Kc=ec,Jc=Rc,Xc=Nc;et.default=et;var Qc=Wc;tt.plugin=function(e,t){function n(){console&&console.warn&&!o&&(o=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));var n=t.apply(void 0,arguments);return n.postcssPlugin=e,n.postcssVersion=(new Qc).version,n}var r,o=!1;return Object.defineProperty(n,"postcss",{get:function(){return r||(r=n()),r}}),n.process=function(e,t,r){return tt([n(r)]).process(e,t)},n},tt.stringify=He,tt.parse=Ke,tt.fromJSON=et,tt.list=Mc,tt.comment=function(e){return new dc(e)},tt.atRule=function(e){return new Tc(e)},tt.decl=function(e){return new Pl(e)},tt.rule=function(e){return new Nc(e)},tt.root=function(e){return new Rc(e)},tt.document=function(e){return new wc(e)},tt.CssSyntaxError=xl,tt.Declaration=Pl,tt.Container=mc,tt.Processor=Qc,tt.Document=wc,tt.Comment=dc,tt.Warning=kc,tt.AtRule=Tc,tt.Result=Cc,tt.Input=ec,tt.Rule=Nc,tt.Root=Rc,tt.Node=Dl,zc.registerPostcss(tt),tt.default=tt;var $c=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(tt);$c.stringify,$c.fromJSON,$c.plugin,$c.parse,$c.list,$c.document,$c.comment,$c.atRule,$c.rule,$c.decl,$c.root,$c.CssSyntaxError,$c.Declaration,$c.Container,$c.Processor,$c.Document,$c.Comment,$c.Warning,$c.AtRule,$c.Result,$c.Input,$c.Rule,$c.Root,$c.Node;var eu=function(){function e(){o(this,e),Sl(this,"parentElement",null),Sl(this,"parentNode",null),Sl(this,"ownerDocument"),Sl(this,"firstChild",null),Sl(this,"lastChild",null),Sl(this,"previousSibling",null),Sl(this,"nextSibling",null),Sl(this,"ELEMENT_NODE",1),Sl(this,"TEXT_NODE",3),Sl(this,"nodeType"),Sl(this,"nodeName"),Sl(this,"RRNodeType")}return s(e,[{key:"childNodes",get:function(){for(var e=[],t=this.firstChild;t;)e.push(t),t=t.nextSibling;return e}},{key:"contains",value:function(t){if(!(t instanceof e))return!1;if(t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}},{key:"appendChild",value:function(e){throw Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"insertBefore",value:function(e,t){throw Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}},{key:"removeChild",value:function(e){throw Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"toString",value:function(){return"RRNode"}}])}(),tu={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},nu={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},ru={},ou={},iu={},au={childNodes:function(e){return rt("Node",e,"childNodes")},parentNode:function(e){return rt("Node",e,"parentNode")},parentElement:function(e){return rt("Node",e,"parentElement")},textContent:function(e){return rt("Node",e,"textContent")},contains:function(e,t){return ot("Node",e,"contains")(t)},getRootNode:function(e){return ot("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?rt("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?rt("Element",e,"shadowRoot"):null},querySelector:function(e,t){return rt("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return rt("Element",e,"querySelectorAll")(t)},mutationObserver:it},su={map:{},getId:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),-1},getNode:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),null},removeNodeFromMap:function(){console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.")},has:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),!1},reset:function(){console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.")}};"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(su=new Proxy(su,{get:function(e,t,n){return"map"===t&&console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),Reflect.get(e,t,n)}}));var lu=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(lu=function(){return(new Date).getTime()});for(var cu,uu=s((function e(){o(this,e),Ia(this,"id",1),Ia(this,"styleIDMap",new WeakMap),Ia(this,"idStyleMap",new Map)}),[{key:"getId",value:function(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}},{key:"has",value:function(e){return this.styleIDMap.has(e)}},{key:"add",value:function(e,t){return this.has(e)?this.getId(e):(t=void 0===t?this.id++:t,this.styleIDMap.set(e,t),this.idStyleMap.set(t,e),t)}},{key:"getStyle",value:function(e){return this.idStyleMap.get(e)||null}},{key:"reset",value:function(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}},{key:"generateId",value:function(){return this.id++}}]),du=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(du||{}),fu=function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e}(fu||{}),hu=function(e){return e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e}(hu||{}),pu=function(e){return e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e}(pu||{}),vu=function(e){return e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e}(vu||{}),gu=function(e){return e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e}(gu||{}),mu=function(e){return e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e}(mu||{}),yu=s((function e(){o(this,e),Ia(this,"length",0),Ia(this,"head",null),Ia(this,"tail",null)}),[{key:"get",value:function(e){if(e>=this.length)throw Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}},{key:"addNode",value:function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&"__ln"in e.previousSibling){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else e.nextSibling&&"__ln"in e.nextSibling&&e.nextSibling.__ln.previous?(n=e.nextSibling.__ln.previous,t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)):(this.head&&(this.head.previous=t),t.next=this.head,this.head=t);null===t.next&&(this.tail=t),this.length++}},{key:"removeNode",value:function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next)?t.next.previous=t.previous:this.tail=t.previous:(this.head=t.next)?this.head.previous=null:this.tail=null,e.__ln&&delete e.__ln,this.length--)}}]),bu=function(e,t){return"".concat(e,"@").concat(t)},wu=s((function e(){var t=this;o(this,e),Ia(this,"frozen",!1),Ia(this,"locked",!1),Ia(this,"texts",[]),Ia(this,"attributes",[]),Ia(this,"attributeMap",new WeakMap),Ia(this,"removes",[]),Ia(this,"mapRemoves",[]),Ia(this,"movedMap",{}),Ia(this,"addedSet",new Set),Ia(this,"movedSet",new Set),Ia(this,"droppedSet",new Set),Ia(this,"removesSubTreeCache",new Set),Ia(this,"mutationCb"),Ia(this,"blockClass"),Ia(this,"blockSelector"),Ia(this,"maskTextClass"),Ia(this,"maskTextSelector"),Ia(this,"inlineStylesheet"),Ia(this,"maskInputOptions"),Ia(this,"maskTextFn"),Ia(this,"maskInputFn"),Ia(this,"keepIframeSrcFn"),Ia(this,"recordCanvas"),Ia(this,"inlineImages"),Ia(this,"slimDOMOptions"),Ia(this,"dataURLOptions"),Ia(this,"doc"),Ia(this,"mirror"),Ia(this,"iframeManager"),Ia(this,"stylesheetManager"),Ia(this,"shadowDomManager"),Ia(this,"canvasManager"),Ia(this,"processedNodeManager"),Ia(this,"unattachedDoc"),Ia(this,"processMutations",(function(e){e.forEach(t.processMutation),t.emit()})),Ia(this,"emit",(function(){if(!t.frozen&&!t.locked){for(var e=[],n=new Set,r=new yu,o=function(e){for(var n=-2;-2===n;)n=(e=e&&e.nextSibling)&&t.mirror.getId(e);return n},i=function(i){var a=au.parentNode(i);if(a&&kt(i)){var s=!1;if(i.nodeType===Node.TEXT_NODE){var l=a.tagName;if("TEXTAREA"===l)return;"STYLE"===l&&t.addedSet.has(a)&&(s=!0)}if(a=pe(a)?t.mirror.getId(wt(i)):t.mirror.getId(a),l=o(i),-1===a||-1===l)return r.addNode(i);(s=Me(i,{doc:t.doc,mirror:t.mirror,blockClass:t.blockClass,blockSelector:t.blockSelector,maskTextClass:t.maskTextClass,maskTextSelector:t.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:t.inlineStylesheet,maskInputOptions:t.maskInputOptions,maskTextFn:t.maskTextFn,maskInputFn:t.maskInputFn,slimDOMOptions:t.slimDOMOptions,dataURLOptions:t.dataURLOptions,recordCanvas:t.recordCanvas,inlineImages:t.inlineImages,onSerialize:function(e){"IFRAME"===e.nodeName&&t.mirror.getMeta(e)&&t.iframeManager.addIframe(e),yt(e,t.mirror)&&t.stylesheetManager.trackLinkElement(e),bt(i)&&t.shadowDomManager.addShadowRoot(au.shadowRoot(i),t.doc)},onIframeLoad:function(e,n){t.iframeManager.attachIframe(e,n),t.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:function(e,n){t.stylesheetManager.attachLinkElement(e,n)},cssCaptured:s}))&&(e.push({parentId:a,nextId:l,node:s}),n.add(s.id))}};t.mapRemoves.length;)t.mirror.removeNodeFromMap(t.mapRemoves.shift());var a,s,c=l(t.movedSet);try{for(c.s();!(a=c.n()).done;){var u=a.value;St(t.removesSubTreeCache,u,t.mirror)&&!t.movedSet.has(au.parentNode(u))||i(u)}}catch(e){c.e(e)}finally{c.f()}c=l(t.addedSet);try{for(c.s();!(s=c.n()).done;){var d=s.value;Et(t.droppedSet,d)||St(t.removesSubTreeCache,d,t.mirror)?Et(t.movedSet,d)?i(d):t.droppedSet.add(d):i(d)}}catch(e){c.e(e)}finally{c.f()}for(d=null;r.length;){if(s=null,d&&(c=t.mirror.getId(au.parentNode(d.value)),a=o(d.value),-1!==c&&-1!==a&&(s=d)),!s)for(d=r.tail;d;)if(c=d,d=d.previous,c&&(a=t.mirror.getId(au.parentNode(c.value)),-1!==o(c.value))){if(-1!==a){s=c;break}if((a=au.parentNode(c.value))&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=au.host(a),-1!==t.mirror.getId(a))){s=c;break}}if(!s){for(;r.head;)r.removeNode(r.head.value);break}d=s.previous,r.removeNode(s.value),i(s.value)}((i={texts:t.texts.map((function(e){var n=e.node,r=au.parentNode(n);return r&&"TEXTAREA"===r.tagName&&t.genTextAreaValueMutation(r),{id:t.mirror.getId(n),value:e.value}})).filter((function(e){return!n.has(e.id)})).filter((function(e){return t.mirror.has(e.id)})),attributes:t.attributes.map((function(e){var n=e.attributes;if("string"==typeof n.style){var r=JSON.stringify(e.styleDiff),o=JSON.stringify(e._unchangedStyles);r.length<n.style.length&&(r+o).split("var(").length===n.style.split("var(").length&&(n.style=e.styleDiff)}return{id:t.mirror.getId(e.node),attributes:n}})).filter((function(e){return!n.has(e.id)})).filter((function(e){return t.mirror.has(e.id)})),removes:t.removes,adds:e}).texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(t.texts=[],t.attributes=[],t.attributeMap=new WeakMap,t.removes=[],t.addedSet=new Set,t.movedSet=new Set,t.droppedSet=new Set,t.removesSubTreeCache=new Set,t.movedMap={},t.mutationCb(i))}})),Ia(this,"genTextAreaValueMutation",(function(e){var n=t.attributeMap.get(e);n||(n={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},t.attributes.push(n),t.attributeMap.set(e,n)),n.attributes.value=Array.from(au.childNodes(e),(function(e){return au.textContent(e)||""})).join("")})),Ia(this,"processMutation",(function(e){if(!vt(e.target,t.mirror,t.slimDOMOptions))switch(e.type){case"characterData":var n=au.textContent(e.target);pt(e.target,t.blockClass,t.blockSelector,!1)||n===e.oldValue||t.texts.push({value:xe(e.target,t.maskTextClass,t.maskTextSelector,!0)&&n?t.maskTextFn?t.maskTextFn(n,ht(e.target)):n.replace(/[\S]/g,"*"):n,node:e.target});break;case"attributes":n=e.target;var r=e.attributeName,o=e.target.getAttribute(r);if("value"===r){var i=be(n);o=ye({element:n,maskInputOptions:t.maskInputOptions,tagName:n.tagName,type:i,value:o,maskInputFn:t.maskInputFn})}if(pt(e.target,t.blockClass,t.blockSelector,!1)||o===e.oldValue)break;if(i=t.attributeMap.get(e.target),"IFRAME"===n.tagName&&"src"===r&&!t.keepIframeSrcFn(o)){if(n.contentDocument)break;r="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},t.attributes.push(i),t.attributeMap.set(e.target,i)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!Te(n.tagName,r))if(i.attributes[r]=_e(t.doc,n.tagName.toLowerCase(),r.toLowerCase(),o),"style"===r){if(!t.unattachedDoc)try{t.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){t.unattachedDoc=t.doc}r=t.unattachedDoc.createElement("span"),e.oldValue&&r.setAttribute("style",e.oldValue),o=0;for(var a=Array.from(n.style);o<a.length;o++){var s=a[o],l=n.style.getPropertyValue(s),c=n.style.getPropertyPriority(s);l!==r.style.getPropertyValue(s)||c!==r.style.getPropertyPriority(s)?i.styleDiff[s]=""===c?l:[l,c]:i._unchangedStyles[s]=[l,c]}for(o=0,r=Array.from(r.style);o<r.length;o++)a=r[o],""===n.style.getPropertyValue(a)&&(i.styleDiff[a]=!1)}else"open"===r&&"DIALOG"===n.tagName&&(n.matches("dialog:modal")?i.attributes.rr_open_mode="modal":i.attributes.rr_open_mode="non-modal");break;case"childList":pt(e.target,t.blockClass,t.blockSelector,!0)||("TEXTAREA"===e.target.tagName?t.genTextAreaValueMutation(e.target):(e.addedNodes.forEach((function(n){return t.genAdds(n,e.target)})),e.removedNodes.forEach((function(n){var r=t.mirror.getId(n),o=pe(e.target)?t.mirror.getId(au.host(e.target)):t.mirror.getId(e.target);pt(e.target,t.blockClass,t.blockSelector,!1)||vt(n,t.mirror,t.slimDOMOptions)||-1===t.mirror.getId(n)||(t.addedSet.has(n)?(Ct(t.addedSet,n),t.droppedSet.add(n)):t.addedSet.has(e.target)&&-1===r||gt(e.target,t.mirror)||(t.movedSet.has(n)&&t.movedMap[bu(r,o)]?Ct(t.movedSet,n):(t.removes.push({parentId:o,id:r,isShadow:!(!pe(e.target)||!ve(e.target))||void 0}),function(e,t){for(var n=[e];n.length;)e=n.pop(),t.has(e)||(t.add(e),au.childNodes(e).forEach((function(e){return n.push(e)})))}(n,t.removesSubTreeCache))),t.mapRemoves.push(n))}))))}})),Ia(this,"genAdds",(function(e,n){if(!t.processedNodeManager.inOtherBuffer(e,t)&&!t.addedSet.has(e)&&!t.movedSet.has(e)){if(t.mirror.hasNode(e)){if(vt(e,t.mirror,t.slimDOMOptions))return;t.movedSet.add(e);var r=null;n&&t.mirror.hasNode(n)&&(r=t.mirror.getId(n)),r&&-1!==r&&(t.movedMap[bu(t.mirror.getId(e),r)]=!0)}else t.addedSet.add(e),t.droppedSet.delete(e);pt(e,t.blockClass,t.blockSelector,!1)||(au.childNodes(e).forEach((function(e){return t.genAdds(e)})),bt(e)&&au.childNodes(au.shadowRoot(e)).forEach((function(n){t.processedNodeManager.add(n,t),t.genAdds(n,e)})))}}))}),[{key:"init",value:function(e){var t=this;"mutationCb blockClass blockSelector maskTextClass maskTextSelector inlineStylesheet maskInputOptions maskTextFn maskInputFn keepIframeSrcFn recordCanvas inlineImages slimDOMOptions dataURLOptions doc mirror iframeManager stylesheetManager shadowDomManager canvasManager processedNodeManager".split(" ").forEach((function(n){t[n]=e[n]}))}},{key:"freeze",value:function(){this.frozen=!0,this.canvasManager.freeze()}},{key:"unfreeze",value:function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}},{key:"isFrozen",value:function(){return this.frozen}},{key:"lock",value:function(){this.locked=!0,this.canvasManager.lock()}},{key:"unlock",value:function(){this.locked=!1,this.canvasManager.unlock(),this.emit()}},{key:"reset",value:function(){this.shadowDomManager.reset(),this.canvasManager.reset()}}]),ku=function(e){return cu?function(){try{return e.apply(void 0,arguments)}catch(e){if(!cu||!0!==cu(e))throw e}}:e},Cu=[],Su=["INPUT","TEXTAREA","SELECT"],Eu=new WeakMap,Iu=s((function e(t){o(this,e),Ia(this,"iframeIdToRemoteIdMap",new WeakMap),Ia(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=t}),[{key:"getId",value:function(e,t,n,r){return n=n||this.getIdToRemoteIdMap(e),e=r||this.getRemoteIdToIdMap(e),(r=n.get(t))||(r=this.generateIdFn(),n.set(t,r),e.set(r,t)),r}},{key:"getIds",value:function(e,t){var n=this,r=this.getIdToRemoteIdMap(e),o=this.getRemoteIdToIdMap(e);return t.map((function(t){return n.getId(e,t,r,o)}))}},{key:"getRemoteId",value:function(e,t,n){return e=n||this.getRemoteIdToIdMap(e),"number"!=typeof t||(t=e.get(t))?t:-1}},{key:"getRemoteIds",value:function(e,t){var n=this,r=this.getRemoteIdToIdMap(e);return t.map((function(t){return n.getRemoteId(e,t,r)}))}},{key:"reset",value:function(e){e?(this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)):(this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap)}},{key:"getIdToRemoteIdMap",value:function(e){var t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}},{key:"getRemoteIdToIdMap",value:function(e){var t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}]),_u=s((function e(t){o(this,e),Ia(this,"iframes",new WeakMap),Ia(this,"crossOriginIframeMap",new WeakMap),Ia(this,"crossOriginIframeMirror",new Iu(Se)),Ia(this,"crossOriginIframeStyleMirror"),Ia(this,"crossOriginIframeRootIdMap",new WeakMap),Ia(this,"mirror"),Ia(this,"mutationCb"),Ia(this,"wrappedEmit"),Ia(this,"loadListener"),Ia(this,"stylesheetManager"),Ia(this,"recordCrossOriginIframes"),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Iu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}),[{key:"addIframe",value:function(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}},{key:"addLoadListener",value:function(e){this.loadListener=e}},{key:"attachIframe",value:function(e,t){var n,r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(n=e.contentWindow)||n.addEventListener("message",this.handleMessage.bind(this))),null==(r=this.loadListener)||r.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&0<e.contentDocument.adoptedStyleSheets.length&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}},{key:"handleMessage",value:function(e){if("rrweb"===e.data.type&&e.origin===e.data.origin&&e.source){var t=this.crossOriginIframeMap.get(e.source);t&&(t=this.transformCrossOriginEvent(t,e.data.event))&&this.wrappedEmit(t,e.data.isCheckout)}}},{key:"transformCrossOriginEvent",value:function(e,t){var n=this;switch(t.type){case du.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);var r=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(t.data.node,r),{timestamp:t.timestamp,type:du.IncrementalSnapshot,data:{source:fu.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case du.Plugin:return t;case du.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case du.IncrementalSnapshot:switch(t.data.source){case fu.Mutation:return t.data.adds.forEach((function(t){n.replaceIds(t,e,["parentId","nextId","previousId"]),n.replaceIdOnNode(t.node,e);var r=n.crossOriginIframeRootIdMap.get(e);r&&n.patchRootIdOnNode(t.node,r)})),t.data.removes.forEach((function(t){n.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((function(t){n.replaceIds(t,e,["id"])})),t.data.texts.forEach((function(t){n.replaceIds(t,e,["id"])})),t;case fu.Drag:case fu.TouchMove:case fu.MouseMove:return t.data.positions.forEach((function(t){n.replaceIds(t,e,["id"])})),t;case fu.MediaInteraction:case fu.MouseInteraction:case fu.Scroll:case fu.CanvasMutation:case fu.Input:return this.replaceIds(t.data,e,["id"]),t;case fu.StyleSheetRule:case fu.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case fu.Font:return t;case fu.Selection:return t.data.ranges.forEach((function(t){n.replaceIds(t,e,["start","end"])})),t;case fu.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(r=t.data.styles)||r.forEach((function(t){n.replaceStyleIds(t,e,["styleId"])})),t}}return!1}},{key:"replace",value:function(e,t,n,r){var o;r=l(r);try{for(r.s();!(o=r.n()).done;){var i=o.value;(Array.isArray(t[i])||"number"==typeof t[i])&&(Array.isArray(t[i])?t[i]=e.getIds(n,t[i]):t[i]=e.getId(n,t[i]))}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"replaceIds",value:function(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}},{key:"replaceStyleIds",value:function(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}},{key:"replaceIdOnNode",value:function(e,t){var n=this;this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((function(e){n.replaceIdOnNode(e,t)}))}},{key:"patchRootIdOnNode",value:function(e,t){var n=this;e.type===mu.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((function(e){n.patchRootIdOnNode(e,t)}))}}]),Tu=s((function e(t){o(this,e),Ia(this,"shadowDoms",new WeakSet),Ia(this,"mutationCb"),Ia(this,"scrollCb"),Ia(this,"bypassOptions"),Ia(this,"mirror"),Ia(this,"restoreHandlers",[]),this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}),[{key:"init",value:function(){this.reset(),this.patchAttachShadow(Element,document)}},{key:"addShadowRoot",value:function(e,t){var n=this;if(ve(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var r=Tt(v(v({},this.bypassOptions),{},{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push((function(){return r.disconnect()})),this.restoreHandlers.push(Rt(v(v({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout((function(){e.adoptedStyleSheets&&0<e.adoptedStyleSheets.length&&n.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,n.mirror.getId(au.host(e))),n.restoreHandlers.push(Pt({mirror:n.mirror,stylesheetManager:n.bypassOptions.stylesheetManager},e))}),0)}}},{key:"observeAttachShadow",value:function(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}},{key:"patchAttachShadow",value:function(e,t){var n=this;this.restoreHandlers.push(ct(e.prototype,"attachShadow",(function(e){return function(r){r=e.call(this,r);var o=au.shadowRoot(this);return o&&kt(this)&&n.addShadowRoot(o,t),r}})))}},{key:"reset",value:function(){this.restoreHandlers.forEach((function(e){try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}]),Au="undefined"==typeof Uint8Array?[]:new Uint8Array(256),xu=0;64>xu;xu++)Au["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(xu)]=xu;var Ru,Ou,Mu,Nu=function(e){var t,n=(e=new Uint8Array(e)).length,r="";for(t=0;t<n;t+=3)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e[t]>>2],r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&e[t])<<4|e[t+1]>>4],r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&e[t+1])<<2|e[t+2]>>6],r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&e[t+2]];return 2==n%3?r=r.substring(0,r.length-1)+"=":1==n%3&&(r=r.substring(0,r.length-2)+"=="),r},Lu=new Map,Du=function(e,t,n){if(e&&(Uu(e,t)||"object"===S(e))){t=e.constructor.name;var r=Lu.get(n);return r||(r=new Map,Lu.set(n,r)),r.has(t)||r.set(t,[]),-1===(t=(n=r.get(t)).indexOf(e))&&(t=n.length,n.push(e)),t}},Pu=function(e,t,n){return e.map((function(e){return qt(e,t,n)}))},Uu=function(e,t){return!!"WebGLActiveInfo WebGLBuffer WebGLFramebuffer WebGLProgram WebGLRenderbuffer WebGLShader WebGLShaderPrecisionFormat WebGLTexture WebGLUniformLocation WebGLVertexArrayObject WebGLVertexArrayObjectOES".split(" ").filter((function(e){return"function"==typeof t[e]})).find((function(n){return e instanceof t[n]}))},Fu="undefined"!=typeof window&&window.Blob&&new Blob([function(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}("KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=")],{type:"text/javascript;charset=utf-8"}),Bu=s((function e(t){var n=this;o(this,e),Ia(this,"pendingCanvasMutations",new Map),Ia(this,"rafStamps",{latestId:0,invokeId:null}),Ia(this,"mirror"),Ia(this,"mutationCb"),Ia(this,"resetObservers"),Ia(this,"frozen",!1),Ia(this,"locked",!1),Ia(this,"processMutation",(function(e,t){(n.rafStamps.invokeId&&n.rafStamps.latestId!==n.rafStamps.invokeId||!n.rafStamps.invokeId)&&(n.rafStamps.invokeId=n.rafStamps.latestId),n.pendingCanvasMutations.has(e)||n.pendingCanvasMutations.set(e,[]),n.pendingCanvasMutations.get(e).push(t)}));var r=t.sampling;r=void 0===r?"all":r;var i=t.win,a=t.blockClass,s=t.blockSelector,l=t.recordCanvas,c=t.dataURLOptions;this.mutationCb=t.mutationCb,this.mirror=t.mirror,l&&"all"===r&&this.initCanvasMutationObserver(i,a,s),l&&"number"==typeof r&&this.initCanvasFPSObserver(r,i,a,s,{dataURLOptions:c})}),[{key:"reset",value:function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}},{key:"freeze",value:function(){this.frozen=!0}},{key:"unfreeze",value:function(){this.frozen=!1}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"initCanvasFPSObserver",value:function(e,t,r,o,i){var a=this,s=Zt(t,r,o,!0),l=new Map,c=new Kt;c.onmessage=function(e){var t=e.data.id;l.set(t,!1),"base64"in e.data&&(e=e.data,a.mutationCb({id:t,type:vu["2D"],commands:[{property:"clearRect",args:[0,0,e.width,e.height]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:e.base64}],type:e.type}]},0,0]}]}))};var u=1e3/e,d=0,f=function(e){var s;d&&e-d<u||(d=e,function(){var e=[];return t.document.querySelectorAll("canvas").forEach((function(t){pt(t,r,o,!0)||e.push(t)})),e}().forEach((s=n(m().mark((function e(t){var n,r,o,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.mirror.getId(t),!l.get(r)){e.next=3;break}return e.abrupt("return");case 3:if(0!==t.width&&0!==t.height){e.next=5;break}return e.abrupt("return");case 5:return l.set(r,!0),["webgl","webgl2"].includes(t.__context)&&(o=t.getContext(t.__context),!1===(null==(n=null==o?void 0:o.getContextAttributes())?void 0:n.preserveDrawingBuffer)&&o.clear(o.COLOR_BUFFER_BIT)),e.next=9,createImageBitmap(t);case 9:s=e.sent,c.postMessage({id:r,bitmap:s,width:t.width,height:t.height,dataURLOptions:i.dataURLOptions},[s]);case 11:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)}))),h=requestAnimationFrame(f)},h=requestAnimationFrame(f);this.resetObservers=function(){s(),cancelAnimationFrame(h)}}},{key:"initCanvasMutationObserver",value:function(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var r=Zt(e,t,n,!1),o=function(e,t,n,r){var o,i=[],a=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);a=l(a);try{var s=function(){var a=o.value;try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])return 1;var s=ct(t.CanvasRenderingContext2D.prototype,a,(function(o){return function(){for(var i=this,s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return pt(this.canvas,n,r,!0)||setTimeout((function(){var n=Pu(l,t,i);e(i.canvas,{type:vu["2D"],property:a,args:n})}),0),o.apply(this,l)}}));i.push(s)}catch(n){s=lt(t.CanvasRenderingContext2D.prototype,a,{set:function(t){e(this.canvas,{type:vu["2D"],property:a,args:[t],setter:!0})}}),i.push(s)}};for(a.s();!(o=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}return function(){i.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,n),i=function(e,t,n,r){var o=[];return o.push.apply(o,k(Yt(t.WebGLRenderingContext.prototype,vu.WebGL,e,n,r,t))),void 0!==t.WebGL2RenderingContext&&o.push.apply(o,k(Yt(t.WebGL2RenderingContext.prototype,vu.WebGL2,e,n,r,t))),function(){o.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,n);this.resetObservers=function(){r(),o(),i()}}},{key:"startPendingCanvasMutationFlusher",value:function(){var e=this;requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))}},{key:"startRAFTimestamping",value:function(){var e=this,t=function(n){e.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)}},{key:"flushPendingCanvasMutations",value:function(){var e=this;this.pendingCanvasMutations.forEach((function(t,n){t=e.mirror.getId(n),e.flushPendingCanvasMutationFor(n,t)})),requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))}},{key:"flushPendingCanvasMutationFor",value:function(e,t){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(e);if(n&&-1!==t){var r=n.map((function(e){return e.type,g(e,Sa)}));this.mutationCb({id:t,type:n[0].type,commands:r}),this.pendingCanvasMutations.delete(e)}}}}]),Gu=s((function e(t){o(this,e),Ia(this,"trackedLinkElements",new WeakSet),Ia(this,"mutationCb"),Ia(this,"adoptedStyleSheetCb"),Ia(this,"styleMirror",new uu),this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}),[{key:"attachLinkElement",value:function(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}},{key:"trackLinkElement",value:function(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}},{key:"adoptStyleSheets",value:function(e,t){var n=this;if(0!==e.length){var r,o={id:t,styleIds:[]},i=[];e=l(e);try{for(t=function(){var e=r.value;if(n.styleMirror.has(e))var t=n.styleMirror.getId(e);else t=n.styleMirror.add(e),i.push({styleId:t,rules:Array.from(e.rules||CSSRule,(function(t,n){return{rule:me(t,e.href),index:n}}))});o.styleIds.push(t)},e.s();!(r=e.n()).done;)t()}catch(t){e.e(t)}finally{e.f()}0<i.length&&(o.styles=i),this.adoptedStyleSheetCb(o)}}},{key:"reset",value:function(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}},{key:"trackStylesheetInLinkElement",value:function(e){}}]),ju=s((function e(){o(this,e),Ia(this,"nodeMap",new WeakMap),Ia(this,"active",!1)}),[{key:"inOtherBuffer",value:function(e,t){return(e=this.nodeMap.get(e))&&Array.from(e).some((function(e){return e!==t}))}},{key:"add",value:function(e,t){var n=this;this.active||(this.active=!0,requestAnimationFrame((function(){n.nodeMap=new WeakMap,n.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}},{key:"destroy",value:function(){}}]),zu=!1;try{if(2!==Array.from([1],(function(e){return 2*e}))[0]){var Vu=document.createElement("iframe");document.body.appendChild(Vu),Array.from=(null==(va=Vu.contentWindow)?void 0:va.Array.from)||Array.from,document.body.removeChild(Vu)}}catch(zr){console.debug("Unable to override Array.from",zr)}var Wu,Hu,qu=new Da;Jt.addCustomEvent=function(e,t){if(!zu)throw Error("please add custom event after start recording");Ru({type:du.Custom,data:{tag:e,payload:t}})},Jt.freezePage=function(){Cu.forEach((function(e){return e.freeze()}))},Jt.takeFullSnapshot=function(e){if(!zu)throw Error("please take full snapshot after start recording");Ou(e)},Jt.mirror=qu,function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(Wu||(Wu={})),function(e){e.BRAND="DeviceBrand",e.MANUFACTURER="DeviceManufacturer",e.MODEL="DeviceModel",e.TYPE="DeviceType",e.VERSION="DeviceVersion",e.OS_NAME="OperatingSystemName",e.OS_VERSION="OperatingSystemVersion",e.CATEGORY="DeviceCategory",e.FRAMEWORK_NAME="FrameworkName",e.FRAMEWORK_VERSION="FrameworkVersion"}(Hu||(Hu={}));var Zu,Yu,Ku={DeviceType:{CONSOLE:"Console",DESKTOP:"DESKTOP",MOBILE:"Mobile",SETTOP:"Settop",SMARTTV:"SmartTV",TABLET:"Tablet",VEHICLE:"Vehicle",OTHER:"Other"},DeviceCategory:{ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",KAIOS_DEVICE:"KAIOS",LG_TV:"LGTV",LINUX:"LNX",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",VIDAA_DEVICE:"VIDAA",VIZIO_TV:"VIZIOTV",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB"}};!function(e){var t,n,r,o;e.TRACEPARENT_HEADER_KEY="traceparent",e.BAGGAGE_HEADER_KEY="baggage",(r=n=e.SAMPLING_MODES||(e.SAMPLING_MODES={})).NONE="NONE",r.RCFG="RCFG",function(e){e.DERIVED="DERIVED",e.DEFAULT="DEFAULT"}(e.SAMPLING_STATUS||(e.SAMPLING_STATUS={})),function(e){e.SAMPLED="sl",e.NON_SAMPLED="nsl"}(o=e.SAMPLING_ACTION||(e.SAMPLING_ACTION={})),e.DEFAULT_SAMPLING_ACTION=((t={})[o.SAMPLED]=n.RCFG,t[o.NON_SAMPLED]=n.NONE,t),function(e){e.DEFAULT="def",e.CACHED="cac",e.REMOTE="rem"}(e.CONFIG_SOURCE||(e.CONFIG_SOURCE={})),function(e){e[e.APP=0]="APP",e[e.REMOTE=1]="REMOTE",e[e.MERGE=2]="MERGE"}(e.CONFIG_PREFERENCES||(e.CONFIG_PREFERENCES={})),function(e){e[e.DISABLED=0]="DISABLED",e[e.PERFORMANCE_TIMING=1]="PERFORMANCE_TIMING",e[e.PERFORMANCE_NAVIGATION_TIMING=2]="PERFORMANCE_NAVIGATION_TIMING"}(e.PERFORMANCE_CONTEXT||(e.PERFORMANCE_CONTEXT={})),function(e){e.DO_NOT_FETCH_UPDATE_TIMER="updateTimer",e.IMMEDIATE_FETCH="urgentFetch",e.UPDATE_TIMER_WITH_DIFF="checkDiff"}(e.RC_FETCH_MODE||(e.RC_FETCH_MODE={})),function(e){e.AUTO="auto",e.MANUAL="manual",e.BOTH="both"}(e.NETWORK_REQUEST_EVENT_COLLECTION_MODE||(e.NETWORK_REQUEST_EVENT_COLLECTION_MODE={})),e.REMOTE_CONFIG_STORAGE_KEY="ConvivaRemoteConfig",e.END_POINT_STORAGE_KEY="ConvivaEndpoint",e.DEFAULT_END_POINT="https://appgw.conviva.com",e.REMOTE_CONFIG_URL_PREFIX="https://rc.conviva.com/js/",e.REMOTE_CONFIG_FILE_NAME="/remote_config.json",e.SAMPLING_STORAGE_RANDOM_NUMBER_KEY="ConvivaSamplingRandomNumber",e.VISUAL_LABELLING_CONFIG="ConvivaVisualLabellingConfig",e.SESSION_RECORDING_STARTED="ConvivaSessionRecordingStarted",e.DIAGNOSTIC_INFO_MAX_LENGTH={MAX_MESSAGE_LENGTH:1024,MAX_STACK_LENGTH:2048,MAX_CLASSNAME_LENGTH:1024,MAX_EXCEPTION_NAME_LENGTH:1024},e.CLICK_KEY_MAX_LENGTH=1024,e.CLICK_DEBOUNCING_DELAY=300,e.CLICK_MAX_DEPTH=16,e.MAX_NATIVE_SCAN=16,e.MAX_NATIVE_SCAN_LEGACY=8,e.PAGE_URL_QUERY_PARAMS="pgq",e.V2A_CUSTOM_EVENTS=["c3.video.custom_event","c3.sdk.custom_event","c3.ad.custom_event"]}(Zu||(Zu={})),"function"==typeof AbortController&&(Yu=new AbortController);var Ju,Xu=null==Yu?void 0:Yu.signal;!function(e){e.response_body="rsb",e.request_body="rqb",e.response_headers="rsh",e.request_headers="rqh",e.request_query="rqq"}(Ju||(Ju={}));var Qu,$u=10240,ed=function(e){try{var t=void 0;return null!=e&&(t=e["content-type"]||e["Content-Type"]||e["Content-type"]),t}catch(e){}},td={};!function(e){e.APPLICATION_BACKGROUND="abg",e.APPLICATION_ERROR="ae",e.WEBVITALS_LCP="conviva_webvitals_lcp",e.WEBVITALS_CLS="conviva_webvitals_cls",e.WEBVITALS_INP="conviva_webvitals_inp"}(Qu||(Qu={}));var nd,rd={cacheRefreshInterval:30,base64:!1,lifecycleAutotracking:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{enabled:!0},softNavigationTrackingConfiguration:{enabled:!1,idleWindowMs:600,maxMeasurementMs:1e4,includeHashChanges:!1,domainAllowlist:[],domainBlocklist:["sdk.fra-01.braze.eu","tr.snapchat.com","analytics.google.com","ams.creativecdn.com","analytics.tiktok.com"]},networkRequestTrackingConfiguration:{eventCollectionMode:Zu.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH,blocklist:["*"]},traceparentconfig:{enabled:!1,pref:Zu.CONFIG_PREFERENCES.MERGE,targetUrl:[]},baggageConfiguration:{enabled:!1,targetUrl:[],attributeExtraction:[]},performanceContextConfig:1,configurationVersion:-1,catRcLastUpdatedTs:0,endpoint:Zu.DEFAULT_END_POINT,applicationContext:!0,maxLocalStorageQueueSize:10,emitterConfiguration:{batching:{enabled:!0,byteLimitPostInKB:250,batchingIntervalInSec:5,urgentEvents:[Qu.APPLICATION_BACKGROUND,Qu.APPLICATION_ERROR,Qu.WEBVITALS_LCP,Qu.WEBVITALS_CLS,Qu.WEBVITALS_INP]}},enc:"gzip",mend:!0,di:{en:!1,lim:30},clickcc:{en:!0,cssSelectorList:'\n  [role="button"],\n  [data-role="button"],\n  li,\n  [class^="btn"],\n  [class*="click"],\n  [data-click],\n  [data-action],\n  [tabindex]:not([tabindex="-1"]),\n  [onclick],\n  [role="datepicker"],\n  [class*="datepicker"],\n  [class*="date-picker"],\n  [class*="mat-datepicker"],\n  [class*="ant-picker"],\n  [class*="v-date-picker"],\n  [class*="react-datepicker"],\n  [class*="ngx-datepicker"],\n  [data-ng-click],\n  [ng-click],\n  [v-on\\:click],\n  [\\@click],\n  [data-test-id*="click"],\n  [data-testid*="button"],\n  [class*="-btn"],\n  [class*="-button"],\n  [class*="mat-button"],\n  [class*="v-btn"],\n  [class*="v-icon-button"],\n  [data-listener-count-click],\n  [class*="Button"]\n',uiMode:"closest"},collectionRateLimit:{exceptionAutotracking:{maxEvents:20,timeWindow:1e3,disconnectDuration:2e3}},evtStreamTrackingConfiguration:{enabled:!1,collect:[],block:[],conditionalCollectAttr:[],richContentInference:{cond:[]}},valueProbes:{enabled:!1,probes:[]},webVitals:{enabled:!1,collectattr:[]}},od="cws.conviva.com rcg.conviva.com /wsg /ctp remote_config pings.conviva.com .m3u8 .mpd .ism .m4 .mp4 .ts .png .jpg .jpeg .bmp google-analytics.com googlesyndication.com googleapis stats.g.doubleclick chartbeat.com omtrdc.net app-measurement.com firebase nr-data.net newrelic bitmovin.com/impression bitmovin.com/analytics api.segment.io youbora hotjar mixpanel.com clevertap auryc .aac .vtt .googlevideo webp appsflyer facebook dynatrace mparticle npaw .pdf bookkeeper kochava mp3 marketingcloudapis demdex scorecardresearch lura.live perimeterx.net permutive.app segment.com vaicore.site boomtrain ketchcdn qualtrics .svg amplitude datadoghq branch.io hotjar splunkcloud".split(" ");!function(e){e.NONE="none",e.GZIP="gzip"}(nd||(nd={}));var id,ad,sd=function(e){var t={};return e.trim().split(/[\r\n]+/).forEach((function(e){var n=(e=e.split(":"))[1];t[e[0].trim()]=null==n?void 0:n.trim()})),t},ld=function(e){var t={};return e.forEach((function(e,n){t[n]=e})),t},cd="/ctp /wsg remote_config rc.conviva.com pings.conviva.com rcg.conviva.com".split(" ");!function(e){e[e.NETWORK_REQUEST=0]="NETWORK_REQUEST",e[e.CUSTOM_EVENT=1]="CUSTOM_EVENT",e[e.SSE_EVENT=2]="SSE_EVENT"}(ad||(ad={}));var ud,dd,fd,hd,pd,vd=0,gd=0,md=Zu.CONFIG_SOURCE.DEFAULT,yd=0,bd=!1,wd=null,kd=null,Cd=0,Sd='\n  button,\n  a,\n  select,\n  textarea,\n  input:not([type="hidden"]),\n  summary,\n  video,\n  audio\n'.replace(/\s+/g,"")||"",Ed='\n[class*="card"]\n'.replace(/\s+/g,"")||"",Id="undefined"!=typeof window&&null!==window&&void 0!==window&&window.localStorage?localStorage.getItem(Zu.REMOTE_CONFIG_STORAGE_KEY):null,_d=Id?null===(dd=null===(ud=JSON.parse(Id).clickcc)||void 0===ud?void 0:ud.cssSelectorList)||void 0===dd?void 0:dd.replace(/\s+/g,""):null===(fd=rd.clickcc)||void 0===fd?void 0:fd.cssSelectorList;!function(e){e.BOTH="both",e.CLOSEST="closest",e.RAW="raw"}(pd||(pd={})),"undefined"!=typeof Element&&Element.prototype&&!Element.prototype.closest&&(Element.prototype.closest=function(e){try{for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}}catch(e){qr.warn("Conviva App Tracker caused Exception in closest polyfill method of user click tracking module",e)}return null});var Td,Ad,xd,Rd,Od,Md,Nd,Ld,Dd,Pd=function(e){this.cacheRefreshInterval=e.cacheRefreshInterval,this.base64=e.base64,this.corePlugins=e.corePlugins,this.callback=e.callback,this.lifecycleAutotracking=e.lifecycleAutotracking,this.exceptionAutotracking=e.exceptionAutotracking,this.enablePeriodicHeartbeat=e.enablePeriodicHeartbeat,this.periodicHeartbeatInterval=e.periodicHeartbeatInterval,this.enc=e.enc,this.maxLocalStorageQueueSize=e.maxLocalStorageQueueSize,this.maxPostBytes=e.maxPostBytes,this.maxGetBytes=e.maxGetBytes,this.bufferSize=e.bufferSize,this.customEventTrackingConfiguration=e.customEventTrackingConfiguration,this.softNavigationTrackingConfiguration=e.softNavigationTrackingConfiguration,this.networkRequestTrackingConfiguration=e.networkRequestTrackingConfiguration,this.traceparentconfig=e.traceparentconfig,this.baggageConfiguration=e.baggageConfiguration,this.metaTagsTrackingConfiguration=e.metaTagsTrackingConfiguration,this.performanceContextConfig=e.performanceContextConfig,this.mend=e.mend,this.configurationVersion=e.configurationVersion,this.catRcLastUpdatedTs=e.catRcLastUpdatedTs,this.endpoint=e.endpoint,this.emitterConfiguration=e.emitterConfiguration,this.controlIngestConfig=e.controlIngestConfig,this.applicationContext=e.applicationContext,this.di=e.di,this.clickcc=e.clickcc,this.collectionRateLimit=e.collectionRateLimit,this.pageUrlTrackingConfig=e.pageUrlTrackingConfig,this.sessionReplayConfiguration=e.sessionReplayConfiguration,this.evtStreamTrackingConfiguration=e.evtStreamTrackingConfiguration,this.valueProbes=e.valueProbes,this.webVitals=e.webVitals},Ud=function(){function e(){this.cacheRefreshInterval=rd.cacheRefreshInterval,this.base64=rd.base64,this.lifecycleAutotracking=rd.lifecycleAutotracking,this.exceptionAutotracking=rd.exceptionAutotracking,this.enablePeriodicHeartbeat=rd.enablePeriodicHeartbeat,this.periodicHeartbeatInterval=rd.periodicHeartbeatInterval,this.customEventTrackingConfiguration=_r({},rd.customEventTrackingConfiguration),this.softNavigationTrackingConfiguration=_r({},rd.softNavigationTrackingConfiguration),this.networkRequestTrackingConfiguration=_r({},rd.networkRequestTrackingConfiguration),this.traceparentconfig=_r({},rd.traceparentconfig),this.baggageConfiguration=_r({},rd.baggageConfiguration),this.performanceContextConfig=rd.performanceContextConfig,this.configurationVersion=rd.configurationVersion,this.catRcLastUpdatedTs=rd.catRcLastUpdatedTs,this.endpoint=rd.endpoint,this.emitterConfiguration=rd.emitterConfiguration,this.applicationContext=rd.applicationContext,this.enc=rd.enc,this.mend=rd.mend,this.di=_r({},rd.di),this.clickcc=_r({},rd.clickcc),this.collectionRateLimit=_r({},rd.collectionRateLimit),this.evtStreamTrackingConfiguration=_r({},rd.evtStreamTrackingConfiguration),this.valueProbes=_r({},rd.valueProbes),this.webVitals=_r({},rd.webVitals)}return e.prototype.setCacheRefreshInterval=function(e){return this.cacheRefreshInterval="number"==typeof e&&1<=e&&Qt(e)?e:rd.cacheRefreshInterval,this},e.prototype.setBase64=function(e){return"boolean"==typeof e&&(this.base64=e),this},e.prototype.setCorePlugins=function(e){return e&&(this.corePlugins=e),this},e.prototype.setCallback=function(e){return e&&(this.callback=e),this},e.prototype.setLifecycleAutotracking=function(e){return"boolean"==typeof e&&(this.lifecycleAutotracking=e),this},e.prototype.setExceptionAutotracking=function(e){return"boolean"==typeof e&&(this.exceptionAutotracking=e),this},e.prototype.setEnablePeriodicHeartbeat=function(e){return"boolean"==typeof e&&(this.enablePeriodicHeartbeat=e),this},e.prototype.setPeriodicHeartbeatInterval=function(e){return"number"==typeof e&&1<=e&&(this.periodicHeartbeatInterval=~~e),this},e.prototype.setEnc=function(e,t){return"string"==typeof e&&Object.values(nd).includes(e)?this.enc=e:t&&"string"==typeof t&&Object.values(nd).includes(t)?this.enc=t:this.enc=rd.enc,this},e.prototype.setMaxLocalStorageQueueSize=function(e){return"number"==typeof e&&(this.maxLocalStorageQueueSize=e),this},e.prototype.setMaxGetBytes=function(e){return"number"==typeof e&&(this.maxGetBytes=e),this},e.prototype.setBufferSize=function(e){return"number"==typeof e&&(this.bufferSize=e),this},e.prototype.setCustomEventTrackingConfiguration=function(e){return e&&(this.customEventTrackingConfiguration=e),this},e.prototype.setSoftNavigationTrackingConfiguration=function(e){return e&&(this.softNavigationTrackingConfiguration=e),this},e.prototype.setEmitterConfiguration=function(e){return void 0!==e&&(void 0!==e.batching.enabled&&(this.emitterConfiguration.batching.enabled=e.batching.enabled),void 0!==e.batching.batchingIntervalInSec&&0<e.batching.batchingIntervalInSec&&(this.emitterConfiguration.batching.batchingIntervalInSec=e.batching.batchingIntervalInSec),"undefined"!=e.batching.byteLimitPostInKB&&0<e.batching.byteLimitPostInKB&&(this.emitterConfiguration.batching.byteLimitPostInKB=e.batching.byteLimitPostInKB),void 0!==e.batching.urgentEvents&&(this.emitterConfiguration.batching.urgentEvents=e.batching.urgentEvents)),this},e.prototype.setNetworkRequestTrackingConfiguration=function(e,t,n){return e&&(this.networkRequestTrackingConfiguration=e,this.networkRequestTrackingConfiguration.eventCollectionMode||(this.networkRequestTrackingConfiguration.eventCollectionMode=rd.networkRequestTrackingConfiguration.eventCollectionMode),t&&(this.networkRequestTrackingConfiguration.blocklist||(this.networkRequestTrackingConfiguration.blocklist=[]),n&&this.networkRequestTrackingConfiguration.blocklist.push(n),this.networkRequestTrackingConfiguration.blocklist=this.networkRequestTrackingConfiguration.blocklist.concat(od))),this},e.prototype.setTraceparentconfig=function(e){return e&&(this.traceparentconfig=e),this},e.prototype.setBaggageConfiguration=function(e){return null!=e&&("boolean"==typeof e.enabled&&(this.baggageConfiguration.enabled=e.enabled),void 0!==e.targetUrl&&(this.baggageConfiguration.targetUrl=e.targetUrl),void 0!==e.attributeExtraction&&(this.baggageConfiguration.attributeExtraction=e.attributeExtraction)),this},e.prototype.setMetaTagsTrackingConfiguration=function(e){return e&&(this.metaTagsTrackingConfiguration=e),this},e.prototype.setPerformanceContextConfig=function(e){return"number"==typeof e&&(this.performanceContextConfig=e),this},e.prototype.setMend=function(e,t){return"boolean"==typeof e?this.mend=e:"boolean"==typeof t&&(this.mend=t),this},e.prototype.setConfigurationVersion=function(e){return"number"==typeof e&&(this.configurationVersion=e),this},e.prototype.setCatRcLastUpdatedTs=function(e){return"number"==typeof e&&(this.catRcLastUpdatedTs=e),this},e.prototype.setEndPoint=function(e,t,n){return"string"==typeof n&&0<n.trim().length?this.endpoint=n:"string"==typeof e&&0<e.trim().length?this.endpoint=e:t&&"string"==typeof t&&0<t.trim().length?this.endpoint=t:this.endpoint=rd.endpoint,this},e.prototype.setcontrolIngestConfig=function(e){return void 0!==e?this.controlIngestConfig=e:dn(),this},e.prototype.setApplicationContext=function(e){return void 0!==e&&(this.applicationContext=e),this},e.prototype.setDi=function(e){return void 0!==e&&(this.di=_r(_r({},this.di),e)),this},e.prototype.setClickcc=function(e){var t,n;return void 0!==e&&("boolean"==typeof e.en&&(this.clickcc.en=e.en),e.cssSelectorList&&0<e.cssSelectorList.trim().length&&(this.clickcc.cssSelectorList=e.cssSelectorList),"string"==typeof e.uiMode&&Object.values(pd).includes(e.uiMode)&&(this.clickcc.uiMode=e.uiMode),void 0!==e.block&&(this.clickcc.block=e.block),void 0!==e.collect&&(this.clickcc.collect=e.collect),void 0!==e.collectattr&&(this.clickcc.collectattr=e.collectattr)),"boolean"==typeof(null===(t=null==this?void 0:this.clickcc)||void 0===t?void 0:t.en)&&!0===(null===(n=null==this?void 0:this.clickcc)||void 0===n?void 0:n.en)?Fn():Bn(),this},e.prototype.setCollectionRateLimit=function(e){return null!=e&&(this.collectionRateLimit=_r(_r({},this.collectionRateLimit),e)),this},e.prototype.setPageUrlTrackingConfig=function(e){return this.pageUrlTrackingConfig=void 0!==e?e:null,this},e.prototype.setSessionReplayConfiguration=function(e){return this.sessionReplayConfiguration=void 0!==e?e:null,this},e.prototype.setValueProbes=function(e){var t,n;return this.valueProbes=void 0!==e?_r(_r({},e),{enabled:null!==(t=null==e?void 0:e.enabled)&&void 0!==t&&t,probes:null!==(n=null==e?void 0:e.probes)&&void 0!==n?n:[]}):_r({},rd.valueProbes),this},e.prototype.setWebVitals=function(e){var t,n;return this.webVitals=void 0!==e?_r(_r({},e),{enabled:null!==(t=null==e?void 0:e.enabled)&&void 0!==t&&t,collectattr:null!==(n=null==e?void 0:e.collectattr)&&void 0!==n?n:[]}):_r({},rd.webVitals),this},e.prototype.setEvtStreamTrackingConfiguration=function(e){return void 0!==e&&("boolean"==typeof e.enabled&&(this.evtStreamTrackingConfiguration.enabled=e.enabled),void 0!==e.block&&(this.evtStreamTrackingConfiguration.block=e.block),void 0!==e.collect&&(this.evtStreamTrackingConfiguration.collect=e.collect),void 0!==e.conditionalCollectAttr&&(this.evtStreamTrackingConfiguration.conditionalCollectAttr=e.conditionalCollectAttr),void 0!==e.richContentInference&&(this.evtStreamTrackingConfiguration.richContentInference=e.richContentInference),void 0!==e.bufferMaxBytes&&(this.evtStreamTrackingConfiguration.bufferMaxBytes=e.bufferMaxBytes)),this},e.prototype.build=function(){return new Pd(this)},e}(),Fd=!1,Bd=null,Gd=0,jd=!1,zd=function(e,t,n){var r,o,i,a,s,l={},c={};if("undefined"!=typeof window&&null!==window&&void 0!==window&&window.localStorage)try{localStorage.removeItem(Zu.END_POINT_STORAGE_KEY),(s=localStorage.getItem(Zu.REMOTE_CONFIG_STORAGE_KEY))?md=Zu.CONFIG_SOURCE.CACHED:s=JSON.stringify(c)}catch(e){s=JSON.stringify(c),jd=!0;var u={className:"fetchRemoteConfig - localstorage",error:e,configAppliedSrc:md,configAppliedTime:yd};setTimeout((function(){Nn(id,null==Ad?void 0:Ad.getSamplingMode,u)}),0),qr.warn("Issue while fetching data from local storage")}else s=JSON.stringify(c);try{l=JSON.parse(s)}catch(e){jd=!0;var d={className:"fetchRemoteConfig - parsing cached data",error:e,configAppliedSrc:md,configAppliedTime:yd};setTimeout((function(){Nn(id,null==Ad?void 0:Ad.getSamplingMode,d)}),0),qr.warn("Issue while parsing storedConvivaRemoteConfig")}c=(new Ud).setBase64(null==l?void 0:l.base64).setCacheRefreshInterval(null==l?void 0:l.cacheRefreshInterval).setLifecycleAutotracking(null==l?void 0:l.lifecycleAutotracking).setExceptionAutotracking(null==l?void 0:l.exceptionAutotracking).setEnablePeriodicHeartbeat(null==l?void 0:l.enablePeriodicHeartbeat).setPeriodicHeartbeatInterval(null==l?void 0:l.periodicHeartbeatInterval).setEnc(null==l?void 0:l.enc,null===(o=null===(r=null==n?void 0:n.configs)||void 0===r?void 0:r.network)||void 0===o?void 0:o.encoding).setMaxLocalStorageQueueSize(null==l?void 0:l.maxLocalStorageQueueSize).setMaxGetBytes(null==l?void 0:l.maxGetBytes).setBufferSize(null==l?void 0:l.bufferSize).setCustomEventTrackingConfiguration(null==l?void 0:l.customEventTrackingConfiguration).setSoftNavigationTrackingConfiguration(null==l?void 0:l.softNavigationTrackingConfiguration).setEndPoint(null==l?void 0:l.endpoint,n.gatewayUrl,n.proxyGatewayUrl).setNetworkRequestTrackingConfiguration(null==l?void 0:l.networkRequestTrackingConfiguration,!1).setMetaTagsTrackingConfiguration(null==l?void 0:l.metaTagsTrackingConfiguration).setTraceparentconfig(null==l?void 0:l.traceparentconfig).setBaggageConfiguration(null==l?void 0:l.baggageConfiguration).setMend(null==l?void 0:l.mend,null===(a=null===(i=null==n?void 0:n.configs)||void 0===i?void 0:i.network)||void 0===a?void 0:a.mergeEndpoint).setPerformanceContextConfig(null==l?void 0:l.performanceContextConfig).setConfigurationVersion(null==l?void 0:l.configurationVersion).setCatRcLastUpdatedTs(null==l?void 0:l.catRcLastUpdatedTs).setEmitterConfiguration(null==l?void 0:l.emitterConfiguration).setcontrolIngestConfig(null==l?void 0:l.controlIngestConfig).setApplicationContext(null==l?void 0:l.applicationContext).setDi(null==l?void 0:l.di).setClickcc(null==l?void 0:l.clickcc).setCollectionRateLimit(null==l?void 0:l.collectionRateLimit).setPageUrlTrackingConfig(null==l?void 0:l.pageUrlTrackingConfig).setSessionReplayConfiguration(null==l?void 0:l.sessionReplayConfiguration).setEvtStreamTrackingConfiguration(null==l?void 0:l.evtStreamTrackingConfiguration).setValueProbes(null==l?void 0:l.valueProbes).setWebVitals(null==l?void 0:l.webVitals).build(),r="Cached Config Applied",md===Zu.CONFIG_SOURCE.DEFAULT&&(r="Default Config Applied"),yd=(new Date).getTime();var f={message:r,className:"browserTrackerCore",configAppliedSrc:md,configAppliedTime:yd};setTimeout((function(){Nn(id,null==Ad?void 0:Ad.getSamplingMode,f)}),0),e=e.split("js-")[1].split(" ")[0];var h=(n.proxyGatewayUrl?n.proxyGatewayUrl+"/js/":Zu.REMOTE_CONFIG_URL_PREFIX)+n.convivaCustomerKey+"/"+e+Zu.REMOTE_CONFIG_FILE_NAME;return window.XMLHttpRequest&&((Td=new XMLHttpRequest).onreadystatechange=function(){var e;try{if(4==Td.readyState)if(Fd=!1,200==Td.status){var r={message:"Remote config request is successful - ".concat("number"==typeof Td.status?Td.status:""),className:"configtimerCallback - onreadystatechange",configAppliedSrc:md,configAppliedTime:yd};Nn(id,null==Ad?void 0:Ad.getSamplingMode,r),Gd=0;var o=JSON.parse(Td.response);if(r=id,(null==o?void 0:o.configurationBundle[0].namespace)!==t)Nn(id,null==Ad?void 0:Ad.getSamplingMode,{message:"Remote Config not Applied due to a missing namespace",className:"updateRemoteConfig",configAppliedSrc:md,configAppliedTime:yd});else{if(!o.hasOwnProperty("configurationVersion")||(null===(e=r.getConfig())||void 0===e?void 0:e.configurationVersion)===(null==o?void 0:o.configurationVersion)){var i=localStorage.getItem(Zu.REMOTE_CONFIG_STORAGE_KEY);if(i)return(i=JSON.parse(i)).catRcLastUpdatedTs=(new Date).getTime(),window.localStorage&&(localStorage.removeItem(Zu.REMOTE_CONFIG_STORAGE_KEY),localStorage.setItem(Zu.REMOTE_CONFIG_STORAGE_KEY,JSON.stringify(i))),void Nn(id,null==Ad?void 0:Ad.getSamplingMode,{message:"Remote Config not Applied as same version is fetched",className:"updateRemoteConfig",configAppliedSrc:md,configAppliedTime:yd})}c.catRcLastUpdatedTs=(new Date).getTime();var a=o.cri||o.cacheRefreshInterval||rd.cacheRefreshInterval;if(a=1>a?rd.cacheRefreshInterval:Qt(a)?a:rd.cacheRefreshInterval,c.cacheRefreshInterval!=a&&(c.cacheRefreshInterval=a,Vd(c.cacheRefreshInterval,c.catRcLastUpdatedTs,n,h,Zu.RC_FETCH_MODE.DO_NOT_FETCH_UPDATE_TIMER)),Hd(o,c.catRcLastUpdatedTs,n)){var s=new Event("RemoteConfigUpdateApplied");null!==window&&void 0!==window&&window.dispatchEvent&&window.dispatchEvent(s)}}}else try{2>Gd&&window.setTimeout((function(){null!=n&&n.trackerConfigUrl?Wd(null==n?void 0:n.trackerConfigUrl,!0):Wd(h,!0)}),5e3*(Gd+1));var l={message:"Remote config request is not successful - ".concat("number"==typeof Td.status?Td.status:""),className:"configtimerCallback - onreadystatechange",configAppliedSrc:md,configAppliedTime:yd};Nn(id,null==Ad?void 0:Ad.getSamplingMode,l),2<=Gd&&Nn(id,null==Ad?void 0:Ad.getSamplingMode,{message:"Remote config is not applied since failed to download remote config after 3 tries",className:"configtimerCallback - onreadystatechange",configAppliedSrc:md,configAppliedTime:yd})}catch(e){}}catch(e){Fd=!1,console.warn("Conviva App Tracker:: Error in fetching remote-config ".concat(e)),Nn(id,null==Ad?void 0:Ad.getSamplingMode,{className:"configtimerCallback - onreadystatechange",error:e,configAppliedSrc:md,configAppliedTime:yd})}},Vd(c.cacheRefreshInterval,c.catRcLastUpdatedTs,n,h,void 0!==jd&&!0===jd?Zu.RC_FETCH_MODE.IMMEDIATE_FETCH:Zu.RC_FETCH_MODE.UPDATE_TIMER_WITH_DIFF)),{convivaRemoteTrackerConfig:c}},Vd=function(e,t,n,r,o){var i=n.trackerConfigUrl?n.trackerConfigUrl:r;if("number"==typeof Bd){window.clearInterval(Bd);var a={message:"Cancelling remote config timer",className:"updateRemoteConfig",extraData:{mode:o},configAppliedSrc:md,configAppliedTime:yd};setTimeout((function(){Nn(id,null==Ad?void 0:Ad.getSamplingMode,a)}),0)}var s=function(){var t={message:"Starting remote config timer with delay of ".concat(60*e," seconds"),className:"updateRemoteConfig",configAppliedSrc:md,configAppliedTime:yd};setTimeout((function(){Nn(id,null==Ad?void 0:Ad.getSamplingMode,t)}),0),Bd=window.setInterval(Wd,6e4*e,i)};try{var l=t?((new Date).getTime()-t)/6e4:e;if(n=e-l,r=3*e/100,"string"==typeof o&&o===Zu.RC_FETCH_MODE.DO_NOT_FETCH_UPDATE_TIMER)s();else if("string"==typeof o&&o===Zu.RC_FETCH_MODE.UPDATE_TIMER_WITH_DIFF&&0<t&&n>r){window.setTimeout((function(){Wd(i),s()}),6e4*n);var c={message:"Starting remote config timer with delay of ".concat(60*n," seconds"),className:"updateRemoteConfig",extraData:{mode:o},configAppliedSrc:md,configAppliedTime:yd};setTimeout((function(){Nn(id,null==Ad?void 0:Ad.getSamplingMode,c)}),0)}else Wd(i),s()}catch(e){console.warn("Conviva App Tracker:: Error in setting cacheRefreshIntervalTimer",e),Wd(i),s();var u={className:"cacheRefreshIntervalTimer",error:e,configAppliedSrc:md,configAppliedTime:yd};setTimeout((function(){Nn(id,null==Ad?void 0:Ad.getSamplingMode,u)}),0)}},Wd=function(e,t){try{if("boolean"==typeof Fd&&!1===Fd){t?Gd++:Gd=0,Td.timeout=3e4,Td.open("GET",e,!0),Fd=!0;var n={message:"Remote config fetch attempt",className:"updateRemoteConfig",configAppliedSrc:md,configAppliedTime:yd};setTimeout((function(){Nn(id,null==Ad?void 0:Ad.getSamplingMode,n)}),0),Td.send()}}catch(e){Fd=!1,qr.warn("Conviva App Tracker:: Error in configtimerCallback ".concat(e));var r={className:"configtimerCallback",error:e,configAppliedSrc:md,configAppliedTime:yd};setTimeout((function(){Nn(id,null==Ad?void 0:Ad.getSamplingMode,r)}),0)}},Hd=function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,v,g,m,y,b,w,k,C,S,E,I,_,T,A,x,R,O,M,N,L,D,P,U,F=id;try{var B=(new Ud).setBase64(e.configurationBundle[0].trackerConfiguration.base64Encoding).setCacheRefreshInterval(e.cri||e.cacheRefreshInterval).setLifecycleAutotracking(null===(o=null===(r=e.configurationBundle[0])||void 0===r?void 0:r.trackerConfiguration)||void 0===o?void 0:o.lifecycleAutotracking).setExceptionAutotracking(null===(a=null===(i=e.configurationBundle[0])||void 0===i?void 0:i.trackerConfiguration)||void 0===a?void 0:a.exceptionAutotracking).setEnablePeriodicHeartbeat(null===(l=null===(s=e.configurationBundle[0])||void 0===s?void 0:s.trackerConfiguration)||void 0===l?void 0:l.enablePeriodicHeartbeat).setPeriodicHeartbeatInterval(null===(u=null===(c=e.configurationBundle[0])||void 0===c?void 0:c.trackerConfiguration)||void 0===u?void 0:u.periodicHeartbeatInterval).setEnc(null===(f=null===(d=e.configurationBundle[0])||void 0===d?void 0:d.networkConfiguration)||void 0===f?void 0:f.enc,null===(p=null===(h=null==n?void 0:n.configs)||void 0===h?void 0:h.network)||void 0===p?void 0:p.encoding).setMaxLocalStorageQueueSize(null===(g=null===(v=e.configurationBundle[0])||void 0===v?void 0:v.networkConfiguration)||void 0===g?void 0:g.maxLocalStorageQueueSize).setMaxGetBytes(null===(y=null===(m=e.configurationBundle[0])||void 0===m?void 0:m.networkConfiguration)||void 0===y?void 0:y.maxGetBytes).setBufferSize(null===(w=null===(b=e.configurationBundle[0])||void 0===b?void 0:b.networkConfiguration)||void 0===w?void 0:w.bufferSize).setCustomEventTrackingConfiguration(null===(k=e.configurationBundle[0])||void 0===k?void 0:k.customEventTrackingConfiguration).setSoftNavigationTrackingConfiguration(null===(C=e.configurationBundle[0])||void 0===C?void 0:C.softNavigationTrackingConfiguration).setEndPoint(null===(E=null===(S=e.configurationBundle[0])||void 0===S?void 0:S.networkConfiguration)||void 0===E?void 0:E.endpoint,n.gatewayUrl,n.proxyGatewayUrl).setNetworkRequestTrackingConfiguration(null===(I=e.configurationBundle[0])||void 0===I?void 0:I.networkRequestTrackingConfiguration,!0,null===(T=null===(_=e.configurationBundle[0])||void 0===_?void 0:_.networkConfiguration)||void 0===T?void 0:T.endpoint).setMetaTagsTrackingConfiguration(null===(A=e.configurationBundle[0])||void 0===A?void 0:A.metaTagsTrackingConfiguration).setTraceparentconfig(null===(x=e.configurationBundle[0])||void 0===x?void 0:x.traceparentconfig).setBaggageConfiguration(null===(R=e.configurationBundle[0])||void 0===R?void 0:R.baggageConfiguration).setMend(null===(M=null===(O=e.configurationBundle[0])||void 0===O?void 0:O.networkConfiguration)||void 0===M?void 0:M.mend,null===(L=null===(N=null==n?void 0:n.configs)||void 0===N?void 0:N.network)||void 0===L?void 0:L.mergeEndpoint).setPerformanceContextConfig(null===(P=null===(D=e.configurationBundle[0])||void 0===D?void 0:D.trackerConfiguration)||void 0===P?void 0:P.perfCx).setConfigurationVersion(e.configurationVersion).setCatRcLastUpdatedTs(t).setEmitterConfiguration(e.configurationBundle[0].emitterConfiguration).setcontrolIngestConfig(e["ctrl-ingst"]).setApplicationContext(e.configurationBundle[0].trackerConfiguration.applicationContext).setDi(e.configurationBundle[0].di).setClickcc(e.configurationBundle[0].clickcc).setCollectionRateLimit(e.configurationBundle[0].collectionRateLimit).setPageUrlTrackingConfig(e.configurationBundle[0].pageUrlTrackingConfig).setSessionReplayConfiguration(e.configurationBundle[0].sessionReplayConfiguration).setEvtStreamTrackingConfiguration(e.configurationBundle[0].evtStreamTrackingConfiguration).setValueProbes(e.configurationBundle[0].valueProbes).setWebVitals(e.configurationBundle[0].webVitals).build();md=Zu.CONFIG_SOURCE.REMOTE,yd=(new Date).getTime(),console.log("Value probs: ",e.configurationBundle[0].valueProbes),console.log("Core config: ",B),null==F||F.setConfig(B),e={message:"Remote Config Applied",className:"updateRemoteConfig - tracker",configAppliedSrc:md,configAppliedTime:yd},Nn(id,null==Ad?void 0:Ad.getSamplingMode,e),null==Ad||Ad.setCollectorUrl(null===(U=null==F?void 0:F.getConfig())||void 0===U?void 0:U.endpoint,n.convivaCustomerKey);try{window.localStorage&&(localStorage.removeItem(Zu.REMOTE_CONFIG_STORAGE_KEY),localStorage.setItem(Zu.REMOTE_CONFIG_STORAGE_KEY,JSON.stringify(B)))}catch(e){Nn(id,null==Ad?void 0:Ad.getSamplingMode,{className:"updateRemoteConfig - localstorage",error:e,configAppliedSrc:md,configAppliedTime:yd}),console.warn("Conviva: Error while saving remote-config to localstorage",e)}}catch(t){return e={className:"updateRemoteConfig - tracker",error:t,configAppliedSrc:md,configAppliedTime:yd},Nn(id,null==Ad?void 0:Ad.getSamplingMode,e),console.warn("Conviva: Error while updating remote-config",t),!1}return!0},qd={idleMs:3e4,maxEvents:1e4,bufferMaxBytes:1e6},Zd=function(){function e(e,t,n){var r;this.originalFetch=null===(r=null===window||void 0===window?void 0:window.fetch)||void 0===r?void 0:r.bind(window),this.sseCountStates=new Map,this.inflightRequests=0,this.core=id,this.trackerMethods=e,this.trackerConfiguration=t,this.getSamplingMode=n,this.handleResponse=this.handleResponse.bind(this),this.addTraceparentHeader=this.addTraceparentHeader.bind(this),this.addBaggageHeader=this.addBaggageHeader.bind(this)}return e.prototype.cleanupNetworkRequestHandler=function(){e.instance=null},e.getInstance=function(t,n,r){return e.instance||(e.instance=new e(t,n,r)),e.instance},e.prototype.initiateNetworkRequestTracking=function(){try{this.decorateXMLHttpRequest(),this.decorateFetch(),this.decorateWebSocket(),this.decorateEventSource()}catch(e){console.warn("Conviva App Tracker:: Unable to track network request ".concat(e))}},e.prototype.decorateXMLHttpRequest=function(){var e=this,t=XMLHttpRequest.prototype.open,n=XMLHttpRequest.prototype.send,r=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.open=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{this._conviva={method:n[0],url:e.normalizeUrl(n[1]),headers:{}}}catch(e){console.warn("Conviva App Tracker:: Unable to normalizeUrl while open ".concat(e))}return t.apply(this,n)},XMLHttpRequest.prototype.setRequestHeader=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{this._conviva&&(this._conviva.headers[e[0]]=e[1])}catch(e){console.warn("Conviva App Tracker:: while setRequestHeader ".concat(e))}return r.apply(this,e)},XMLHttpRequest.prototype.send=function(){for(var t=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{var i=this._conviva;if(!i)return;var a=e.addTraceparentHeader(this,i.url,i.headers),s=e.addBaggageHeader(this,i.url,i.headers,i.method,r[0]),l=e.createRequestDetails(i.method,i.url,i.headers,r[0],a,s);o=Xu,e.shouldTrackForSoftNavigation(l.url||"")&&e.incrementInflightRequests(),this.addEventListener("load",(function(){e.shouldTrackForSoftNavigation(l.url||"")&&e.decrementInflightRequests(),e.handleResponse(t,l,"load")}),{signal:o}),this.addEventListener("error",(function(){e.shouldTrackForSoftNavigation(l.url||"")&&e.decrementInflightRequests(),e.handleResponse(t,l,"error")}),{signal:o}),this.addEventListener("abort",(function(){e.shouldTrackForSoftNavigation(l.url||"")&&e.decrementInflightRequests(),e.handleResponse(t,l,"abort")}),{signal:o}),this.addEventListener("timeout",(function(){e.shouldTrackForSoftNavigation(l.url||"")&&e.decrementInflightRequests(),e.handleResponse(t,l,"timeout")}),{signal:o})}catch(e){console.warn("Conviva App Tracker:: Unable to track network request while send ".concat(e))}return n.apply(this,r)}},e.prototype.decorateFetch=function(){window.fetch=this.interceptFetch.bind(this)},e.prototype.interceptFetch=function(e,t){var n,r,o,i,a,s,l,c,u;return T(this,void 0,void 0,(function(){var d,f,h,p,v,g,m,y,b,w,k,C,S,E,I,_,T,x,R,O,M,N,L,D,P,U=this;return A(this,(function(A){switch(A.label){case 0:if(p=h=null,g=this,!(e instanceof Request))return[3,5];f=null==e?void 0:e.clone();try{m=!1,null===(n=null==f?void 0:f.headers)||void 0===n||n.forEach((function(e,t){Zu.TRACEPARENT_HEADER_KEY===t&&(m=!0)})),m||null!==(h=this.generateTraceparentHeader(f.url))&&""!==h&&e.headers.set(Zu.TRACEPARENT_HEADER_KEY,h),y=!1,null===(r=null==f?void 0:f.headers)||void 0===r||r.forEach((function(e,t){Zu.BAGGAGE_HEADER_KEY===t&&(y=!0)})),y||(b={},f.headers.forEach((function(e,t){b[t]=e})),w={method:f.method,url:f.url,headers:b,body:void 0},null!==(p=this.generateBaggageHeader(f.url,w))&&""!==p&&e.headers.set(Zu.BAGGAGE_HEADER_KEY,p))}catch(e){console.warn("ConvivaAppTracker: Issue while adding traceparent header",e)}d=this.originalFetch(e),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,f.text()];case 2:return v=A.sent(),[3,4];case 3:return A.sent(),[3,4];case 4:return[3,6];case 5:try{t&&t.headers?(k=g.core.getConfig(),(null!==(o=null==k?void 0:k.traceparentconfig)&&void 0!==o&&o.enabled||null!==(i=null==k?void 0:k.baggageConfiguration)&&void 0!==i&&i.enabled)&&(S=(C=t.headers instanceof Headers)?new Headers(t.headers):t.headers,E=!1,C?S.forEach((function(e,t){Zu.TRACEPARENT_HEADER_KEY===t&&(E=!0)})):Object.keys(S).forEach((function(e){Zu.TRACEPARENT_HEADER_KEY===e&&(E=!0)})),E||null!==(h=this.generateTraceparentHeader(e))&&""!==h&&(C?S.set(Zu.TRACEPARENT_HEADER_KEY,h):S[Zu.TRACEPARENT_HEADER_KEY]=h),I=!1,C?S.forEach((function(e,t){Zu.BAGGAGE_HEADER_KEY===t&&(I=!0)})):Object.keys(S).forEach((function(e){Zu.BAGGAGE_HEADER_KEY===e&&(I=!0)})),I||(_={},C?S.forEach((function(e,t){_[t]=e})):_=S,w={method:(null==t?void 0:t.method)||"GET",url:e,headers:_,body:null==t?void 0:t.body},null!==(p=this.generateBaggageHeader(e,w))&&""!==p&&(C?S.set(Zu.BAGGAGE_HEADER_KEY,p):S[Zu.BAGGAGE_HEADER_KEY]=p)),t.headers=S)):(k=g.core.getConfig(),(null!==(a=null==k?void 0:k.traceparentconfig)&&void 0!==a&&a.enabled||null!==(s=null==k?void 0:k.baggageConfiguration)&&void 0!==s&&s.enabled)&&(S=new Headers,null!==(h=this.generateTraceparentHeader(e))&&""!==h&&S.set(Zu.TRACEPARENT_HEADER_KEY,h),w={method:(null==t?void 0:t.method)||"GET",url:e,headers:{},body:null==t?void 0:t.body},null!==(p=this.generateBaggageHeader(e,w))&&""!==p&&S.set(Zu.BAGGAGE_HEADER_KEY,p),t||(t={}),t.headers=S))}catch(e){console.warn("ConvivaAppTracker: Issue while adding traceparent header",e)}d=this.originalFetch(e,t),f=new Request(e,t).clone(),v=null==t?void 0:t.body,A.label=6;case 6:try{T=void 0;try{T=ld(f.headers)}catch(e){}x={method:f.method,url:decodeURIComponent(f.url),headers:T,body:v,requestTimestamp:null===Date||void 0===Date?void 0:Date.now(),requestTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())},this.shouldTrackForSoftNavigation(f.url)&&this.incrementInflightRequests(),this.getSamplingMode()!==Zu.SAMPLING_MODES.NONE&&(R=this.core.getConfig().networkRequestTrackingConfiguration,O=this.core.getConfig().evtStreamTrackingConfiguration,M=R.blocklist,N=null===(u=null===(c=null===(l=this.trackerConfiguration)||void 0===l?void 0:l.configs)||void 0===c?void 0:c.networkRequestTracking)||void 0===u?void 0:u.safelist,L=R.collect,D=R.block,P=R.eventCollectionMode===Zu.NETWORK_REQUEST_EVENT_COLLECTION_MODE.AUTO||R.eventCollectionMode===Zu.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH,null!==h&&""!==h&&(x[Zu.TRACEPARENT_HEADER_KEY]=h),null!==p&&""!==p&&(x[Zu.BAGGAGE_HEADER_KEY]=p),d.then((function(e){var t,n,r;U.shouldTrackForSoftNavigation(f.url)&&U.decrementInflightRequests();try{var o=e.headers.get("content-type");if(O&&O.enabled&&o&&o.includes("text/event-stream")){var i=e.clone().body;i?jn(i,f.url,/\r?\n\r?\n/,zn,(function(e){U.processStreamEvent(e,f.url,"conviva_sse_message")}),{idleMs:O.idleMs,maxEvents:O.maxEvents,bufferMaxBytes:O.bufferMaxBytes},(function(){U.cleanupSSECountState(f.url)})).catch((function(){})):console.warn("Conviva App Tracker:: Response body is null, cannot read as stream")}else if(function(e,t){var n;return(null===(n=null==t?void 0:t.configs)||void 0===n?void 0:n.plainTextChunkTracking)&&t.configs.plainTextChunkTracking.enabled&&t.configs.plainTextChunkTracking.endpoints.some((function(t){return e.includes(t)}))}(f.url,U.trackerConfiguration)){if(_n(L,D,M,N,e,x)){var a=void 0;try{a=ld(e.headers)}catch(e){}var s={status:null==e?void 0:e.status,statusText:""!==(null==e?void 0:e.statusText)?null==e?void 0:e.statusText:void 0,headers:a,size:0,responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};U.trackerMethods.trackNetworkRequest({requestDetails:x,responseDetails:s})}(i=e.clone().body)?(U.resetStreamCountState(f.url),jn(i,f.url,null!==(r=null===(n=null===(t=U.trackerConfiguration.configs)||void 0===t?void 0:t.plainTextChunkTracking)||void 0===n?void 0:n.delimiter)&&void 0!==r?r:/\r?\n/,Vn,(function(e){U.processStreamEvent(e,f.url,"conviva_chunk_message")}),{idleMs:O.idleMs,maxEvents:O.maxEvents,bufferMaxBytes:O.bufferMaxBytes},(function(){U.cleanupSSECountState(f.url)})).catch((function(){}))):console.warn("Conviva App Tracker:: Response body is null, cannot read as stream")}else if(R&&R.enabled&&P){var l=_n(L,D,M,N,e,x);if(l){a=void 0;try{a=ld(e.headers)}catch(e){}var c={status:null==e?void 0:e.status,statusText:""!==(null==e?void 0:e.statusText)?null==e?void 0:e.statusText:void 0,headers:a,size:0,responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};e.clone().json().then((function(e){c.body=e,null!=(e=U.core.getConfig().baggageConfiguration)&&e.enabled&&Gn(x,c,e,U.core),U.trackerMethods.trackNetworkRequest({requestDetails:x,responseDetails:c})})).catch((function(){var e=U.core.getConfig().baggageConfiguration;null!=e&&e.enabled&&Gn(x,c,e,U.core),U.trackerMethods.trackNetworkRequest({requestDetails:x,responseDetails:c})}))}}}catch(t){l=_n(L,D,M,N,e,x),R&&R.enabled&&l&&P&&(s={statusText:t.toString(),responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())},U.trackerMethods.trackNetworkRequest({requestDetails:x,responseDetails:s}))}})).catch((function(e){U.shouldTrackForSoftNavigation(f.url)&&U.decrementInflightRequests();var t=_n(L,D,M,N,null,x);R&&R.enabled&&t&&P&&(e={statusText:e.toString(),responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())},U.trackerMethods.trackNetworkRequest({requestDetails:x,responseDetails:e}))})))}catch(e){console.warn("Conviva App Tracker:: Unable to track network request while fetch interceptRequest ".concat(e))}return[2,d]}}))}))},e.prototype.handleResponse=function(e,t,n){var r,o,i,a;try{if(this.getSamplingMode()!==Zu.SAMPLING_MODES.NONE){var s=null===(r=this.core)||void 0===r?void 0:r.getConfig().networkRequestTrackingConfiguration,l=s.blocklist,c=null===(a=null===(i=null===(o=this.trackerConfiguration)||void 0===o?void 0:o.configs)||void 0===i?void 0:i.networkRequestTracking)||void 0===a?void 0:a.safelist,u=_n(s.collect,s.block,l,c,e,t),d=s.eventCollectionMode===Zu.NETWORK_REQUEST_EVENT_COLLECTION_MODE.AUTO||s.eventCollectionMode===Zu.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH;if(s&&s.enabled&&d&&u){var f={status:e.status,statusText:e.statusText||("load"!==n?n:void 0),responseTimestamp:Date.now(),responseTime:performance.now()||Date.now(),headers:sd(e.getAllResponseHeaders()),body:e.response},h=this.core.getConfig().baggageConfiguration;null!=h&&h.enabled&&Gn(t,f,h,this.core),this.trackerMethods.trackNetworkRequest({requestDetails:t,responseDetails:f})}}}catch(e){qr.warn("Conviva App Tracker:: Unable to track network request error while handleResponse ".concat(e))}},e.prototype.decorateWebSocket=function(){function e(e){n?n.has(e)||(n.add(e),t.addWebSocketEventListeners(e)):e.__convivaWsTag__||(e.__convivaWsTag__=!0,t.addWebSocketEventListeners(e))}var t=this,n="undefined"!=typeof WeakSet?new WeakSet:null,r=WebSocket.prototype.send;WebSocket.prototype.send=function(n){try{t.handleWebSocketSend(n,this),e(this)}catch(e){qr.warn("Conviva WS tracking error:",e)}return r.apply(this,arguments)};var o=WebSocket;window.WebSocket=function(t,n){return e(t=new o(t,n)),t},window.WebSocket.prototype=o.prototype,Object.assign(window.WebSocket,o)},e.prototype.decorateEventSource=function(){var e=this,t="undefined"!=typeof WeakSet?new WeakSet:null,n=EventSource,r=n.prototype.close;window.EventSource=function(r,o){return r=new n(r,o),t?t.has(r)||(t.add(r),e.addEventSourceEventListeners(r)):r.__convivaEventSourceTag__||(r.__convivaEventSourceTag__=!0,e.addEventSourceEventListeners(r)),r},n.prototype.close=function(){var t,n=null!==(t=null==this?void 0:this.url)&&void 0!==t?t:"unknown";return e.handleEventSourceClose(n),r.call(this)},window.EventSource.prototype=n.prototype,Object.setPrototypeOf(window.EventSource,n)},e.prototype.addWebSocketEventListeners=function(e){var t=this,n=Xu;e.addEventListener("message",(function(e){return t.handleWebSocketMessage(e)}),{signal:n}),e.addEventListener("open",(function(e){return t.handleWebSocketOpen(e)}),{signal:n}),e.addEventListener("close",(function(e){return t.handleWebSocketClose(e)}),{signal:n}),e.addEventListener("error",(function(e){return t.handleWebSocketError(e)}),{signal:n})},e.prototype.addEventSourceEventListeners=function(e){var t=this,n=Xu;e.addEventListener("message",(function(e){return t.handleEventSourceMessage(e)}),{signal:n}),e.addEventListener("open",(function(e){return t.handleEventSourceOpen(e)}),{signal:n}),e.addEventListener("error",(function(e){return t.handleEventSourceError(e)}),{signal:n})},e.prototype.handleWebSocketOpen=function(e){try{var t={url:this.getWebSocketUrl(e.target),type:e.type,timestamp:Date.now()}}catch(n){t={data:e.data,url:e.target?this.getWebSocketUrl(e.target):void 0}}this.sendWebSocketEvent("open",t,{},!1)},e.prototype.handleWebSocketClose=function(e){try{var t={url:this.getWebSocketUrl(e.target),type:e.type,code:e.code,reason:e.reason,wasClean:e.wasClean,timestamp:Date.now()}}catch(n){t={data:e.data,url:e.target?this.getWebSocketUrl(e.target):void 0}}this.sendWebSocketEvent("close",t,{},!1)},e.prototype.handleWebSocketMessage=function(e){var t,n,r=null===(t=this.core)||void 0===t?void 0:t.getConfig().evtStreamTrackingConfiguration;t=null!==(n=null==r?void 0:r.bufferMaxBytes)&&void 0!==n?n:1048576;try{if(e.data instanceof ArrayBuffer){if(!(e.data.byteLength>t)){var o=new TextDecoder("utf-8",{fatal:!1}).decode(e.data),i=[];Hn(o).forEach((function(e){try{var t=JSON.parse(e.trim());i.push(t)}catch(t){i.push(e)}}));var a={data:i,url:this.getWebSocketUrl(e.target)};this.sendWebSocketEvent("server",a,{},!0)}}else{n=void 0;try{(n="string"==typeof e.data?JSON.parse(e.data):e.data).url=this.getWebSocketUrl(e.target)}catch(t){n={data:e.data,url:e.target?this.getWebSocketUrl(e.target):void 0}}this.sendWebSocketEvent("server",n)}}catch(t){e={data:e.data,url:e.target?this.getWebSocketUrl(e.target):void 0},this.sendWebSocketEvent("server",e)}},e.prototype.handleWebSocketSend=function(e,t){var n,r,o,i,a=null===(n=this.core)||void 0===n?void 0:n.getConfig().evtStreamTrackingConfiguration;n=null!==(r=null==a?void 0:a.bufferMaxBytes)&&void 0!==r?r:1048576;try{if(e instanceof ArrayBuffer){if(!(e.byteLength>n)){var s=new TextDecoder("utf-8",{fatal:!1}).decode(e),l=[];Hn(s).forEach((function(e){try{if("string"==typeof e){var t=JSON.parse(e);l.push(t)}else l.push(e)}catch(t){l.push(e)}}));var c={url:this.getWebSocketUrl(t)},u={data:l};this.sendWebSocketEvent("send",c,u,!0)}}else{var d="string"==typeof e?JSON.parse(e):e;c={url:this.getWebSocketUrl(t),type:null!==(i=null!==(o=d.type)&&void 0!==o?o:d.method)&&void 0!==i?i:void 0},this.sendWebSocketEvent("send",c,d)}}catch(n){c={url:this.getWebSocketUrl(t)},d={data:e},this.sendWebSocketEvent("send",c,d)}},e.prototype.handleWebSocketError=function(e){var t,n,r,o,i,a,s;try{var l={url:this.getWebSocketUrl(e.target),type:e.type,timestamp:Date.now(),readyState:this.getWebSocketReadyState(e.target),errorMessage:e.message||"WebSocket error occurred",errorType:(null===(t=e.error)||void 0===t?void 0:t.name)||"WebSocketError",errorCode:null===(n=e.error)||void 0===n?void 0:n.code,errorDetails:null===(r=e.error)||void 0===r?void 0:r.message,networkType:(null===(o=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===o?void 0:o.type)||"unknown",networkEffectiveType:(null===(i=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===i?void 0:i.effectiveType)||"unknown",networkDownlink:null===(a=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===a?void 0:a.downlink,networkRtt:null===(s=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===s?void 0:s.rtt,userAgent:null===navigator||void 0===navigator?void 0:navigator.userAgent}}catch(t){l={url:this.getWebSocketUrl(e.target),type:"error",timestamp:Date.now(),error:"Failed to process WebSocket error event: ".concat(t instanceof Error?t.message:String(t)),originalEvent:e}}this.sendWebSocketEvent("error",l)},e.prototype.handleEventSourceOpen=function(e){try{var t={url:this.getEventSourceUrl(e.target),type:e.type}}catch(n){t={data:e.data,url:e.target?this.getEventSourceUrl(e.target):void 0,type:e.type}}this.sendEventSourceEvent(t)},e.prototype.handleEventSourceMessage=function(e){var t={};try{if("string"==typeof e.data)try{t.data=JSON.parse(e.data)}catch(n){t.data=e.data}else t.data=e.data;t.url=this.getEventSourceUrl(e.target),t.type=e.type,t.id=e.lastEventId}catch(n){t={data:e.data,url:e.target?this.getEventSourceUrl(e.target):void 0,type:e.type,id:e.lastEventId}}this.sendEventSourceEvent(t)},e.prototype.handleEventSourceError=function(e){var t,n,r,o;try{var i={url:this.getEventSourceUrl(e.target),type:e.type,readyState:this.getEventSourceReadyState(e.target),errorMessage:e.message||"EventSource error occurred",errorType:"EventSourceError",networkType:(null===(t=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===t?void 0:t.type)||"unknown",networkEffectiveType:(null===(n=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===n?void 0:n.effectiveType)||"unknown",networkDownlink:null===(r=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===r?void 0:r.downlink,networkRtt:null===(o=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===o?void 0:o.rtt,userAgent:null===navigator||void 0===navigator?void 0:navigator.userAgent}}catch(t){i={url:this.getEventSourceUrl(e.target),type:"error",error:"Failed to process EventSource error event: ".concat(t instanceof Error?t.message:String(t)),originalEvent:e}}this.sendEventSourceEvent(i)},e.prototype.handleEventSourceClose=function(e){this.sendEventSourceEvent({url:e,type:"close"})},e.prototype.sendWebSocketEvent=function(e,t,n,r){var o;void 0===n&&(n={}),void 0===r&&(r=!1);try{var i=null===(o=this.core.getConfig())||void 0===o?void 0:o.evtStreamTrackingConfiguration;if(null!=i&&i.enabled){var a=this.getStreamCountState(t.url),s=_r("send"===e?_r(_r({},t),n):_r({},t),{event:e}),l=Tn(i.collect,i.block,s,t.url);if(null!=l&&l.result){var c=null==l?void 0:l.matchedConfig;if(!0===(null==c?void 0:c.count)&&(a.tokenCount++,null==l||!l.shouldSend))return;var u={url:t.url,id:t.id,type:t.type,event:e};if(!0===(null==c?void 0:c.countReset)&&(0<a.tokenCount&&(u.tokenCount=a.tokenCount),this.resetStreamCountState(t.url)),e="send"===e?n:t,n={},i.richContentInference&&i.richContentInference.cond)try{n=Wn(e,i.richContentInference,null==t?void 0:t.url)}catch(e){console.warn("Conviva App Tracker:: Error in rich content inference:",e)}if(i.conditionalCollectAttr&&0<i.conditionalCollectAttr.length){var d=bn(e,i.conditionalCollectAttr,t.url,Tn,null==i?void 0:i.maxQueryLength,r);0<Object.keys(d).length&&(u=_r(_r({},u),d))}0<Object.keys(n).length&&(u.richContentInference=n),this.trackerMethods.trackSSEEvent({name:"conviva_ws_message",data:JSON.stringify(u)})}}}catch(e){}},e.prototype.sendEventSourceEvent=function(e){var t,n;try{var r=null===(t=this.core.getConfig())||void 0===t?void 0:t.evtStreamTrackingConfiguration;if(null!=r&&r.enabled){var o=this.getStreamCountState((null==e?void 0:e.url)||""),i=_r({},e),a=Tn(r.collect,r.block,i,(null==e?void 0:e.url)||"");if(null!=a&&a.result){var s=null==a?void 0:a.matchedConfig;if(!0===(null==s?void 0:s.count)&&(o.tokenCount++,null==a||!a.shouldSend))return;var l={url:(null===(n=null==e?void 0:e.url)||void 0===n?void 0:n.split("?")[0])||"",id:null==e?void 0:e.id,type:null==e?void 0:e.type};if(!0===(null==s?void 0:s.countReset)&&(0<o.tokenCount&&(l.tokenCount=o.tokenCount),this.resetStreamCountState((null==e?void 0:e.url)||"")),r.conditionalCollectAttr&&0<r.conditionalCollectAttr.length){var c=bn(e,r.conditionalCollectAttr,(null==e?void 0:e.url)||"",Tn,null==r?void 0:r.maxQueryLength,!1);0<Object.keys(c).length&&(l=_r(_r({},l),c))}if(r.richContentInference&&r.richContentInference.cond)try{var u=Wn(e,r.richContentInference,null==e?void 0:e.url);0<Object.keys(u).length&&(l.richContentInference=u)}catch(e){console.warn("Conviva App Tracker:: Error in rich content inference:",e)}this.trackerMethods.trackSSEEvent({name:"conviva_sse_message",data:JSON.stringify(l)})}}}catch(e){}},e.prototype.getWebSocketUrl=function(e){try{if(e&&"object"===S(e)&&"url"in e)return e.url}catch(e){}},e.prototype.getWebSocketReadyState=function(e){try{if(e&&"object"===S(e)&&"readyState"in e)return e.readyState}catch(e){}},e.prototype.getEventSourceUrl=function(e){try{if(e&&"object"===S(e)&&"url"in e)return e.url}catch(e){}},e.prototype.getEventSourceReadyState=function(e){try{if(e&&"object"===S(e)&&"readyState"in e)return e.readyState}catch(e){}},e.prototype.addTraceparentHeader=function(e,t,n){var r=null;return Zu.TRACEPARENT_HEADER_KEY in n||(r=this.generateTraceparentHeader(t))&&e.setRequestHeader(Zu.TRACEPARENT_HEADER_KEY,r),r},e.prototype.addBaggageHeader=function(e,t,n,r,o){return(t=this.generateBaggageHeader(t,{method:r||"GET",url:t,headers:n,body:o}))&&e.setRequestHeader(Zu.BAGGAGE_HEADER_KEY,t),t},e.prototype.createRequestDetails=function(e,t,n,r,o,i){return e={method:e,url:t,headers:n,body:r,requestTimestamp:Date.now(),requestTime:performance.now()||Date.now()},o&&(e[Zu.TRACEPARENT_HEADER_KEY]=o),i&&(e[Zu.BAGGAGE_HEADER_KEY]=i),e},e.prototype.normalizeUrl=function(e){if(e instanceof URL)return e.href;try{if("undefined"!=typeof document){var t=URL;if(document.baseURI)var n=document.baseURI;else{var r=document.querySelector("base");n=r&&r.href?r.href:document.location.href}return new t(e,n).href}}catch(e){}return e},e.prototype.generateTraceparentHeader=function(e){var t,n,r,o,i,a,s,l,c,u,d,f,h,p,v,g,m,y,b,w,k,C,S;try{if(this.core&&e){var E=this.core.getConfig(),I=Zu.CONFIG_PREFERENCES.MERGE,_=[];switch(null!==(r=null===(n=null===(t=this.trackerConfiguration)||void 0===t?void 0:t.configs)||void 0===n?void 0:n.traceparentGeneration)&&void 0!==r&&r.force?I=Zu.CONFIG_PREFERENCES.APP:null!==(o=null==E?void 0:E.traceparentconfig)&&void 0!==o&&o.pref&&(I=E.traceparentconfig.pref),I){case Zu.CONFIG_PREFERENCES.APP:if(!1===(null===(s=null===(a=null===(i=this.trackerConfiguration)||void 0===i?void 0:i.configs)||void 0===a?void 0:a.traceparentGeneration)||void 0===s?void 0:s.enabled))return"";_=(null===(u=null===(c=null===(l=this.trackerConfiguration)||void 0===l?void 0:l.configs)||void 0===c?void 0:c.traceparentGeneration)||void 0===u?void 0:u.targetUrl)||[];break;case Zu.CONFIG_PREFERENCES.REMOTE:if(!1===(null===(d=null==E?void 0:E.traceparentconfig)||void 0===d?void 0:d.enabled))return"";_=(null===(f=null==E?void 0:E.traceparentconfig)||void 0===f?void 0:f.targetUrl)||[];break;default:if((null==E||!E.traceparentconfig)&&!1===(null===(v=null===(p=null===(h=this.trackerConfiguration)||void 0===h?void 0:h.configs)||void 0===p?void 0:p.traceparentGeneration)||void 0===v?void 0:v.enabled)||(null===(m=null===(g=this.trackerConfiguration)||void 0===g?void 0:g.configs)||void 0===m||!m.traceparentGeneration)&&!1===(null===(y=null==E?void 0:E.traceparentconfig)||void 0===y?void 0:y.enabled))return"";var T=(null===(k=null===(w=null===(b=this.trackerConfiguration)||void 0===b?void 0:b.configs)||void 0===w?void 0:w.traceparentGeneration)||void 0===k?void 0:k.targetUrl)||[],A=(null===(C=null==E?void 0:E.traceparentconfig)||void 0===C?void 0:C.targetUrl)||[],R=new Set(x(x([],A,!0),T,!0));_=Array.from(R)}if(0<_.length&&(_.includes("*")||_.some((function(t){return 0<(null==t?void 0:t.length)&&e.toLowerCase().includes(null==t?void 0:t.toLowerCase())})))&&null!==(S=null==E?void 0:E.networkRequestTrackingConfiguration)&&void 0!==S&&S.enabled){var O=Array.from({length:32},(function(){return Math.floor(16*Math.random()).toString(16)})).join(""),M=Array.from({length:16},(function(){return Math.floor(16*Math.random()).toString(16)})).join("");return"00-".concat(O,"-").concat(M,"-00")}}}catch(e){console.warn("Conviva App Tracker:: Unable to generate traceparent header ".concat(e))}return""},e.prototype.generateBaggageHeader=function(e,t){var n,r;try{if(this.core&&e){var o=this.core.getConfig();if(!1===(null===(n=null==o?void 0:o.baggageConfiguration)||void 0===n?void 0:n.enabled))return"";t&&null!=o&&o.baggageConfiguration&&Gn(t,{},o.baggageConfiguration,this.core);var i=(null===(r=null==o?void 0:o.baggageConfiguration)||void 0===r?void 0:r.targetUrl)||[];if(0<i.length&&i.some((function(t){return 0<(null==t?void 0:t.length)&&e.toLowerCase().includes(null==t?void 0:t.toLowerCase())}))){t=[];var a=this.getConvivaClientId();a&&t.push("c3.client_id=".concat(a));var s=this.core.getConversationId();if(s&&t.push("c3.convid=".concat(s)),0<t.length)return t.join(", ")}}}catch(e){console.warn("Conviva App Tracker:: Unable to generate baggage header ".concat(e))}return""},e.prototype.getConvivaClientId=function(){try{if("undefined"!=typeof window&&null!==window&&void 0!==window&&window.localStorage){var e=window.localStorage.getItem("Conviva.sdkConfig"),t=JSON.parse(e||"{}");if(t&&"object"===S(t)&&t.clId)return t.clId}}catch(e){console.warn("Conviva App Tracker:: Unable to get client ID ".concat(e))}return""},e.prototype.updateSSETrackingConfig=function(e){qd=_r(_r({},qd),e)},e.prototype.getSSETrackingConfig=function(){return _r({},qd)},e.prototype.processStreamEvent=function(e,t,n){var r,o;try{if("ping"!==e.event){var i=e.data;try{i=JSON.parse(e.data)}catch(e){}var a={url:t,id:e.id,event:null!==(r=e.event)&&void 0!==r?r:"message",data:i},s=null===(o=this.core)||void 0===o?void 0:o.getConfig().evtStreamTrackingConfiguration;if(null!=s&&s.enabled){var l=this.getStreamCountState(t),c=Tn(s.collect,s.block,a,t);if(null!=c&&c.result){var u=null==c?void 0:c.matchedConfig;if(!0===(null==u?void 0:u.count)&&(l.tokenCount++,null==c||!c.shouldSend))return;if(e={},s.richContentInference&&s.richContentInference.cond)try{e=Wn(a,s.richContentInference,null==a?void 0:a.url)}catch(e){console.warn("Conviva App Tracker:: Error in rich content inference:",e)}var d={url:a.url,id:a.id,event:a.event};if(!0===(null==u?void 0:u.countReset)&&(0<l.tokenCount&&(d.tokenCount=l.tokenCount),this.resetStreamCountState(t)),s.conditionalCollectAttr&&0<s.conditionalCollectAttr.length){var f=bn(a,s.conditionalCollectAttr,t,Tn,null==s?void 0:s.maxQueryLength,!1);0<Object.keys(f).length&&(d=_r(_r({},d),f))}0<Object.keys(e).length&&(d.richContentInference=e),this.trackerMethods.trackSSEEvent({name:n,data:JSON.stringify(d)})}}}}catch(e){}},e.prototype.getStreamCountState=function(e){return this.sseCountStates.has(e)||this.sseCountStates.set(e,{tokenCount:0}),this.sseCountStates.get(e)},e.prototype.resetStreamCountState=function(e){this.sseCountStates.set(e,{tokenCount:0})},e.prototype.cleanupSSECountState=function(e){this.sseCountStates.delete(e)},e.prototype.getInflightRequests=function(){return this.inflightRequests},e.prototype.incrementInflightRequests=function(){this.inflightRequests++},e.prototype.decrementInflightRequests=function(){this.inflightRequests=Math.max(0,this.inflightRequests-1)},e.prototype.shouldTrackForSoftNavigation=function(e){try{var t=new URL(e).hostname,n=this.core.getConfig(),r=null==n?void 0:n.softNavigationTrackingConfiguration;return null==r||!r.domainBlocklist||0===r.domainBlocklist.length||!r.domainBlocklist.some((function(e){return t.endsWith(e)}))}catch(e){return!1}},e}(),Yd=function(e,t,n,r,o,i,a,s){var l,c,u,d,f,h,p=id,v=function(){var e=p.getConfig();return!e.emitterConfiguration||!e.emitterConfiguration.batching||e.emitterConfiguration.batching.enabled};return qn(e,t,"localStorage"==n||"cookieAndLocalStorage"==n,r.eventMethod,o,(h=p.getConfig(),null!==(f=h.bufferSize?h.bufferSize:r.bufferSize)&&void 0!==f?f:20),(function(){var e,t=p.getConfig();return null!==(e=t.maxGetBytes?t.maxGetBytes:r.maxGetBytes)&&void 0!==e?e:0}),null===(l=r.useStm)||void 0===l||l,(function(){var e,t=p.getConfig();return null!==(e=t.maxLocalStorageQueueSize?t.maxLocalStorageQueueSize:r.maxLocalStorageQueueSize)&&void 0!==e?e:10}),null!==(c=r.connectionTimeout)&&void 0!==c?c:3e4,i,null!==(u=r.customHeaders)&&void 0!==u?u:{},null!==(d=r.withCredentials)&&void 0!==d&&d,a,(function(){var e,t,n,o=p.getConfig();return null!==(n=null!=o&&o.enc?o.enc:null===(t=null===(e=null==r?void 0:r.configs)||void 0===e?void 0:e.network)||void 0===t?void 0:t.encoding)&&void 0!==n?n:nd.GZIP}),v,(function(){var e,t,n=p.getConfig();return v()?"number"==typeof(null===(t=null===(e=n.emitterConfiguration)||void 0===e?void 0:e.batching)||void 0===t?void 0:t.byteLimitPostInKB)?1e3*n.emitterConfiguration.batching.byteLimitPostInKB:25e4:4e4}),(function(){var e,t,n=null===(t=null===(e=p.getConfig().emitterConfiguration)||void 0===e?void 0:e.batching)||void 0===t?void 0:t.batchingIntervalInSec;return 1e3*("number"==typeof n?n:5)}),s)},Kd=function(){function e(e,t,n,r,o){void 0===e&&(e=20),void 0===t&&(t=2e3),void 0===n&&(n=1e3),this.eventMaxLimit=e,this.cooldown=t,this.windowStart=Date.now(),this.circuitBreakerUntil=this.eventCount=0,this.breakerPreviouslyOpen=!1,this.droppedCount=0,this.trackerCore=r,this.timeWindow=n,this.getSamplingMode=o}return e.prototype.isAllowedToSendEvent=function(){var e=Date.now();return e<this.circuitBreakerUntil?(this.droppedCount++,!1):(this.breakerPreviouslyOpen&&(this.breakerPreviouslyOpen=!1,Nn(this.trackerCore,this.getSamplingMode,{message:"Application Error",className:"errorRateLimiter - isAllowedToSendEvent",extraData:{droppedCount:this.droppedCount},configAppliedSrc:md,configAppliedTime:yd}),this.droppedCount=0),e-this.windowStart<this.timeWindow?this.eventCount++:(this.windowStart=e,this.eventCount=1),!(this.eventCount>this.eventMaxLimit)||(this.circuitBreakerUntil=e+this.cooldown,this.breakerPreviouslyOpen=!0,this.droppedCount++,!1))},e.prototype.updateErrortRateLimitConfig=function(e,t,n){this.eventMaxLimit=e,this.cooldown=t,this.timeWindow=n},e}(),Jd=function(e,t){return e.length>t?"".concat(e.slice(0,t-3),"..."):e},Xd={idleWindowMs:600,requireLcp:!1,lcpTimeoutMs:3e3,maxMeasurementMs:1e4,includeHashChanges:!1,domainAllowlist:[],domainBlocklist:["sdk.fra-01.braze.eu","tr.snapchat.com","analytics.google.com","ams.creativecdn.com","analytics.tiktok.com"]},Qd=_r({},Xd),$d=null,ef=null,tf=null,nf=function(){function e(e){if(4!==(e=e.split(".").map(Number)).length||e.some((function(e){return isNaN(e)})))throw Error("clientId must be in format 'a.b.c.d' with each part being a number");return e}function t(e,t){void 0===t&&(t=0),t=1+(0|t)|0;for(var n=0;4>n;n++)t=Math.imul(-1640531535,t)+(0|e[n])|0;return 0|t}function n(n){if(o)try{var r=e(n);void 0===(n=void 0)&&(n=BigInt(0));var i=BigInt(79),a=BigInt(1)+n;for(n=0;4>n;n++)a=i*a+BigInt(r[n]);var s=Number(BigInt.asIntN(32,a));return(s+Math.pow(2,31))/(Math.pow(2,32)-1)}catch(e){return 0}else try{return((s=t(e(n)))>>>0)/4294967295}catch(e){return 0}}function r(e){return 1-n(e)}var o="function"==typeof BigInt;return{clientIdHash:t,sampleRate:n,minimumSampleRateForInclusion:r,shouldInclude:function(e,t){return e/100>=r(t)}}}(),rf=!1,of=null,af=null,sf=function(){function e(e,t,n){var r,o;this.detectionInterval=null,this.tracker=e,this.trackerConfiguration=t,this.sessionReplayConfig=n,e=new Blob(["importScripts('https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js');\n\nlet config = {};\nlet db;\nlet flushing = false;\nconst DB_NAME = 'conviva-session-record-db';\nconst STORE_NAME = 'events';\nconst POLICY_NAME = 'uploadPolicy';\nconst POLICY_KEY = 'policy';\nconst MAX_EVENTS = 5000; //TODO: Check device storage\nlet urlExpiryTimestamp = null;\nlet hasFlushedOldEvents = false;\nconst FLUSH_TIME = 60 * 1000;\nconst UPDATE_POLICY_EXPIRY_TIME = 3600; // 1 hour\nconst DEFAULT_GATEWAY_URL = 'https://rcg.conviva.com';\nlet flushTimer = null;\nlet initialEvents = [];\nlet uploadPolicyObject = null;\n\nasync function openDB() {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, 1);\n    request.onupgradeneeded = () => {\n      const db = request.result;\n      const store = db?.createObjectStore(STORE_NAME, { keyPath: 'id', autoIncrement: true });\n      store.createIndex('byTimestamp', 'timestamp');\n      const policy = db.createObjectStore(POLICY_NAME, { keyPath: 'id' });\n      policy.put({ id: POLICY_KEY, value: null });\n    };\n    request.onsuccess = () => resolve(request.result);\n    request.onerror = () => reject(request.error);\n  });\n}\n\nfunction deleteDB() {\n  if (db) {\n    db.close();\n  }\n  return new Promise((resolve, reject) => {\n    const deleteRequest = indexedDB.deleteDatabase(DB_NAME);\n\n    deleteRequest.onsuccess = () => {\n      resolve();\n    };\n\n    deleteRequest.onerror = () => {\n      reject(deleteRequest.error);\n    };\n\n    deleteRequest.onblocked = () => {};\n  });\n}\n\nasync function storeEvent(eventPayload) {\n  if (!db) {\n    initialEvents.push(eventPayload.event);\n    return;\n  }\n\n  try {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    if (initialEvents.length > 0) {\n      initialEvents.forEach((event) => store.add(event));\n      initialEvents = [];\n    }\n    store.add(eventPayload.event);\n\n    await tx.done;\n  } catch (error) {\n    //console.warn('Failed to store event:', error);\n  }\n}\n\nasync function getAllEvents() {\n  if (!db) {\n    return [];\n  }\n\n  const tx = db.transaction(STORE_NAME, 'readonly');\n  const store = tx.objectStore(STORE_NAME);\n  const index = store.index('byTimestamp');\n  const request = index.getAll();\n\n  return new Promise((resolve, reject) => {\n    tx.onerror = () => reject(tx.error);\n    request.onerror = () => reject(request.error);\n\n    request.onsuccess = () => resolve(request.result);\n  });\n}\n\nasync function pruneOldEvents() {\n  if (!db) {\n    return;\n  }\n\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    let initialCount = 0;\n\n    tx.oncomplete = () => {\n      resolve();\n    };\n    tx.onerror = () => {\n      reject(tx.error);\n    };\n    const countReq = store.count();\n\n    countReq.onsuccess = () => {\n      initialCount = countReq.result;\n\n      if (initialCount <= MAX_EVENTS) {\n        return;\n      }\n\n      const deleteCount = initialCount - MAX_EVENTS;\n      let deleted = 0;\n      const cursorReq = store.openCursor();\n      cursorReq.onsuccess = () => {\n        const cursor = cursorReq.result;\n        if (cursor && deleted < deleteCount) {\n          cursor.delete();\n          deleted++;\n          cursor.continue();\n        }\n      };\n    };\n  });\n}\n\nasync function setPolicyValue(value) {\n  if (!db) {\n    return;\n  }\n  try {\n    const tx = db.transaction(POLICY_NAME, 'readwrite');\n    const policyStore = tx.objectStore(POLICY_NAME);\n    policyStore.put({ id: POLICY_KEY, value });\n    await tx.done;\n  } catch (error) {}\n}\n\nasync function getPolicyValue() {\n  if (!db) {\n    return null;\n  }\n\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(POLICY_NAME, 'readonly');\n    const req = tx.objectStore(POLICY_NAME).get(POLICY_KEY); // e.g. 'policy'\n\n    req.onsuccess = () => resolve(req.result?.value ?? null); // <-- result, not value\n    req.onerror = () => reject(req.error);\n  });\n}\n\nself.onmessage = async (e) => {\n  const { type, payload } = e.data;\n\n  if (type === 'config') {\n    config = payload;\n    if (!db) {\n      db = await openDB();\n      await flushEvents();\n    }\n    scheduleFlush();\n  }\n  if (type === 'event') {\n    await storeEvent(payload);\n    await pruneOldEvents();\n  }\n  if (type === 'delete') {\n    await flushEvents();\n    await deleteDB();\n    self.postMessage({ type: 'deletion-complete' });\n  }\n};\n\nfunction scheduleFlush() {\n  if (flushTimer) {\n    clearInterval(flushTimer);\n    flushTimer = null;\n  }\n  flushTimer = setInterval(\n    async () => {\n      if (flushing) return;\n      try {\n        await flushEvents();\n      } catch (err) {\n        //console.warn(err);\n      }\n    },\n    config.uploadInterval ? config.uploadInterval * 1000 : FLUSH_TIME\n  );\n}\n\nasync function flushOldSessions() {\n  // Read all events\n  const events = await getAllEvents();\n  if (events.length === 0) return;\n\n  // Group events by _tabId/recordId\n  const groups = {};\n  for (const evt of events) {\n    const id = evt['_tabId'];\n    if (!groups[id]) groups[id] = [];\n    groups[id].push(evt);\n  }\n\n  // Sort group IDs by earliest timestamp to process older sessions first\n  const sortedIds = Object.keys(groups).sort((a, b) => {\n    const minA = Math.min(...groups[a].map((e) => e.timestamp));\n    const minB = Math.min(...groups[b].map((e) => e.timestamp));\n    return minA - minB;\n  });\n\n  // Sequentially upload each group except for the current session (config.recordId)\n  for (const id of sortedIds) {\n    if (id === config.recordId) continue; // skip current session; handle separately\n\n    const batch = groups[id].sort((a, b) => a.timestamp - b.timestamp);\n\n    try {\n      await uploadBatch(batch);\n    } catch (err) {\n      //console.warn(`[Worker] upload failed for recordId ${id}`, err);\n      // Skip deletion on failure so events can be retried later\n      continue;\n    }\n\n    // Remove uploaded events for this group\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    for (const evt of batch) {\n      await store.delete(evt.id);\n    }\n    await tx.done;\n  }\n}\n\nasync function flushEvents() {\n  if (flushing || !db) return;\n  flushing = true;\n\n  try {\n    // If the one-time flush hasn't been done, attempt it\n    if (!hasFlushedOldEvents) {\n      // Use the Web Locks API so only one tab does the global flush\n      if (navigator?.locks?.request) {\n        await navigator.locks.request(\n          'session-replay-flush',\n          { mode: 'exclusive', ifAvailable: true },\n          async (lock) => {\n            if (lock) {\n              await flushOldSessions();\n            }\n          }\n        );\n      } else {\n        // Fallback: perform the flush unconditionally\n        await flushOldSessions();\n      }\n      hasFlushedOldEvents = true;\n    }\n\n    // Always flush events for the current recordId\n    const allEvents = await getAllEvents();\n    if (allEvents.length === 0) return;\n    const currentEvents = allEvents.filter((evt) => evt['_tabId'] === config.recordId);\n\n    if (currentEvents.length > 0) {\n      await uploadBatch(currentEvents);\n\n      // Remove only these events from the store\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n      for (const evt of currentEvents) {\n        await store.delete(evt.id);\n      }\n      await tx.done;\n    }\n  } catch (err) {\n    //console.warn('flush failed', err);\n  } finally {\n    flushing = false;\n  }\n}\n\nasync function uploadBatch(events) {\n  try {\n    if (!events || events.length === 0) {\n      return;\n    }\n    let tabId = events[0]['_tabId'];\n    let timestamp = events[0]['timestamp'];\n    const json = JSON.stringify(events);\n    const compressed = pako.gzip(json);\n    const blob = new Blob([compressed], { type: 'application/octet-stream' });\n    const blobName = getBlobNameRoundedToMinute(timestamp, tabId);\n    await uploadFileToGcs(blob, blobName);\n  } catch (error) {\n    //console.warn('Error uploading batch:', error);\n    throw error; // Re-throw to handle in flushEvents\n  }\n}\n\nfunction sleep(ms) {\n  return new Promise((res) => setTimeout(res, ms));\n}\n\nfunction getBlobNameRoundedToMinute(timestamp, tabId) {\n  const date = new Date(timestamp); // Uses current time\n  date.setUTCSeconds(0, 0); // Rounds down to the start of the current minute\n\n  const day = String(date.getUTCDate()).padStart(2, '0');\n  const month = String(date.getUTCMonth() + 1).padStart(2, '0'); // Months are 0-indexed\n  const year = String(date.getUTCFullYear()).slice(-2);\n  const hour = String(date.getUTCHours()).padStart(2, '0');\n\n  const epoch = Math.floor(date.getTime() / 1000); // Epoch time in seconds (UTC-based)\n\n  const uuid = getUUID(); // Generate a UUID for uniqueness\n\n  return `${year}-${month}-${day}-${hour}-${epoch}_${tabId}_${uuid}.gz`;\n}\n\nasync function uploadFileToGcs(blob, blobName) {\n  try {\n    if (!uploadPolicyObject) {\n      uploadPolicyObject = await getPolicyValue();\n    }\n    const isPolicyInvalid = uploadPolicyObject ? Date.now() >= uploadPolicyObject.expiry : true;\n    if (isPolicyInvalid) {\n      const expiryTimeInSec = config.policyExpiryTime || UPDATE_POLICY_EXPIRY_TIME; // Default to 1 hour if not set\n      const gatewayUrl = getGatewayUrl();\n      const response = await fetch(`${gatewayUrl}`);\n      if (!response.ok) {\n        throw new Error('Failed to get upload policy from server.');\n      }\n      let uploadPolicy = await response.json();\n      let isoString = uploadPolicy.fields['x-goog-date'];\n      let urlExpiryTimestamp = convertToUnixTimestamp(isoString) + expiryTimeInSec * 1000; // Convert to milliseconds\n      uploadPolicyObject = { policy: uploadPolicy, expiry: urlExpiryTimestamp };\n      await setPolicyValue(uploadPolicyObject); // Store the new policy\n    }\n  } catch (error) {\n    throw error;\n  }\n\n  const form = new FormData();\n  Object.entries(uploadPolicyObject?.policy.fields).forEach(([k, v]) => form.append(k, v));\n  let key = `${uploadPolicyObject?.policy.customerID}/${config.clId}/${blobName}`;\n  form.set('key', key); // override the dummy one\n  form.append('file', blob, blobName);\n\n  try {\n    const uploadResponse = await fetch(uploadPolicyObject?.policy.url, {\n      method: 'POST',\n      body: form,\n    });\n\n    if (!uploadResponse.ok) {\n      const errorText = await uploadResponse.text();\n      throw new Error(`GCS Upload Error: ${uploadResponse.status} ${errorText}`);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nfunction getGatewayUrl() {\n  const expiryTimeInSec = config.policyExpiryTime || UPDATE_POLICY_EXPIRY_TIME;\n  let endPointUrl = config.endpoint || DEFAULT_GATEWAY_URL;\n  return `${endPointUrl}/sr?clientId=${config.clId}&expiryTimeInSec=${expiryTimeInSec}&customerKey=${config.customerKey}`;\n}\n\nfunction convertToUnixTimestamp(isoString) {\n  const date = new Date(isoString.replace(/^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})Z$/, '$1-$2-$3T$4:$5:$6Z'));\n  const unixTimestampInMilliSceonds = date.getTime();\n  return unixTimestampInMilliSceonds;\n}\n\nfunction getUUID() {\n  return Date.now().toString();\n}\n"],{type:"application/javascript"}),this._workerUrl=URL.createObjectURL(e),this.worker=new Worker(this._workerUrl),this.recordingReady=this.recording=!1,this.recordId=Date.now().toString(),this.worker.postMessage({type:"config",payload:_r(_r(_r({},null===(r=this.sessionReplayConfig)||void 0===r?void 0:r.emitterConfiguration),null===(o=this.sessionReplayConfig)||void 0===o?void 0:o.networkConfiguration),{customerKey:this.trackerConfiguration.convivaCustomerKey,clId:nr().clId,recordId:this.recordId})}),this._handleVisibilityChange=this._handleVisibilityChange.bind(this)}return e.prototype.initiateRecording=function(){var e=this;this.startRecording().catch((function(t){e.recording=!1,e.tracker.setCustomTags({isSR:!1})})),document.addEventListener("visibilitychange",this._handleVisibilityChange,{signal:Xu})},e.prototype.startRecording=function(){var e,t,n,r,o,i,a,s,l,c,u,d,f,h,p,v,g,m,y,b,w,k,C,S,E,I,_,x,R,O,M,N,L,D,P,U,F,B,G,j,z,V,W,H,q,Z,Y,K,J,X,Q,$,ee,te,ne,re,oe,ie,ae,se,le,ce,ue;return T(this,void 0,void 0,(function(){var T=this;return A(this,(function(A){switch(A.label){case 0:if(this.recording)return[2];this.recording=!0,this.tracker.setCustomTags({isSR:!0}),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,this.waitForPageStability()];case 2:return A.sent(),this.stopFn=Jt({blockSelector:null!==(n=null===(t=null===(e=this.sessionReplayConfig)||void 0===e?void 0:e.webRecorderConfiguration)||void 0===t?void 0:t.blockSelector)&&void 0!==n?n:void 0,ignoreSelector:null!==(i=null===(o=null===(r=this.sessionReplayConfig)||void 0===r?void 0:r.webRecorderConfiguration)||void 0===o?void 0:o.ignoreSelector)&&void 0!==i?i:void 0,ignoreCSSAttributes:null!==(l=null===(s=null===(a=this.sessionReplayConfig)||void 0===a?void 0:a.webRecorderConfiguration)||void 0===s?void 0:s.ignoreCSSAttributes)&&void 0!==l?l:void 0,maskTextSelector:null!==(d=null===(u=null===(c=this.sessionReplayConfig)||void 0===c?void 0:c.webRecorderConfiguration)||void 0===u?void 0:u.maskTextSelector)&&void 0!==d?d:void 0,maskAllInputs:null!==(p=null===(h=null===(f=this.sessionReplayConfig)||void 0===f?void 0:f.webRecorderConfiguration)||void 0===h?void 0:h.maskAllInputs)&&void 0!==p&&p,maskInputOptions:null!==(m=null===(g=null===(v=this.sessionReplayConfig)||void 0===v?void 0:v.webRecorderConfiguration)||void 0===g?void 0:g.maskInputOptions)&&void 0!==m?m:{password:!0,email:!0,textarea:!0,text:!0,tel:!0},slimDOMOptions:null!==(w=null===(b=null===(y=this.sessionReplayConfig)||void 0===y?void 0:y.webRecorderConfiguration)||void 0===b?void 0:b.slimDOMOptions)&&void 0!==w?w:{comment:!1,headWhitespace:!1,headMetaDescKeywords:!1,headMetaSocial:!1,headMetaRobots:!1,headMetaHttpEquiv:!1,headMetaAuthorship:!1,headMetaVerification:!1},dataURLOptions:null!==(S=null===(C=null===(k=this.sessionReplayConfig)||void 0===k?void 0:k.webRecorderConfiguration)||void 0===C?void 0:C.dataURLOptions)&&void 0!==S?S:{},inlineStylesheet:null===(_=null===(I=null===(E=this.sessionReplayConfig)||void 0===E?void 0:E.webRecorderConfiguration)||void 0===I?void 0:I.inlineStylesheet)||void 0===_||_,recordCanvas:null!==(O=null===(R=null===(x=this.sessionReplayConfig)||void 0===x?void 0:x.webRecorderConfiguration)||void 0===R?void 0:R.recordCanvas)&&void 0!==O&&O,recordCrossOriginIframes:null!==(L=null===(N=null===(M=this.sessionReplayConfig)||void 0===M?void 0:M.webRecorderConfiguration)||void 0===N?void 0:N.recordCrossOriginIframes)&&void 0!==L&&L,recordAfter:null!==(U=null===(P=null===(D=this.sessionReplayConfig)||void 0===D?void 0:D.webRecorderConfiguration)||void 0===P?void 0:P.recordAfter)&&void 0!==U?U:"load",inlineImages:null!==(G=null===(B=null===(F=this.sessionReplayConfig)||void 0===F?void 0:F.webRecorderConfiguration)||void 0===B?void 0:B.inlineImages)&&void 0!==G&&G,collectFonts:null!==(V=null===(z=null===(j=this.sessionReplayConfig)||void 0===j?void 0:j.webRecorderConfiguration)||void 0===z?void 0:z.collectFonts)&&void 0!==V&&V,userTriggeredOnInput:null!==(q=null===(H=null===(W=this.sessionReplayConfig)||void 0===W?void 0:W.webRecorderConfiguration)||void 0===H?void 0:H.userTriggeredOnInput)&&void 0!==q&&q,sampling:{mousemove:null!==(K=null===(Y=null===(Z=this.sessionReplayConfig)||void 0===Z?void 0:Z.webRecorderConfiguration)||void 0===Y?void 0:Y.mousemove)&&void 0!==K&&K,mouseInteraction:null!==(Q=null===(X=null===(J=this.sessionReplayConfig)||void 0===J?void 0:J.webRecorderConfiguration)||void 0===X?void 0:X.mouseInteraction)&&void 0!==Q?Q:{MouseUp:!1,MouseDown:!1,Click:!0,ContextMenu:!0,DblClick:!0,Focus:!0,Blur:!0,TouchStart:!1,TouchEnd:!1},scroll:null!==(te=null===(ee=null===($=this.sessionReplayConfig)||void 0===$?void 0:$.webRecorderConfiguration)||void 0===ee?void 0:ee.scroll)&&void 0!==te?te:300,media:null!==(oe=null===(re=null===(ne=this.sessionReplayConfig)||void 0===ne?void 0:ne.webRecorderConfiguration)||void 0===re?void 0:re.media)&&void 0!==oe?oe:1e3,input:null!==(se=null===(ae=null===(ie=this.sessionReplayConfig)||void 0===ie?void 0:ie.webRecorderConfiguration)||void 0===ae?void 0:ae.input)&&void 0!==se?se:"last"},checkoutEveryNms:null!==(ue=null===(ce=null===(le=this.sessionReplayConfig)||void 0===le?void 0:le.webRecorderConfiguration)||void 0===ce?void 0:ce.checkoutEveryNms)&&void 0!==ue?ue:6e5,emit:function(e){var t;3===e.type&&7===(null===(t=e.data)||void 0===t?void 0:t.source)||!e||"number"!=typeof e.timestamp||(e._tabId=T.recordId,T.worker.postMessage({type:"event",payload:{event:e}}))}}),this.initializeRecordingReadiness(),this.startCommunicationElementWatcher(),[3,4];case 3:throw A.sent();case 4:return[2]}}))}))},e.prototype.initializeRecordingReadiness=function(){var e=this,t=0,n=function(){if(t++,e.isPageTrulyReady()||20<=t)e.recordingReady=!0;else{var r=e.detectSlowNetwork()?1e3:500;setTimeout(n,r)}};n()},e.prototype.isPageTrulyReady=function(){return 2<=["interactive"===document.readyState||"complete"===document.readyState,document.body&&0<document.body.children.length,!this.hasCriticalPendingRequests()].filter(Boolean).length},e.prototype.hasCriticalPendingRequests=function(){if("performance"in window&&"getEntriesByType"in performance){var e=performance.getEntriesByType("navigation")[0];if(e)return 0===e.domContentLoadedEventEnd}return!1},e.prototype.waitForPageStability=function(){return T(this,void 0,void 0,(function(){var e=this;return A(this,(function(t){return[2,new Promise((function(t){if("complete"!==document.readyState||e.hasCriticalPendingRequests()){var n=function(){"complete"!==document.readyState||e.hasCriticalPendingRequests()?setTimeout(n,100):t()};n();var r=e.detectSlowNetwork()?1e4:6e3;setTimeout((function(){t()}),r)}else t()}))]}))}))},e.prototype.startCommunicationElementWatcher=function(){var e=this,t=!1,n=null,r=this.detectSlowNetwork()?2e3:500;this.detectionInterval=setInterval((function(){var r,o,i,a;if(e.recording){if(e.recording&&e.recordingReady&&!t){var s=null===(o=null===(r=e.sessionReplayConfig)||void 0===r?void 0:r.webRecorderConfiguration)||void 0===o?void 0:o.chatContainer;r=null===(a=null===(i=e.sessionReplayConfig)||void 0===i?void 0:i.webRecorderConfiguration)||void 0===a?void 0:a.chatRoot,s&&r&&(i=document.querySelector(s))&&i.shadowRoot&&((a=i=i.shadowRoot.querySelector(r))&&(a=i.isConnected,s=!!i.shadowRoot,r=i.textContent&&0<i.textContent.trim().length,i=s&&0<i.shadowRoot.children.length,a=a&&(r||i||s)),a&&(t=!0,function(){if(n&&(clearTimeout(n),n=null),e.recording&&e.recordingReady&&"hidden"!==document.visibilityState){var t=e.detectSlowNetwork()?1500:500;n=setTimeout((function(){if(e.recording&&e.recordingReady&&"function"==typeof Jt.takeFullSnapshot){var t=function(){try{Jt.takeFullSnapshot()}catch(e){}};"requestIdleCallback"in window?requestIdleCallback(t,{timeout:1e3}):setTimeout(t,0),n=null}}),t)}}(),e.detectionInterval&&(clearInterval(e.detectionInterval),e.detectionInterval=null)))}}else e.detectionInterval&&(clearInterval(e.detectionInterval),e.detectionInterval=null)}),r)},e.prototype.stopRecording=function(e){var t=this;void 0===e&&(e=!1),this.recording&&(this.recordingReady=this.recording=!1,this.stopFn&&(this.stopFn(),this.stopFn=null),this.detectionInterval&&(clearInterval(this.detectionInterval),this.detectionInterval=null),this.userInteractionHandlers&&(this.userInteractionHandlers.forEach((function(e){document.removeEventListener(e.event,e.handler)})),this.userInteractionHandlers=null),this.interactionTimeout&&(clearTimeout(this.interactionTimeout),this.interactionTimeout=null),document.removeEventListener("visibilitychange",this._handleVisibilityChange),e&&(this.worker.postMessage({type:"delete"}),this.tracker.setCustomTags({isSR:!1})),this.worker.onmessage=function(e){var n;if("deletion-complete"===(null===(n=e.data)||void 0===n?void 0:n.type)){try{t.worker.terminate()}catch(e){}try{URL.revokeObjectURL(t._workerUrl)}catch(e){}}})},e.prototype._handleVisibilityChange=function(){var e,t,n,r;if("visible"===document.visibilityState&&this.recording&&this.recordingReady){var o=null===(t=null===(e=this.sessionReplayConfig)||void 0===e?void 0:e.webRecorderConfiguration)||void 0===t?void 0:t.chatContainer;if(e=null===(r=null===(n=this.sessionReplayConfig)||void 0===n?void 0:n.webRecorderConfiguration)||void 0===r?void 0:r.chatRoot,(n=o?document.querySelector(o):null)&&n.shadowRoot&&(n=e?n.shadowRoot.querySelector(e):null)&&n.isConnected)return;"function"==typeof Jt.takeFullSnapshot&&(n=function(){try{Jt.takeFullSnapshot()}catch(e){}},"requestIdleCallback"in window?requestIdleCallback(n,{timeout:1e3}):setTimeout(n,0))}},e.prototype.detectSlowNetwork=function(){if("connection"in navigator){var e=navigator.connection.effectiveType;if("slow-2g"===e||"2g"===e||"3g"===e||"slow-4g"===e)return!0}return!1},e}(),lf=null,cf=!1,uf=!1,df=new Set,ff=new Set,hf=0,pf=[],vf=s((function e(){o(this,e),c(this,"t",void 0),c(this,"o",0),c(this,"i",[])}),[{key:"u",value:function(e){var t;if(!e.hadRecentInput){var n=this.i[0],r=this.i.at(-1);this.o&&n&&r&&1e3>e.startTime-r.startTime&&5e3>e.startTime-n.startTime?(this.o+=e.value,this.i.push(e)):(this.o=e.value,this.i=[e]),null===(t=this.t)||void 0===t||t.call(this,e)}}}]),gf=function(){var e=performance.getEntriesByType("navigation")[0];if(e&&0<e.responseStart&&e.responseStart<performance.now())return e},mf=function(e){if("loading"===document.readyState)return"loading";var t=gf();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},yf=function(e){var t="";try{for(;9!==(null===(n=e)||void 0===n?void 0:n.nodeType);){var n,r=e;if(r.id)var o="#"+r.id;else{var i=r.nodeName;o=[1===r.nodeType?i.toLowerCase():i.toUpperCase().replace(/^#/,"")].concat(k(Array.from(r.classList).sort())).join(".")}var a=o;if(99<t.length+a.length)return t||a;if(t=t?a+">"+t:a,r.id)break;e=r.parentNode}}catch(e){}return t},bf=new WeakMap,wf=-1,kf=function(e){addEventListener("pageshow",(function(t){t.persisted&&(wf=t.timeStamp,e(t))}),!0)},Cf=function(e,t,n,r){var o,i;return function(a){var s;0<=t.value&&(a||r)&&((i=t.value-(null!==(s=o)&&void 0!==s?s:0))||void 0===o)&&(o=t.value,t.delta=i,a=t.value,t.rating=a>n[1]?"poor":a>n[0]?"needs-improvement":"good",e(t))}},Sf=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Ef=function(){var e,t=gf();return null!==(e=null==t?void 0:t.activationStart)&&void 0!==e?e:0},If=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,n=gf(),r="navigate";return 0<=wf?r="back-forward-cache":n&&(document.prerendering||0<Ef()?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},_f=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(v({type:e,buffered:!0},n)),r}}catch(e){}},Tf=function(e){var t=!1;return function(){t||(e(),t=!0)}},Af=-1,xf=new Set,Rf=function(e){if("hidden"===document.visibilityState){if("visibilitychange"===e.type){var t,n=l(xf);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(e){n.e(e)}finally{n.f()}}isFinite(Af)||(Af="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",Rf,!0))}},Of=function(){if(0>Af){var e,t=Ef(),n=document.prerendering||null===(e=globalThis.performance.getEntriesByType("visibility-state").filter((function(e){return"hidden"===e.name&&e.startTime>t}))[0])||void 0===e?void 0:e.startTime;Af=null!=n?n:"hidden"!==document.visibilityState||document.prerendering?1/0:0,addEventListener("visibilitychange",Rf,!0),addEventListener("prerenderingchange",Rf,!0),kf((function(){setTimeout((function(){Af="hidden"!==document.visibilityState||document.prerendering?1/0:0}))}))}return{get firstHiddenTime(){return Af},onHidden:function(e){xf.add(e)}}},Mf=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Nf=[1800,3e3],Lf=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Mf((function(){var n,r=Of(),o=If("FCP"),i=_f("paint",(function(e){var t;e=l(e);try{for(e.s();!(t=e.n()).done;){var a=t.value;"first-contentful-paint"===a.name&&(i.disconnect(),a.startTime<r.firstHiddenTime&&(o.value=Math.max(a.startTime-Ef(),0),o.entries.push(a),n(!0)))}}catch(t){e.e(t)}finally{e.f()}}));i&&(n=Cf(e,o,Nf,t.reportAllChanges),kf((function(r){o=If("FCP"),n=Cf(e,o,Nf,t.reportAllChanges),Sf((function(){o.value=performance.now()-r.timeStamp,n(!0)}))})))}))},Df=[.1,.25],Pf=function(e){return e.find((function(e){var t;return 1===(null===(t=e.node)||void 0===t?void 0:t.nodeType)}))||e[0]},Uf=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=yr(t=Object.assign({},t),vf),r=new WeakMap;n.t=function(e){var n,o,i,a;null!=e&&null!==(n=e.sources)&&void 0!==n&&n.length&&(n=null==(e=Pf(e.sources))?void 0:e.node)&&(n=null!==(o=null===(i=(a=t).generateTarget)||void 0===i?void 0:i.call(a,n))&&void 0!==o?o:yf(n),r.set(e,n))},function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=Of();Lf(Tf((function(){var r,o=If("CLS",0),i=yr(t,vf),a=function(e){var t;e=l(e);try{for(e.s();!(t=e.n()).done;)i.u(t.value)}catch(t){e.e(t)}finally{e.f()}i.o>o.value&&(o.value=i.o,o.entries=i.i,r())},s=_f("layout-shift",a);s&&(r=Cf(e,o,Df,t.reportAllChanges),n.onHidden((function(){a(s.takeRecords()),r(!0)})),kf((function(){i.o=0,o=If("CLS",0),r=Cf(e,o,Df,t.reportAllChanges),Sf((function(){return r()}))})),setTimeout(r))})))}((function(t){t=function(e){var t={};if(e.entries.length){var n,o=e.entries.reduce((function(e,t){return e.value>t.value?e:t}));null!=o&&null!==(n=o.sources)&&void 0!==n&&n.length&&(n=Pf(o.sources))&&(t={largestShiftTarget:r.get(n),largestShiftTime:o.startTime,largestShiftValue:o.value,largestShiftSource:n,largestShiftEntry:o,loadState:mf(o.startTime)})}return Object.assign(e,{attribution:t})}(t),e(t)}),t)},Ff=0,Bf=1/0,Gf=0,jf=function(e){var t;e=l(e);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.interactionId&&(Bf=Math.min(Bf,n.interactionId),Gf=Math.max(Gf,n.interactionId),Ff=Gf?(Gf-Bf)/7+1:0)}}catch(t){e.e(t)}finally{e.f()}},zf=function(){var e;return Nd?Ff:null!==(e=performance.interactionCount)&&void 0!==e?e:0},Vf=0,Wf=s((function e(){o(this,e),c(this,"l",[]),c(this,"h",new Map),c(this,"m",void 0),c(this,"p",void 0)}),[{key:"v",value:function(){Vf=zf(),this.l.length=0,this.h.clear()}},{key:"M",value:function(){var e=Math.min(this.l.length-1,Math.floor((zf()-Vf)/50));return this.l[e]}},{key:"u",value:function(e){var t;if(null!==(t=this.m)&&void 0!==t&&t.call(this,e),e.interactionId||"first-input"===e.entryType){var n=this.l.at(-1);if((t=this.h.get(e.interactionId))||10>this.l.length||e.duration>n.T){var r;if(t?e.duration>t.T?(t.entries=[e],t.T=e.duration):e.duration===t.T&&e.startTime===t.entries[0].startTime&&t.entries.push(e):(t={id:e.interactionId,entries:[e],T:e.duration},this.h.set(t.id,t),this.l.push(t)),this.l.sort((function(e,t){return t.T-e.T})),10<this.l.length){var o;e=l(e=this.l.splice(10));try{for(e.s();!(o=e.n()).done;)this.h.delete(o.value.id)}catch(t){e.e(t)}finally{e.f()}}null===(r=this.p)||void 0===r||r.call(this,t)}}}}]),Hf=function(e){var t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=Tf(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),t((function(){e(),removeEventListener("visibilitychange",e,{capture:!0})})))},qf=[200,500],Zf=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=yr(t=Object.assign({},t),Wf),r=[],o=[],i=0,a=new WeakMap,s=new WeakMap,c=!1,u=function(){var e=n.l.map((function(e){return a.get(e.entries[0])})),t=o.length-50;o=o.filter((function(n,r){return r>=t||e.includes(n)}));var s,u=new Set,f=l(o);try{for(f.s();!(s=f.n()).done;){var h,p=s.value,v=l(d(p.startTime,p.processingEnd));try{for(v.s();!(h=v.n()).done;)u.add(h.value)}catch(e){v.e(e)}finally{v.f()}}}catch(e){f.e(e)}finally{f.f()}var g=r.length-1-50;r=r.filter((function(e,t){return e.startTime>i&&t>g||u.has(e)})),c=!1};n.m=function(e){var t=e.startTime+e.duration;i=Math.max(i,e.processingEnd);for(var n=o.length-1;0<=n;n--){var r=o[n];if(8>=Math.abs(t-r.renderTime)){var s=r;s.startTime=Math.min(e.startTime,s.startTime),s.processingStart=Math.min(e.processingStart,s.processingStart),s.processingEnd=Math.max(e.processingEnd,s.processingEnd),s.entries.push(e);break}}s||(s={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:t,entries:[e]},o.push(s)),(e.interactionId||"first-input"===e.entryType)&&a.set(e,s),c||(Hf(u),c=!0)},n.p=function(e){if(!s.get(e)){var n,r,o,i=e.entries[0].target;if(i)i=null!==(n=null===(r=(o=t).generateTarget)||void 0===r?void 0:r.call(o,i))&&void 0!==n?n:yf(i),s.set(e,i)}};var d=function(e,t){var n,o=[],i=l(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(!(a.startTime+a.duration<e)){if(a.startTime>t)break;o.push(a)}}}catch(e){i.e(e)}finally{i.f()}return o},f=function(e){var t=e.entries[0],r=a.get(t),o=t.processingStart,i=Math.max(t.startTime+t.duration,o),c=Math.min(r.processingEnd,i);r=r.entries.sort((function(e,t){return e.processingStart-t.processingStart}));var u=d(t.startTime,c),f=n.h.get(t.interactionId);return function(e,t){if(null!==(t=e.longAnimationFrameEntries)&&void 0!==t&&t.length){t=e.interactionTime;var n,r,o,i=e.inputDelay,a=e.processingDuration,s=0,c=0,u=0,d=0,f=l(e.longAnimationFrameEntries);try{for(f.s();!(o=f.n()).done;){var h=o.value;c=c+h.startTime+h.duration-h.styleAndLayoutStart;var p,v=l(h.scripts);try{for(v.s();!(p=v.n()).done;){var g=p.value,m=g.startTime+g.duration;if(!(m<t)){var y=m-Math.max(t,g.startTime),b=g.duration?y/g.duration*g.forcedStyleAndLayoutDuration:0;s+=y-b,c+=b,y>d&&(r=g.startTime<t+i?"input-delay":g.startTime>=t+i+a?"presentation-delay":"processing-duration",n=g,d=y)}}}catch(e){v.e(e)}finally{v.f()}}}catch(e){f.e(e)}finally{f.f()}(o=(o=e.longAnimationFrameEntries.at(-1))?o.startTime+o.duration:0)>=t+i+a&&(u=e.nextPaintTime-o),n&&r&&(e.longestScript={entry:n,subpart:r,intersectingDuration:d}),e.totalScriptDuration=s,e.totalStyleAndLayoutDuration=c,e.totalPaintDuration=u,e.totalUnattributedDuration=e.nextPaintTime-t-s-c-u}}(t={interactionTarget:s.get(f),interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:i,processedEventEntries:r,longAnimationFrameEntries:u,inputDelay:o-t.startTime,processingDuration:c-o,presentationDelay:i-c,loadState:mf(t.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0}),Object.assign(e,{attribution:t})};_f("long-animation-frame",(function(e){r=r.concat(e),c||(Hf(u),c=!0)})),function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype){var n=Of();Mf((function(){var r;"interactionCount"in performance||Nd||(Nd=_f("event",jf,{type:"event",buffered:!0,durationThreshold:0}));var o=If("INP"),i=yr(t,Wf),a=function(e){Hf((function(){var t,n=l(e);try{for(n.s();!(t=n.n()).done;)i.u(t.value)}catch(e){n.e(e)}finally{n.f()}(n=i.M())&&n.T!==o.value&&(o.value=n.T,o.entries=n.entries,c())}))},s=_f("event",a,{durationThreshold:null!==(r=t.durationThreshold)&&void 0!==r?r:40}),c=Cf(e,o,qf,t.reportAllChanges);s&&(s.observe({type:"first-input",buffered:!0}),n.onHidden((function(){a(s.takeRecords()),c(!0)})),kf((function(){i.v(),o=If("INP"),c=Cf(e,o,qf,t.reportAllChanges)})))}))}}((function(t){t=f(t),e(t)}),t)},Yf=s((function e(){o(this,e),c(this,"m",void 0)}),[{key:"u",value:function(e){var t;null===(t=this.m)||void 0===t||t.call(this,e)}}]),Kf=[2500,4e3],Jf=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=yr(t=Object.assign({},t),Yf),r=new WeakMap;n.m=function(e){var n,o,i,a=e.element;a&&(a=null!==(n=null===(o=(i=t).generateTarget)||void 0===o?void 0:o.call(i,a))&&void 0!==n?n:yf(a),r.set(e,a))},function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Mf((function(){var n=Of(),r=If("LCP"),o=yr(t,Yf),i=function(e){var i;t.reportAllChanges||(e=e.slice(-1)),e=l(e);try{for(e.s();!(i=e.n()).done;){var a=i.value;o.u(a),a.startTime<n.firstHiddenTime&&(r.value=Math.max(a.startTime-Ef(),0),r.entries=[a],s())}}catch(t){e.e(t)}finally{e.f()}},a=_f("largest-contentful-paint",i);if(a){for(var s=Cf(e,r,Kf,t.reportAllChanges),c=Tf((function(){i(a.takeRecords()),a.disconnect(),s(!0)})),u=function(e){e.isTrusted&&(Hf(c),removeEventListener(e.type,u,{capture:!0}))},d=0,f=["keydown","click","visibilitychange"];d<f.length;d++)addEventListener(f[d],u,{capture:!0});kf((function(n){r=If("LCP"),s=Cf(e,r,Kf,t.reportAllChanges),Sf((function(){r.value=performance.now()-n.timeStamp,s(!0)}))}))}}))}((function(t){t=function(e){var t={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){var n=gf();if(n){var o=n.activationStart||0,i=e.entries.at(-1),a=i.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===i.url}))[0];t=Math.max(0,n.responseStart-o);var s=Math.max(t,a?(a.requestStart||a.startTime)-o:0);o=Math.min(e.value,Math.max(s,a?a.responseEnd-o:0)),t={target:r.get(i),timeToFirstByte:t,resourceLoadDelay:s-t,resourceLoadDuration:o-s,elementRenderDelay:e.value-o,navigationEntry:n,lcpEntry:i},i.url&&(t.url=i.url),a&&(t.lcpResourceEntry=a)}}return Object.assign(e,{attribution:t})}(t),e(t)}),t)};!function(e){e[e.APP=0]="APP",e[e.REMOTE=1]="REMOTE",e[e.MERGE=2]="MERGE"}(Dd||(Dd={}));var Xf={},Qf=function(){this.outQueues=[],this.bufferFlushers=[],this.hasLoaded=!1,this.registeredOnLoadHandlers=[]},$f=Object.freeze({__proto__:null,cleanup:function(e){Cr(e,(function(e){e.clearTimers()})),function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];Xf.hasOwnProperty(n)?delete Xf[n]:qr.warn(n+" not configured")}}(e)},convivaAppTracker:function(e){void 0===e&&(e={});try{var t="undefined"!=typeof window?Ir():void 0;if(t)return Sr("CAT","CAT",e.trackerVersionSuffix?"js-".concat("1.5.0"," ").concat(e.trackerVersionSuffix):"js-".concat("1.5.0"),t,e)}catch(e){console.warn("Conviva App Tracker:: Initialisation failed! "+e)}},getClientId:function(){var e="";return"undefined"!=typeof window&&null!==window&&void 0!==window&&window.localStorage&&(e=window.localStorage.getItem("Conviva.sdkConfig"),e="{}"===(e=JSON.parse(e||"{}"))||void 0===e?"":e.clId),e},setClientId:function(e){if(e&&"string"==typeof e)try{var t=e.split(".");if(4!==t.length)console.warn('Conviva App Tracker:: Invalid clientId format! It should be in the format of "x.x.x.x"');else if(!1===t.every((function(e){return/^\d+$/.test(e)})))console.warn("Conviva App Tracker:: Invalid clientId format! Every part of clientId should be numeric");else if("undefined"!=typeof window&&null!==window&&void 0!==window&&window.localStorage){var n=window.localStorage,r=n.getItem("Conviva.sdkConfig"),o=JSON.parse(r||"{}");"{}"===o||void 0===o?o={clId:e}:o.clId=e;var i=JSON.stringify(o);n.setItem("Conviva.sdkConfig",i)}else console.warn("Conviva App Tracker:: window or local storage is not available")}catch(e){console.warn(e)}else console.warn("Conviva App Tracker:: Unable to set clinetId string!")},setConversationId:function(e,t){Cr(t,(function(t){t.setConversationId(e)}))},setCustomTags:function(e,t){Cr(t,(function(t){try{t.setCustomTags(e)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}}))},setCustomUrl:function(e,t){Cr(t,(function(t){t.setCustomUrl(e)}))},setDocumentTitle:function(e,t){Cr(t,(function(t){t.setDocumentTitle(e)}))},setReferrerUrl:function(e,t){Cr(t,(function(t){t.setReferrerUrl(e)}))},setUserId:function(e,t){Cr(t,(function(t){t.setUserId(e)}))},trackButtonClick:function(e,t){Cr(t,(function(t){try{t.trackButtonClick(e)}catch(e){console.warn("Conviva App Tracker:: Unable to track button click event! "+e)}}))},trackCustomEvent:function(e,t){Cr(t,(function(t){try{t.trackCustomEvent(e)}catch(e){console.warn("Conviva App Tracker:: Unable to track custom event! "+e)}}))},trackError:function(e,t){Cr(t,(function(t){try{t.trackErrorEvent(e)}catch(e){console.warn("Conviva App Tracker:: Unable to track error!")}}))},trackLinkClick:function(e,t){Cr(t,(function(t){try{t.trackLinkClick(e)}catch(e){console.warn("Conviva App Tracker:: Unable to track link click event! "+e)}}))},trackNetworkRequest:function(e,t){var n,r,o,i,a,s,l,c,u,d,f,h,p,v,g,m,y,b,w={method:null!==(n=e.requestDetails.method)&&void 0!==n?n:void 0,url:null!==(r=e.requestDetails.url)&&void 0!==r?r:void 0,headers:null!==(o=e.requestDetails.headers)&&void 0!==o?o:void 0,body:null!==(i=e.requestDetails.body)&&void 0!==i?i:void 0,requestTimestamp:null!==(a=e.requestDetails.requestTimestamp)&&void 0!==a?a:void 0,requestTime:null!==(s=e.requestDetails.requestTime)&&void 0!==s?s:void 0,size:null!==(l=e.requestDetails.size)&&void 0!==l?l:void 0,traceparent:null!==(c=e.requestDetails.traceparent)&&void 0!==c?c:void 0,baggage:null!==(u=e.requestDetails.baggage)&&void 0!==u?u:void 0},k={status:null!==(d=e.responseDetails.status)&&void 0!==d?d:void 0,statusText:null!==(f=e.responseDetails.statusText)&&void 0!==f?f:void 0,url:null!==(h=e.responseDetails.url)&&void 0!==h?h:void 0,headers:null!==(p=e.responseDetails.headers)&&void 0!==p?p:void 0,body:null!==(v=e.responseDetails.body)&&void 0!==v?v:null,event:null!==(g=e.responseDetails.event)&&void 0!==g?g:void 0,size:null!==(m=e.responseDetails.size)&&void 0!==m?m:void 0,responseTimestamp:null!==(y=e.responseDetails.responseTimestamp)&&void 0!==y?y:void 0,responseTime:null!==(b=e.responseDetails.responseTime)&&void 0!==b?b:void 0};w.url?Cr(t,(function(e){var t;try{var n=null===(t=e.core)||void 0===t?void 0:t.getConfig().networkRequestTrackingConfiguration;e.getSamplingMode()!==Zu.SAMPLING_MODES.NONE&&n.enabled&&e.determineShouldTrack(n.collect,n.block,n.blocklist,n.safelist,k,w)&&(n.eventCollectionMode!==Zu.NETWORK_REQUEST_EVENT_COLLECTION_MODE.MANUAL&&n.eventCollectionMode!==Zu.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH||e.trackNetworkRequest({requestDetails:w,responseDetails:k}))}catch(e){console.warn("Conviva App Tracker:: Unable to track network request! "+e)}})):console.warn("Conviva App Tracker:: Unable to track network request! Missing required fields.")},trackPageView:function(e,t){Cr(t,(function(t){t.trackPageView(e)}))},unsetCustomTags:function(e,t){Cr(t,(function(t){try{t.unsetCustomTags(e)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}}))},version:"1.5.0"}),eh=window.GlobalConvivaNamespace.shift(),th=window[eh];th.q=function(e,t){function n(e){var t=e.split(":");return[e=t[0],t=1<t.length?t[1].split(";"):void 0]}function r(e,t){if(v[e])try{return v[e].apply(null,t)}catch(t){qr.error(e+" failed",t)}else qr.warn(e+" is not an available function")}function o(e){v=_r(_r({},v),e)}function i(e){try{if("object"==typeof e[0]&&null!==e[0]){var t=e[0],n=function(e){return null==e||e.contexts,[]}(t),r=Sr("CAT","CAT",t.trackerVersionSuffix?"js-".concat(p," ").concat(t.trackerVersionSuffix):"js-".concat(p),u,_r(_r({},t),{plugins:n.map((function(e){return e[0]}))}));r?(d.includes(r.id)||d.push(r.id),n.forEach((function(e){o(e[1])}))):qr.warn("CAT already exists")}else qr.error("convivaAppTracker failed",Error("Invalid parameters"))}catch(e){console.warn("convivaAppTracker failed "+e)}}function a(e,t){function n(e){Object.prototype.hasOwnProperty.call(f,e)&&(l.clearTimeout(f[e].timeout),delete f[e],0===Object.keys(f).length&&h.forEach((function(e){var t=e[1];void 0!==v[e[0]]&&v[e[0]].length>t.length&&Array.isArray(t[0])&&(t=[{},t[0]]),r(e[0],t)})))}var i;if("string"==typeof e[0]&&B(e[1])&&(void 0===e[2]||Array.isArray(e[2]))){var a=e[0],s=e[1],u=e[2];if(null===(i=e[3])||void 0===i||i){var d=l.setTimeout((function(){n(a)}),5e3);f[a]={timeout:d}}(d=c.createElement("script")).setAttribute("src",a),d.setAttribute("async","1"),rn(d,"error",(function(){n(a),qr.warn("Failed to load plugin ".concat(s[0]," from ").concat(a))}),!0),rn(d,"load",(function(){var e=s[1],r=l[s[0]];if(r&&"object"==typeof r){var i=r[e];e=_(r,["symbol"==typeof e?e:e+""]),v.addPlugin.apply(null,[{plugin:i.apply(null,u)},t]),o(e)}n(a)}),!0),c.head.appendChild(d)}else{if("object"==typeof e[0]&&"string"==typeof e[1]&&(void 0===e[2]||Array.isArray(e[2]))){var p=e[0],g=e[1];if(i=e[2],p)return e=p[g],p=_(p,["symbol"==typeof g?g:g+""]),null===(d=v.addPlugin)||void 0===d||d.apply(null,[{plugin:e.apply(null,i)},t]),void o(p)}qr.warn("Failed to add Plugin: ".concat(e[1]))}}function s(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];for(o=0;o<t.length;o+=1){var s=t[o],l=Array.prototype.shift.call(s),c=!(!l||"function"!=typeof l);if(c)try{c={};for(var u=0,p=Er(d,Xf);u<p.length;u++){var g=p[u];c[g.id.replace("".concat(e,"_"),"")]=g}l.apply(c,s)}catch(e){qr.error("Tracker callback failed",e)}finally{continue}if(l=(c=n(l))[0],c=c[1],"convivaAppTracker"===l)i(s);else if(c=c?c.map((function(t){return"".concat(e,"_").concat(t)})):d,"addPlugin"===l)a(s,c);else if(u=void 0,u=0<s.length?[s[0],c]:void 0!==v[l]&&2===v[l].length?[{},c]:[c],0<Object.keys(f).length)h.push([l,u]);else if(s=r(l,u),"getClientId"===l)return s}}for(var l=window,c=document,u=Ir(),d=[],f={},h=[],p="1.5.0",v=_($f,["version"]),g=0;g<t.length;g++)s(t[g]);return{push:s}}(eh,th.q)}();
//# sourceMappingURL=conviva-eco-js-script-sensor.js.map
