/*!
 * Web analytics for Snowplow v0.5.3 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

"use strict";!function(){function e(e,n){var t,o={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>n.indexOf(t)&&(o[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)0>n.indexOf(t[r])&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(o[t[r]]=e[t[r]])}return o}function n(e,n,t){if(t||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)!o&&r in n||(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}function t(){var e,n={},t=[],o=[],i=[],a=function(e,t){null!=t&&""!==t&&(n[e]=t)};return{add:a,addDict:function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a(n,e[n])},addJson:function(e,n,i){i&&r(i)&&(e={keyIfEncoded:e,keyIfNotEncoded:n,json:i},o.push(e),t.push(e))},addContextEntity:function(e){i.push(e)},getPayload:function(){return n},getJson:function(){return t},withJsonProcessor:function(n){e=n},build:function(){return null==e||e(this,o,i),n}}}function o(e){return function(t,o,r){for(var i=function(n,o,r){if(n=JSON.stringify(n),e){if(r=t.add,n){var i=0,a=0,c=[];if(n){n=unescape(encodeURIComponent(n));do{var l=n.charCodeAt(i++),u=n.charCodeAt(i++),s=n.charCodeAt(i++),d=l<<16|u<<8|s;l=d>>18&63,u=d>>12&63,s=d>>6&63,d&=63,c[a++]=We.charAt(l)+We.charAt(u)+We.charAt(s)+We.charAt(d)}while(i<n.length);i=c.join(""),n=((n=n.length%3)?i.slice(0,n-3):i)+"===".slice(n||3)}n=n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}r.call(t,o,n)}else t.add(r,n)},a=function(n,o){if(!n){var r=t.getPayload();if(e?r.cx:r.co){var i=(n=JSON).parse;if(e){if(r=r.cx){switch(4-r.length%4){case 2:r+="==";break;case 3:r+="="}r=function(e){var n,t=0,o=0,r="",i=[];if(!e)return e;e+="";do{var a=We.indexOf(e.charAt(t++)),c=We.indexOf(e.charAt(t++));r=We.indexOf(e.charAt(t++));var l=We.indexOf(e.charAt(t++)),u=a<<18|c<<12|r<<6|l;a=u>>16&255,c=u>>8&255,u&=255,i[o++]=64===r?String.fromCharCode(a):64===l?String.fromCharCode(a,c):String.fromCharCode(a,c,u)}while(t<e.length);return r=i.join(""),n=r.replace(/\0+$/,""),decodeURIComponent(n.split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(r=r.replace(/-/g,"+").replace(/_/g,"/"))}}else r=r.co;n=i.call(n,r)}else n=void 0}return n?n.data=n.data.concat(o.data):n=o,n},c=void 0,l=0;l<o.length;l++){var u=o[l];"cx"===u.keyIfEncoded?c=a(c,u.json):i(u.json,u.keyIfEncoded,u.keyIfNotEncoded)}o.length=0,r.length&&(c=a(c,o={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:n([],r,!0)}),r.length=0),c&&i(c,"cx","co")}}function r(e){if(!i(e))return!1;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!0;return!1}function i(e){return null!=e&&(e.constructor==={}.constructor||e.constructor===[].constructor)}function a(){var e=[],n=[];return{getGlobalPrimitives:function(){return e},getConditionalProviders:function(){return n},addGlobalContexts:function(t){for(var o=[],r=[],i=0;i<t.length;i++){var a=t[i];k(a)?o.push(a):p(a)&&r.push(a)}e=e.concat(r),n=n.concat(o)},clearGlobalContexts:function(){n=[],e=[]},removeGlobalContexts:function(t){for(var o=function(t){k(t)?n=n.filter((function(e){return JSON.stringify(e)!==JSON.stringify(t)})):p(t)&&(e=e.filter((function(e){return JSON.stringify(e)!==JSON.stringify(t)})))},r=0;r<t.length;r++)o(t[r])},getApplicableContexts:function(t){e:{for(var o=0,r=t.getJson();o<r.length;o++){var i=r[o];if("ue_px"===i.keyIfEncoded&&"object"==typeof i.json.data&&"string"==typeof(i=i.json.data.schema)){o=i;break e}}o=""}i="string"==typeof(r=t.getPayload().e)?r:"",r=[];var a=b(e,t,i,o);return r.push.apply(r,a),t=function(e,n,t,o){var r;return e=T(e).map((function(e){e:{if(m(e)){var r=e[0],i=!1;try{i=r({event:n.getPayload(),eventType:t,eventSchema:o})}catch(e){i=!1}if(!0===i){e=b(e[1],n,t,o);break e}}else if(h(e)&&function(e,n){var t=0,o=0,r=e.accept;return Array.isArray(r)?e.accept.some((function(e){return y(e,n)}))&&o++:"string"==typeof r&&y(r,n)&&o++,r=e.reject,Array.isArray(r)?e.reject.some((function(e){return y(e,n)}))&&t++:"string"==typeof r&&y(r,n)&&t++,0<o&&0===t}(e[0],o)){e=b(e[1],n,t,o);break e}e=[]}if(e&&0!==e.length)return e})),(r=[]).concat.apply(r,e.filter((function(e){return null!=e&&e.filter(Boolean)})))}(n,t,i,o),r.push.apply(r,t),r}}}function c(e){for(var n,t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return null!==(n=null==e?void 0:e.map((function(e){if("function"!=typeof e)return e;try{return e.apply(void 0,t)}catch(e){}})).filter(Boolean))&&void 0!==n?n:[]}function l(e){return!!((e=e.split("."))&&1<e.length)&&function(e){if("*"===e[0]||"*"===e[1])return!1;if(0<e.slice(2).length){var n=!1,t=0;for(e=e.slice(2);t<e.length;t++)if("*"===e[t])n=!0;else if(n)return!1;return!0}return 2==e.length}(e)}function u(e){if(null!==(e=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(e))&&l(e[1]))return e.slice(1,6)}function s(e){if(e=u(e)){var n=e[0];return 5===e.length&&l(n)}return!1}function d(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))}function f(e){return d(e)?e.every((function(e){return s(e)})):"string"==typeof e&&s(e)}function v(e){return!!(r(e)&&"schema"in e&&"data"in e)&&("string"==typeof e.schema&&"object"==typeof e.data)}function g(e){return"function"==typeof e&&1>=e.length}function p(e){return g(e)||v(e)}function m(e){return!(!Array.isArray(e)||2!==e.length)&&(Array.isArray(e[1])?g(e[0])&&e[1].every(p):g(e[0])&&p(e[1]))}function h(e){return!(!Array.isArray(e)||2!==e.length)&&(!!function(e){var n=0;if(null!=e&&"object"==typeof e&&!Array.isArray(e)){if(Object.prototype.hasOwnProperty.call(e,"accept")){if(!f(e.accept))return!1;n+=1}if(Object.prototype.hasOwnProperty.call(e,"reject")){if(!f(e.reject))return!1;n+=1}return 0<n&&2>=n}return!1}(e[0])&&(Array.isArray(e[1])?e[1].every(p):p(e[1])))}function k(e){return m(e)||h(e)}function y(e,n){if(!s(e))return!1;if(e=u(e),n=null!==(n=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(n))?n.slice(1,6):void 0,e&&n){if(!function(e,n){if(n=n.split("."),e=e.split("."),n&&e){if(n.length!==e.length)return!1;for(var t=0;t<e.length;t++)if(!w(n[t],e[t]))return!1;return!0}return!1}(e[0],n[0]))return!1;for(var t=1;5>t;t++)if(!w(e[t],n[t]))return!1;return!0}return!1}function w(e,n){return e&&n&&"*"===e||e===n}function T(e){return Array.isArray(e)?e:[e]}function b(e,n,t,o){var r;return e=T(e).map((function(e){e:if(v(e))e=[e];else{if(g(e)){n:{var r=void 0;try{if(r=e({event:n.getPayload(),eventType:t,eventSchema:o}),Array.isArray(r)&&r.every(v)||v(r)){var i=r;break n}i=void 0;break n}catch(e){}i=void 0}if(v(i)){e=[i];break e}if(Array.isArray(i)){e=i;break e}}e=void 0}if(e&&0!==e.length)return e})),(r=[]).concat.apply(r,e.filter((function(e){return null!=e&&e.filter(Boolean)})))}function C(e){void 0===e&&(e={});var t,r,c,l,u,s,d,f=e.base64,v=e.corePlugins,g=null!=v?v:[];t=null==f||f,r=g,c=e.callback,l=function(e){return{addPluginContexts:function(t){var o=t?n([],t,!0):[];return e.forEach((function(e){try{e.contexts&&o.push.apply(o,e.contexts())}catch(e){en.error("Error adding plugin contexts",e)}})),o}}}(r),u=a(),s=t,d={};var p=Ne(Ne({},f={track:function(e,n,t){e.withJsonProcessor(o(s)),e.add("eid",Ze.v4()),e.addDict(d),t=function(e){return null==e?{type:"dtm",value:(new Date).getTime()}:"number"==typeof e?{type:"dtm",value:e}:"ttm"===e.type?{type:"ttm",value:e.value}:{type:"dtm",value:e.value||(new Date).getTime()}}(t),e.add(t.type,t.value.toString()),n=function(e,n){e=u.getApplicableContexts(e);var t=[];return n&&n.length&&t.push.apply(t,n),e&&e.length&&t.push.apply(t,e),t}(e,l.addPluginContexts(n)),void 0!==(n=n&&n.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:n}:void 0)&&e.addJson("cx","co",n),r.forEach((function(n){try{n.beforeTrack&&n.beforeTrack(e)}catch(e){en.error("Plugin beforeTrack",e)}})),"function"==typeof c&&c(e);var i=e.build();return r.forEach((function(e){try{e.afterTrack&&e.afterTrack(i)}catch(e){en.error("Plugin afterTrack",e)}})),i},addPayloadPair:function(e,n){d[e]=n},configuration:e,getConfig:function(){return e},setConfig:function(n){n&&(void 0!==n.base64&&(s=e.base64=n.base64),void 0!==n.linkClickTracking&&(e.linkClickTracking=n.linkClickTracking),void 0!==n.cacheRefreshInterval&&(e.cacheRefreshInterval=n.cacheRefreshInterval),void 0!==n.buttonClickTracking&&(e.buttonClickTracking=n.buttonClickTracking),void 0!==n.customEvent&&(e.customEvent=n.customEvent),void 0!==n.exceptionAutotracking&&(e.exceptionAutotracking=n.exceptionAutotracking),void 0!==n.enablePeriodicHeartbeat&&(e.enablePeriodicHeartbeat=n.enablePeriodicHeartbeat),void 0!==n.periodicHeartbeatInterval&&(e.periodicHeartbeatInterval=n.periodicHeartbeatInterval),void 0!==n.customEventTrackingConfiguration&&(e.customEventTrackingConfiguration=n.customEventTrackingConfiguration),void 0!==n.convivaVideoEventTrackingConfiguration&&(e.convivaVideoEventTrackingConfiguration=n.convivaVideoEventTrackingConfiguration),void 0!==n.ajaxTrackingConfiguration&&(e.ajaxTrackingConfiguration=n.ajaxTrackingConfiguration),void 0!==n.networkRequestTrackingConfiguration&&(e.networkRequestTrackingConfiguration=n.networkRequestTrackingConfiguration),void 0!==n.traceparentconfig&&(e.traceparentconfig=n.traceparentconfig),void 0!==n.metaTagsTrackingConfiguration&&(e.metaTagsTrackingConfiguration=n.metaTagsTrackingConfiguration))},getBase64Encoding:function(){return s},setBase64Encoding:function(e){s=e},addPayloadDict:function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(d[n]=e[n])},resetPayloadPairs:function(e){d=i(e)?e:{}},setTrackerVersion:function(e){d.tv=e},setTrackerNamespace:function(e){d.tna=e},setAppId:function(e){d.aid=e},setPlatform:function(e){d.p=e},setUserId:function(e){d.uid=e},setScreenResolution:function(e,n){d.res=e+"x"+n},setViewport:function(e,n){d.vp=e+"x"+n},setColorDepth:function(e){d.cd=e},setTimezone:function(e){d.tz=e},setLang:function(e){d.lang=e},setIpAddress:function(e){d.ip=e},setUseragent:function(e){d.ua=e},addGlobalContexts:function(e){u.addGlobalContexts(e)},clearGlobalContexts:function(){u.clearGlobalContexts()},removeGlobalContexts:function(e){u.removeGlobalContexts(e)}}),{addPlugin:function(e){var n,t;e=e.plugin,g.push(e),null===(n=e.logger)||void 0===n||n.call(e,en),null===(t=e.activateCorePlugin)||void 0===t||t.call(e,p)}});return null==g||g.forEach((function(e){var n,t;null===(n=e.logger)||void 0===n||n.call(e,en),null===(t=e.activateCorePlugin)||void 0===t||t.call(e,p)})),p}function E(e){var n=e.event;return e={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:e=n.schema,data:n.data}},(n=t()).add("e","ue"),n.addJson("ue_px","ue_pr",e),n}function A(e){return E({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:I({name:e.name,data:e.data})}})}function _(e){return E({event:{schema:"iglu:com.conviva/conviva_video_events/jsonschema/1-0-5",data:I({name:e.name,sid:e.sid,iid:e.iid,clid:e.clid,st:e.st,cen:e.cen,ced:e.ced,an:e.an})}})}function O(e){return E({event:e={schema:"iglu:com.snowplowanalytics.snowplow/link_click/jsonschema/1-0-1",data:I({targetUrl:e.targetUrl,elementId:e.elementId,elementClasses:e.elementClasses,elementTarget:e.elementTarget,elementContent:e.elementContent})}})}function x(e){return E({event:e={schema:"iglu:com.conviva/button_click/jsonschema/1-0-0",data:I({elementType:e.elementType,elementId:e.elementId,elementClasses:e.elementClasses,elementName:e.elementName,elementText:e.elementText,elementValue:e.elementValue})}})}function I(e,n){void 0===n&&(n={});var t,o={};for(t in e)(n[t]||null!==e[t]&&void 0!==e[t])&&(o[t]=e[t]);return o}function S(e){return Number.isInteger&&Number.isInteger(e)||"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function P(e){return!(!e||"function"!=typeof e)}function j(e){if(!e||"string"!=typeof e.valueOf()){e=e.text||"";var n=document.getElementsByTagName("title");n&&null!=n[0]&&(e=n[0].text)}return e}function R(e){var n=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(e);return n?n[1]:e}function N(e){var n=e.length;return"."===e.charAt(--n)&&(e=e.slice(0,n)),"*."===e.slice(0,2)&&(e=e.slice(1)),e}function D(e){var n=window,t=L("referrer",n.location.href)||L("referer",n.location.href);if(t)return t;if(e)return e;try{if(n.top)return n.top.document.referrer;if(n.parent)return n.parent.document.referrer}catch(e){}return document.referrer}function q(e,n,t,o){return e.addEventListener?(e.addEventListener(n,t,o),!0):e.attachEvent?e.attachEvent("on"+n,t):void(e["on"+n]=t)}function L(e,n){return(e=new RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(n))?decodeURIComponent(e[1].replace(/\+/g," ")):null}function B(e,n,t){void 0===t&&(t=63072e3);try{var o=window.localStorage,r=Date.now()+1e3*t;return o.setItem("".concat(e,".expires"),r.toString()),o.setItem(e,n),!0}catch(e){return!1}}function U(e){try{var n=window.localStorage;return n.removeItem(e),n.removeItem(e+".expires"),!0}catch(e){return!1}}function M(e,n,t,o,r,i,a){return 1<arguments.length?document.cookie=e+"="+encodeURIComponent(null!=n?n:"")+(t?"; Expires="+new Date(+new Date+1e3*t).toUTCString():"")+(o?"; Path="+o:"")+(r?"; Domain="+r:"")+(i?"; SameSite="+i:"")+(a?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}function F(e){return e=parseInt(e),isNaN(e)?void 0:e}function H(e){return e=parseFloat(e),isNaN(e)?void 0:e}function V(e){if(null==e||"object"!=typeof e||Array.isArray(e))return function(){return!0};var n=Object.prototype.hasOwnProperty.call(e,"allowlist"),t=K(e);return J(e,(function(e){e:{var o=0;for(e=z(e);o<e.length;o++)if(t[e[o]]){o=!0;break e}o=!1}return o===n}))}function G(e){if(null==e||"object"!=typeof e||Array.isArray(e))return function(){return!0};var n=e.hasOwnProperty("allowlist"),t=K(e);return J(e,(function(e){return e.name in t===n}))}function z(e){return e.className.match(/\S+/g)||[]}function J(e,n){return e.hasOwnProperty("filter")&&e.filter?e.filter:n}function K(e){var n={};if(e=e.allowlist||e.denylist){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)n[e[t]]=!0}return n}function Y(e,n,t){try{if("string"==typeof t&&"string"==typeof e&&"*"===t.trim())return!0;switch(n){case"==":case"equal":return e===t;case"!=":return e!==t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t;case"contains":return""!==t&&"string"==typeof e&&"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase());default:return!1}}catch(e){return console.warn("Conviva App Tracker: Error in Compare values nwreq ".concat(e)),!1}}function X(e,n,t,o,r,i,a,c,l,u,s,d,f,v,g,p){function m(e){var n=Object.keys(e).map((function(n){return[n,e[n]]})).reduce((function(e,n){return e[n[0]]=n[1].toString(),e}),{});return{evt:n,bytes:h(JSON.stringify(n))}}function h(e){for(var n=0,t=0;t<e.length;t++){var o=e.charCodeAt(t);127>=o?n+=1:2047>=o?n+=2:55296<=o&&57343>=o?(n+=4,t++):n=65535>o?n+3:n+4}return n}function k(e){for(void 0===e&&(e=!1);x.length&&"string"!=typeof x[0]&&"object"!=typeof x[0];)x.shift();if(1>x.length)O=!1;else{if(!C||"string"!=typeof C.valueOf())throw"No collector configured";if(O=!0,P){var n=function(e){for(var n=0,t=0;n<e.length&&!((t+=e[n].bytes)>=a);)n+=1;return n},o=void 0;if(q(x))var r=y(o=C,!0,e),i=n(x);else o=b(x[0]),r=y(o,!1,e),i=1;var c=setTimeout((function(){r.abort(),O=!1}),s),l=function(e){for(var n=0;n<e;n++)x.shift();t&&B(N,JSON.stringify(x.slice(0,u)))};if(r.onreadystatechange=function(){if(4===r.readyState&&200<=r.status)if(clearTimeout(c),300>r.status)l(i),k();else{var e=r.status;(e=!(200<=e&&300>e)&&(!!g.includes(e)||!p.includes(e)))||(en.error("Status ".concat(r.status,", will not retry.")),l(i)),O=!1}},q(x)){if(0<(n=x.slice(0,i)).length){if(e=!1,n=n.map((function(e){return e.evt})),S){var f=new Blob([w(T(n))],{type:"application/json"});try{e=navigator.sendBeacon(o,f)}catch(n){e=!1}}!0===e?(l(i),k()):r.send(w(T(n)))}}else r.send()}else if(d||q(x))O=!1;else{o=new Image(1,1);var v=!0;o.onload=function(){v&&(v=!1,x.shift(),t&&B(N,JSON.stringify(x.slice(0,u))),k())},o.onerror=function(){v&&(O=v=!1)},o.src=b(x[0]),setTimeout((function(){v&&O&&(v=!1,k())}),s)}}}function y(e,n,t){var o=new XMLHttpRequest;for(var r in n?(o.open("POST",e,!t),o.setRequestHeader("Content-Type","application/json; charset=UTF-8")):o.open("GET",e,!t),o.withCredentials=v,d&&o.setRequestHeader("SP-Anonymous","*"),f)Object.prototype.hasOwnProperty.call(f,r)&&o.setRequestHeader(r,f[r]);return o}function w(e){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:e})}function T(e){for(var n=(new Date).getTime().toString(),t=0;t<e.length;t++)e[t].stm=n;return e}function b(e){return l?C+e.replace("?","?stm="+(new Date).getTime()+"&"):C+e}var C,E,A,_,O=!1,x=[],I=!0===(o="string"==typeof o?o.toLowerCase():o)||"beacon"===o||"true"===o,S=!(!(I&&window.navigator&&window.navigator.sendBeacon)||(E=window.navigator.userAgent,(_=(_=E).match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&_.length&&parseInt(_[0])<=13||function(e,n,t){return!(!(t=t.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))||!t.length)&&(parseInt(t[0])<=e||parseInt(t[0])===e&&parseInt(t[1])<=n)}(10,15,E)&&(A=E).match("Version/.* Safari/")&&!A.match("Chrom(e|ium)")))&&I,P=!(!window.XMLHttpRequest||!("withCredentials"in new XMLHttpRequest)),j="get"!==o&&P&&("post"===o||I),R=j?r:"/i",N="snowplowOutQueue_".concat(e,"_").concat(j?"post2":"get");if(I&&(f={}),i=t&&function(){try{var e=!!window.localStorage}catch(n){e=!0}if(!e)return!1;try{var n=window.localStorage;return n.setItem("modernizr","modernizr"),n.removeItem("modernizr"),!0}catch(e){return!1}}()&&j&&i||1,t)try{var D=window.localStorage.getItem(N);x=D?JSON.parse(D):[]}catch(E){}Array.isArray(x)||(x=[]),n.outQueues.push(x),P&&1<i&&n.bufferFlushers.push((function(e){O||k(e)}));var q=function(e){return"object"==typeof e[0]};return{enqueueRequest:function(e,n){if(C=n+R,j){if((e=m(e)).bytes>=a)return en.warn("Event ("+e.bytes+"B) too big, max is "+a),n=e,void y(C,!0,!1).send(w(T([n.evt])));x.push(e)}else{var o,l="?",s={co:!0,cx:!0},d=!0;for(o in e)e.hasOwnProperty(o)&&!s.hasOwnProperty(o)&&(d?d=!1:l+="&",l+=encodeURIComponent(o)+"="+encodeURIComponent(e[o]));for(var f in s)e.hasOwnProperty(f)&&s.hasOwnProperty(f)&&(l+="&"+f+"="+encodeURIComponent(e[f]));if(0<c&&(s=h(s=b(l)))>=c)return en.warn("Event ("+s+"B) too big, max is "+c),void(P&&(e=m(e),y(n+r,!0,!1).send(w(T([e.evt])))));x.push(l)}n=!1,t&&(n=B(N,JSON.stringify(x.slice(0,u)))),O||n&&!(x.length>=i)||k()},executeQueue:function(){O||k()},setUseLocalStorage:function(e){t=e},setAnonymousTracking:function(e){d=e},setCollectorUrl:function(e){C=e+R},setBufferSize:function(e){i=e},setCustomHeaders:function(e){f=e}}}function Q(e,n,t){return"translate.googleusercontent.com"===e?(""===t&&(t=n),e=R(n=null!=(e=(e=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(n))&&1<(null==e?void 0:e.length)?L("u",e[1]):null)?e:"")):"cc.bingj.com"!==e&&"webcache.googleusercontent.com"!==e||(e=R(n=document.links[0].href)),[e,n,t]}function Z(e,n){return void 0===n&&(n=1),"0"===e[0]?(e[7]=e[6],e[5]=e[4],e[3]++):e[3]=n,n=Ze.v4(),e[6]=n,e[10]=-1,e[8]="",e[9]=void 0,n}function W(e){e[4]=Math.round((new Date).getTime()/1e3)}function $(o,r,i,a,c,l){function u(e,n){var t="cws.conviva.com wsg ctp remote_config .m3u8 .mpd .ism .m4 .mp4 .ts .png .jpg .jpeg .bmp google-analytics.com googlesyndication.com googleapis stats.g.doubleclick chartbeat.com omtrdc.net app-measurement.com firebase nr-data.net newrelic bitmovin.com/impression bitmovin.com/analytics api.segment.io youbora hotjar mixpanel.com clevertap auryc".split(" ");n=JSON.parse(JSON.stringify(n)),void 0!==e.cacheRefreshInterval&&(n.cacheRefreshInterval=e.cacheRefreshInterval),void 0!==e.configurationBundle[0].trackerConfiguration.base64Encoding&&(n.base64=e.configurationBundle[0].trackerConfiguration.base64Encoding),void 0!==e.configurationBundle[0].trackerConfiguration.linkClickTracking&&(n.linkClickTracking=e.configurationBundle[0].trackerConfiguration.linkClickTracking),void 0!==e.configurationBundle[0].trackerConfiguration.buttonClickTracking&&(n.buttonClickTracking=e.configurationBundle[0].trackerConfiguration.buttonClickTracking),void 0!==e.configurationBundle[0].trackerConfiguration.customEvent&&(n.customEvent=e.configurationBundle[0].trackerConfiguration.customEvent),void 0!==e.configurationBundle[0].trackerConfiguration.exceptionAutotracking&&(n.exceptionAutotracking=e.configurationBundle[0].trackerConfiguration.exceptionAutotracking),void 0!==e.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat&&(n.enablePeriodicHeartbeat=e.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat),void 0!==e.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval&&(n.periodicHeartbeatInterval=e.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval),void 0!==e.configurationBundle[0].customEventTrackingConfiguration&&(n.customEventTrackingConfiguration=e.configurationBundle[0].customEventTrackingConfiguration),void 0!==e.configurationBundle[0].convivaVideoEventTrackingConfiguration&&(n.convivaVideoEventTrackingConfiguration=e.configurationBundle[0].convivaVideoEventTrackingConfiguration),void 0!==e.configurationBundle[0].ajaxTrackingConfiguration&&(n.ajaxTrackingConfiguration=e.configurationBundle[0].ajaxTrackingConfiguration),void 0!==e.configurationBundle[0].networkRequestTrackingConfiguration&&(n.networkRequestTrackingConfiguration=e.configurationBundle[0].networkRequestTrackingConfiguration),void 0!==e.configurationBundle[0].traceparentconfig&&(n.traceparentconfig=e.configurationBundle[0].traceparentconfig),n.ajaxTrackingConfiguration&&(n.ajaxTrackingConfiguration.blocklist||(n.ajaxTrackingConfiguration.blocklist=[]),n.ajaxTrackingConfiguration.blocklist.push(e.configurationBundle[0].networkConfiguration.endpoint),n.ajaxTrackingConfiguration.blocklist=n.ajaxTrackingConfiguration.blocklist.concat(t)),n.networkRequestTrackingConfiguration&&(n.networkRequestTrackingConfiguration.blocklist||(n.networkRequestTrackingConfiguration.blocklist=[]),n.networkRequestTrackingConfiguration.blocklist.push(e.configurationBundle[0].networkConfiguration.endpoint),n.networkRequestTrackingConfiguration.blocklist=n.networkRequestTrackingConfiguration.blocklist.concat(t)),void 0!==e.configurationBundle[0].metaTagsTrackingConfiguration&&(n.metaTagsTrackingConfiguration=e.configurationBundle[0].metaTagsTrackingConfiguration),d.setCollectorUrl(e.configurationBundle[0].networkConfiguration.endpoint),window.localStorage&&(localStorage.removeItem("ConvivaRemoteConfig"),localStorage.removeItem("ConvivaEndpoint"),localStorage.setItem("ConvivaRemoteConfig",JSON.stringify(n)),localStorage.setItem("ConvivaEndpoint",e.configurationBundle[0].networkConfiguration.endpoint)),d.core.setConfig(n)}void 0===l&&(l={});var s=[];o=function(o,r,i,a,c,l){function f(){(In=Q(window.location.hostname,window.location.href,D()))[1]!==Pn&&(jn=D(Pn)),Sn=N(In[0]),Pn=In[1]}function v(e){try{var n=(new Date).getTime(),t=e.currentTarget;if(null!=t&&t.href){e="_sp="+Cn+"."+n;var o=t.href.split("#"),r=o[0].split("?"),i=r.shift(),a=r.join("?");if(a){r=!0;var c=a.split("&");for(n=0;n<c.length;n++)if("_sp="===c[n].substr(0,4)){r=!1,c[n]=e,a=c.join("&");break}r&&(a=e+"&"+a)}else a=e;o[0]=i+"?"+a;var l=o.join("#");t.href=l}}catch(e){console.warn("Conviva App Tracker:: Error in linkDecorationHandler of decorateLinks ".concat(e))}}function g(e){for(var n=0;n<document.links.length;n++){var t=document.links[n];!t.spDecorationEnabled&&e(t)&&(q(t,"click",v,!0),q(t,"mousedown",v,!0),t.spDecorationEnabled=!0)}}function p(e){if(fn){var n=/#.*/;e=e.replace(n,"")}return vn&&(n=/[{}]/g,e=e.replace(n,"")),e}function m(e){return(e=/^([a-z]+):/.exec(e))?e[1]:null}function h(e){if(e=Vn+e+"."+bn,"localStorage"==nt){try{var n=window.localStorage,t=n.getItem(e+".expires");if(null===t||+t>Date.now())var o=n.getItem(e);else n.removeItem(e),n.removeItem(e+".expires"),o=void 0}catch(e){o=void 0}return o}if("cookie"==nt||"cookieAndLocalStorage"==nt)return M(e)}function k(){f(),bn=un((Gn||Sn)+(zn||"/")).slice(0,4)}function y(){hn=(new Date).getTime()}function w(){var e=T(),n=e[0];n<kn?kn=n:n>yn&&(yn=n),(e=e[1])<wn?wn=e:e>Tn&&(Tn=e),y()}function T(){var e=document.documentElement;return e?[e.scrollLeft||window.pageXOffset,e.scrollTop||window.pageYOffset]:[0,0]}function b(){var e=T(),n=e[0];yn=kn=n,Tn=wn=e=e[1]}function A(){x(Vn+"ses."+bn,"*",Zn)}function O(e){var n=Vn+"id."+bn;e.shift(),x(n,e=e.join("."),Qn)}function x(e,n,t){et&&!Wn||("localStorage"==nt?B(e,n,t):("cookie"==nt||"cookieAndLocalStorage"==nt)&&M(e,n,t,zn,Gn,Jn,Kn))}function P(e){var n=Vn+"id."+bn,t=Vn+"ses."+bn;U(n),U(t),M(n,"",-1,"/",Gn,Jn,Kn),M(t,"",-1,"/",Gn,Jn,Kn),null!=e&&e.preserveSession||(En=Ze.v4(),lt=1),null!=e&&e.preserveUser||(Cn=Ze.v4(),An=null)}function F(e){e&&e.stateStorageStrategy&&(l.stateStorageStrategy=e.stateStorageStrategy,nt=nn(l)),et=!!l.anonymousTracking,Wn=tn(l),$n=on(l),ut.setUseLocalStorage("localStorage"==nt||"cookieAndLocalStorage"==nt),ut.setAnonymousTracking($n)}function H(){try{var e=window.localStorage.getItem(tt+"."+ot),n=JSON.parse(e||"{}");"{}"===n||void 0===n?(pn=$(),mn=ee(),it=-1):(pn=n.clId||$(),it=n[rt]&&2147483648>n[rt]?n[rt]:-1,mn=ee()),K()}catch(e){console.warn(e)}if(!et||Wn){if(e="none"!=nt&&!!h("ses"),(n=V())[1])var t=n[1];else t=et?"":Ze.v4(),n[1]=t;Cn=t,En=e?n[6]:Z(n),lt=n[3],"none"!=nt&&(A(),W(n),O(n))}}function V(){return"none"==nt?["1","",0,0,0,void 0,"","","",void 0,0]:function(e,n,t,o){var r=Math.round((new Date).getTime()/1e3);e?(e=e.split(".")).unshift("0"):e=["1",n,r,o,r,"",t],e[6]&&"undefined"!==e[6]||(e[6]=Ze.v4()),e[7]&&"undefined"!==e[7]||(e[7]=""),e[8]&&"undefined"!==e[8]||(e[8]=""),e[9]&&"undefined"!==e[9]||(e[9]=""),e[10]&&"undefined"!==e[10]||(e[10]=-1);var i=function(e,n){return e=parseInt(e),isNaN(e)?n:e};return n=function(e){return e?i(e,void 0):void 0},[e[0],e[1],i(e[2],r),i(e[3],o),i(e[4],r),n(e[5]),e[6],e[7],e[8],n(e[9]),i(e[10],-1)]}(h("id")||void 0,Cn,En,lt)}function G(e){return 0===e.indexOf("http")?e:("https:"===document.location.protocol?"https":"http")+"://"+e}function z(){st&&null!=c.pageViewId||(c.pageViewId=Ze.v4())}function J(){return null==c.pageViewId&&(c.pageViewId=Ze.v4()),c.pageViewId}function K(){try{var e=window.localStorage,n={clId:pn,iid:mn,eventIndex:it},t=null;try{t=JSON.stringify(n)}catch(e){return}return e.setItem(tt+"."+ot,t)}catch(e){}}function $(){try{return Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(e){console.warn(e)}}function ee(){try{return Math.floor(2147483647*Math.random())}catch(e){return console.warn(e),-1}}function ne(e){var n=e.title,o=e.context,r=e.timestamp;if(e=e.contextCallback,f(),dt&&z(),dt=!0,Fn=document.title,n=j((dn=n)||Fn),xn.track(function(e){var n=e.pageUrl,o=e.pageTitle;e=e.referrer;var r=t();return r.add("e","pv"),r.add("url",n),r.add("page",o),r.add("refr",e),r}({pageUrl:p(sn||Pn),pageTitle:n,referrer:p(rn||jn)}),(o||[]).concat(e?e():[]),r),r=new Date,n=!1,ft.enabled&&!ft.installed){n=ft.installed=!0;var i={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,n=Object.defineProperty({},"passive",{get:function(){e=!0},set:function(){}}),t=function(){};window.addEventListener("testPassiveEventSupport",t,n),window.removeEventListener("testPassiveEventSupport",t,n),i.hasSupport=e}}};i.update();var a="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(i,"hasSupport")?q(document,a,y,{passive:!0}):q(document,a,y),b(),a=function(e,n){return void 0===n&&(n=y),function(e){return q(document,e,n)}},"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(a(document)),["resize","focus","blur"].forEach(a(window)),a(window,w)("scroll")}if(ft.enabled&&(Hn||n))for(r in hn=r.getTime(),r=void 0,ft.configurations)(n=ft.configurations[r])&&(window.clearInterval(n.activityInterval),oe(n,o,e))}function te(){var e,t,o,r,i,a,c,u,s,f,v,g,p,m,h,k,y,w,T,b,C,E,A,_,O;try{var x=d.core.getConfig(),I=void 0;Mn={};var S=ln.MERGE;switch(void 0!==(null===(t=null===(e=null==l?void 0:l.configs)||void 0===e?void 0:e.metaTagsTracking)||void 0===t?void 0:t.preference)?S=null===(r=null===(o=null==l?void 0:l.configs)||void 0===o?void 0:o.metaTagsTracking)||void 0===r?void 0:r.preference:void 0!==(null===(i=null==x?void 0:x.metaTagsTrackingConfiguration)||void 0===i?void 0:i.pref)&&(S=null===(a=null==x?void 0:x.metaTagsTrackingConfiguration)||void 0===a?void 0:a.pref),S){case ln.APP:if(!1===(null===(u=null===(c=null==l?void 0:l.configs)||void 0===c?void 0:c.metaTagsTracking)||void 0===u?void 0:u.enabled))return;0<(null===(v=null===(f=null===(s=null==l?void 0:l.configs)||void 0===s?void 0:s.metaTagsTracking)||void 0===f?void 0:f.tags)||void 0===v?void 0:v.length)&&(I=n([],null===(p=null===(g=null==l?void 0:l.configs)||void 0===g?void 0:g.metaTagsTracking)||void 0===p?void 0:p.tags,!0));break;case ln.REMOTE:if(!1===(null===(m=null==x?void 0:x.metaTagsTrackingConfiguration)||void 0===m?void 0:m.enabled))return;void 0!==(null==x?void 0:x.metaTagsTrackingConfiguration)&&0<(null===(k=null===(h=null==x?void 0:x.metaTagsTrackingConfiguration)||void 0===h?void 0:h.tags)||void 0===k?void 0:k.length)&&(I=n([],null===(y=null==x?void 0:x.metaTagsTrackingConfiguration)||void 0===y?void 0:y.tags,!0));break;default:if(void 0===(null==x?void 0:x.metaTagsTrackingConfiguration)&&!1===(null===(T=null===(w=null==l?void 0:l.configs)||void 0===w?void 0:w.metaTagsTracking)||void 0===T?void 0:T.enabled)||!1===(null===(b=null==x?void 0:x.metaTagsTrackingConfiguration)||void 0===b?void 0:b.enabled))return;I=n([],function(e,t){return n(n([],e,!0),t,!0).reduce((function(e,t){var o=e.find((function(e){return e.key===t.key}));return o?t.condition&&(o.condition=n(n([],o.condition||[],!0),t.condition,!0)):e.push(Ne({},t)),e}),[])}((null===(E=null===(C=null==l?void 0:l.configs)||void 0===C?void 0:C.metaTagsTracking)||void 0===E?void 0:E.tags)||[],(null===(A=null==x?void 0:x.metaTagsTrackingConfiguration)||void 0===A?void 0:A.tags)||[]),!0)}if(0<(null==I?void 0:I.length)){e={};var P=document.head.getElementsByTagName("meta");for(t=0;t<P.length;t++){var j=P[t];for(o=0;o<I.length;o++){var R=j.getAttribute(I[o].key),N=j.getAttribute(I[o].value);r=void 0,null!==(_=I[o])&&void 0!==_&&_.condition&&(r=null===(O=I[o])||void 0===O?void 0:O.condition),R&&(r&&r.includes(R)?e[R]=N:r&&0!==r.length||(e[R]=N))}}d.setMetaCustomTags(e)}}catch(e){console.warn("Conviva App Tracker:: setPageMetaTagsAsCustomTags",e)}}function oe(e,n,t){var o=function(n,t){f();var o=d.core.getConfig();o.enablePeriodicHeartbeat?null!=o.periodicHeartbeatInterval&&((o=1e3*o.periodicHeartbeatInterval)!=e.configHeartBeatTimer&&(window.clearInterval(e.activityInterval),e.activityInterval=window.setInterval(i,o))):window.clearInterval(e.activityInterval),n({context:t,pageViewId:J(),minXOffset:kn,minYOffset:wn,maxXOffset:yn,maxYOffset:Tn}),b()},r=new Date;window.setTimeout((function(){o(e.callback,(n||[]).concat(t?t():[]))}),2e3);var i=function(){var i=new Date;(r.getTime()+e.configHeartBeatTimer>i.getTime()||hn+e.configHeartBeatTimer>i.getTime())&&(r=i,o(e.callback,(n||[]).concat(t?t():[])))};e.activityInterval=window.setInterval(i,e.configHeartBeatTimer)}function re(e){var n=e.minimumVisitLength,t=e.heartbeatDelay;if(e=e.callback,S(n)&&S(t))return{configMinimumVisitLength:1e3*n,configHeartBeatTimer:1e3*t,callback:e};en.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function ie(e){var n=e.context,o=e.minXOffset,r=e.minYOffset,i=e.maxXOffset,a=e.maxYOffset;(e=document.title)!==Fn&&(Fn=e,dn=void 0);var c=(e=xn).track,l=p(sn||Pn),u=j(dn||Fn),s=p(rn||jn);o=Math.round(o),i=Math.round(i),r=Math.round(r),a=Math.round(a);var d=t();d.add("e","pp"),d.add("url",l),d.add("page",u),d.add("refr",s),o&&!isNaN(Number(o))&&d.add("pp_mix",o.toString()),i&&!isNaN(Number(i))&&d.add("pp_max",i.toString()),r&&!isNaN(Number(r))&&d.add("pp_miy",r.toString()),a&&!isNaN(Number(a))&&d.add("pp_may",a.toString()),c.call(e,d,n)}function ae(e){var t,o,r,i,a,c,u,s,f,v,g,p,m,h,k,y,w,T,b,C,E,A,_,O,x,I,S;try{if(d&&e){var P=d.core.getConfig(),j=cn.CONFIG_PREFERENCES.MERGE,R=[];switch(void 0!==(null===(o=null===(t=null==l?void 0:l.configs)||void 0===t?void 0:t.traceparentGeneration)||void 0===o?void 0:o.force)&&!0===(null===(i=null===(r=null==l?void 0:l.configs)||void 0===r?void 0:r.traceparentGeneration)||void 0===i?void 0:i.force)?j=cn.CONFIG_PREFERENCES.APP:void 0!==(null===(a=null==P?void 0:P.traceparentconfig)||void 0===a?void 0:a.pref)&&(j=null===(c=null==P?void 0:P.traceparentconfig)||void 0===c?void 0:c.pref),j){case cn.CONFIG_PREFERENCES.APP:if(!1===(null===(s=null===(u=null==l?void 0:l.configs)||void 0===u?void 0:u.traceparentGeneration)||void 0===s?void 0:s.enabled))return"";null!==(g=null===(v=null===(f=null==l?void 0:l.configs)||void 0===f?void 0:f.traceparentGeneration)||void 0===v?void 0:v.targetUrl)&&void 0!==g&&g.length&&(R=n([],null===(m=null===(p=null==l?void 0:l.configs)||void 0===p?void 0:p.traceparentGeneration)||void 0===m?void 0:m.targetUrl,!0));break;case cn.CONFIG_PREFERENCES.REMOTE:if(!1===(null===(h=null==P?void 0:P.traceparentconfig)||void 0===h?void 0:h.enabled))return"";void 0!==(null==P?void 0:P.traceparentconfig)&&null!==(y=null===(k=null==P?void 0:P.traceparentconfig)||void 0===k?void 0:k.targetUrl)&&void 0!==y&&y.length&&(R=n([],null===(w=null==P?void 0:P.traceparentconfig)||void 0===w?void 0:w.targetUrl,!0));break;default:if(void 0===(null==P?void 0:P.traceparentconfig)&&!1===(null===(b=null===(T=null==l?void 0:l.configs)||void 0===T?void 0:T.traceparentGeneration)||void 0===b?void 0:b.enabled)||!1===(null===(C=null==P?void 0:P.traceparentconfig)||void 0===C?void 0:C.enabled))return"";var N=new Set(n(n([],(null===(E=null==P?void 0:P.traceparentconfig)||void 0===E?void 0:E.targetUrl)||[],!0),(null===(_=null===(A=null==l?void 0:l.configs)||void 0===A?void 0:A.traceparentGeneration)||void 0===_?void 0:_.targetUrl)||[],!0));R=Array.from(N)}var D=null===(x=null===(O=null==l?void 0:l.configs)||void 0===O?void 0:O.networkRequestTracking)||void 0===x?void 0:x.safelist,q=null===(I=null==P?void 0:P.networkRequestTrackingConfiguration)||void 0===I?void 0:I.blocklist,L=(null==q?void 0:q.includes("*"))||(null==q?void 0:q.some((function(n){return 0<(null==n?void 0:n.length)&&e.toLowerCase().includes(n.toLowerCase())}))),B=null==D?void 0:D.some((function(n){return 0<(null==n?void 0:n.length)&&e.toLowerCase().includes(n.toLowerCase())}));if(0<(null==R?void 0:R.length)&&null!=R&&R.some((function(n){return 0<(null==n?void 0:n.length)&&e.toLowerCase().includes(n.toLowerCase())}))&&null!==(S=null==P?void 0:P.networkRequestTrackingConfiguration)&&void 0!==S&&S.enabled&&(B||!L))return"00-"+Array.from({length:32},(function(){return Math.floor(16*Math.random()).toString(16)})).join("")+"-"+Array.from({length:16},(function(){return Math.floor(16*Math.random()).toString(16)})).join("")+"-00"}return""}catch(e){return""}}function ce(e){if(l.trackerConfigUrl)$e(l.trackerConfigUrl),Me=window.setInterval($e,6e4*e,l.trackerConfigUrl);else{var n=i.split("js-")[1];n="https://drt1fhpy4haqm.cloudfront.net/js/"+l.convivaCustomerKey+"/"+n+"/remote_config.json",$e(n),Me=window.setInterval($e,6e4*e,n)}}var le,ue,se,de,fe,ve,ge,pe,me,he,ke,ye,we,Te,be,Ce,Ee,Ae,_e,Oe,xe,Ie,Se,Pe,je,Re,De,qe,Le,Be={cacheRefreshInterval:30,base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{},ajaxTrackingConfiguration:{blocklist:["*"]},networkRequestTrackingConfiguration:{blocklist:["*"]},traceparentconfig:{enabled:!0,pref:cn.CONFIG_PREFERENCES.MERGE,targetUrl:[]}},Ue={},Me=null;if(window.localStorage)var Fe=localStorage.getItem(cn.REMOTE_CONFIG_STORAGE_KEY)?localStorage.getItem(cn.REMOTE_CONFIG_STORAGE_KEY):JSON.stringify(Ue),He=localStorage.getItem(cn.END_POINT_STORAGE_KEY)?localStorage.getItem(cn.END_POINT_STORAGE_KEY):cn.DEFAULT_END_POINT;else He=cn.DEFAULT_END_POINT,Fe=JSON.stringify(Ue);a=l.gatewayUrl?l.gatewayUrl:He||cn.DEFAULT_END_POINT,r||(r="CAT");var Ve=JSON.parse(Fe);Ue.base64=void 0!==Ve.base64?Ve.base64:Be.base64,Ue.cacheRefreshInterval=void 0!==Ve.cacheRefreshInterval?Ve.cacheRefreshInterval:Be.cacheRefreshInterval,Ue.linkClickTracking=void 0!==Ve.linkClickTracking?Ve.linkClickTracking:Be.linkClickTracking,Ue.buttonClickTracking=void 0!==Ve.buttonClickTracking?Ve.buttonClickTracking:Be.buttonClickTracking,Ue.exceptionAutotracking=void 0!==Ve.exceptionAutotracking?Ve.exceptionAutotracking:Be.exceptionAutotracking,Ue.enablePeriodicHeartbeat=void 0!==Ve.enablePeriodicHeartbeat?Ve.enablePeriodicHeartbeat:Be.enablePeriodicHeartbeat,Ue.periodicHeartbeatInterval=void 0!==Ve.periodicHeartbeatInterval?Ve.periodicHeartbeatInterval:Be.periodicHeartbeatInterval,Ue.customEventTrackingConfiguration=void 0!==Ve.customEventTrackingConfiguration?Ve.customEventTrackingConfiguration:Ne({},Be.customEventTrackingConfiguration),Ue.convivaVideoEventTrackingConfiguration=void 0!==Ve.convivaVideoEventTrackingConfiguration?Ve.convivaVideoEventTrackingConfiguration:Ne({},Be.convivaVideoEventTrackingConfiguration),Ue.ajaxTrackingConfiguration=void 0!==Ve.ajaxTrackingConfiguration?Ve.ajaxTrackingConfiguration:Ne({},Be.ajaxTrackingConfiguration),Ue.networkRequestTrackingConfiguration=void 0!==Ve.networkRequestTrackingConfiguration?Ve.networkRequestTrackingConfiguration:Ne({},Be.networkRequestTrackingConfiguration),void 0!==Ve.metaTagsTrackingConfiguration&&(Ue.metaTagsTrackingConfiguration=Ve.metaTagsTrackingConfiguration),Ue.traceparentconfig=void 0!==Ve.traceparentconfig?Ve.traceparentconfig:Ne({},Be.traceparentconfig);try{var Ge=XMLHttpRequest,ze=null===(le=null===window||void 0===window?void 0:window.fetch)||void 0===le?void 0:le.bind(window);if(Ge){var Je,Ke=function(e,n,t){try{var o={status:null==e?void 0:e.status,statusText:(""!==(null==e?void 0:e.statusText)?null==e?void 0:e.statusText:void 0)||("load"!=t?t:void 0),responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};t=void 0;try{t=function(e){var n={};return e.trim().split(/[\r\n]+/).forEach((function(e){var t=(e=e.split(":"))[1];n[e[0].trim()]=null==t?void 0:t.trim()})),n}(e.getAllResponseHeaders()),o.headers=t}catch(e){}try{o.body=null==e?void 0:e.response}catch(e){}d.trackNetworkRequest({requestDetails:n,responseDetails:o})}catch(e){console.warn("Conviva App Tracker:: Unable to track network request error while handleResponse ".concat(e))}},Ye=function(){var e=new Ge;try{var n,t,o,r={},i=e.setRequestHeader;e.setRequestHeader=function(e,n){r[e]=n,i.call(this,e,n)};var a=e.open;e.open=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n=o[0],t=o[1];try{/^(?:[a-z]+:)?\/\//i.test(t)||(t=0===t.indexOf("/")?window.location.origin+t:window.location.origin+"/"+t)}catch(e){}a.call(e,o[0],o[1],!0)};var c=e.send;e.send=function(i){try{var a=null;cn.TRACEPARENT_HEADER_KEY in r||null!==(a=ae(t))&&""!==a&&e.setRequestHeader(cn.TRACEPARENT_HEADER_KEY,a),c.call(e,i),o={method:n,url:t,headers:r,body:i,requestTimestamp:null===Date||void 0===Date?void 0:Date.now(),requestTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())},null!==a&&""!==a&&(o[cn.TRACEPARENT_HEADER_KEY]=a)}catch(e){console.warn("Conviva App Tracker:: Unable to track network request while send ".concat(e))}},e.addEventListener("load",(function(){return Ke(e,o,"load")})),e.addEventListener("error",(function(){return Ke(e,o,"error")})),e.addEventListener("abort",(function(){return Ke(e,o,"abort")})),e.addEventListener("timeout",(function(){return Ke(e,o,"timeout")}))}catch(e){console.warn("Conviva App Tracker:: Unable to track network request while interceptRequest ".concat(e))}return e};for(Je in Ge)Ge.hasOwnProperty(Je)&&(Ye[Je]=Ge[Je]);window.XMLHttpRequest=Ye}if(ze){var Xe=function(e){var n={};return e.forEach((function(e,t){n[t]=e})),n};window.fetch=function(e,n){var t=null;if(e instanceof Request){e=e.clone();var o=!1;e.headers.forEach((function(e,n){cn.TRACEPARENT_HEADER_KEY===n&&(o=!0)})),o||null!==(t=ae(e.url))&&""!==t&&e.headers.set(cn.TRACEPARENT_HEADER_KEY,t);var r=ze(e)}else{if(n&&n.headers){r=new Headers(n.headers);var i=!1;r.forEach((function(e,n){cn.TRACEPARENT_HEADER_KEY===n&&(i=!0)})),i||null!==(t=ae(e))&&""!==t&&r.set(cn.TRACEPARENT_HEADER_KEY,t)}else r=new Headers,null!==(t=ae(e))&&""!==t&&r.set(cn.TRACEPARENT_HEADER_KEY,t),n||(n={});n.headers=r,r=ze(e,n),e=new Request(e,n).clone()}try{var a=void 0;try{a=Xe(e.headers)}catch(e){}var c=void 0;try{c=null==n?void 0:n.body}catch(e){}var l={method:e.method,url:e.url,headers:a,body:c,requestTimestamp:null===Date||void 0===Date?void 0:Date.now(),requestTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};null!==t&&""!==t&&(l[cn.TRACEPARENT_HEADER_KEY]=t),r.then((function(e){try{var n=Xe(e.headers)}catch(e){}var t={status:e.status,statusText:""!==(null==e?void 0:e.statusText)?null==e?void 0:e.statusText:void 0,headers:n,size:0,responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};e.clone().json().then((function(e){t.body=e,d.trackNetworkRequest({requestDetails:l,responseDetails:t})})).catch((function(){d.trackNetworkRequest({requestDetails:l,responseDetails:t})}))})).catch((function(e){e={statusText:e.toString(),responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())},d.trackNetworkRequest({requestDetails:l,responseDetails:e})}))}catch(e){console.warn("Conviva App Tracker:: Unable to track network request while fetch interceptRequest ".concat(e))}return r}}}catch(e){console.warn("Conviva App Tracker:: Unable to track network request ".concat(e))}var Qe=l.convivaCustomerKey;if(window.XMLHttpRequest){var We=new XMLHttpRequest;We.onreadystatechange=function(){try{if(4==We.readyState)if(200==We.status){var e=JSON.parse(We.response);e.cacheRefreshInterval||(e.cacheRefreshInterval=Be.cacheRefreshInterval),Ue.cacheRefreshInterval!=e.cacheRefreshInterval&&(Ue.cacheRefreshInterval=e.cacheRefreshInterval,"number"==typeof Me&&window.clearInterval(Me),ce(e.cacheRefreshInterval)),u(e,Be)}else try{var n=new XMLHttpRequest;n.onreadystatechange=function(){try{if(4==n.readyState)if(200==n.status){u(JSON.parse(n.response),Be)}else try{var e=new XMLHttpRequest;e.onreadystatechange=function(){try{if(4==e.readyState&&200==e.status)u(JSON.parse(e.response),Be)}catch(e){console.warn("Conviva App Tracker:: Error in fetching remote-config ".concat(e))}},e.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/remote_config.json",!0),e.send()}catch(e){}}catch(e){console.warn("Conviva App Tracker:: Error in fetching remote-config ".concat(e))}},n.open("GET",cn.REMOTE_CONFIG_URL_PREFIX+Qe+cn.REMOTE_CONFIG_FILE_NAME,!0),n.send()}catch(e){}}catch(e){console.warn("Conviva App Tracker:: Error in fetching remote-config ".concat(e))}};var $e=function(e){try{We.open("GET",e,!0),We.send()}catch(e){}};"number"==typeof Me&&window.clearInterval(Me),ce(Ue.cacheRefreshInterval)}l.eventMethod=null!==(ue=l.eventMethod)&&void 0!==ue?ue:"post";var nn=function(e){var n;return null!==(n=e.stateStorageStrategy)&&void 0!==n?n:"cookieAndLocalStorage"},tn=function(e){var n,t;return"boolean"!=typeof e.anonymousTracking&&(null!==(t=!0===(null===(n=e.anonymousTracking)||void 0===n?void 0:n.withSessionTracking))&&void 0!==t&&t)},on=function(e){var n,t;return"boolean"!=typeof e.anonymousTracking&&(null!==(t=!0===(null===(n=e.anonymousTracking)||void 0===n?void 0:n.withServerAnonymisation))&&void 0!==t&&t)};s.push({beforeTrack:function(e){var n=h("ses"),t=V();On=!!gn&&!!M(gn),Xn||On?P():("0"===t[0]?(En=n||"none"==nt?t[6]:Z(t),lt=t[3]):(new Date).getTime()-ct>1e3*Zn&&(lt++,En=Z(t,lt)),W(t),-1===t[10]&&(n=e.build(),t[8]=n.eid,n=n.dtm||n.ttm,t[9]=n?parseInt(n):void 0),t[10]+=1,e.add("uid",et?null:An),f(),e.add("refr",p(rn||jn)),document&&(Fn=document.title,n=j(dn||Fn),e.add("page",n)),e.add("url",p(sn||Pn)),!vt||Wn||et||(n=t[9],n={userId:t[1],sessionId:t[6],eventIndex:t[10],sessionIndex:t[3],previousSessionId:t[7]||null,storageMechanism:"localStorage"==nt?"LOCAL_STORAGE":"COOKIE_1",firstEventId:t[8]||null,firstEventTimestamp:n?new Date(n).toISOString():null},e.addContextEntity({schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:n})),"none"!=nt&&(O(t),A()),ct=(new Date).getTime())}}),(null===(de=null===(se=null==l?void 0:l.contexts)||void 0===se?void 0:se.webPage)||void 0===de||de)&&s.push({contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:J()}}]}}),s.push({contexts:function(){var e=pn,n=mn.toString(),t=Ln;try{var o=window.localStorage.getItem(tt+"."+ot),r=JSON.parse(o||"{}");"{}"!==r&&void 0!==r&&void 0!==r[rt]&&(it=r[rt]),2147483647<=it?it=0:it++,K();var i=it}catch(e){console.warn(e),i=void 0}return e={schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-2",data:{clid:e,iid:n,ck:t,eventIndex:i}},n={eventIndex:at++},null!=_n&&(n.previousEventTimestamp=_n),_n=(new Date).toISOString(),[e,{schema:"iglu:com.conviva/event_info/jsonschema/1-0-1",data:n}]}}),s.push({contexts:function(){return[{schema:"iglu:com.conviva/custom_tags/jsonschema/1-0-0",data:{data:Ne(Ne({},Un),Mn)}}]}}),s.push({contexts:function(){return[{schema:"iglu:com.snowplowanalytics.mobile/application/jsonschema/1-0-0",data:{build:Bn,version:Bn}}]}}),s.push.apply(s,null!==(fe=l.plugins)&&void 0!==fe?fe:[]);var rn,sn,dn,fn,vn,gn,pn,mn,hn,kn,yn,wn,Tn,bn,Cn,En,An,_n,On,xn=C({base64:Ue.base64,corePlugins:s,callback:function(e){Xn||On||ut.enqueueRequest(e.build(),Nn)},linkClickTracking:Ue.linkClickTracking,buttonClickTracking:Ue.buttonClickTracking,customEvent:!0,exceptionAutotracking:Ue.exceptionAutotracking,enablePeriodicHeartbeat:Ue.enablePeriodicHeartbeat,periodicHeartbeatInterval:Ue.periodicHeartbeatInterval,customEventTrackingConfiguration:Ue.customEventTrackingConfiguration,convivaVideoEventTrackingConfiguration:Ue.convivaVideoEventTrackingConfiguration,ajaxTrackingConfiguration:Ue.ajaxTrackingConfiguration,networkRequestTrackingConfiguration:Ue.networkRequestTrackingConfiguration,metaTagsTrackingConfiguration:Ue.metaTagsTrackingConfiguration}),In=Q(window.location.hostname,window.location.href,D()),Sn=N(In[0]),Pn=In[1],jn=In[2],Rn=null!==(ve=l.platform)&&void 0!==ve?ve:"web",Nn=G(a),Dn=null!==(ge=l.postPath)&&void 0!==ge?ge:"/"+l.convivaCustomerKey+"/ctp",qn=null!==(pe=l.appId)&&void 0!==pe?pe:"",Ln=null!==(me=l.convivaCustomerKey)&&void 0!==me?me:"",Bn=null!==(he=l.appVersion)&&void 0!==he?he:"",Un={},Mn={},Fn=document.title,Hn=null===(ke=l.resetActivityTrackingOnPageView)||void 0===ke||ke,Vn=null!==(ye=l.cookieName)&&void 0!==ye?ye:"_sp_",Gn=null!==(we=l.cookieDomain)&&void 0!==we?we:void 0,zn="/",Jn=null!==(Te=l.cookieSameSite)&&void 0!==Te?Te:"None",Kn=null===(be=l.cookieSecure)||void 0===be||be,Yn=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,Xn=void 0!==l.respectDoNotTrack&&(l.respectDoNotTrack&&("yes"===Yn||"1"===Yn)),Qn=null!==(Ce=l.cookieLifetime)&&void 0!==Ce?Ce:63072e3,Zn=null!==(Ee=l.sessionCookieTimeout)&&void 0!==Ee?Ee:1800,Wn=tn(l),$n=on(l),et=!!l.anonymousTracking,nt=nn(l),tt="Conviva",ot="sdkConfig",rt="eventIndex",it=-1,at=0,ct=(new Date).getTime(),lt=1,ut=X(o,c,"localStorage"==nt||"cookieAndLocalStorage"==nt,l.eventMethod,Dn,null!==(Ae=l.bufferSize)&&void 0!==Ae?Ae:1,null!==(_e=l.maxPostBytes)&&void 0!==_e?_e:4e4,null!==(Oe=l.maxGetBytes)&&void 0!==Oe?Oe:0,null===(xe=l.useStm)||void 0===xe||xe,null!==(Ie=l.maxLocalStorageQueueSize)&&void 0!==Ie?Ie:1e3,null!==(Se=l.connectionTimeout)&&void 0!==Se?Se:5e3,$n,null!==(Pe=l.customHeaders)&&void 0!==Pe?Pe:{},null===(je=l.withCredentials)||void 0===je||je,null!==(Re=l.retryStatusCodes)&&void 0!==Re?Re:[],(null!==(De=l.dontRetryStatusCodes)&&void 0!==De?De:[]).concat([400,401,403,410,422])),st=!1,dt=!1,ft={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5e3,configHeartBeatTimer:4e4,callback:ie}}},vt=null!==(Le=null===(qe=l.contexts)||void 0===qe?void 0:qe.session)&&void 0!==Le&&Le;l.hasOwnProperty("discoverRootDomain")&&l.discoverRootDomain&&(Gn=function(e,n){for(var t=window.location.hostname,o="_sp_root_domain_test_"+(new Date).getTime(),r="_test_value_"+(new Date).getTime(),i=t.split("."),a=i.length-1;0<=a;){var c=i.slice(a,i.length).join(".");if(M(o,r,0,"/",c,e,n),M(o)===r){for(M(o,"",-1,"/",c,e,n),t=document.cookie.split("; "),o=[],r=0;r<t.length;r++)"_sp_root_domain_test_"===t[r].substring(0,21)&&o.push(t[r]);for(t=o,o=0;o<t.length;o++)M(t[o],"",-1,"/",c,e,n);return c}--a}return t}(Jn,Kn)),xn.setTrackerVersion(i),xn.setAppId(qn),xn.setPlatform(Rn),k(),H(),ut.setCustomHeaders({"x-client-id":""+pn}),l.crossDomainLinker&&g(l.crossDomainLinker);var gt=function(e){try{return"object"==typeof JSON.parse(e)}catch(e){return!1}};return Ne(Ne({},{getDomainSessionIndex:function(){return lt},getPageViewId:function(){return J()},newSession:function(){var e=V();"0"===e[0]?(En="none"!=nt?Z(e):e[6],lt=e[3],A()):(lt++,En=Z(e,lt)),W(e),"none"!=nt&&(O(e),A()),ct=(new Date).getTime()},getCookieName:function(e){return Vn+e+"."+bn},getUserId:function(){return An},getDomainUserId:function(){return V()[1]},getDomainUserInfo:function(){return V()},setReferrerUrl:function(e){rn=e},setCustomUrl:function(e){f();var n,t=Pn;m(e)?sn=e:"/"===e.slice(0,1)?sn=m(t)+"://"+R(t)+e:(0<=(n=(t=p(t)).indexOf("?"))&&(t=t.slice(0,n)),(n=t.lastIndexOf("/"))!==t.length-1&&(t=t.slice(0,n+1)),sn=t+e)},setDocumentTitle:function(e){Fn=document.title,dn=e},discardHashTag:function(e){fn=e},discardBrace:function(e){vn=e},setCookiePath:function(e){zn=e,k()},setVisitorCookieTimeout:function(e){Qn=e},crossDomainLinker:function(e){g(e)},enableActivityTracking:function(e){ft.configurations.pagePing||(ft.enabled=!0,ft.configurations.pagePing=re(Ne(Ne({},e),{callback:ie})))},enableActivityTrackingCallback:function(e){ft.configurations.callback||(ft.enabled=!0,ft.configurations.callback=re(e))},updatePageActivity:function(){y()},setOptOutCookie:function(e){gn=e},setUserId:function(e){An=e},setUserIdFromLocation:function(e){f(),An=L(e,Pn)},setUserIdFromReferrer:function(e){f(),An=L(e,jn)},setUserIdFromCookie:function(e){An=M(e)},setCollectorUrl:function(e){Nn=G(e),ut.setCollectorUrl(Nn)},setBufferSize:function(e){ut.setBufferSize(e)},flushBuffer:function(e){void 0===e&&(e={}),ut.executeQueue(),e.newBufferSize&&ut.setBufferSize(e.newBufferSize)},trackPageView:function(e){void 0===e&&(e={}),te(),ne(e)},trackVideoEvent:function(e){void 0===e&&(e={});try{var n=this.core.getConfig();if(""!=e.name&&null!=e.name||console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!"),null!=n.convivaVideoEventTrackingConfiguration)if(null!=n.convivaVideoEventTrackingConfiguration.blocklist&&0<n.convivaVideoEventTrackingConfiguration.blocklist.length){var t=n.convivaVideoEventTrackingConfiguration.blocklist;-1==t.indexOf("*")&&-1==t.indexOf(""+e.name)&&this.core.track(_({name:e.name,sid:e.sid,iid:e.iid,clid:e.clid,st:e.st,sst:e.sst,an:e.an,cl:e.cl,lv:e.lv,pn:e.pn,vid:e.vid,fw:e.fw,fwv:e.fwv,mn:e.mn,mv:e.mv,url:e.url,tags:e.tags,cen:e.cen,ced:e.ced,oldsc:e.old,newsc:e.new,err:e.err,br:e.br,ft:e.ft}),e.context,e.timestamp)}else this.core.track(_({name:e.name,sid:e.sid,iid:e.iid,clid:e.clid,st:e.st,sst:e.sst,an:e.an,cl:e.cl,lv:e.lv,pn:e.pn,vid:e.vid,fw:e.fw,fwv:e.fwv,mn:e.mn,mv:e.mv,url:e.url,tags:e.tags,cen:e.cen,ced:e.ced,oldsc:e.old,newsc:e.new,err:e.err,br:e.br,ft:e.ft}),e.context,e.timestamp);else this.core.track(_({name:e.name,sid:e.sid,iid:e.iid,clid:e.clid,st:e.st,sst:e.sst,an:e.an,cl:e.cl,lv:e.lv,pn:e.pn,vid:e.vid,fw:e.fw,fwv:e.fwv,mn:e.mn,mv:e.mv,url:e.url,tags:e.tags,cen:e.cen,ced:e.ced,oldsc:e.old,newsc:e.new,err:e.err,br:e.br,ft:e.ft}),e.context,e.timestamp)}catch(e){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",e)}},trackAjaxEvent:function(e){void 0===e&&(e={});try{if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType){var n=this.core.getConfig();if(""==e.name||null==e.name)console.warn("Conviva App Tracker:: Ajax request could not be tracked due to missing URL property!!");else if(null!=n.ajaxTrackingConfiguration&&null!=n.ajaxTrackingConfiguration.blocklist&&0<n.ajaxTrackingConfiguration.blocklist.length){var t=n.ajaxTrackingConfiguration.blocklist;if(-1==t.indexOf("*")){n=!1;for(var o=0;o<t.length;o++)""!==t[o]&&-1!==e.name.toLowerCase().indexOf(t[o].toLowerCase())&&(n=!0);if(!n){var r=this.core,i=r.track,a=E({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-2",data:I({targetUrl:e.name,responseStatusCode:e.responseStatus,duration:e.duration})}});i.call(r,a,e.context,e.timestamp)}}}}}catch(e){console.warn("Conviva App Tracker:: Ajax request could not be tracked due to an exception!!",e)}},trackNetworkRequest:function(n){var t,o,r,i,a,c,u,s,d,f,v,g,p,m,h,k,y,w,T,b,C,A,_,O,x,S,P;void 0===n&&(n={});try{var j=this.core.getConfig(),R=n.responseDetails.responseTime-n.requestDetails.requestTime;try{R=parseFloat(R.toFixed(3))}catch(e){console.warn("Conviva App Tracker:: exception while converting duration to 3 decimal",e)}var N=function(e){try{var n=void 0;return null!=e&&(n=e["content-type"]||e["Content-Type"]||e["Content-type"]),n}catch(e){}},D=function(e){try{var n=void 0;return null!=e&&(n=e["content-length"]||e["Content-Length"]||e["Content-length"]),null==n||isNaN(n)?n:Number(n)}catch(e){}},q=D(null===(r=null==n?void 0:n.requestDetails)||void 0===r?void 0:r.headers),L=D(null===(i=null==n?void 0:n.responseDetails)||void 0===i?void 0:i.headers),B=N(null===(a=null==n?void 0:n.requestDetails)||void 0===a?void 0:a.headers),U=N(null===(c=null==n?void 0:n.responseDetails)||void 0===c?void 0:c.headers);try{var M=((t={targetUrl:null===(u=null==n?void 0:n.requestDetails)||void 0===u?void 0:u.url,method:null===(s=null==n?void 0:n.requestDetails)||void 0===s?void 0:s.method,responseStatusCode:null===(d=null==n?void 0:n.responseDetails)||void 0===d?void 0:d.status,responseStatusText:null===(f=null==n?void 0:n.responseDetails)||void 0===f?void 0:f.statusText})[an.request_headers]=null===(v=null==n?void 0:n.requestDetails)||void 0===v?void 0:v.headers,t[an.response_headers]=null===(g=null==n?void 0:n.responseDetails)||void 0===g?void 0:g.headers,t.requestSize=q,t.responseSize=L,t.duration=R,t.requestTimestamp=null===(p=null==n?void 0:n.requestDetails)||void 0===p?void 0:p.requestTimestamp,t.responseTimestamp=null===(m=null==n?void 0:n.responseDetails)||void 0===m?void 0:m.responseTimestamp,t.contentType=B,t);if(void 0!==B&&(B.toLowerCase().includes("text/plain")||B.toLowerCase().includes("json")||B.toLowerCase().includes("text/javascript")||B.toLowerCase().includes("application/javascript"))||void 0===B)if("string"==typeof(null===(h=null==n?void 0:n.requestDetails)||void 0===h?void 0:h.body))try{1e4>=(null===(k=null==n?void 0:n.requestDetails)||void 0===k?void 0:k.body.length)&&(M[an.request_body]=JSON.parse(null===(y=null==n?void 0:n.requestDetails)||void 0===y?void 0:y.body))}catch(e){}else"object"==typeof(null===(w=null==n?void 0:n.requestDetails)||void 0===w?void 0:w.body)&&(M[an.request_body]=null===(T=null==n?void 0:n.requestDetails)||void 0===T?void 0:T.body);if(void 0!==U&&(U.toLowerCase().includes("text/plain")||U.toLowerCase().includes("json")||U.toLowerCase().includes("text/javascript")||U.toLowerCase().includes("application/javascript"))&&void 0!==L&&1e4>=L)if("string"==typeof(null===(b=null==n?void 0:n.responseDetails)||void 0===b?void 0:b.body))try{M[an.response_body]=JSON.parse(null===(C=null==n?void 0:n.responseDetails)||void 0===C?void 0:C.body)}catch(e){}else"object"==typeof(null===(A=null==n?void 0:n.responseDetails)||void 0===A?void 0:A.body)&&(M[an.response_body]=null===(_=null==n?void 0:n.responseDetails)||void 0===_?void 0:_.body);var F=j.networkRequestTrackingConfiguration;if(F&&F.enabled){var H=F.blocklist,V=null===(x=null===(O=null==l?void 0:l.configs)||void 0===O?void 0:O.networkRequestTracking)||void 0===x?void 0:x.safelist,G=(null==H?void 0:H.includes("*"))||(null==H?void 0:H.some((function(e){return 0<(null==e?void 0:e.length)&&M.targetUrl.toLowerCase().includes(e.toLowerCase())})));if(null!=V&&V.some((function(e){return 0<(null==e?void 0:e.length)&&M.targetUrl.toLowerCase().includes(e.toLowerCase())}))||!G){var z=function(n,t){var o=[an.request_body,an.response_body,an.request_headers,an.response_headers],r={};if(t&&0<t.length)for(var i=0;i<t.length;i++){var a=t[i],c=a.conditions;a=e(a,["conditions"]);try{e:{var l=n;try{for(var u=0;u<c.length;u++){var s=c[u],d=!1;if(0<Object.keys(s).length)for(var f=0,v=Object.entries(s);f<v.length;f++){var g=v[f],p=g[1],m=l[g[0]];if(0<p.length){for(var h=0,k=0,y=p;k<y.length;k++){var w=y[k],T="contains",b=w;if("object"==typeof w&&w.length?(T=w[1],b=w[0]):"boolean"!=typeof w&&null!==w||(T="equal",b=w),Y(m,T,b)){d=!0;break}if(d=!1,h+1===p.length)break;h++}if(!1===d)break}}if(d){var C=!0;break e}}}catch(e){console.warn("Conviva App Tracker: Error in Applying nwreqConfig ".concat(e))}C=!1}if(C){l=0;for(var E=Object.entries(n);l<E.length;l++){var A=E[l],_=A[0],O=A[1];if(o.includes(_))try{if(a[_]&&0<a[_].length){u=!1,_!==an.response_headers&&_!==an.request_headers||(u=!0);var x=n[_];c={};try{d=0;for(var I=a[_];d<I.length;d++){var S=I[d];f=x,h=c,u&&(S=S.toLowerCase());var P=S.split(".");for(k=0;k<P.length;k++){var j=P[k];null!=f&&f.hasOwnProperty(j)&&(k===P.length-1?h[j]=f[j]:(h[j]=h[j]||{},f=f[j],h=h[j]))}}}catch(e){console.warn("Conviva App Tracker: Error in filtering schema object nwreq ".concat(e))}var R=c;0!==Object.keys(R).length&&(r[_]=R)}}catch(e){r[_]=void 0}else r[_]=O}return r}}catch(e){console.warn("Conviva App Tracker: Error in collecting attributes nwreqConfig ".concat(e))}}for(r=Ne({},n),n=0;n<o.length;n++)t=o[n],null!=r&&r.hasOwnProperty(t)&&delete r[t];return r}(M,F.collectattr);if(null!==(S=null==n?void 0:n.requestDetails)&&void 0!==S&&S[cn.TRACEPARENT_HEADER_KEY]){var J=((o={})[cn.TRACEPARENT_HEADER_KEY]=null===(P=null==n?void 0:n.requestDetails)||void 0===P?void 0:P[cn.TRACEPARENT_HEADER_KEY],o);z[an.request_headers]=z[an.request_headers]?Ne(Ne({},z[an.request_headers]),J):J}this.core.track(E({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-4",data:I({targetUrl:z.targetUrl,method:z.method,queryParameters:z.queryParameters,responseStatusCode:z.responseStatusCode,responseStatusText:z.responseStatusText,rqh:z.rqh,rsh:z.rsh,rqb:z.rqb,rsb:z.rsb,requestSize:z.requestSize,responseSize:z.responseSize,duration:z.duration,contentType:z.contentType,requestTimestamp:z.requestTimestamp,responseTimestamp:z.responseTimestamp})}}),n.context,n.timestamp)}}}catch(e){console.warn("Conviva App Tracker:: Network request could not be tracked due to an exception!!",e)}}catch(e){console.warn("Conviva App Tracker:: Network request could not be tracked due to an exception!!",e)}},setCustomTags:function(e){void 0===e&&(e={}),function(e){try{var n=Object.keys(e);gt(JSON.stringify(e))?n.forEach((function(n){""!==n&&Object.defineProperty(Un,n,{value:""+e[n],writable:!0,enumerable:!0,configurable:!0})})):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(e){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",e)}}(e)},setMetaCustomTags:function(e){void 0===e&&(e={}),function(e){try{var n=Object.keys(e);gt(JSON.stringify(e))?n.forEach((function(n){""!==n&&Object.defineProperty(Mn,n,{value:""+e[n],writable:!0,enumerable:!0,configurable:!0})})):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(e){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",e)}}(e)},unsetCustomTags:function(e){void 0===e&&(e={}),function(e){try{e.forEach((function(e){delete Un[e]}))}catch(e){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}(e)},preservePageViewId:function(){st=!0},disableAnonymousTracking:function(e){l.anonymousTracking=!1,F(e),H(),ut.executeQueue()},enableAnonymousTracking:function(e){var n;l.anonymousTracking=null===(n=e&&(null==e?void 0:e.options))||void 0===n||n,F(e),Wn||z()},clearUserData:P}),{id:o,namespace:r,core:xn,sharedState:c})}(o,r,i,a,c,l);var d=Ne(Ne({},o),{addPlugin:function(e){var n,t;d.core.addPlugin(e),null===(t=(n=e.plugin).activateBrowserPlugin)||void 0===t||t.call(n,d)}});return s.forEach((function(e){var n;null===(n=e.activateBrowserPlugin)||void 0===n||n.call(e,d)})),d}function ee(e,n){try{oe(null!=e?e:Object.keys(fn),fn).forEach(n)}catch(e){en.error("Function failed",e)}}function ne(e,n,t){try{oe(null!=e?e:Object.keys(n),n).forEach(t)}catch(e){en.error("Function failed",e)}}function te(e,n,t,o,r,i){return fn.hasOwnProperty(e)?null:(fn[e]=$(e,n,t,o,r,i),fn[e])}function oe(e,n){for(var t=[],o=0;o<e.length;o++){var r=e[o];n.hasOwnProperty(r)?t.push(n[r]):en.warn(r+" not configured")}return t}function re(){function e(){var e;if(!n.hasLoaded)for(n.hasLoaded=!0,e=0;e<n.registeredOnLoadHandlers.length;e++)n.registeredOnLoadHandlers[e]();return!0}var n=new vn,t=document,o=window;return t.visibilityState&&q(t,"visibilitychange",(function(){try{"hidden"==t.visibilityState&&n.bufferFlushers.forEach((function(e){e(!1)}))}catch(e){console.warn("Conviva App Tracker:: Error in visibilityChangeHandler of constructor ".concat(e))}}),!1),q(o,"beforeunload",(function(){try{n.bufferFlushers.forEach((function(e){e(!1)}))}catch(e){console.warn("Conviva App Tracker:: Error in flushBuffers of constructor ".concat(e))}}),!1),"loading"===document.readyState?(t.addEventListener?t.addEventListener("DOMContentLoaded",(function n(){t.removeEventListener("DOMContentLoaded",n,!1),e()})):t.attachEvent&&t.attachEvent("onreadystatechange",(function n(){"complete"===t.readyState&&(t.detachEvent("onreadystatechange",n),e())})),q(o,"load",e,!1)):e(),n}function ie(e){return{activateBrowserPlugin:function(){sn||function(){try{var n=navigator;n.userAgentData&&(sn={isMobile:n.userAgentData.mobile,brands:n.userAgentData.brands},e&&n.userAgentData.getHighEntropyValues&&n.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","model","uaFullVersion"]).then((function(e){sn.architecture=e.architecture,sn.model=e.model,sn.platform=e.platform,sn.uaFullVersion=e.uaFullVersion,sn.platformVersion=e.platformVersion})))}catch(e){console.warn("Conviva App Tracker caused Exception in ClientHintsPlugin",e)}}()},contexts:function(){return sn?[{schema:"iglu:org.ietf/http_client_hints/jsonschema/1-0-0",data:sn}]:[]}}}function ae(){function e(e,n){var t=window.optimizely;if(t&&"function"==typeof t.get){var o=t.get(e);void 0!==n&&void 0!==o&&(o=o[n])}return o}function n(){return(n=e("state"),t=n&&n.getActiveExperimentIds(),o=n&&n.getVariationMap(),r=e("visitor"),t.map((function(e){var n=o[e],t=n&&n.name&&n.name.toString()||null;n=n&&n.id;var i=r&&r.visitorId&&r.visitorId.toString()||null;return{experimentId:F(e)||null,variationName:t,variation:F(n)||null,visitorId:i}}))).map((function(e){return{schema:"iglu:com.optimizely.optimizelyx/summary/jsonschema/1-0-0",data:e}}));var n,t,o,r}return{contexts:function(){return window.optimizely?n():[]}}}function ce(){return{contexts:function(){var e=window,n=(e=e.performance||e.mozPerformance||e.msPerformance||e.webkitPerformance).timing;return e=e?[{schema:"iglu:org.w3/PerformanceTiming/jsonschema/1-0-0",data:{navigationStart:n.navigationStart,loadEventEnd:n.loadEventEnd}}]:[]}}}function le(){var e;return{activateBrowserPlugin:function(n){e=n.id,Cn[n.id]=n},contexts:function(){return En[e]?[{schema:"iglu:com.snowplowanalytics.snowplow/gdpr/jsonschema/1-0-0",data:En[e]}]:[]},logger:function(e){yn=e}}}function ue(e){var n;return void 0===e&&(e=!1),{activateBrowserPlugin:function(t){n=t.id,_n[t.id]=[!1,void 0],e&&se([n])},contexts:function(){var e,t=null===(e=_n[n])||void 0===e?void 0:e[1];return t?[t]:[]}}}function se(e){void 0===e&&(e=Object.keys(_n));var n=navigator;e.forEach((function(e){_n[e]=[!0,wn]})),!On&&n.geolocation&&n.geolocation.getCurrentPosition&&(On=!0,n.geolocation.getCurrentPosition((function(e){var n=e.coords;for(var t in wn={schema:"iglu:com.snowplowanalytics.snowplow/geolocation_context/jsonschema/1-1-0",data:{latitude:n.latitude,longitude:n.longitude,latitudeLongitudeAccuracy:n.accuracy,altitude:n.altitude,altitudeAccuracy:n.altitudeAccuracy,bearing:n.heading,speed:n.speed,timestamp:Math.round(e.timestamp)}},_n)Object.prototype.hasOwnProperty.call(_n,t)&&_n[t][0]&&(_n[t]=[!0,wn])})))}function de(){return{contexts:function(){var e={schema:"iglu:com.google.analytics/cookies/jsonschema/1-0-0",data:{}};return"__utma __utmb __utmc __utmv __utmz _ga".split(" ").forEach((function(n){var t=M(n);t&&(e.data[n]=t)})),[e]}}}function fe(){return{activateBrowserPlugin:function(e){Sn[e.id]=e}}}function ve(e,n,t){for(var o,r,i,a;null!==(o=n.parentElement)&&null!=o&&"A"!==(r=n.tagName.toUpperCase())&&"AREA"!==r;)n=o;if(null!=(o=n).href){i=(r=o.hostname||R(o.href)).toLowerCase();var l=o.href.replace(r,i);/^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):/i.test(l)||(r=o.id,i=z(o),a=o.target,o=Pn[e.id].linkTrackingContent?o.innerHTML:void 0,o={targetUrl:l=unescape(l),elementId:r,elementClasses:i,elementTarget:a,elementContent:o},e.core.getConfig().linkClickTracking&&e.core.track(O(o),c(t,n)))}}function ge(e,n,t){for(var o;null!==(o=n.parentElement)&&null!=o&&"BUTTON"!==n.tagName.toUpperCase();)n=o;o={elementType:(o=n).type,elementId:o.id,elementClasses:o.className||"",elementName:o.name,elementText:o.innerText,elementValue:o.value},e.core.getConfig().buttonClickTracking&&e.core.track(x(o),c(t,n))}function pe(e,n){return function(t){var o=(t=t||window.event).which||t.button,r=t.target||t.srcElement;"click"===t.type?r&&ve(Sn[e],r,n):"mousedown"===t.type?1!==o&&2!==o||!r?Pn[e].lastButton=Pn[e].lastTarget=null:(Pn[e].lastButton=o,Pn[e].lastTarget=r):"mouseup"===t.type&&(o===Pn[e].lastButton&&r===Pn[e].lastTarget&&ve(Sn[e],r,n),Pn[e].lastButton=Pn[e].lastTarget=null)}}function me(e,n){return function(t){var o=(t=t||window.event).which||t.button,r=t.target||t.srcElement;"click"===t.type?r&&ge(Sn[e],r,n):"mousedown"===t.type?1!==o&&2!==o||!r?jn[e].lastButton=jn[e].lastTarget=null:(jn[e].lastButton=o,jn[e].lastTarget=r):"mouseup"===t.type&&(o===jn[e].lastButton&&r===jn[e].lastTarget&&ge(Sn[e],r,n),jn[e].lastButton=jn[e].lastTarget=null)}}function he(e,n){e=void 0===e?{}:e,Pn[n]={linkTrackingContent:e.trackContent,linkTrackingContext:e.context,linkTrackingPseudoClicks:e.pseudoClicks,linkTrackingFilter:V(e.options)}}function ke(e,n){e=void 0===e?{}:e,jn[n]={buttonTrackingContent:e.trackContent,buttonTrackingContext:e.context,buttonTrackingFilter:V(e.options)}}function ye(e){var n,t,o,r=document.links;for(Tn=e,o=0;o<r.length;o++)if(null!==(t=null===(n=Pn[e])||void 0===n?void 0:n.linkTrackingFilter)&&void 0!==t&&t.call(n,r[o])&&!r[o][e]){var i=e,a=r[o];Pn[i].linkTrackingPseudoClicks?(q(a,"mouseup",pe(i,Pn[i].linkTrackingContext),!1),q(a,"mousedown",pe(i,Pn[i].linkTrackingContext),!1)):q(a,"click",pe(i,Pn[i].linkTrackingContext),!1),r[o][e]=!0}}function we(e){try{for(var n=0;n<e.length;n++)"childList"===e[n].type&&(ye(Tn),Te(Tn))}catch(e){console.warn("Conviva App Tracker caused Exception in mutation callback of click tracking Plugin",e)}}function Te(e){var n,t,o,r=document.querySelectorAll("button");for(o=0;o<r.length;o++)null!==(t=null===(n=jn[e])||void 0===n?void 0:n.buttonTrackingFilter)&&void 0!==t&&t.call(n,r[o])&&!r[o][e]&&(q(r[o],"click",me(e,jn[e].buttonTrackingContext),!1),r[o][e]=!0)}function be(e,n){var t,o=n.context,r=e.id+"form",i=function(e){if(e){var n=function(e){return!0},t=null;return!function(e){return null!=e&&0<Array.prototype.slice.call(e).length}(e.forms)?n=V(e.forms):t=e.forms,{forms:t,formFilter:n,fieldFilter:G(e.fields),fieldTransform:Ce(e.fields),eventFilter:function(n){var t;return-1<(null!==(t=e.events)&&void 0!==t?t:qn).indexOf(n)}}}return{forms:null,formFilter:function(){return!0},fieldFilter:function(){return!0},fieldTransform:Bn,eventFilter:function(){return!0}}}(n.options);n=null!==(t=i.forms)&&void 0!==t?t:document.getElementsByTagName("form"),Array.prototype.slice.call(n).forEach((function(n){i.formFilter(n)&&(Array.prototype.slice.call(Ln).forEach((function(t){Array.prototype.slice.call(n.getElementsByTagName(t)).forEach((function(n){i.fieldFilter(n)&&!n[r]&&"password"!==n.type.toLowerCase()&&(i.eventFilter(bn.FOCUS_FORM)&&q(n,"focus",Ae(e,i,"focus_form",o),!1),i.eventFilter(bn.CHANGE_FORM)&&q(n,"change",Ae(e,i,"change_form",o),!1),n[r]=!0)}))})),n[r]||(i.eventFilter(bn.SUBMIT_FORM)&&q(n,"submit",function(e,n,t,o){return function(r){var i;r=r.target;var a=function(e,n){var t=[];return Array.prototype.slice.call(Ln).forEach((function(o){o=Array.prototype.slice.call(n.getElementsByTagName(o)).filter((function(n){return n.hasOwnProperty(e)})),Array.prototype.slice.call(o).forEach((function(e){if("submit"!==e.type){var n={name:Ee(e),value:e.value,nodeName:e.nodeName};e.type&&"INPUT"===e.nodeName.toUpperCase()&&(n.type=e.type),"checkbox"!==e.type&&"radio"!==e.type||e.checked||(n.value=null),t.push(n)}}))})),t}(t,r);a.forEach((function(e){var t;e.value=null!==(t=n.fieldTransform(e.value,e))&&void 0!==t?t:e.value})),e.core.track(function(e){return E({event:{schema:"iglu:com.snowplowanalytics.snowplow/submit_form/jsonschema/1-0-0",data:I({formId:e.formId,formClasses:e.formClasses,elements:e.elements})}})}({formId:null!==(i=Ee(r))&&void 0!==i?i:"",formClasses:z(r),elements:a}),c(o,r,a))}}(e,i,r,o)),n[r]=!0))}))}function Ce(e){return e&&Object.prototype.hasOwnProperty.call(e,"transform")?e.transform:Bn}function Ee(e){for(var n=0,t=["name","id","type","nodeName"];n<t.length;n++){var o=t[n];if(0!=e[o]&&"string"==typeof e[o])return e[o]}return null}function Ae(e,n,t,o){return function(r){var i;if(r=r.target){var a=r.nodeName&&"INPUT"===r.nodeName.toUpperCase()?r.type:null,l="checkbox"!==r.type||r.checked?n.fieldTransform(r.value,r):null;if("change_form"===t||"checkbox"!==a&&"radio"!==a){var u,s=e.core,d=s.track;for(u=r;u&&u.nodeName&&"HTML"!==u.nodeName.toUpperCase()&&"FORM"!==u.nodeName.toUpperCase();)u=u.parentNode;u=null!=(u=u&&u.nodeName&&"FORM"===u.nodeName.toUpperCase()?Ee(u):null)?u:"";var f=null!==(i=Ee(r))&&void 0!==i?i:"";i="",u={formId:u,elementId:f,nodeName:r.nodeName,elementClasses:z(r),value:null!=l?l:null},"change_form"===t?(i="iglu:com.snowplowanalytics.snowplow/change_form/jsonschema/1-0-0",u.type=a):"focus_form"===t&&(i="iglu:com.snowplowanalytics.snowplow/focus_form/jsonschema/1-0-0",u.elementType=a),i=E({event:{schema:i,data:I(u,{value:!0})}}),d.call(s,i,c(o,r,a,l))}}}}function _e(){return{activateBrowserPlugin:function(e){Un[e.id]=e}}}function Oe(){return{activateBrowserPlugin:function(e){Fn[e.id]=e}}}function xe(e,n){void 0===n&&(n=Object.keys(Fn));var t=e.message,o=e.filename,r=e.lineno,i=e.colno,a=e.error,c=e.context,l=e.timestamp,u=a&&a.stack?a.stack:null;void 0===t||null===t&&void 0===u||null===u&&void 0===r||null===r&&void 0===i||null===i&&void 0===o||null===o||ne(n,Fn,(function(e){e.core.getConfig().exceptionAutotracking&&e.core.track(E({event:{schema:"iglu:com.snowplowanalytics.snowplow/application_error/jsonschema/1-0-1",data:{programmingLanguage:"JAVASCRIPT",message:null!=t?t:"JS Exception.",stackTrace:u,lineNumber:r,lineColumn:i,fileName:o}}}),c,l)}))}function Ie(){return{activateBrowserPlugin:function(e){Vn[e.id]=e,Gn[e.id]={items:[]}}}}function Se(){return{activateBrowserPlugin:function(e){Jn[e.id]=e,Kn[e.id]=[]}}}function Pe(){return{activateBrowserPlugin:function(e){Xn[e.id]=e}}}function je(){return{activateBrowserPlugin:function(e){Zn[e.id]=e}}}function Re(n){var t,o=null!==(t=null==n?void 0:n.contexts)&&void 0!==t?t:{},r=o.performanceTiming;t=o.gaCookies,n=o.geolocation,o.optimizelyExperiments,o.optimizelyStates,o.optimizelyVariations,o.optimizelyVisitor,o.optimizelyAudiences,o.optimizelyDimensions,o.optimizelySummary;var i=o.optimizelyXSummary;o=o.clientHints;var a=[];return r&&(r=e(kn,["PerformanceTimingPlugin"]),a.push([ce(),r])),i&&(r=e(hn,["OptimizelyXPlugin"]),a.push([ae(),r])),o&&(r=e(mn,["ClientHintsPlugin"]),a.push([ie("object"==typeof o&&o.includeHighEntropy),r])),t&&(r=e(In,["GaCookiesPlugin"]),a.push([de(),r])),r=e(An,["ConsentPlugin"]),a.push([le(),r]),r=e(xn,["GeolocationPlugin"]),a.push([ue(n),r]),r=e(Dn,["LinkClickTrackingPlugin"]),a.push([fe(),r]),r=e(Mn,["FormTrackingPlugin"]),a.push([_e(),r]),r=e(Hn,["ErrorTrackingPlugin"]),a.push([Oe(),r]),r=e(zn,["EcommercePlugin"]),a.push([Ie(),r]),r=e(Yn,["EnhancedEcommercePlugin"]),a.push([Se(),r]),r=e(Qn,["AdTrackingPlugin"]),a.push([Pe(),r]),r=e(Wn,["SiteTrackingPlugin"]),a.push([je(),r]),a}var Ne=function(){return Ne=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},Ne.apply(this,arguments)},De={},qe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(qe){var Le=new Uint8Array(16);De=function(){return qe(Le),Le}}else{var Be=Array(16);De=function(){for(var e,n=0;16>n;n++)0==(3&n)&&(e=4294967296*Math.random()),Be[n]=e>>>((3&n)<<3)&255;return Be}}for(var Ue=[],Me=0;256>Me;++Me)Ue[Me]=(Me+256).toString(16).substr(1);var Fe,He,Ve=function(e,n){return n=n||0,[Ue[e[n++]],Ue[e[n++]],Ue[e[n++]],Ue[e[n++]],"-",Ue[e[n++]],Ue[e[n++]],"-",Ue[e[n++]],Ue[e[n++]],"-",Ue[e[n++]],Ue[e[n++]],"-",Ue[e[n++]],Ue[e[n++]],Ue[e[n++]],Ue[e[n++]],Ue[e[n++]],Ue[e[n++]]].join("")},Ge=De,ze=0,Je=0,Ke=De,Ye=function(e,n,t){if(t=n&&t||0,"string"==typeof e&&(n="binary"===e?Array(16):null,e=null),(e=(e=e||{}).random||(e.rng||Ke)())[6]=15&e[6]|64,e[8]=63&e[8]|128,n)for(var o=0;16>o;++o)n[t+o]=e[o];return n||Ve(e)};Ye.v1=function(e,n,t){t=n&&t||0;var o=n||[],r=(e=e||{}).node||Fe,i=void 0!==e.clockseq?e.clockseq:He;if(null==r||null==i){var a=Ge();null==r&&(r=Fe=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==i&&(i=He=16383&(a[6]<<8|a[7]))}a=void 0!==e.msecs?e.msecs:(new Date).getTime();var c=void 0!==e.nsecs?e.nsecs:Je+1,l=a-ze+(c-Je)/1e4;if(0>l&&void 0===e.clockseq&&(i=i+1&16383),(0>l||a>ze)&&void 0===e.nsecs&&(c=0),1e4<=c)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(ze=a,Je=c,He=i,e=(1e4*(268435455&(a+=122192928e5))+c)%4294967296,o[t++]=e>>>24&255,o[t++]=e>>>16&255,o[t++]=e>>>8&255,o[t++]=255&e,e=a/4294967296*1e4&268435455,o[t++]=e>>>8&255,o[t++]=255&e,o[t++]=e>>>24&15|16,o[t++]=e>>>16&255,o[t++]=i>>>8|128,o[t++]=255&i,i=0;6>i;++i)o[t+i]=r[i];return n||Ve(o)};var Xe,Qe,Ze=Ye.v4=Ye,We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";(Qe=Xe||(Xe={}))[Qe.none=0]="none",Qe[Qe.error=1]="error",Qe[Qe.warn=2]="warn",Qe[Qe.debug=3]="debug",Qe[Qe.info=4]="info";var $e,en=function(e){return void 0===e&&(e=Xe.warn),{setLogLevel:function(n){e=Xe[n]?n:Xe.warn},warn:function(t,o){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];e>=Xe.warn&&"undefined"!=typeof console&&(i="Snowplow: "+t,o?console.warn.apply(console,n([i+"\n",o],r,!1)):console.warn.apply(console,n([i],r,!1)))},error:function(t,o){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];e>=Xe.error&&"undefined"!=typeof console&&(i="Snowplow: "+t+"\n",o?console.error.apply(console,n([i+"\n",o],r,!1)):console.error.apply(console,n([i],r,!1)))},debug:function(t){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];e>=Xe.debug&&"undefined"!=typeof console&&console.debug.apply(console,n(["Snowplow: "+t],o,!1))},info:function(t){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];e>=Xe.info&&"undefined"!=typeof console&&console.info.apply(console,n(["Snowplow: "+t],o,!1))}}}();!function(e){e.response_body="rsb",e.request_body="rqb",e.response_headers="rsh",e.request_headers="rqh"}($e||($e={}));var nn={},tn={};!function(){var e={rotl:function(e,n){return e<<n|e>>>32-n},rotr:function(e,n){return e<<32-n|e>>>n},endian:function(n){if(n.constructor==Number)return 16711935&e.rotl(n,8)|4278255360&e.rotl(n,24);for(var t=0;t<n.length;t++)n[t]=e.endian(n[t]);return n},randomBytes:function(e){for(var n=[];0<e;e--)n.push(Math.floor(256*Math.random()));return n},bytesToWords:function(e){for(var n=[],t=0,o=0;t<e.length;t++,o+=8)n[o>>>5]|=e[t]<<24-o%32;return n},wordsToBytes:function(e){for(var n=[],t=0;t<32*e.length;t+=8)n.push(e[t>>>5]>>>24-t%32&255);return n},bytesToHex:function(e){for(var n=[],t=0;t<e.length;t++)n.push((e[t]>>>4).toString(16)),n.push((15&e[t]).toString(16));return n.join("")},hexToBytes:function(e){for(var n=[],t=0;t<e.length;t+=2)n.push(parseInt(e.substr(t,2),16));return n},bytesToBase64:function(e){for(var n=[],t=0;t<e.length;t+=3)for(var o=e[t]<<16|e[t+1]<<8|e[t+2],r=0;4>r;r++)8*t+6*r<=8*e.length?n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-r)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],t=0,o=0;t<e.length;o=++t%4)0!=o&&n.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t-1))&Math.pow(2,-2*o+8)-1)<<2*o|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t))>>>6-2*o);return n}};tn=e}();var on={utf8:{stringToBytes:function(e){return on.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(on.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var n=[],t=0;t<e.length;t++)n.push(255&e.charCodeAt(t));return n},bytesToString:function(e){for(var n=[],t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return n.join("")}}},rn=on;!function(){var e=tn,n=rn.utf8,t=rn.bin,o=function(o,r){var i=e.wordsToBytes,a=o;a.constructor==String?a=n.stringToBytes(a):"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||(a=a.toString()),o=e.bytesToWords(a);var c=8*a.length;a=[];var l=1732584193,u=-271733879,s=-1732584194,d=271733878,f=-1009589776;for(o[c>>5]|=128<<24-c%32,o[15+(c+64>>>9<<4)]=c,c=0;c<o.length;c+=16){for(var v=l,g=u,p=s,m=d,h=f,k=0;80>k;k++){if(16>k)a[k]=o[c+k];else{var y=a[k-3]^a[k-8]^a[k-14]^a[k-16];a[k]=y<<1|y>>>31}y=(l<<5|l>>>27)+f+(a[k]>>>0)+(20>k?1518500249+(u&s|~u&d):40>k?1859775393+(u^s^d):60>k?(u&s|u&d|s&d)-1894007588:(u^s^d)-899497514),f=d,d=s,s=u<<30|u>>>2,u=l,l=y}l+=v,u+=g,s+=p,d+=m,f+=h}return i=i.call(e,[l,u,s,d,f]),r&&r.asBytes?i:r&&r.asString?t.bytesToString(i):e.bytesToHex(i)};o._blocksize=16,o._digestsize=20,nn=o}();var an,cn,ln,un=nn;!function(e){e.response_body="rsb",e.request_body="rqb",e.response_headers="rsh",e.request_headers="rqh"}(an||(an={})),function(e){e.TRACEPARENT_HEADER_KEY="traceparent";var n=e.CONFIG_PREFERENCES||(e.CONFIG_PREFERENCES={});n[n.APP=0]="APP",n[n.REMOTE=1]="REMOTE",n[n.MERGE=2]="MERGE",e.REMOTE_CONFIG_STORAGE_KEY="ConvivaRemoteConfig",e.END_POINT_STORAGE_KEY="ConvivaEndpoint",e.DEFAULT_END_POINT="https://appgw.conviva.com",e.REMOTE_CONFIG_URL_PREFIX="https://drt1fhpy4haqm.cloudfront.net/js/",e.REMOTE_CONFIG_FILE_NAME="/remote_config.json"}(cn||(cn={})),function(e){e[e.APP=0]="APP",e[e.REMOTE=1]="REMOTE",e[e.MERGE=2]="MERGE"}(ln||(ln={}));var sn,dn,fn={},vn=function(){this.outQueues=[],this.bufferFlushers=[],this.hasLoaded=!1,this.registeredOnLoadHandlers=[]},gn="undefined"!=typeof window?re():void 0,pn=Object.freeze({__proto__:null,addGlobalContexts:function(e,n){ee(n,(function(n){n.core.addGlobalContexts(e)}))},addPlugin:function(e,n){ee(n,(function(n){n.addPlugin(e)}))},clearGlobalContexts:function(e){ee(e,(function(e){e.core.clearGlobalContexts()}))},clearUserData:function(e,n){ee(n,(function(n){n.clearUserData(e)}))},convivaAppTracker:function(e){void 0===e&&(e={});try{if(gn){var n=te("CAT","CAT","js-".concat("0.5.3"),"",gn,e);return document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",(function(e){e&&n&&n.trackVideoEvent(e)})),PerformanceObserver&&new PerformanceObserver((function(e){e.getEntries().forEach((function(e){n&&n.trackAjaxEvent(e)}))})).observe({type:"resource",buffered:!0}),n}}catch(e){console.warn("Conviva App Tracker:: Initialisation failed! "+e)}},crossDomainLinker:function(e,n){ee(n,(function(n){n.crossDomainLinker(e)}))},disableAnonymousTracking:function(e,n){ee(n,(function(n){n.disableAnonymousTracking(e)}))},discardBrace:function(e,n){ee(n,(function(n){n.discardBrace(e)}))},discardHashTag:function(e,n){ee(n,(function(n){n.discardHashTag(e)}))},enableActivityTracking:function(e,n){ee(n,(function(n){n.enableActivityTracking(e)}))},enableActivityTrackingCallback:function(e,n){ee(n,(function(n){n.enableActivityTrackingCallback(e)}))},enableAnonymousTracking:function(e,n){ee(n,(function(n){n.enableAnonymousTracking(e)}))},flushBuffer:function(e,n){ee(n,(function(n){n.flushBuffer(e)}))},newSession:function(e){ee(e,(function(e){e.newSession()}))},newTracker:function(e,n,t){if(void 0===t&&(t={}),gn)return te(e,e,"js-".concat("0.5.3"),n,gn,t)},preservePageViewId:function(e){ee(e,(function(e){e.preservePageViewId()}))},removeGlobalContexts:function(e,n){ee(n,(function(n){n.core.removeGlobalContexts(e)}))},setBufferSize:function(e,n){ee(n,(function(n){n.setBufferSize(e)}))},setCollectorUrl:function(e,n){ee(n,(function(n){n.setCollectorUrl(e)}))},setCookiePath:function(e,n){ee(n,(function(n){n.setCookiePath(e)}))},setCustomTags:function(e,n){ee(n,(function(n){try{n.setCustomTags(e)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}}))},setCustomUrl:function(e,n){ee(n,(function(n){n.setCustomUrl(e)}))},setDocumentTitle:function(e,n){ee(n,(function(n){n.setDocumentTitle(e)}))},setOptOutCookie:function(e,n){ee(n,(function(n){n.setOptOutCookie(e)}))},setReferrerUrl:function(e,n){ee(n,(function(n){n.setReferrerUrl(e)}))},setUserId:function(e,n){ee(n,(function(n){n.setUserId(e)}))},setUserIdFromCookie:function(e,n){ee(n,(function(n){n.setUserIdFromCookie(e)}))},setUserIdFromLocation:function(e,n){ee(n,(function(n){n.setUserIdFromLocation(e)}))},setUserIdFromReferrer:function(e,n){ee(n,(function(n){n.setUserIdFromReferrer(e)}))},setVisitorCookieTimeout:function(e,n){ee(n,(function(n){n.setVisitorCookieTimeout(e)}))},trackCustomEvent:function(e,n){ee(n,(function(n){try{var t=n.core.getConfig();if(""!=e.name&&null!=e.name||console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!"),null!=t.customEventTrackingConfiguration){var o=e.data;try{"string"!=typeof e.data&&(o=JSON.stringify(e.data))}catch(e){}if(null!=t.customEventTrackingConfiguration.blocklist&&0<t.customEventTrackingConfiguration.blocklist.length){var r=t.customEventTrackingConfiguration.blocklist;-1==r.indexOf("*")&&-1==r.indexOf(""+e.name)&&n.core.track(A({name:e.name,data:o}),e.context,e.timestamp)}else n.core.track(A({name:e.name,data:o}),e.context,e.timestamp)}else n.core.track(A({name:e.name,data:e.data}),e.context,e.timestamp)}catch(e){console.warn("Conviva App Tracker:: Unable to track custom event! "+e)}}))},trackPageView:function(e,n){ee(n,(function(n){n.trackPageView(e)}))},trackSelfDescribingEvent:function(e,n){ee(n,(function(n){n.core.track(E({event:e.event}),e.context,e.timestamp)}))},trackStructEvent:function(e,n){ee(n,(function(n){var o=(n=n.core).track,r=e.category,i=e.action,a=e.label,c=e.property,l=e.value,u=t();u.add("e","se"),u.add("se_ca",r),u.add("se_ac",i),u.add("se_la",a),u.add("se_pr",c),u.add("se_va",null==l?void 0:l.toString()),o.call(n,u,e.context,e.timestamp)}))},unsetCustomTags:function(e,n){ee(n,(function(n){try{n.unsetCustomTags(e)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}}))},updatePageActivity:function(e){ee(e,(function(e){e.updatePageActivity()}))},version:"0.5.3"}),mn=Object.freeze({__proto__:null,ClientHintsPlugin:ie}),hn=Object.freeze({__proto__:null,OptimizelyXPlugin:ae}),kn=Object.freeze({__proto__:null,PerformanceTimingPlugin:ce});!function(e){e.consent="consent",e.contract="contract",e.legalObligation="legal_obligation",e.vitalInterests="vital_interests",e.publicTask="public_task",e.legitimateInterests="legitimate_interests"}(dn||(dn={}));var yn,wn,Tn,bn,Cn={},En={},An=Object.freeze({__proto__:null,ConsentPlugin:le,enableGdprContext:function(e,n){void 0===n&&(n=Object.keys(Cn));var t=e.documentId,o=e.documentVersion,r=e.documentDescription,i=dn[e.basisForProcessing];i?n.forEach((function(e){Cn[e]&&(En[e]={basisForProcessing:i,documentId:null!=t?t:null,documentVersion:null!=o?o:null,documentDescription:null!=r?r:null})})):yn.warn("enableGdprContext: basisForProcessing must be one of: consent, contract, legalObligation, vitalInterests, publicTask, legitimateInterests")},get gdprBasis(){return dn},trackConsentGranted:function(e,n){void 0===n&&(n=Object.keys(Cn)),ne(n,Cn,(function(n){var t=e.expiry,o={schema:"iglu:com.snowplowanalytics.snowplow/consent_document/jsonschema/1-0-0",data:I({id:e.id,version:e.version,name:e.name,description:e.description})};t=E({event:{schema:"iglu:com.snowplowanalytics.snowplow/consent_granted/jsonschema/1-0-0",data:I({expiry:t})}}),o=[o],n.core.track(t,e.context?e.context.concat(o):o,e.timestamp)}))},trackConsentWithdrawn:function(e,n){void 0===n&&(n=Object.keys(Cn)),ne(n,Cn,(function(n){var t=e.all,o={schema:"iglu:com.snowplowanalytics.snowplow/consent_document/jsonschema/1-0-0",data:I({id:e.id,version:e.version,name:e.name,description:e.description})};t=E({event:{schema:"iglu:com.snowplowanalytics.snowplow/consent_withdrawn/jsonschema/1-0-0",data:I({all:t})}}),o=[o],n.core.track(t,e.context?e.context.concat(o):o,e.timestamp)}))}}),_n={},On=!1,xn=Object.freeze({__proto__:null,GeolocationPlugin:ue,enableGeolocationContext:se}),In=Object.freeze({__proto__:null,GaCookiesPlugin:de}),Sn={},Pn={},jn={},Rn=!1,Nn=!1,Dn=Object.freeze({__proto__:null,LinkClickTrackingPlugin:fe,enableButtonClickTracking:function(e,n){if(void 0===e&&(e={}),void 0===n&&(n=Object.keys(Sn)),Nn=!0,!Rn)try{var t=document.body;new MutationObserver(we).observe(t,{attributes:!0,childList:!0,subtree:!0})}catch(e){console.log("exception",e)}n.forEach((function(n){try{Sn[n]&&(Sn[n].sharedState.hasLoaded?(ke(e,n),Te(n)):Sn[n].sharedState.registeredOnLoadHandlers.push((function(){ke(e,n),Te(n)})))}catch(e){console.warn("Conviva App Tracker caused Exception in enableButtonClickTracking method in click tracking Plugin",e)}}))},enableLinkClickTracking:function(e,n){if(void 0===e&&(e={}),void 0===n&&(n=Object.keys(Sn)),Rn=!0,!Nn)try{var t=document.body;new MutationObserver(we).observe(t,{attributes:!0,childList:!0,subtree:!0})}catch(e){}n.forEach((function(n){try{Sn[n]&&(Sn[n].sharedState.hasLoaded?(he(e,n),ye(n)):Sn[n].sharedState.registeredOnLoadHandlers.push((function(){he(e,n),ye(n)})))}catch(e){console.warn("Conviva App Tracker caused Exception in enableLinkClickTracking method in click tracking Plugin",e)}}))},refreshButtonClickTracking:function(e){void 0===e&&(e=Object.keys(Sn)),e.forEach((function(e){Sn[e]&&(Sn[e].sharedState.hasLoaded?Te(e):Sn[e].sharedState.registeredOnLoadHandlers.push((function(){Te(e)})))}))},refreshLinkClickTracking:function(e){void 0===e&&(e=Object.keys(Sn)),e.forEach((function(e){Sn[e]&&(Sn[e].sharedState.hasLoaded?ye(e):Sn[e].sharedState.registeredOnLoadHandlers.push((function(){ye(e)})))}))},trackButtonClick:function(e,n){void 0===n&&(n=Object.keys(Sn));for(var t=0;t<n.length;t++){var o=n[t];if(Sn.hasOwnProperty(o)){var r=e;(o=Sn[o]).core.getConfig().buttonClickTracking&&o.core.track(x(r),c(void 0,void 0))}}},trackLinkClick:function(e,n){void 0===n&&(n=Object.keys(Sn));for(var t=0;t<n.length;t++){var o=n[t];if(Sn.hasOwnProperty(o)){var r=e;(o=Sn[o]).core.getConfig().linkClickTracking&&o.core.track(O(r),c(void 0,void 0))}}}});!function(e){e.CHANGE_FORM="change_form",e.FOCUS_FORM="focus_form",e.SUBMIT_FORM="submit_form"}(bn||(bn={}));var qn=[bn.CHANGE_FORM,bn.FOCUS_FORM,bn.SUBMIT_FORM],Ln=["textarea","input","select"],Bn=function(e){return e},Un={},Mn=Object.freeze({__proto__:null,FormTrackingPlugin:_e,enableFormTracking:function(e,n){void 0===e&&(e={}),void 0===n&&(n=Object.keys(Un)),n.forEach((function(n){Un[n]&&(Un[n].sharedState.hasLoaded?be(Un[n],e):Un[n].sharedState.registeredOnLoadHandlers.push((function(){be(Un[n],e)})))}))}}),Fn={},Hn=Object.freeze({__proto__:null,ErrorTrackingPlugin:Oe,enableErrorTracking:function(e,n){void 0===e&&(e={}),void 0===n&&(n=Object.keys(Fn));try{var t=e.filter,o=e.contextAdder,r=e.context;q(window,"error",(function(e){try{if(t&&P(t)&&t(e)||null==t){var i=n,a=r||[];o&&P(o)&&(a=a.concat(o(e))),xe({message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error,context:a},i)}}catch(e){console.warn("Conviva App Tracker caused Exception in enableErrorTracking callback of error tracking Plugin",e)}}),!0)}catch(e){console.warn("Conviva App Tracker caused Exception in enableErrorTracking method of error tracking Plugin",e)}},trackError:xe}),Vn={},Gn={},zn=Object.freeze({__proto__:null,EcommercePlugin:Ie,addItem:function(e,n){void 0===n&&(n=Object.keys(Vn)),n.forEach((function(n){Gn[n]&&Gn[n].items.push(e)}))},addTrans:function(e,n){void 0===n&&(n=Object.keys(Vn)),n.forEach((function(n){Gn[n]&&(Gn[n].transaction=e)}))},trackAddToCart:function(e,n){void 0===n&&(n=Object.keys(Vn)),ne(n,Vn,(function(n){var t=(n=n.core).track,o=E({event:{schema:"iglu:com.snowplowanalytics.snowplow/add_to_cart/jsonschema/1-0-0",data:I({sku:e.sku,quantity:e.quantity,name:e.name,category:e.category,unitPrice:e.unitPrice,currency:e.currency})}});t.call(n,o,e.context,e.timestamp)}))},trackRemoveFromCart:function(e,n){void 0===n&&(n=Object.keys(Vn)),ne(n,Vn,(function(n){var t=(n=n.core).track,o=E({event:{schema:"iglu:com.snowplowanalytics.snowplow/remove_from_cart/jsonschema/1-0-0",data:I({sku:e.sku,quantity:e.quantity,name:e.name,category:e.category,unitPrice:e.unitPrice,currency:e.currency})}});t.call(n,o,e.context,e.timestamp)}))},trackTrans:function(e){void 0===e&&(e=Object.keys(Vn)),ne(e,Vn,(function(e){var n=Gn[e.id].transaction;if(n){var o=e.core,r=o.track,i=n.orderId,a=n.total,c=n.affiliation,l=n.tax,u=n.shipping,s=n.city,d=n.state,f=n.country,v=n.currency,g=t();g.add("e","tr"),g.add("tr_id",i),g.add("tr_af",c),g.add("tr_tt",a),g.add("tr_tx",l),g.add("tr_sh",u),g.add("tr_ci",s),g.add("tr_st",d),g.add("tr_co",f),g.add("tr_cu",v),r.call(o,g,n.context,n.timestamp)}for(n=0;n<Gn[e.id].items.length;n++)o=Gn[e.id].items[n],i=(r=e.core).track,a=o.orderId,c=o.sku,l=o.price,u=o.name,s=o.category,d=o.quantity,f=o.currency,(v=t()).add("e","ti"),v.add("ti_id",a),v.add("ti_sk",c),v.add("ti_nm",u),v.add("ti_ca",s),v.add("ti_pr",l),v.add("ti_qu",d),v.add("ti_cu",f),i.call(r,v,o.context,o.timestamp);Gn[e.id]={items:[]}}))}}),Jn={},Kn={},Yn=Object.freeze({__proto__:null,EnhancedEcommercePlugin:Se,addEnhancedEcommerceActionContext:function(e,n){void 0===e&&(e={}),void 0===n&&(n=Object.keys(Jn));var t=e.id,o=e.affiliation,r=e.revenue,i=e.tax,a=e.shipping,c=e.coupon,l=e.list,u=e.step,s=e.option,d=e.currency;n.forEach((function(e){Kn[e]&&Kn[e].push({schema:"iglu:com.google.analytics.enhanced-ecommerce/actionFieldObject/jsonschema/1-0-0",data:{id:t,affiliation:o,revenue:H(r),tax:H(i),shipping:H(a),coupon:c,list:l,step:F(u),option:s,currency:d}})}))},addEnhancedEcommerceImpressionContext:function(e,n){void 0===e&&(e={}),void 0===n&&(n=Object.keys(Jn));var t=e.id,o=e.name,r=e.list,i=e.brand,a=e.category,c=e.variant,l=e.position,u=e.price,s=e.currency;n.forEach((function(e){Kn[e]&&Kn[e].push({schema:"iglu:com.google.analytics.enhanced-ecommerce/impressionFieldObject/jsonschema/1-0-0",data:{id:t,name:o,list:r,brand:i,category:a,variant:c,position:F(l),price:H(u),currency:s}})}))},addEnhancedEcommerceProductContext:function(e,n){void 0===e&&(e={}),void 0===n&&(n=Object.keys(Jn));var t=e.id,o=e.name,r=e.list,i=e.brand,a=e.category,c=e.variant,l=e.price,u=e.quantity,s=e.coupon,d=e.position,f=e.currency;n.forEach((function(e){Kn[e]&&Kn[e].push({schema:"iglu:com.google.analytics.enhanced-ecommerce/productFieldObject/jsonschema/1-0-0",data:{id:t,name:o,list:r,brand:i,category:a,variant:c,price:H(l),quantity:F(u),coupon:s,position:F(d),currency:f}})}))},addEnhancedEcommercePromoContext:function(e,n){void 0===e&&(e={}),void 0===n&&(n=Object.keys(Jn));var t=e.id,o=e.name,r=e.creative,i=e.position,a=e.currency;n.forEach((function(e){Kn[e]&&Kn[e].push({schema:"iglu:com.google.analytics.enhanced-ecommerce/promoFieldObject/jsonschema/1-0-0",data:{id:t,name:o,creative:r,position:i,currency:a}})}))},trackEnhancedEcommerceAction:function(e,n){void 0===e&&(e={}),void 0===n&&(n=Object.keys(Jn)),ne(n,Jn,(function(n){var t=Kn[n.id].concat(e.context||[]);Kn[n.id].length=0,n.core.track(E({event:{schema:"iglu:com.google.analytics.enhanced-ecommerce/action/jsonschema/1-0-0",data:{action:e.action}}}),t,e.timestamp)}))}}),Xn={},Qn=Object.freeze({__proto__:null,AdTrackingPlugin:Pe,trackAdClick:function(e,n){void 0===n&&(n=Object.keys(Xn)),ne(n,Xn,(function(n){try{var t=n.core,o=t.track,r=E({event:{schema:"iglu:com.snowplowanalytics.snowplow/ad_click/jsonschema/1-0-0",data:I({targetUrl:e.targetUrl,clickId:e.clickId,costModel:e.costModel,cost:e.cost,bannerId:e.bannerId,zoneId:e.zoneId,impressionId:e.impressionId,advertiserId:e.advertiserId,campaignId:e.campaignId})}});o.call(t,r,e.context,e.timestamp)}catch(e){console.warn("Conviva App Tracker caused Exception in trackAdClick callback of adTracking plugin",e)}}))},trackAdConversion:function(e,n){void 0===n&&(n=Object.keys(Xn)),ne(n,Xn,(function(n){try{var t=n.core,o=t.track,r=E({event:{schema:"iglu:com.snowplowanalytics.snowplow/ad_conversion/jsonschema/1-0-0",data:I({conversionId:e.conversionId,costModel:e.costModel,cost:e.cost,category:e.category,action:e.action,property:e.property,initialValue:e.initialValue,advertiserId:e.advertiserId,campaignId:e.campaignId})}});o.call(t,r,e.context,e.timestamp)}catch(e){console.warn("Conviva App Tracker caused Exception in trackAdConversion callback of adTracking plugin",e)}}))},trackAdImpression:function(e,n){void 0===n&&(n=Object.keys(Xn)),ne(n,Xn,(function(n){try{var t=n.core,o=t.track,r=E({event:{schema:"iglu:com.snowplowanalytics.snowplow/ad_impression/jsonschema/1-0-0",data:I({impressionId:e.impressionId,costModel:e.costModel,cost:e.cost,targetUrl:e.targetUrl,bannerId:e.bannerId,zoneId:e.zoneId,advertiserId:e.advertiserId,campaignId:e.campaignId})}});o.call(t,r,e.context,e.timestamp)}catch(e){console.warn("Conviva App Tracker caused Exception in trackAdImpression callback of adTracking plugin",e)}}))}}),Zn={},Wn=Object.freeze({__proto__:null,SiteTrackingPlugin:je,trackSiteSearch:function(e,n){void 0===n&&(n=Object.keys(Zn)),ne(n,Zn,(function(n){var t=(n=n.core).track,o=E({event:{schema:"iglu:com.snowplowanalytics.snowplow/site_search/jsonschema/1-0-0",data:I({terms:e.terms,filters:e.filters,totalResults:e.totalResults,pageResults:e.pageResults})}});t.call(n,o,e.context,e.timestamp)}))},trackSocialInteraction:function(e,n){void 0===n&&(n=Object.keys(Zn)),ne(n,Zn,(function(n){var t=(n=n.core).track,o={schema:"iglu:com.snowplowanalytics.snowplow/social_interaction/jsonschema/1-0-0",data:I({action:e.action,network:e.network,target:e.target})};o=E({event:o}),t.call(n,o,e.context,e.timestamp)}))},trackTiming:function(e,n){void 0===n&&(n=Object.keys(Zn));var t=e.category,o=e.variable,r=e.timing,i=e.label,a=e.context,c=e.timestamp;ne(n,Zn,(function(e){e.core.track(E({event:{schema:"iglu:com.snowplowanalytics.snowplow/timing/jsonschema/1-0-0",data:{category:t,variable:o,timing:r,label:i}}}),a,c)}))}}),$n=window.GlobalSnowplowNamespace.shift(),et=window[$n];et.q=function(n,t){function o(e){var n=e.split(":");return[e=n[0],n=1<n.length?n[1].split(";"):void 0]}function r(e,n){if(k[e])try{k[e].apply(null,n)}catch(n){en.error(e+" failed",n)}else en.warn(e+" is not an available function")}function i(e){k=Ne(Ne({},k),e)}function a(e){if("string"!=typeof e[0]||"string"!=typeof e[1]||void 0!==e[2]&&"object"!=typeof e[2])en.error("newTracker failed",Error("Invalid parameters"));else{var t="".concat(n,"_").concat(e[0]),o=e[2],r=Re(o);(t=te(t,e[0],"js-".concat(h),e[1],v,Ne(Ne({},o),{plugins:r.map((function(e){return e[0]}))})))?(g.push(t.id),r.forEach((function(e){i(e[1])}))):en.warn(e[0]+" already exists")}}function c(e){try{if("object"==typeof e[0]&&null!==e[0]){var n=e[0],t=Re(n),o=te("CAT","CAT","js-".concat(h),"",v,Ne(Ne({},n),{plugins:t.map((function(e){return e[0]}))}));o?(g.push(o.id),document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",(function(e){e&&o.trackVideoEvent(e)})),PerformanceObserver&&new PerformanceObserver((function(e){e.getEntries().forEach((function(e){o.trackAjaxEvent(e)}))})).observe({type:"resource",buffered:!0}),t.forEach((function(e){i(e[1])}))):en.warn("CAT already exists")}else en.error("convivaAppTracker failed",Error("Invalid parameters"))}catch(e){console.warn("convivaAppTracker failed "+e)}}function l(n,t){function o(e){Object.prototype.hasOwnProperty.call(p,e)&&(s.clearTimeout(p[e].timeout),delete p[e],0===Object.keys(p).length&&m.forEach((function(e){var n=e[1];void 0!==k[e[0]]&&k[e[0]].length>n.length&&Array.isArray(n[0])&&(n=[{},n[0]]),r(e[0],n)})))}var a;if("string"==typeof n[0]&&d(n[1])&&(void 0===n[2]||Array.isArray(n[2]))){var c=n[0],l=n[1],u=n[2];(null===(a=n[3])||void 0===a||a)&&(a=s.setTimeout((function(){o(c)}),5e3),p[c]={timeout:a}),(a=f.createElement("script")).setAttribute("src",c),a.setAttribute("async","1"),q(a,"error",(function(){o(c),en.warn("Failed to load plugin ".concat(l[0]," from ").concat(c))}),!0),q(a,"load",(function(){var n=l[1],r=s[l[0]];if(r&&"object"==typeof r){var a=r[n];n=e(r,["symbol"==typeof n?n:n+""]),k.addPlugin.apply(null,[{plugin:a.apply(null,u)},t]),i(n)}o(c)}),!0),f.head.appendChild(a)}else{if("object"==typeof n[0]&&"string"==typeof n[1]&&(void 0===n[2]||Array.isArray(n[2]))){var v=n[0],g=n[1];if(a=n[2],v)return n=v[g],v=e(v,["symbol"==typeof g?g:g+""]),k.addPlugin.apply(null,[{plugin:n.apply(null,a)},t]),void i(v)}en.warn("Failed to add Plugin: ".concat(n[1]))}}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(t=0;t<e.length;t+=1){var i=e[t],u=Array.prototype.shift.call(i);if(P(u))try{for(var s={},d=0,f=oe(g,fn);d<f.length;d++){var v=f[d];s[v.id.replace("".concat(n,"_"),"")]=v}u.apply(s,i)}catch(e){en.error("Tracker callback failed",e)}finally{continue}u=(s=o(u))[0],s=s[1],"newTracker"===u?a(i):"convivaAppTracker"===u?c(i):(s=s?s.map((function(e){return"".concat(n,"_").concat(e)})):g,"addPlugin"===u?l(i,s):(d=void 0,d=0<i.length?[i[0],s]:void 0!==k[u]&&2===k[u].length?[{},s]:[s],0<Object.keys(p).length?m.push([u,d]):r(u,d)))}}for(var s=window,f=document,v=re(),g=[],p={},m=[],h="0.5.3",k=e(pn,["version"]),y=0;y<t.length;y++)u(t[y]);return{push:u}}($n,et.q)}();
//# sourceMappingURL=sp.js.map
